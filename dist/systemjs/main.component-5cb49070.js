System.register(["./main.js"],(function(e,t){"use strict";var n,r,o,u,i,a,c,l;return{setters:[function(e){n=e.r,r=e._,o=e.a,u=e.b,i=e.c,a=e.d,c=e.e,l=e.s}],execute:function(){var s,f,d,v=e("d",System.resolve("./assets/card_default.png",t.meta.url)),m=window.requestIdleCallback?function(e){var t=window.requestIdleCallback(e,{timeout:400});return function(){window.cancelIdleCallback(t)}}:function(e){var t=window.requestAnimationFrame(e);return function(){window.cancelAnimationFrame(t)}},h=e("_",(function(e,t){if(null===e)return{};var n,r,o=function(e,t){if(null===e)return{};var n,r,o={},u=Object.keys(e);for(r=0;r<u.length;r++)n=u[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(r=0;r<u.length;r++)n=u[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o})),g=e("e",(function(e,t,n,r){return e.addEventListener(t,n,r),function(){e.removeEventListener(t,n,r)}})),p=function(e){return e.window===e},w=function(e){return 9===e.nodeType},y=(e("i",(function(e){if(1!==e.nodeType)return!1;var t=e.nodeName.toLowerCase();return"input"===t?"hidden"!==e.type&&y(e):["button","select","datalist","iframe","textarea"].indexOf(t)>-1||e.hasAttribute("tabindex")||e.hasAttribute("tabIndex")||e.hasAttribute("draggable")?y(e):["a","area"].indexOf(t)>-1?!1!==e.hasAttribute("href")&&y(e):["audio","video"].indexOf(t)>-1&&(!1!==e.hasAttribute("controls")&&y(e))})),function(e){if(b(e))return!0;if("hidden"===E(e,"visibility"))return!1;for(var t=e;t&&!b(t);){if("none"===E(t,"display"))return!1;t=t.parentNode}return!0}),b=e("a",(function(e){return e===e.ownerDocument.documentElement})),E=e("g",(function(e,t){return function(e){return k(e).getComputedStyle(e)}(e).getPropertyValue(t)})),k=function(e){return p(e)?e:w(e)?e.defaultView:A(e).defaultView},A=function(e){return p(e)?e.document:w(e)?e:e.ownerDocument},P=(e("c",(function(e){var t=k(e),n=A(e);return{x:t.pageXOffset||n.documentElement.scrollLeft,y:t.pageYOffset||n.documentElement.scrollTop}})),n.createContext()),O=function(e,t){return t(e)},C={},S=function(e){var t=e.children;return n.createElement(P.Provider,{value:n.useReducer(O,C)},t)},j=function(e){var t=n.useContext(P);if(!t)return[function(){},function(){}];var u=t[1],i=function(){u((function(t){if(!t.hasOwnProperty(e))return t;if("loading"!==t[e].status)return t;var n={};return Object.keys(t).forEach((function(r){r!==e&&(n[r]=t[r])})),n}))};return n.useEffect((function(){return u((function(t){return e in t?t:r(r({},t),{},o({},e,{status:"loading"}))})),function(){i()}}),[]),[function(){u((function(t){return e in t&&"loaded"===t[e].status?t:r(r({},t),{},o({},e,{status:"loaded"}))}))},i]},x=function(){var e=n.useContext(P);return e?e[0]:null},R=function(e,t){var n=g(e,"load",(function(){r(),t()})),r=g(e,"error",(function(){n(),t()}));return function(){n(),r()}},I=e("S",(function(e){var t=e.href,r=j(t),o=u(r,1)[0];return n.useEffect((function(){return _(t,{onload:o})}),[t]),null})),_=(s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.onload,r=void 0===n?function(){}:n,o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var u=R(o,r);return o.href=e,document.head.appendChild(o),function(){u(),document.head.removeChild(o)}},f=new Map,d=function(e){if(f.has(e)){var t=f.get(e),n=t.useCount,o=h(t,["useCount"]);n>1?f.set(e,r({useCount:n-1},o)):(f.delete(e),o.linkCleanup())}},function(e){if(f.has(e)){var t=f.get(e),n=t.useCount,o=h(t,["useCount"]);return f.set(e,r({useCount:n+1},o)),d}for(var u=arguments.length,i=new Array(u>1?u-1:0),a=1;a<u;a++)i[a-1]=arguments[a];var c=s.apply(void 0,[e].concat(i));return f.set(e,{useCount:1,linkCleanup:c}),d});function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};var F=function(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t};function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N(e);if(t){var o=N(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return F(this,n)}}var T=function(){var e=n.useState(!1),t=u(e,2),r=t[0],o=t[1];return n.useEffect((function(){return m((function(){o(!0)}))}),[]),r},B=e("l",(function(e,t,n){return e.addEventListener(t,n),function(){e.removeEventListener(t,n)}}));function V(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var D=window.navigator.serviceWorker;function U(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function Y(e,t,n){if(n)return t?t(e()):e();try{var r=Promise.resolve(e());return t?r.then(t):r}catch(e){return Promise.reject(e)}}function q(e,t){var n=e();return n&&n.then?n.then(t):t(n)}var H,z=Boolean(D),K=null,Q=null,G=(H=[],{listen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.once,r=void 0!==n&&n;if(r){var o=e;e=function(){i(),o.apply(void 0,arguments)}}H=[].concat(a(H),[e]);var u=!1,i=function(){if(!u){u=!0;for(var t=[],n=H.length,r=!0;n--;){var o=H[n];r&&o===e?r=!1:t.push(o)}H=t}};return i},emit:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];H.forEach((function(e){e.apply(void 0,t)}))}}),X=function(e){Q&&Q===e?console.log("we already know this worker is updating"):(e?console.log("found a worker updating (worker state is: ".concat(e.state,")")):console.log("worker update is done"),Q=e,G.emit())},J=(e("s",(function(){return Boolean(K)})),e("f",(function(){return Q?{shouldBecomeNavigatorController:Boolean(D.controller),navigatorWillReload:$}:null})),e("h",(function(e){return G.listen(e)})),e("j",U((function(){return K?V(K,(function(e){return V(e.update(),(function(e){var t=e.installing;if(t)return console.log("installing worker found after calling update()"),X(t),!0;var n=e.waiting;return n?(console.log("waiting worker found after calling update()"),X(n),!0):(console.log("no worker found after calling update()"),!1)}))})):(console.warn("registerServiceWorker must be called before checkServiceWorkerUpdate can be used"),!1)}))),function(e){if(Q)return function(e,t){var n=new MessageChannel,r=n.port1,o=n.port2;return new Promise((function(n,u){r.onmessage=function(e){"rejected"===e.data.status?u(e.data.value):n(e.data.value)},e.postMessage(t,[o])}))}(Q,e);console.warn("no service worker updating to send message to")}),Z=(e("k",U((function(e){if(!Q)throw new Error("no service worker update to activate");return Z(Q,e)}))),U((function(e){var t=!1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.onActivating,o=void 0===r?function(){}:r,u=n.onActivated,i=void 0===u?function(){}:u,a=n.onBecomesNavigatorController,c=void 0===a?function(){}:a,l=e.state,s=function(){return new Promise((function(t){var n=B(e,"statechange",(function(){"activating"===e.state&&o(),"activated"===e.state&&(i(),n(),t())}))}))};return q((function(){if("installed"===l||"activating"===l)return"installed"===l&&J({action:"skipWaiting"}),Y(s,(function(){if(D.controller)var e=B(D,"controllerchange",(function(){e(),c(),X(null),te()}));else X(null),te();t=!0}))}),(function(e){if(t)return e;c(),X(null),te()}))}))),$=!0,ee=!1,te=function(){ee||(ee=!0,window.location.reload())};if(z)B(D,"controllerchange",te);var ne=System.resolve("./assets/wood.jpg",t.meta.url),re=System.resolve("./assets/pirate-hook.png",t.meta.url),oe=System.resolve("./assets/pirate-hook-02.png",t.meta.url),ue=System.resolve("./assets/wood-box.jpg",t.meta.url),ie=System.resolve("./assets/treasure-map.png",t.meta.url),ae=e("w",System.resolve("./assets/witch-label.png",t.meta.url)),ce=System.resolve("./assets/skull-bottle.png",t.meta.url),le=function(e,t){var n=new Image;return t&&(n.crossOrigin=t),new Promise((function(t,r){var o=function(e){se(n),r(e)};n.onload=function(e){se(n),t(e.target||e.srcElement)},n.onerror=o,n.onabort=o,n.src=e}))},se=function(e){e.onload=null,e.onerror=null,e.onabort=null;try{delete e.src}catch(e){}};function fe(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function de(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function ve(){}function me(e,t){if(!t)return e&&e.then?e.then(ve):Promise.resolve()}function he(e){var t=e();if(t&&t.then)return t.then(ve)}function ge(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function pe(e){if(e&&e.then)return e.then(ve)}var we=de((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.chunkSize,r=void 0===n?7:n,o=t.msDelayBetweenChunks,u=void 0===o?2e3:o,i=0,a={},c={},l=de((function(e){return fe(Promise.all(e.map(de((function(e){return pe(ge((function(){return fe(le(e),(function(t){a[e]=t}))}),(function(){c[e]=!0})))})))),(function(){return fe(new Promise((function(e){setTimeout(e,u)})),(function(){var e=s();return he((function(){if(e.length>0)return me(l(e))}))}))}))})),s=function(){for(var t=[],n=0;n<r&&i<e.length;)t.push(e[i]),n++,i++;return t};return fe(l(s()),(function(){return{loaded:a,failed:c}}))})),ye=function(){var e=T();return n.useEffect((function(){e&&function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).scope;if(!z)return function(){};var n=!1,r=function(){},o=function(){};V(K=D.register(e,{scope:t}),(function(e){if(r=function(){e.unregister()},n)r();else{var t=e.installing;e.waiting,e.active,o=B(e,"updatefound",(function(){console.log("browser notifies use an worker is installing"),e.installing!==t?X(e.installing):console.log("it's not an worker update, it's first time worker registers")}))}}))}("/service-worker.js")}),[e]),e?n.createElement(be,null):null},be=function(){var e=[ne,re,oe,ue,ie,ae,ce,v].concat(a(Object.keys(c).map((function(e){return c[e]}))));return n.useEffect((function(){var t=setTimeout((function(){return we(e)}),2e3);return function(){clearTimeout(t)}}),[]),null};var Ee=e("b",Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});var ke=new Map;var Ae="loading",Pe="loaded",Oe="failed",Ce=function(e){var t=ke.get(e),r=t?Pe:Ae,o=n.useState(r),i=u(o,2),a=i[0],c=i[1],l=n.useRef(!1);return n.useEffect((function(){return e&&a!==Pe?(l.current=!0,(t=function(){return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return t=le(e),n=function(t){l.current&&(ke.set(e,t),c(Pe))},r?n?n(t):t:(t&&t.then||(t=Promise.resolve(t)),n?t.then(n):t);var t,n,r}),(function(){l.current&&(ke.delete(e),c(Oe))}))},function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(e){return Promise.reject(e)}})(),function(){l.current=!1}):function(){};var t}),[e,a]),[a,t]},Se=function(e){var t=e.fallback,r=e.root,o=e.rootMargin,i=e.threshold,a=void 0===i?0:i,c=e.children,l=n.useState(!1),s=u(l,2),f=s[0],d=s[1],v=n.useState(null),m=u(v,2),h=m[0],g=m[1];return n.useEffect((function(){if(!h)return function(){};if(f)return function(){};var e=new window.IntersectionObserver((function(t){u(t,1)[0].isIntersecting?(e.unobserve(h),d(!0)):d(!1)}),{root:r,rootMargin:o,threshold:a});return e.observe(h),function(){e.disconnect()}}),[h,f]),f?n.createElement(n.Fragment,null,c):t({ref:g})},je=e("I",(function(e){var t=e.loadWhenIntersecting,r=void 0===t||t,o=e.usePlaceholderWhileLoading,i=void 0===o||o,a=e.animateLoaded,c=void 0===a||a,l=e.intersectionRoot,s=e.intersectionRootMargin,f=e.intersectionThreshold,d=e.FallbackWhileNotIntersecting,v=void 0===d?_e:d,m=e.FallbackWhileLoading,g=void 0===m?Ie:m,p=e.useImageStatusHook,w=void 0===p?Ce:p,y=e.src,b=h(e,["loadWhenIntersecting","usePlaceholderWhileLoading","animateLoaded","intersectionRoot","intersectionRootMargin","intersectionThreshold","FallbackWhileNotIntersecting","FallbackWhileLoading","useImageStatusHook","src"]),E=w(y),k=u(E,1)[0],A=j(y),P=u(A,1)[0];n.useEffect((function(){"loaded"===k&&P()}),[k]);var O=n.createElement("img",Ee({src:y},b));if(c&&(O=n.createElement(xe,{status:k,src:y,imageProps:b})),i&&"loaded"!==k){var C=O;O=n.createElement(Re,{status:k,fallback:n.createElement(g,b)},C)}if(r&&"loaded"!==k){var S=O;O=n.createElement(Se,{fallback:function(e){var t=e.ref;return n.createElement(v,Ee({ref:t},b))},root:l,rootMargin:s,threshold:f},S)}return O})),xe=function(e){var t=e.status,r=e.src,o=e.imageProps,u=n.useRef(!1),i=n.useRef(),a=n.useRef(t);return n.useLayoutEffect((function(){var e=u.current,n=i.current,r=a.current;if(u.current=!0,a.current=t,e&&r!==t&&"loaded"===t){var o=window.getComputedStyle(n).getPropertyValue("opacity");n.animate([{opacity:0},{opacity:o}],{duration:300})}}),[t,i]),n.createElement("img",Ee({ref:i,src:r},o))},Re=function(e){var t=e.fallback,n=e.status,r=e.children;return"loaded"!==n?t:r},Ie=n.forwardRef((function(e,t){return n.createElement("img",Ee({src:Le,ref:t},e))})),_e=n.forwardRef((function(e,t){return n.createElement("img",Ee({src:Le,ref:t},e))})),Le="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",We=System.resolve("./assets/loadscreen.css",t.meta.url);var Ne=function(e){var r,o=n.useRef(),i=T(),a=n.useState(!1),c=u(a,2),s=c[0],f=c[1],d=n.useState(!1),v=u(d,2),h=v[0],g=v[1],p=n.useState(null),w=u(p,2),y=w[0],b=w[1],E=n.useState(!1),k=u(E,2),A=k[0],P=k[1],O=n.useState(!1),C=u(O,2),S=C[0],j=C[1],R=n.useState(),_=u(R,2)[1],L=(r=x(),Object.keys(r).length),W=function(){var e=x();return Object.keys(e).filter((function(t){return"loaded"===e[t].status})).length}();return n.useEffect((function(){i&&W===L&&f(!0)}),[i,W,L]),n.useEffect((function(){var e;s&&(window.splashscreen.remove(),g(!0),(e=function(){return function(e){if(e&&e.then)return e.then(Fe)}(function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return e=t.import("./App.js"),n=function(e){g(!1),b(e),m((function(){P(!0)}))},r?n?n(e):e:(e&&e.then||(e=Promise.resolve(e)),n?e.then(n):e);var e,n,r}),(function(e){_((function(){throw e}))})))},function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}})())}),[s]),n.useEffect((function(){A&&W===L&&j(!0)}),[A,W,L]),n.useEffect((function(){S&&o&&(o.current.animate([{opacity:1},{opacity:0}],{duration:300,fill:"forwards"}).onfinish=function(){o.current.style.display="none"})}),[o,S]),n.createElement(n.Fragment,null,y?n.createElement(y.App,e):null,n.createElement("div",{id:"loadscreen",ref:o},n.createElement(I,{href:We}),n.createElement(je,{src:l,animateLoaded:!1}),h?n.createElement("p",{className:"text"},"Chargement du jeu..."):n.createElement(n.Fragment,null,n.createElement("p",{className:"text"},"Chargement du jeu..."),n.createElement("div",{className:"progress"},W,"/",L))),S?n.createElement(ye,null):null)};function Fe(){}var Me,Te,Be=(Me=function(e){return n.createElement(S,null,n.createElement(Ne,e))},Te=function(e){var t=e.error;return window.splashscreen.remove(),n.createElement("div",{style:{maxWidth:"100vw"}},n.createElement("div",{style:{margin:"10px 15px"}},"An error occured"),n.createElement("pre",{style:{overflow:"auto",margin:"10px 15px"}},"object"===i(t)?t.stack:t))},function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(i,e);var t,r,o,u=M(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=u.call(this,e)).state={hasError:!1,error:null},t}return t=i,o=[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}],(r=[{key:"render",value:function(){return this.state.hasError?n.createElement(Te,{error:this.state.error}):n.createElement(Me,this.props)}}])&&L(t.prototype,r),o&&L(t,o),i}(n.Component));e("m",Object.freeze({__proto__:null,Main:Be}))}}}));

//# sourceMappingURL=main.component-5cb49070.js.map