{
  "version": 3,
  "file": "root.js",
  "sources": [
    "../../src/app/loading/useImage.js",
    "../../src/app/hooks.js",
    "../../src/app/generic/Image.jsx",
    "../../src/app/generic/useIntersecting.js",
    "../../src/app/home/Home.jsx",
    "../../src/app/chest/chest.util.js",
    "../../src/app/round/computeRoundScore.js",
    "../../src/app/round/round.selectors.js",
    "../../src/app/round/round.actions.js",
    "../../src/app/dices/dices.actions.js",
    "../../src/app/round/round.effects.js",
    "../../src/app/cards/cards.actions.js",
    "../../src/app/cards/cards.effects.js",
    "../../src/app/helper/signal.js",
    "../../src/app/dice-ongoing/DiceOnGoing.jsx",
    "../../src/app/animation/startJavaScriptAnimation.js",
    "../../src/app/animation/useAnimateTransition.js",
    "../../src/app/animation/ValueWithAnimatedTransition.jsx",
    "../../src/app/generic/Stylesheet.jsx",
    "../../src/app/dom/dom.traversal.js",
    "../../src/app/dialog/focus-trap.js",
    "../../src/app/dialog/scroll-trap.js",
    "../../src/app/dialog/DialogBase.jsx",
    "../../src/app/dialog/dialog.component.jsx",
    "../../src/app/game-design/StarRain.jsx",
    "../../src/app/dialog/CloseIcon.jsx",
    "../../src/app/dialog/dialog.wood.jsx",
    "../../src/app/round/RoundScoreRulesDialog.jsx",
    "../../src/app/score/useScoreParticles.js",
    "../../src/app/helper/geometry.js",
    "../../src/app/helper/rectangle.js",
    "../../src/app/dom/dom.position.js",
    "../../src/app/round/RoundScoreParticle.jsx",
    "../../src/app/round/useRoundScoreParticleEffects.js",
    "../../src/app/round/RoundScore.jsx",
    "../../src/app/dices/dicePosition.js",
    "../../src/app/chest/chest.component.jsx",
    "../../src/app/cards/cards-rules.js",
    "../../src/app/header/CardRulesDialog.jsx",
    "../../src/app/cards/SmallCard.jsx",
    "../../src/app/header/SwordChallengeIndicator.jsx",
    "../../src/app/header/Header.jsx",
    "../../src/app/dices/rollDices.js",
    "../../src/app/footer/ButtonRoll.jsx",
    "../../src/app/footer/Footer.jsx",
    "../../src/app/skull-island/SkullIsland.jsx",
    "../../src/app/generic/Portal.jsx",
    "../../src/app/helper/render.js",
    "../../src/app/helper/throttle.js",
    "../../src/app/drag/drag.js",
    "../../src/app/dices/Dice.jsx",
    "../../src/app/dices/DiceContainer.jsx",
    "../../src/app/footer/DrawCardDialog.jsx",
    "../../src/app/round/Round.jsx",
    "../../src/app/score-board/StartPlayerRoundDialog.jsx",
    "../../src/app/score-board/ScoreBoard.jsx",
    "../../src/app/game/GameConfiguration.jsx",
    "../../src/app/players/players.main.js",
    "../../src/app/game/CharacterSelection.jsx",
    "../../src/app/game/Game.jsx",
    "../../src/app/main.actions.js",
    "../../src/app/settings/add-to-home-screen.hooks.js",
    "../../src/app/settings/service-worker.hooks.js",
    "../../src/app/settings/UpdateApplication.jsx",
    "../../src/app/settings/settings.component.jsx",
    "../../src/app/root.jsx"
  ],
  "sourcesContent": [
    "import React from \"react\"\n\nimport { loadImage } from \"./loadImage.js\"\n\nconst cache = new Map()\n\nexport const Status = {\n  LOADING: \"loading\",\n  LOADED: \"loaded\",\n  FAILED: \"failed\",\n}\n\nexport const useImage = (src, { lazy = false } = {}) => {\n  const cacheEntry = cache.get(src)\n  const statusInitial = cacheEntry ? Status.LOADED : Status.LOADING\n  const [status, setStatus] = React.useState(statusInitial)\n\n  const mounted = React.useRef(false)\n  React.useEffect(() => {\n    mounted.current = true\n    return () => {\n      mounted.current = false\n    }\n  }, [])\n\n  const startLoading = React.useCallback(async () => {\n    if (status === Status.LOADED) {\n      return\n    }\n\n    try {\n      const image = await loadImage(src)\n\n      if (!mounted.current) {\n        // don't call setState on unmounted component\n        console.log(\"image unmounted\")\n        return\n      }\n      cache.set(src, image)\n      setStatus(Status.LOADED)\n    } catch (error) {\n      if (!mounted.current) {\n        // don't call setState on unmounted component\n        return\n      }\n      cache.delete(src)\n      setStatus(Status.FAILED)\n    }\n  }, [setStatus, src])\n\n  React.useEffect(() => {\n    if (!lazy) {\n      startLoading()\n    }\n  }, [lazy])\n\n  return [status, startLoading]\n}\n",
    "import React from \"react\"\n\nexport const useMountEffect = (effect) => {\n  React.useEffect(effect, [])\n}\n\nexport const useUpdateEffect = (effect, dependencies = [], { layout = false } = {}) => {\n  const isInitialMount = React.useRef(true)\n  ;(layout ? React.useLayoutEffect : React.useEffect)(() => {\n    if (isInitialMount.current) {\n      isInitialMount.current = false\n      return undefined\n    }\n\n    return effect()\n  }, dependencies)\n}\n\n// https://stackoverflow.com/a/61680184/2634179\nexport const useBecomes = (becomesPredicate, deps) => {\n  const transition = useTransition(becomesPredicate, deps)\n  return Boolean(transition)\n}\n\nexport const useTransition = (transitionPredicate, deps) => {\n  const mountedRef = React.useRef(false)\n  React.useEffect(() => {\n    if (mountedRef.current === false) {\n      mountedRef.current = true\n    }\n  })\n\n  const depsRef = React.useRef(deps)\n  React.useEffect(() => {\n    depsRef.current = deps\n  }, deps)\n\n  if (!mountedRef.current) {\n    return null\n  }\n  if (!transitionPredicate(...depsRef.current)) {\n    return null\n  }\n  return {\n    from: depsRef.current,\n    to: deps,\n  }\n}\n\nexport const usePrevious = (value) => {\n  const ref = React.useRef(value)\n  React.useEffect(() => {\n    ref.current = value\n  }, [value])\n  return ref.current\n}\n",
    "import React from \"react\"\n\nimport { useUrlLoadingNotifier } from \"root/src/app/loading/loading.main.jsx\"\nimport { useImage } from \"root/src/app/loading/useImage.js\"\n\nimport { usePrevious } from \"../hooks.js\"\nimport { useIntersecting } from \"./useIntersecting.js\"\n\nexport const Image = ({\n  loadWhenIntersecting = true,\n  usePlaceholderWhileLoading = true,\n  animateLoaded = true,\n\n  intersectionRoot,\n  intersectionRootMargin,\n  intersectionThreshold,\n  FallbackWhileNotIntersecting = ImageNotIntersectingFallback,\n  FallbackWhileLoading = ImageLoadingFallback,\n  useImageStatusHook = useImage,\n\n  src,\n  ...props\n}) => {\n  const [status, startLoadingImage] = useImageStatusHook(src, {\n    lazy: loadWhenIntersecting,\n  })\n  const statusPrevious = usePrevious(status)\n\n  const [imageFetchStart, imageFetchEnd] = useUrlLoadingNotifier(src)\n  React.useEffect(() => {\n    if (statusPrevious !== \"loading\" && status === \"loading\") {\n      imageFetchStart()\n    }\n    if (statusPrevious !== \"loaded\" && status === \"loaded\") {\n      imageFetchEnd()\n    }\n  }, [statusPrevious, status])\n\n  const [domNodeRefForIntersection, intersecting] = useIntersecting({\n    root: intersectionRoot,\n    rootMargin: intersectionRootMargin,\n    threshold: intersectionThreshold,\n  })\n\n  const intersectingPrevious = usePrevious(intersecting)\n  React.useEffect(() => {\n    // console.log({ src, loadWhenIntersecting, intersectingPrevious, intersecting })\n    if (loadWhenIntersecting && !intersectingPrevious && intersecting) {\n      // console.log(\"start loading\", String(src))\n      startLoadingImage()\n    }\n  }, [loadWhenIntersecting, intersectingPrevious, intersecting])\n\n  const [domNodeRefForAnimation, startAnimation] = useImageLoadAnimation()\n  React.useLayoutEffect(() => {\n    if (animateLoaded && statusPrevious !== \"loaded\" && status === \"loaded\") {\n      startAnimation()\n    }\n  }, [animateLoaded, statusPrevious, status])\n\n  if (loadWhenIntersecting && status !== \"loaded\" && !intersecting) {\n    return <FallbackWhileNotIntersecting ref={domNodeRefForIntersection} />\n  }\n\n  if (usePlaceholderWhileLoading && status !== \"loaded\") {\n    return <FallbackWhileLoading />\n  }\n\n  return <img src={src} ref={domNodeRefForAnimation} {...props} />\n}\n\nconst useImageLoadAnimation = () => {\n  const domNodeRef = React.useRef()\n\n  const startAnimation = React.useCallback(() => {\n    const domNode = domNodeRef.current\n    const opacity = window.getComputedStyle(domNode).getPropertyValue(\"opacity\")\n    domNode.animate([{ opacity: 0 }, { opacity }], {\n      duration: 300,\n    })\n  })\n\n  return [domNodeRef, startAnimation]\n}\n\n// eslint-disable-next-line react/display-name\nconst ImageLoadingFallback = React.forwardRef((props, ref) => {\n  return <img src={TRANSPARENT_PNG_DATA_URL} ref={ref} {...props} />\n})\n\n// eslint-disable-next-line react/display-name\nconst ImageNotIntersectingFallback = React.forwardRef((props, ref) => {\n  return <img src={TRANSPARENT_PNG_DATA_URL} ref={ref} {...props} />\n})\n\nconst TRANSPARENT_PNG_DATA_URL =\n  \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=\"\n",
    "import React from \"react\"\n\nexport const useIntersecting = ({ root, rootMargin, threshold = 0 }) => {\n  const [isIntersecting, isIntersectingSetter] = React.useState(false)\n  const domNodeRef = React.useRef()\n\n  React.useEffect(() => {\n    const domNode = domNodeRef.current\n    if (!domNode) {\n      return null\n    }\n    if (isIntersecting) {\n      return null\n    }\n\n    // https://developer.mozilla.org/fr/docs/Web/API/Intersection_Observer_API\n    const observer = new window.IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          observer.unobserve(domNode)\n          isIntersectingSetter(true)\n        } else {\n          isIntersectingSetter(false)\n        }\n      },\n      {\n        root,\n        rootMargin,\n        threshold,\n      },\n    )\n    observer.observe(domNode)\n\n    return () => {\n      observer.disconnect()\n    }\n  }, [isIntersecting])\n\n  return [domNodeRef, isIntersecting]\n}\n",
    "import React from \"react\"\n\nimport { Image } from \"root/src/app/generic/Image.jsx\"\nimport { createAction } from \"root/src/app/main.store.js\"\nimport { symbolSwordUrl } from \"root/src/app/symbols/symbols.js\"\n\nexport const Home = () => {\n  return <ButtonNewGame />\n}\n\nconst ButtonNewGame = () => {\n  const createNewGame = useCreateNewGame()\n\n  return (\n    <div className=\"new-game\">\n      <Image src={symbolSwordUrl} />\n      <button onClick={createNewGame}>Nouvelle partie</button>\n    </div>\n  )\n}\n\nconst useCreateNewGame = createAction((state) => {\n  return {\n    ...state,\n    gameCreated: true,\n  }\n})\n",
    "import { diceToVisibleSymbol } from \"root/src/app/dices/dices.js\"\n\nexport const chestSlotContentToSymbol = (chestSlotContent, dices) => {\n  if (chestSlotContent && chestSlotContent.type === \"symbol\") {\n    return chestSlotContent.value\n  }\n\n  if (chestSlotContent && chestSlotContent.type === \"dice\") {\n    const diceId = chestSlotContent.value\n    const dice = dices[diceId]\n    return diceToVisibleSymbol(dice)\n  }\n\n  return null\n}\n",
    "import {\n  SYMBOL_DIAMOND,\n  SYMBOL_COIN,\n  SYMBOL_PARROT,\n  SYMBOL_MONKEY,\n  SYMBOL_SWORD,\n} from \"root/src/app/symbols/symbols.js\"\nimport {\n  isAnimalsCard,\n  isPirateCard,\n  isCoinCard,\n  isDiamondCard,\n  isSwordChallengeCard,\n} from \"root/src/app/cards/cards.js\"\n\nexport const computeRoundScore = ({\n  card,\n  symbolsInChest,\n  scoreMarked,\n  markScoreAllowed,\n}) => {\n  if (isSwordChallengeCard(card)) {\n    if (!scoreMarked && !markScoreAllowed) {\n      return -card.gambleAmount\n    }\n    return computeScoreForSwordChallenge(symbolsInChest, {\n      goal: card.numberOfSwords,\n      gamble: card.gambleAmount,\n    })\n  }\n\n  if (isAnimalsCard(card)) {\n    return computeScoreForSymbols(\n      symbolsInChest.map((symbol) =>\n        symbol === SYMBOL_PARROT ? SYMBOL_MONKEY : symbol,\n      ),\n    )\n  }\n\n  if (isPirateCard(card)) {\n    return computeScoreForSymbols(symbolsInChest) * 2\n  }\n\n  if (isCoinCard(card)) {\n    return computeScoreForSymbols(symbolsInChest, 9)\n  }\n\n  if (isDiamondCard(card)) {\n    return computeScoreForSymbols(symbolsInChest, 9)\n  }\n\n  return computeScoreForSymbols(symbolsInChest)\n}\n\nconst computeScoreForSwordChallenge = (symbols, { goal, gamble }) => {\n  const swordChallengeAchieved = countSymbol(symbols, SYMBOL_SWORD) >= goal\n  if (swordChallengeAchieved) {\n    return computeScoreForSymbols(symbols) + gamble\n  }\n  return -gamble\n}\n\nexport const countSymbol = (symbolArray, symbol) => {\n  return symbolArray.filter((symbolCandidate) => symbolCandidate === symbol)\n    .length\n}\n\nconst computeScoreForSymbols = (symbols, perfectCount) => {\n  const { score, perfectBonus } = getScoreAndPerfectBonus(symbols, perfectCount)\n  return score + perfectBonus\n}\n\nexport const getScoreAndPerfectBonus = (symbols, perfectCount = 8) => {\n  let score = 0\n  let usefullSymbol = 0\n\n  // add points for dice combinaisons\n  const symbolCountMap = countSymbolsOccurences(symbols)\n  Object.values(symbolCountMap).forEach((symbolCount) => {\n    if (symbolCount === 3) score += 100\n    if (symbolCount === 4) score += 200\n    if (symbolCount === 5) score += 500\n    if (symbolCount === 6) score += 1000\n    if (symbolCount === 7) score += 2000\n    if (symbolCount === 8) score += 4000\n    if (symbolCount > 2) usefullSymbol += symbolCount\n  })\n\n  // add 1 point for each coin and diamond\n  symbols.forEach((symbol) => {\n    if (symbol === SYMBOL_DIAMOND) {\n      score += 100\n      if (symbolCountMap[SYMBOL_DIAMOND] < 3) usefullSymbol += 1\n    }\n    if (symbol === SYMBOL_COIN) {\n      score += 100\n      if (symbolCountMap[SYMBOL_COIN] < 3) usefullSymbol += 1\n    }\n  })\n\n  return {\n    score,\n    perfectBonus: usefullSymbol === perfectCount ? 500 : 0,\n  }\n}\n\nconst countSymbolsOccurences = (symbols) => {\n  const symbolCountMap = {}\n  symbols.forEach((symbol) => {\n    if (symbolCountMap.hasOwnProperty(symbol)) {\n      symbolCountMap[symbol]++\n    } else {\n      symbolCountMap[symbol] = 1\n    }\n  })\n  return symbolCountMap\n}\n",
    "import React from \"react\"\n\nimport {\n  useRollCount,\n  useWitchUncursedDiceId,\n  useCurrentCardId,\n  useScoreMarked,\n  useCardIds,\n  useDiceRolledIds,\n  useDiceCursedIds,\n  useChestSlots,\n  useCurrentPlayerId,\n  usePlayers,\n  useDices,\n} from \"root/src/app/main.store.js\"\nimport { diceIsOnSkull } from \"root/src/app/dices/dices.js\"\nimport {\n  cardIdToCard,\n  isChestCard,\n  isCoinCard,\n  isDiamondCard,\n  isOneSkullCard,\n  isTwoSkullsCard,\n  isSwordChallengeCard,\n} from \"root/src/app/cards/cards.js\"\nimport { chestSlotContentToSymbol } from \"root/src/app/chest/chest.util.js\"\n\nimport {\n  computeRoundScore,\n  countSymbol,\n} from \"root/src/app/round/computeRoundScore.js\"\nimport {\n  symbolIsSkull,\n  SYMBOL_COIN,\n  SYMBOL_DIAMOND,\n  SYMBOL_SKULL,\n  SYMBOL_SWORD,\n} from \"root/src/app/symbols/symbols.js\"\n\nconst { useMemo } = React\n\nexport const useCardDeck = ({ cardIds = useCardIds() } = {}) => {\n  return cardIds.map((cardId) => cardIdToCard(cardId))\n}\n\nexport const useCurrentPlayer = ({\n  currentPlayerId = useCurrentPlayerId(),\n  players = usePlayers(),\n} = {}) => {\n  return players.find(\n    (playerCandidate) => playerCandidate.id === currentPlayerId,\n  )\n}\n\nexport const usePlayer = (playerId, { players = usePlayers() } = {}) =>\n  players.find((playerCandidate) => playerCandidate.id === playerId)\n\nexport const useHasNeverRolled = ({ rollCount = useRollCount() } = {}) =>\n  rollCount === 0\n\nexport const useHasRolledOnce = ({ rollCount = useRollCount() } = {}) =>\n  rollCount > 0\n\nexport const useIsFirstRoll = ({ rollCount = useRollCount() } = {}) =>\n  rollCount === 1\n\nexport const useHasRolledMoreThanOnce = ({ rollCount = useRollCount() } = {}) =>\n  rollCount > 1\n\nexport const useSymbolsInChest = ({\n  dices = useDices(),\n  chestSlots = useChestSlots(),\n} = {}) => {\n  return Object.keys(chestSlots).reduce((previous, chestSlot) => {\n    const symbol = chestSlotContentToSymbol(chestSlots[chestSlot], dices)\n\n    if (symbol) {\n      return [...previous, symbol]\n    }\n\n    return previous\n  }, [])\n}\n\nexport const useRemainingSpotInCursedArea = ({\n  skullCountInCursedArea = useSkullCountInCursedArea(),\n} = {}) => {\n  return 3 - skullCountInCursedArea\n}\n\nexport const useHasDicesToCurse = ({\n  dicesToCurse = useDicesToCurse(),\n} = {}) => {\n  return dicesToCurse.length > 0\n}\n\nexport const useDiceKeptIds = ({ chestSlots = useChestSlots() } = {}) => {\n  return Object.keys(chestSlots).reduce((previous, chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n    if (chestSlotContent && chestSlotContent.type === \"dice\") {\n      return [...previous, chestSlotContent.value]\n    }\n    return previous\n  }, [])\n}\n\nexport const useDicesToCurse = ({\n  dices = useDices(),\n  diceRolledIds = useDiceRolledIds(),\n  witchUncursedDiceId = useWitchUncursedDiceId(),\n  remainingSpotInCursedArea = useRemainingSpotInCursedArea(),\n} = {}) => {\n  const dicesToCurse = diceRolledIds\n    .map((diceRolledId) => dices[diceRolledId])\n    .filter((diceRolled) => {\n      if (!diceIsOnSkull(diceRolled)) return false\n      if (diceRolled.id === witchUncursedDiceId) return false\n      return true\n    })\n    .slice(0, remainingSpotInCursedArea)\n  return dicesToCurse\n}\n\nexport const useRollDiceAllowed = ({\n  currentCardId = useCurrentCardId(),\n  hasNeverRolled = useHasNeverRolled(),\n  scoreMarked = useScoreMarked(),\n  threeSkullsOrMoreInCursedArea = useThreeSkullsOrMoreInCursedArea(),\n  hasDicesToCurse = useHasDicesToCurse(),\n} = {}) => {\n  if (!currentCardId) {\n    return false\n  }\n\n  if (scoreMarked) {\n    return false\n  }\n\n  if (hasNeverRolled) {\n    return true\n  }\n\n  if (threeSkullsOrMoreInCursedArea) {\n    if (isChestCard(cardIdToCard(currentCardId))) {\n      return true\n    }\n    return false\n  }\n\n  if (hasDicesToCurse) {\n    return false\n  }\n\n  return true\n}\n\nexport const useCursedCount = ({\n  dicesToCurse = useDicesToCurse(),\n  skullCountInCursedArea = useSkullCountInCursedArea(),\n} = {}) => {\n  const skullBeingCursedCount = dicesToCurse.length\n  const cursedCount = skullBeingCursedCount + skullCountInCursedArea\n  return cursedCount\n}\n\nexport const useThreeSkullsOrMore = ({\n  cursedCount = useCursedCount(),\n} = {}) => {\n  return cursedCount > 2\n}\n\nexport const useThreeSkullsOrMoreInCursedArea = ({\n  skullCountInCursedArea = useSkullCountInCursedArea(),\n} = {}) => {\n  return skullCountInCursedArea > 2\n}\n\nexport const useSkullCountInCursedArea = ({\n  diceCursedIds = useDiceCursedIds(),\n  symbolsFromCard = useSymbolsFromCard(),\n} = {}) => {\n  return (\n    diceCursedIds.length +\n    symbolsFromCard.filter((symbol) => symbolIsSkull(symbol)).length\n  )\n}\n\nconst useSymbolsFromCard = ({ currentCardId = useCurrentCardId() } = {}) => {\n  if (!currentCardId) return []\n  const currentCard = cardIdToCard(currentCardId)\n  if (isCoinCard(currentCard)) return [SYMBOL_COIN]\n  if (isDiamondCard(currentCard)) return [SYMBOL_DIAMOND]\n  if (isOneSkullCard(currentCard)) return [SYMBOL_SKULL]\n  if (isTwoSkullsCard(currentCard)) return [SYMBOL_SKULL, SYMBOL_SKULL]\n  return []\n}\n\nexport const useMarkScoreButtonVisible = ({\n  hasRolledOnce = useHasRolledOnce(),\n  scoreMarked = useScoreMarked(),\n  currentCardId = useCurrentCardId(),\n  hasDicesToCurse = useHasDicesToCurse(),\n} = {}) => {\n  if (scoreMarked) {\n    return false\n  }\n\n  if (hasDicesToCurse) {\n    return false\n  }\n\n  if (!currentCardId) {\n    return false\n  }\n\n  if (!hasRolledOnce) {\n    return false\n  }\n\n  return true\n}\n\nexport const useMarkScoreAllowed = ({\n  scoreMarked = useScoreMarked(),\n  currentCardId = useCurrentCardId(),\n  threeSkullsOrMoreInCursedArea = useThreeSkullsOrMoreInCursedArea(),\n  hasDicesToCurse = useHasDicesToCurse(),\n} = {}) => {\n  if (scoreMarked) {\n    return false\n  }\n\n  if (threeSkullsOrMoreInCursedArea) {\n    if (isChestCard(cardIdToCard(currentCardId))) {\n      return true\n    }\n    return false\n  }\n\n  if (hasDicesToCurse) {\n    return false\n  }\n\n  if (!currentCardId) {\n    return false\n  }\n\n  return true\n}\n\nexport const useStartNextRoundAllowed = ({\n  rollDiceAllowed = useRollDiceAllowed(),\n  markScoreAllowed = useMarkScoreAllowed(),\n  hasDicesToCurse = useHasDicesToCurse(),\n} = {}) => {\n  if (rollDiceAllowed) {\n    return false\n  }\n\n  if (markScoreAllowed) {\n    return false\n  }\n\n  if (hasDicesToCurse) {\n    return false\n  }\n\n  return true\n}\n\nexport const useRoundScore = ({\n  currentCardId = useCurrentCardId(),\n  symbolsInChest = useSymbolsInChest(),\n  scoreMarked = useScoreMarked(),\n  markScoreAllowed = useMarkScoreAllowed(),\n} = {}) => {\n  return useMemo(\n    () =>\n      computeRoundScore({\n        card: cardIdToCard(currentCardId),\n        symbolsInChest,\n        scoreMarked,\n        markScoreAllowed,\n      }),\n    [currentCardId, symbolsInChest, scoreMarked, markScoreAllowed],\n  )\n}\n\nexport const useSwordChallengeOnGoing = () => {\n  const currentCardId = useCurrentCardId()\n  const card = cardIdToCard(currentCardId)\n  const symbolsInChest = useSymbolsInChest()\n  const quantityKept = countSymbol(symbolsInChest, SYMBOL_SWORD)\n  const quantityRequired = useSwordQuantityRequired()\n\n  if (!isSwordChallengeCard(card)) {\n    return false\n  }\n  return quantityKept < quantityRequired\n}\n\nexport const useSwordQuantityRequired = ({\n  currentCardId = useCurrentCardId(),\n} = {}) => {\n  const card = cardIdToCard(currentCardId)\n  if (isSwordChallengeCard(card)) return card.numberOfSwords\n  return null\n}\n",
    "import { createAction } from \"root/src/app/main.store.js\"\n\nexport const useStartPlayerRound = createAction((state, player) => {\n  return {\n    ...state,\n    currentPlayerId: player.id,\n    currentCardId: null,\n    currentCardActivated: false,\n    roundStarted: true,\n    ...ROUND_START_STATE,\n  }\n})\n\nexport const useEndPlayerRound = createAction((state) => {\n  return {\n    ...state,\n    currentCardId: null,\n    currentCardActivated: false,\n    roundStarted: false,\n  }\n})\n\nexport const useActivateCurrentCard = createAction((state) => {\n  return {\n    ...state,\n    currentCardActivated: true,\n  }\n})\n\nexport const useSendToSkullIsland = createAction((state) => {\n  return {\n    ...state,\n    isOnSkullIsland: true,\n  }\n})\n\nexport const useMarkScore = createAction((state, score) => {\n  const { players, currentPlayerId } = state\n  const currentPlayer = players.find(({ id }) => id === currentPlayerId)\n  const nextScore = currentPlayer.score + score\n  currentPlayer.score = nextScore < 0 ? 0 : nextScore\n\n  return {\n    ...state,\n    players: [...players],\n    scoreMarked: true,\n  }\n})\n\nexport const useResetRound = createAction((state) => {\n  return {\n    ...state,\n    ...ROUND_START_STATE,\n  }\n})\n\nconst ROUND_START_STATE = {\n  witchUncursedDiceId: null,\n  witchCardEffectUsed: false,\n  rollCount: 0,\n  diceRolledIds: [],\n  diceCursedIds: [],\n  chestSlots: {\n    1: null,\n    2: null,\n    3: null,\n    4: null,\n    5: null,\n    6: null,\n    7: null,\n    8: null,\n    9: null,\n  },\n  scoreMarked: false,\n  isOnSkullIsland: false,\n}\n",
    "import { createAction } from \"root/src/app/main.store.js\"\n\nexport const useSetDiceRolledAreaPosition = createAction(\n  (state, dice, { x, y }, zIndex) => {\n    const { dices } = state\n    dice.rolledAreaPosition = { x, y }\n    dice.rolledAreaZIndex = zIndex\n    return {\n      ...state,\n      dices: { ...dices },\n    }\n  },\n)\n\nexport const useSetDiceChestSlot = createAction((state, dice, chestSlot) => {\n  const { chestSlots } = state\n  const previousChestSlot = Object.keys(chestSlots).find((chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n    return (\n      chestSlotContent &&\n      chestSlotContent.type === \"dice\" &&\n      chestSlotContent.value === dice.id\n    )\n  })\n  return {\n    ...state,\n    chestSlots: {\n      ...chestSlots,\n      ...(previousChestSlot ? { [previousChestSlot]: null } : {}),\n      [chestSlot]: { type: \"dice\", value: dice.id },\n    },\n  }\n})\n\nexport const useCurseDice = createAction((state, dice) => {\n  const { diceRolledIds, diceCursedIds } = state\n  return {\n    ...state,\n    diceRolledIds: diceRolledIds.filter(\n      (diceRolledId) => diceRolledId !== dice.id,\n    ),\n    diceCursedIds: [...diceCursedIds, dice.id],\n  }\n})\n\nexport const useUncurseDice = createAction((state, dice, fromLab = false) => {\n  const { diceRolledIds, diceCursedIds } = state\n  return {\n    ...state,\n    ...(fromLab\n      ? {}\n      : {\n          witchUncursedDiceId: dice.id,\n          witchCardEffectUsed: true,\n        }),\n    diceRolledIds: [...diceRolledIds, dice.id],\n    diceCursedIds: diceCursedIds.filter(\n      (diceCursedId) => diceCursedId !== dice.id,\n    ),\n  }\n})\n\nexport const useUnkeepDice = createAction((state, dice) => {\n  const { diceRolledIds, chestSlots } = state\n  const previousChestSlot = Object.keys(chestSlots).find((chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n    return (\n      chestSlotContent &&\n      chestSlotContent.type === \"dice\" &&\n      chestSlotContent.value === dice.id\n    )\n  })\n  return {\n    ...state,\n    diceRolledIds: [...diceRolledIds, dice.id],\n    chestSlots: {\n      ...chestSlots,\n      [previousChestSlot]: null,\n    },\n  }\n})\n\nexport const useKeepDice = createAction((state, dice, chestSlot) => {\n  const { diceRolledIds, chestSlots } = state\n  return {\n    ...state,\n    diceRolledIds: diceRolledIds.filter(\n      (diceRolledId) => diceRolledId !== dice.id,\n    ),\n    chestSlots: {\n      ...chestSlots,\n      [chestSlot]: {\n        type: \"dice\",\n        value: dice.id,\n      },\n    },\n  }\n})\n",
    "import React from \"react\"\n\nimport { useBecomes } from \"root/src/app/hooks.js\"\nimport {\n  useCurrentCardId,\n  useScoreMarked,\n  useIsOnSkullIsland,\n  useAnimationsDisabled,\n} from \"root/src/app/main.store.js\"\nimport { cardIdToCard, isSwordChallengeCard } from \"root/src/app/cards/cards.js\"\nimport {\n  useIsFirstRoll,\n  useThreeSkullsOrMoreInCursedArea,\n  useDicesToCurse,\n  useSkullCountInCursedArea,\n  useRoundScore,\n} from \"root/src/app/round/round.selectors.js\"\nimport {\n  useMarkScore,\n  useSendToSkullIsland,\n} from \"root/src/app/round/round.actions.js\"\nimport { useCurseDice } from \"root/src/app/dices/dices.actions.js\"\n\nconst { useEffect } = React\n\nexport const RoundEffects = () => {\n  useRoundEffects()\n  return null\n}\n\nexport const useRoundEffects = () => {\n  useCurseDiceEffect()\n  useFailSwordChallengeEffect()\n  useFourSkullsOrMoreOnFirstRollEffect()\n}\n\nconst useCurseDiceEffect = () => {\n  const animationsDisabled = useAnimationsDisabled()\n  const dicesToCurse = useDicesToCurse()\n  const curseDice = useCurseDice()\n\n  useEffect(() => {\n    if (dicesToCurse.length === 0) {\n      return () => {}\n    }\n\n    if (animationsDisabled) {\n      dicesToCurse.forEach((dice) => {\n        curseDice(dice)\n      })\n      return () => {}\n    }\n\n    const timeout = setTimeout(() => {\n      dicesToCurse.forEach((dice) => {\n        curseDice(dice)\n      })\n    }, 1000)\n\n    return () => {\n      clearTimeout(timeout)\n    }\n  }, [dicesToCurse])\n}\n\n// auto mark score for failed sword challenges\nconst useFailSwordChallengeEffect = () => {\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const scoreMarked = useScoreMarked()\n  const markScore = useMarkScore()\n  const threeSkullsOrMoreInCursedArea = useThreeSkullsOrMoreInCursedArea()\n  const threeSkullsOrMoreInCursedAreaBecomesTrue = useBecomes(\n    (threeSkullsOrMoreInCursedAreaPrevious) =>\n      !threeSkullsOrMoreInCursedAreaPrevious && threeSkullsOrMoreInCursedArea,\n    [threeSkullsOrMoreInCursedArea],\n  )\n  const roundScore = useRoundScore()\n  const swordChallengeCard = isSwordChallengeCard(currentCard)\n\n  useEffect(() => {\n    if (\n      swordChallengeCard &&\n      !scoreMarked &&\n      threeSkullsOrMoreInCursedAreaBecomesTrue\n    ) {\n      markScore(roundScore)\n    }\n  }, [\n    swordChallengeCard,\n    scoreMarked,\n    threeSkullsOrMoreInCursedAreaBecomesTrue,\n    roundScore,\n  ])\n}\n\n// go to skull island if 4 skulls or more on first roll\nconst useFourSkullsOrMoreOnFirstRollEffect = () => {\n  const isFirstRoll = useIsFirstRoll()\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const isOnSkullIsland = useIsOnSkullIsland()\n  const skullCountInCursedArea = useSkullCountInCursedArea()\n  const sendToSkullIsland = useSendToSkullIsland()\n\n  useEffect(() => {\n    if (!isFirstRoll) return\n\n    if (isOnSkullIsland) return\n\n    if (isSwordChallengeCard(currentCard)) return\n\n    if (skullCountInCursedArea < 4) return\n\n    sendToSkullIsland()\n  }, [isFirstRoll, isOnSkullIsland, currentCard, skullCountInCursedArea])\n}\n",
    "import { createAction } from \"root/src/app/main.store.js\"\nimport { mixDeck } from \"root/src/app/cards/cards.js\"\nimport { SYMBOL_COIN, SYMBOL_DIAMOND } from \"root/src/app/symbols/symbols.js\"\n\nexport const useDrawCard = createAction((state) => {\n  const { cardIds, cardUsedIds } = state\n  const cardDrawnId = cardIds[0]\n  return {\n    ...state,\n    cardIds: cardIds.slice(1),\n    cardUsedIds: [...cardUsedIds, cardDrawnId],\n    currentCardId: cardDrawnId,\n  }\n})\n\nexport const useAddExtraCoin = createAction((state) => {\n  const { chestSlots } = state\n  return {\n    ...state,\n    chestSlots: {\n      ...chestSlots,\n      1: {\n        type: \"symbol\",\n        value: SYMBOL_COIN,\n      },\n    },\n  }\n})\n\nexport const useAddExtraDiamond = createAction((state) => {\n  const { chestSlots } = state\n  return {\n    ...state,\n    chestSlots: {\n      ...chestSlots,\n      1: {\n        type: \"symbol\",\n        value: SYMBOL_DIAMOND,\n      },\n    },\n  }\n})\n\nexport const useShuffleDeck = createAction((state) => {\n  const { cardIds, cardUsedIds } = state\n  return {\n    ...state,\n    // shuffle deck is conceptually the action of taking all the cards\n    // and shuffling them.\n    // hence the [...cardIds, ...cardUsedIds]\n    // For now shuffleDeck is called when cardsIds is empty.\n    // If we change [...cardIds, ...cardUsedIds] by cardUsedIds\n    // it makes shuffleDeck less robust because it cannot be called twice\n    // or at any time.\n    cardIds: mixDeck([...cardIds, ...cardUsedIds]),\n    cardUsedIds: [],\n  }\n})\n\nexport const useUndrawCard = createAction((state) => {\n  const { currentCardId, cardIds, cardUsedIds } = state\n  return {\n    ...state,\n    currentCardId: null,\n    cardIds: [currentCardId, ...cardIds],\n    cardUsedIds: cardUsedIds.slice(1),\n  }\n})\n",
    "import React from \"react\"\n\nimport {\n  useCurrentCardId,\n  useCurrentCardActivated,\n} from \"root/src/app/main.store.js\"\nimport { useBecomes } from \"root/src/app/hooks.js\"\nimport {\n  cardIdToCard,\n  isCoinCard,\n  isDiamondCard,\n} from \"root/src/app/cards/cards.js\"\nimport {\n  useAddExtraCoin,\n  useAddExtraDiamond,\n} from \"root/src/app/cards/cards.actions.js\"\n\nexport const CardsEffects = () => {\n  useCoinCardEffect()\n  useDiamondCardEffect()\n  return null\n}\n\nconst useCoinCardEffect = () => {\n  const addExtraCoin = useAddExtraCoin()\n  const currentCardId = useCurrentCardId()\n  const currentCardActivated = useCurrentCardActivated()\n\n  const currentCardBecomesActivated = useBecomes(\n    (currentCardActivatedPrevious) =>\n      !currentCardActivatedPrevious === currentCardActivated,\n    [currentCardActivated],\n  )\n  const currentCardIsCoinCard =\n    currentCardId && isCoinCard(cardIdToCard(currentCardId))\n\n  React.useEffect(() => {\n    if (currentCardIsCoinCard) {\n      addExtraCoin()\n    }\n  }, [])\n\n  React.useEffect(() => {\n    if (currentCardBecomesActivated && currentCardIsCoinCard) {\n      addExtraCoin()\n    }\n  }, [currentCardBecomesActivated, currentCardIsCoinCard])\n}\n\nconst useDiamondCardEffect = () => {\n  const addExtraDiamond = useAddExtraDiamond()\n  const currentCardId = useCurrentCardId()\n  const currentCardActivated = useCurrentCardActivated()\n\n  const currentCardBecomesActivated = useBecomes(\n    (currentCardActivatedPrevious) =>\n      !currentCardActivatedPrevious === currentCardActivated,\n    [currentCardActivated],\n  )\n  const currentCardIsDiamondCard =\n    currentCardId && isDiamondCard(cardIdToCard(currentCardId))\n\n  React.useEffect(() => {\n    if (currentCardIsDiamondCard) {\n      addExtraDiamond()\n    }\n  }, [])\n\n  React.useEffect(() => {\n    if (currentCardBecomesActivated && currentCardIsDiamondCard) {\n      addExtraDiamond()\n    }\n  }, [currentCardBecomesActivated, currentCardIsDiamondCard])\n}\n",
    "import React from \"react\"\n\nexport const createSignal = () => {\n  let listeners = []\n\n  const listen = (callback, { once = false } = {}) => {\n    if (once) {\n      const callbackOriginal = callback\n      callback = (...args) => {\n        stopListening()\n        callbackOriginal(...args)\n      }\n    }\n\n    listeners = [...listeners, callback]\n\n    let removed = false\n    const stopListening = () => {\n      if (removed) return\n      removed = true\n      const listenersWithoutCallback = []\n      let i = listeners.length\n      let searching = true\n      while (i--) {\n        const listenerCandidate = listeners[i]\n        if (searching) {\n          if (listenerCandidate === callback) {\n            searching = false\n          } else {\n            listenersWithoutCallback.push(listenerCandidate)\n          }\n        } else {\n          listenersWithoutCallback.push(listenerCandidate)\n        }\n      }\n      listeners = listenersWithoutCallback\n    }\n    return stopListening\n  }\n\n  const emit = (...args) => {\n    listeners.forEach((listener) => {\n      listener(...args)\n    })\n  }\n\n  return {\n    listen,\n    emit,\n  }\n}\n\nexport const useSignal = () => {\n  const [signal] = React.useState(() => createSignal())\n  return [signal.listen, signal.emit]\n}\n\nexport const useSignalState = (listen) => {\n  const [state, stateSetter] = React.useState()\n  React.useEffect(() => {\n    return listen(stateSetter)\n  }, [])\n  return state\n}\n",
    "import React from \"react\"\n\nimport { useSignalState } from \"root/src/app/helper/signal.js\"\n\nexport const DiceOnGoing = ({\n  rolledAreaRef,\n  offscreenRef,\n  diceOverRolledAreaListener,\n}) => {\n  const diceOverRolledArea = useSignalState(diceOverRolledAreaListener)\n  return (\n    <div className=\"dice-ongoing\">\n      <div className=\"map\"></div>\n      <div\n        className=\"area\"\n        ref={rolledAreaRef}\n        style={{\n          ...(diceOverRolledArea ? { outline: \"2px dotted\" } : {}),\n        }}\n      ></div>\n      <div className=\"offscreen-area\" ref={offscreenRef}>\n        {/* we will move the dice into this zone when they are offgame (first roll) */}\n      </div>\n    </div>\n  )\n}\n",
    "export const startJavaScriptAnimation = ({\n  duration = 300,\n  timingFunction = (t) => t, // https://easings.net/\n  onProgress = () => {},\n  onCancel = () => {},\n  onComplete = () => {},\n}) => {\n  if (isNaN(duration)) {\n    console.warn(`duration must be a number, received ${duration}`)\n    return () => {}\n  }\n  duration = parseInt(duration, 10)\n  const startMs = performance.now()\n  let currentRequestAnimationFrameId\n  let done = false\n  let rawProgress = 0\n  let progress = 0\n  const handler = () => {\n    currentRequestAnimationFrameId = null\n    const nowMs = performance.now()\n    rawProgress = Math.min((nowMs - startMs) / duration, 1)\n    progress = timingFunction(rawProgress)\n    done = rawProgress === 1\n    onProgress({\n      done,\n      rawProgress,\n      progress,\n    })\n    if (done) {\n      onComplete()\n    } else {\n      currentRequestAnimationFrameId = window.requestAnimationFrame(handler)\n    }\n  }\n  handler()\n  const stop = () => {\n    if (currentRequestAnimationFrameId) {\n      window.cancelAnimationFrame(currentRequestAnimationFrameId)\n      currentRequestAnimationFrameId = null\n    }\n    if (!done) {\n      done = true\n      onCancel({\n        rawProgress,\n        progress,\n      })\n    }\n  }\n  return stop\n}\n",
    "// https://usehooks.com/useAnimation/\n\nimport React from \"react\"\n\nimport { usePrevious } from \"root/src/app/hooks.js\"\nimport { startJavaScriptAnimation } from \"./startJavaScriptAnimation.js\"\n\nexport const useAnimateTransitionUsingJs = (\n  value,\n  { duration = 300, timingFunction, condition } = {},\n) => {\n  const [animatedValue, animatedValueSetter] = React.useState(null)\n  useAnimateTransition(\n    value,\n    (from, to) => {\n      animatedValueSetter({ value: from })\n      return startJavaScriptAnimation({\n        duration,\n        timingFunction,\n        onProgress: ({ progress }) => {\n          const value = Math.round(from + (to - from) * progress)\n          animatedValueSetter({\n            value,\n          })\n        },\n        onComplete: () => {\n          animatedValueSetter(null)\n        },\n      })\n    },\n    { condition },\n  )\n  return animatedValue\n}\n\nexport const useAnimateTransitionUsingWebAnimation = (value, animate) => {\n  useAnimateTransition(value, (from, to) => {\n    const animation = animate(from, to)\n    return () => {\n      animation.cancel()\n    }\n  })\n}\n\nconst useAnimateTransition = (\n  value,\n  animate,\n  { condition = () => true } = {},\n) => {\n  const [transition, transitionSetter] = React.useState(null)\n\n  const valuePrevious = usePrevious(value)\n  React.useEffect(() => {\n    if (valuePrevious !== value && condition(value, valuePrevious)) {\n      transitionSetter({\n        from: valuePrevious,\n        to: value,\n      })\n    }\n  }, [valuePrevious, value])\n  React.useEffect(() => {\n    if (transition) {\n      return animate(transition.from, transition.to)\n    }\n    return () => {}\n  }, [transition])\n}\n",
    "import { useAnimateTransitionUsingJs } from \"./useAnimateTransition.js\"\n\nexport const ValueWithAnimatedTransition = ({ value, duration, condition }) => {\n  const animatedValue = useAnimateTransitionUsingJs(value, { duration, condition })\n  return animatedValue ? animatedValue.value : value\n}\n",
    "/**\n\nThis component (Stylesheet) must ensure a given url is loaded as css by the browser.\nTo achieve that it creates a <link> and append it to document.head\n\nIt is important that even if many Stylesheet are instantiated for a given url only\none <link> ends up in the document.head. (Appended it multiple times is useless).\nIt happens for Dialog.base.css for instance.\n\nI have tried to achieve this with ReactDOM.createPortal but could not manage\nto have only one <link> injected.\n\n*/\n\nimport React from \"react\"\n\nimport {\n  addLoadedListener,\n  useUrlLoadingNotifier,\n} from \"root/src/app/loading/loading.main.jsx\"\n\nexport const Stylesheet = ({ href, onLoad = () => {} }) => {\n  const [fetchStart, fetchEnd] = useUrlLoadingNotifier(href)\n\n  React.useEffect(() => {\n    fetchStart()\n    return injectStylesheetIntoDocument(href, {\n      onload: () => {\n        fetchEnd()\n        onLoad()\n      },\n    })\n  }, [href])\n\n  return null\n}\n\nconst memoizeLinksByHref = (fn) => {\n  const linkMap = new Map()\n\n  const stopUsing = (href) => {\n    if (!linkMap.has(href)) {\n      return\n    }\n\n    const { useCount, ...rest } = linkMap.get(href)\n    if (useCount > 1) {\n      linkMap.set(href, {\n        useCount: useCount - 1,\n        ...rest,\n      })\n      return\n    }\n\n    linkMap.delete(href)\n    rest.linkCleanup()\n  }\n\n  return (href, ...args) => {\n    if (linkMap.has(href)) {\n      const { useCount, ...rest } = linkMap.get(href)\n      linkMap.set(href, {\n        useCount: useCount + 1,\n        ...rest,\n      })\n      return stopUsing\n    }\n\n    const linkCleanup = fn(href, ...args)\n    linkMap.set(href, {\n      useCount: 1,\n      linkCleanup,\n    })\n    return stopUsing\n  }\n}\n\nconst injectStylesheetIntoDocument = memoizeLinksByHref(\n  (href, { onload = () => {} } = {}) => {\n    const link = document.createElement(\"link\")\n    link.rel = \"stylesheet\"\n    link.type = \"text/css\"\n    const removeLoadedListener = addLoadedListener(link, onload)\n    link.href = href\n    document.head.appendChild(link)\n    return () => {\n      removeLoadedListener()\n      document.head.removeChild(link)\n    }\n  },\n)\n",
    "export const findFirstAncestor = (node, predicate) => {\n  let ancestor = node.parentNode\n  while (ancestor) {\n    if (predicate(ancestor)) {\n      return ancestor\n    }\n    ancestor = ancestor.parentNode\n  }\n  return null\n}\n\nexport const findFirstDescendant = (rootNode, fn) => {\n  const iterator = createNextNodeIterator(rootNode, rootNode)\n  let { done, value: node } = iterator.next()\n  while (done === false) {\n    if (fn(node)) {\n      return node\n    }\n    ;({ done, value: node } = iterator.next())\n  }\n  return null\n}\n\nexport const findLastDescendant = (rootNode, fn) => {\n  const deepestNode = getDeepestNode(rootNode)\n  if (deepestNode) {\n    const iterator = createPreviousNodeIterator(deepestNode, rootNode)\n    let { done, value: node } = iterator.next()\n    while (done === false) {\n      if (fn(node)) {\n        return node\n      }\n      ;({ done, value: node } = iterator.next())\n    }\n  }\n  return null\n}\n\nexport const findAfter = ({ from, root = null, predicate, skipChildren = false }) => {\n  const iterator = createAfterNodeIterator(from, root, skipChildren)\n  let { done, value: node } = iterator.next()\n  while (done === false) {\n    if (predicate(node)) {\n      return node\n    }\n    ;({ done, value: node } = iterator.next())\n  }\n  return null\n}\n\nexport const findAfterSkippingChildren = (param) => findAfter({ ...param, skipChildren: true })\n\nexport const findBefore = ({ from, root = null, predicate }) => {\n  const iterator = createPreviousNodeIterator(from, root)\n  let { done, value: node } = iterator.next()\n  while (done === false) {\n    if (predicate(node)) {\n      return node\n    }\n    ;({ done, value: node } = iterator.next())\n  }\n  return null\n}\n\nconst getNextNode = (node, rootNode, skipChild = false) => {\n  if (!skipChild) {\n    const firstChild = node.firstChild\n    if (firstChild) {\n      return firstChild\n    }\n  }\n\n  const nextSibling = node.nextSibling\n  if (nextSibling) {\n    return nextSibling\n  }\n\n  const parentNode = node.parentNode\n  if (parentNode && parentNode !== rootNode) {\n    return getNextNode(parentNode, rootNode, true)\n  }\n\n  return null\n}\n\nconst createNextNodeIterator = (node, rootNode) => {\n  let current = node\n  const next = () => {\n    const nextNode = getNextNode(current, rootNode)\n    current = nextNode\n    return {\n      done: Boolean(nextNode) === false,\n      value: nextNode,\n    }\n  }\n  return { next }\n}\n\nconst createAfterNodeIterator = (fromNode, rootNode, skipChildren = false) => {\n  let current = fromNode\n  let childrenSkipped = false\n  const next = () => {\n    const nextNode = getNextNode(current, rootNode, skipChildren && childrenSkipped === false)\n    childrenSkipped = true\n    current = nextNode\n    return {\n      done: Boolean(nextNode) === false,\n      value: nextNode,\n    }\n  }\n  return { next }\n}\n\nconst getDeepestNode = (node) => {\n  let deepestNode = node.lastChild\n  while (deepestNode) {\n    const lastChild = deepestNode.lastChild\n    if (lastChild) {\n      deepestNode = lastChild\n    } else {\n      break\n    }\n  }\n  return deepestNode\n}\n\nconst getPreviousNode = (node, rootNode) => {\n  const previousSibling = node.previousSibling\n  if (previousSibling) {\n    const deepestChild = getDeepestNode(previousSibling)\n\n    if (deepestChild) {\n      return deepestChild\n    }\n    return previousSibling\n  }\n  if (node !== rootNode) {\n    const parentNode = node.parentNode\n    if (parentNode && parentNode !== rootNode) {\n      return parentNode\n    }\n  }\n  return null\n}\n\nconst createPreviousNodeIterator = (fromNode, rootNode) => {\n  let current = fromNode\n  const next = () => {\n    const previousNode = getPreviousNode(current, rootNode)\n    current = previousNode\n    return {\n      done: Boolean(previousNode) === false,\n      value: previousNode,\n    }\n  }\n  return {\n    next,\n  }\n}\n",
    "import { isFocusable } from \"root/src/app/dom/dom.util.js\"\nimport {\n  findAfter,\n  findBefore,\n  findFirstDescendant,\n  findLastDescendant,\n} from \"root/src/app/dom/dom.traversal.js\"\n\nexport const firstFocusableDescendantOrSelf = (element) => {\n  const firstFocusableDescendant = findFirstDescendant(element, isFocusable)\n  if (firstFocusableDescendant) return firstFocusableDescendant\n\n  if (isFocusable(element)) return element\n\n  return null\n}\n\nexport const trapFocusInside = (element) => {\n  if (element.nodeType === 3) {\n    console.warn(\"cannot trap focus inside a text node\")\n    return () => {}\n  }\n\n  const trappedElement = activeTraps.find(\n    (activeTrap) => activeTrap.element === element,\n  )\n  if (trappedElement) {\n    console.warn(\"focus already trapped inside this element\")\n    return () => {}\n  }\n\n  const isEventOutside = (event) => {\n    if (event.target === element) return false\n    if (element.contains(event.target)) return false\n    return true\n  }\n\n  const getFirstTabbable = () =>\n    findFirstDescendant(element, isDiscoverableWithKeyboard)\n\n  const getLastTabbable = () =>\n    findLastDescendant(element, isDiscoverableWithKeyboard)\n\n  const getPreviousTabbableOrLast = () => {\n    const previous = findBefore({\n      from: document.activeElement,\n      root: element,\n      predicate: isDiscoverableWithKeyboard,\n    })\n    return previous || getLastTabbable()\n  }\n\n  const getNextTabbableOrFirst = () => {\n    const next = findAfter({\n      from: document.activeElement,\n      root: element,\n      predicate: isDiscoverableWithKeyboard,\n    })\n    return next || getFirstTabbable()\n  }\n\n  const performTabEventNavigation = (event) => {\n    const activeElement = document.activeElement\n    const activeElementIsBody = activeElement === document.body\n\n    if (event.shiftKey) {\n      const elementToFocus = activeElementIsBody\n        ? getLastTabbable()\n        : getPreviousTabbableOrLast(activeElement)\n      if (elementToFocus) {\n        elementToFocus.focus()\n      }\n    } else {\n      const elementToFocus = activeElementIsBody\n        ? getFirstTabbable()\n        : getNextTabbableOrFirst(activeElement)\n      if (elementToFocus) {\n        elementToFocus.focus()\n      }\n    }\n  }\n\n  const lock = () => {\n    const onmousedown = (event) => {\n      if (isEventOutside(event)) {\n        event.preventDefault()\n        event.stopImmediatePropagation()\n      }\n    }\n\n    const onkeydown = (event) => {\n      if (isTabEvent(event)) {\n        event.preventDefault()\n        performTabEventNavigation(event)\n      }\n    }\n\n    document.addEventListener(\"mousedown\", onmousedown, {\n      capture: true,\n      passive: false,\n    })\n    document.addEventListener(\"keydown\", onkeydown, {\n      capture: true,\n      passive: false,\n    })\n\n    return () => {\n      document.removeEventListener(\"mousedown\", onmousedown, {\n        capture: true,\n        passive: false,\n      })\n      document.removeEventListener(\"keydown\", onkeydown, {\n        capture: true,\n        passive: false,\n      })\n    }\n  }\n\n  const deactivate = activate({ element, lock })\n\n  const untrap = () => {\n    deactivate()\n  }\n\n  return untrap\n}\n\nconst hasNegativeTabIndex = (element) => {\n  return (\n    element.hasAttribute &&\n    element.hasAttribute(\"tabIndex\") &&\n    Number(element.getAttribute(\"tabindex\")) < 0\n  )\n}\n\nconst isDiscoverableWithKeyboard = (element) => {\n  if (hasNegativeTabIndex(element)) {\n    return false\n  }\n  return isFocusable(element)\n}\n\nconst isTabEvent = (event) => event.key === \"Tab\" || event.keyCode === 9\n\nconst activeTraps = []\nconst activate = ({ lock }) => {\n  // unlock any trap currently activated\n  let previousTrap\n  if (activeTraps.length > 0) {\n    previousTrap = activeTraps[activeTraps.length - 1]\n    previousTrap.unlock()\n  }\n\n  // store trap methods to lock/unlock as traps are acivated/deactivated\n  const trap = { lock, unlock: lock() }\n  activeTraps.push(trap)\n\n  return () => {\n    if (activeTraps.length === 0) {\n      console.warn(\"cannot deactivate an already deactivated trap\")\n      return\n    }\n    const lastTrap = activeTraps[activeTraps.length - 1]\n    if (trap !== lastTrap) {\n      // TODO: investigate this and maybe remove this requirment\n      console.warn(\n        \"you must deactivate trap in the same order they were activated\",\n      )\n      return\n    }\n    activeTraps.pop()\n    trap.unlock()\n    // if any,reactivate the previous trap\n    if (previousTrap) {\n      previousTrap.unlock = previousTrap.lock()\n    }\n  }\n}\n",
    "import { getStyleValue, isDocumentElement } from \"root/src/app/dom/dom.util.js\"\n\nexport const trapScrollInside = (element) => {\n  const elementsToScrollLock = []\n  let previous = element.previousSibling\n  while (previous) {\n    if (previous.nodeType === 1) {\n      if (isScrollable(previous)) {\n        elementsToScrollLock.push(previous)\n      }\n    }\n    previous = previous.previousSibling\n  }\n\n  const scrollableParents = getAllScrollableParent(element)\n  elementsToScrollLock.push(...scrollableParents)\n  const cleanUpArray = elementsToScrollLock.map((element) => {\n    const prev = element.style.overflow\n    element.style.overflow = \"hidden\"\n    return () => {\n      if (prev) {\n        element.style.overflow = prev\n      } else {\n        element.style.removeProperty(\"overflow\")\n      }\n    }\n  })\n\n  return () => {\n    cleanUpArray.forEach((cleanup) => {\n      cleanup()\n    })\n  }\n}\n\nconst getAllScrollableParent = (element) => {\n  const scrollableParents = []\n\n  const visitElement = (elementOrScrollableParent) => {\n    const scrollableParent = getScrollableParent(elementOrScrollableParent)\n    if (scrollableParent) {\n      scrollableParents.push(scrollableParent)\n      if (scrollableParent === document) {\n        return\n      }\n      visitElement(scrollableParent)\n    }\n  }\n  visitElement(element)\n\n  return scrollableParents\n}\n\nconst getScrollableParent = (arg) => {\n  if (typeof arg !== \"object\" || arg.nodeType !== 1) {\n    throw new TypeError(\"getScrollableParent first argument must be DOM node\")\n  }\n  const element = arg\n  if (element === document.documentElement) {\n    return null\n  }\n  const position = getStyleValue(element, \"position\")\n\n  if (position === \"fixed\") {\n    return getScrollingElement(element.ownerDocument)\n  }\n  return (\n    findScrollableParent(element) || getScrollingElement(element.ownerDocument)\n  )\n}\n\nconst getScrollingElement = (document) => {\n  if (\"scrollingElement\" in document) {\n    return document.scrollingElement\n  }\n\n  if (isCompliant(document)) {\n    return document.documentElement\n  }\n\n  const body = document.body\n  const isFrameset = body && !/body/i.test(body.tagName)\n  const possiblyScrollingElement = isFrameset ? getNextBodyElement(body) : body\n\n  // If `body` is itself scrollable, it is not the `scrollingElement`.\n  return possiblyScrollingElement && bodyIsScrollable(possiblyScrollingElement)\n    ? null\n    : possiblyScrollingElement\n}\n\nconst getNextBodyElement = (frameset) => {\n  // We use this function to be correct per spec in case `document.body` is\n  // a `frameset` but there exists a later `body`. Since `document.body` is\n  // a `frameset`, we know the root is an `html`, and there was no `body`\n  // before the `frameset`, so we just need to look at siblings after the\n  // `frameset`.\n  let current = frameset\n  while ((current = current.nextSibling)) {\n    if (current.nodeType === 1 && isBodyElement(current)) {\n      return current\n    }\n  }\n  return null\n}\n\nconst isBodyElement = (element) => element.ownerDocument.body === element\n\nconst bodyIsScrollable = (body) => {\n  // a body element is scrollable if body and html are scrollable and rendered\n  if (!isScrollable(body)) {\n    return false\n  }\n  if (isHidden(body)) {\n    return false\n  }\n\n  const documentElement = body.ownerDocument.documentElement\n  if (!isScrollable(documentElement)) {\n    return false\n  }\n  if (isHidden(documentElement)) {\n    return false\n  }\n\n  return true\n}\n\nconst isHidden = (element) => {\n  const display = getStyleValue(element, \"display\")\n  if (display === \"none\") {\n    return false\n  }\n\n  if (\n    display === \"table-row\" ||\n    display === \"table-group\" ||\n    display === \"table-column\"\n  ) {\n    return getStyleValue(element, \"visibility\") !== \"collapsed\"\n  }\n\n  return true\n}\n\nconst isCompliant = (document) => {\n  // Note: document.compatMode can be toggle at runtime by document.write\n  const isStandardsMode = /^CSS1/.test(document.compatMode)\n  if (isStandardsMode) {\n    return testScrollCompliance(document)\n  }\n  return false\n}\n\nconst testScrollCompliance = (document) => {\n  const iframe = document.createElement(\"iframe\")\n  iframe.style.height = \"1px\"\n  const parentNode = document.body || document.documentElement || document\n  parentNode.appendChild(iframe)\n  const iframeDocument = iframe.contentWindow.document\n  iframeDocument.write('<!DOCTYPE html><div style=\"height:9999em\">x</div>')\n  iframeDocument.close()\n  const scrollComplianceResult =\n    iframeDocument.documentElement.scrollHeight >\n    iframeDocument.body.scrollHeight\n  iframe.parentNode.removeChild(iframe)\n  return scrollComplianceResult\n}\n\nconst isScrollable = (element) => {\n  // note: keep in mind that an element with overflow: 'hidden' is scrollable\n  // it can be scrolled using keyboard arrows or JavaScript properties such as scrollTop, scrollLeft\n  if (!verticalOverflowIsVisible(element)) {\n    return true\n  }\n\n  if (!horizontalOverflowIsVisible(element)) {\n    return true\n  }\n\n  return false\n}\n\nconst verticalOverflowIsVisible = (element) => {\n  const verticalOverflow = getStyleValue(element, \"overflow-x\")\n  if (verticalOverflow === \"visible\") {\n    return true\n  }\n\n  const overflow = getStyleValue(element, \"overflow\")\n  return overflow === \"visible\"\n}\n\nconst horizontalOverflowIsVisible = (element) => {\n  const horizontalOverflow = getStyleValue(element, \"overflow-y\")\n  if (horizontalOverflow === \"visible\") {\n    return true\n  }\n  const overflow = getStyleValue(element, \"overflow\")\n  return overflow === \"visible\"\n}\n\nconst findScrollableParent = (element) => {\n  if (element === document.documentElement) return null\n\n  const position = getStyleValue(element, \"position\")\n  let parent = element.parentNode\n  while (parent) {\n    if (isDocumentElement(parent)) {\n      return null\n    }\n    if (\n      position === \"absolute\" &&\n      getStyleValue(parent, \"position\") === \"static\"\n    ) {\n      parent = parent.parentNode\n      continue\n    }\n    if (isScrollable(parent)) {\n      return parent\n    }\n    parent = parent.parentNode\n  }\n  return null\n}\n",
    "/**\n\n--- click-no-effect-scenario ---\n\nBe careful if you ever create the following html structure:\n\n<div onClick={openDialog}>\n  Open dialog\n  <Dialog requestCloseOnClickOutside={true} requestClose={closeDialog} />\n</div>\n\nIn this context the onClick will happen on dialog backdrop which is\nInside the <div>. The closeDialog will be called but as click event bubbles\nit will also trigger onClick listener from the <div>.\nIn the end the click interaction both close and open the dialog in the same event loop.\n\n*/\n\nimport React from \"react\"\nimport ReactDOM from \"react-dom\"\n\nimport { useBecomes } from \"root/src/app/hooks.js\"\nimport { Stylesheet } from \"root/src/app/generic/Stylesheet.jsx\"\nimport {\n  firstFocusableDescendantOrSelf,\n  trapFocusInside,\n} from \"./focus-trap.js\"\nimport { trapScrollInside } from \"./scroll-trap.js\"\n\nconst dialogBaseCssUrl = new URL(\"./dialog.base.css\", import.meta.url)\n\nconst { useEffect } = React\n\n/**\nhttps://github.com/reactjs/react-modal\nhttps://github.com/reactjs/react-modal/blob/master/src/components/ModalPortal.js\nhttps://fr.reactjs.org/docs/portals.html\n*/\n\nexport const DialogBase = ({\n  container = document.body,\n  insertTop,\n  insertLeft,\n  insertRight,\n  insertBottom,\n  children,\n\n  isOpen,\n  requestCloseOnEscape = true,\n  requestCloseOnClickOutside = false,\n  // closeMethod can be \"visibility-hidden\", \"hidden-attribute\", \"dom-remove\"\n  // ideally we should return null when isOpen is false and the dialog never rendered\n  // (to avoid putting the dialog in display none while it might never be used)\n  // (but it's too early to know exactly what we want/need)\n  closeMethod = \"display-none\",\n\n  stealFocus = true,\n  restoreStolenFocus = true,\n  trapFocus = true,\n\n  onAfterOpen = () => {},\n  onRequestClose = () => {},\n  onFocusIn = () => {},\n  onFocusOut = () => {},\n  backdropProps = {},\n  ...rest\n}) => {\n  if (!container) return null\n  const [dialogRootNode, dialogRootNodeSetter] = React.useState(null)\n\n  const isInsideDocument = Boolean(dialogRootNode)\n  const becomesOpen = useBecomes(\n    (isOpenPrevious) => !isOpenPrevious && isOpen,\n    [isOpen],\n  )\n\n  if (becomesOpen) {\n    onAfterOpen()\n  }\n\n  // onFocusIn, onFocusOut implementation\n  // https://github.com/facebook/react/issues/6410\n  useEffect(() => {\n    if (!isOpen || !isInsideDocument) return () => {}\n\n    let focusIsInsideDialog = hasOrContainsFocus(dialogRootNode)\n\n    const onDocumentBlur = (blurEvent) => {\n      // focus is leaving the document and it was inside dialog\n      if (!blurEvent.relatedTarget) {\n        if (focusIsInsideDialog) {\n          focusIsInsideDialog = false\n          onFocusOut(blurEvent)\n        }\n      }\n    }\n\n    const onDialogFocus = (focusEvent) => {\n      onFocusIn(focusEvent)\n      focusIsInsideDialog = true\n    }\n    const onDocumentFocus = (focusEvent) => {\n      if (hasOrContainsFocus(dialogRootNode)) {\n        focusIsInsideDialog = true\n      } else {\n        focusIsInsideDialog = false\n        onFocusOut(focusEvent)\n      }\n    }\n\n    dialogRootNode.addEventListener(\"focus\", onDialogFocus, true)\n    document.addEventListener(\"focus\", onDocumentFocus, true)\n    document.addEventListener(\"blur\", onDocumentBlur, true)\n    return () => {\n      dialogRootNode.removeEventListener(\"focus\", onDialogFocus, true)\n      document.removeEventListener(\"focus\", onDocumentFocus, true)\n      document.removeEventListener(\"blur\", onDocumentBlur, true)\n    }\n  }, [isOpen, isInsideDocument, onFocusIn, onFocusOut])\n\n  // trap scroll inside dialog\n  useEffect(() => {\n    if (!isOpen || !isInsideDocument) {\n      return () => {}\n    }\n    return trapScrollInside(dialogRootNode)\n  }, [isOpen, isInsideDocument])\n\n  // trap focus inside dialog\n  useEffect(() => {\n    if (!isOpen || !isInsideDocument || !trapFocus) return () => {}\n\n    return trapFocusInside(dialogRootNode)\n  }, [isOpen, isInsideDocument, trapFocus])\n\n  // steal focus to move it into dialog when it opens\n  useEffect(() => {\n    if (!isOpen || !isInsideDocument || !stealFocus) return () => {}\n\n    const nodeFocusedBeforeTransfer = document.activeElement\n    const firstFocusableElement = firstFocusableDescendantOrSelf(dialogRootNode)\n    if (firstFocusableElement) {\n      firstFocusableElement.focus({ preventScroll: true })\n    }\n    return () => {\n      if (firstFocusableElement) {\n        if (typeof restoreStolenFocus === \"function\") {\n          restoreStolenFocus(nodeFocusedBeforeTransfer)\n        } else if (restoreStolenFocus === true) {\n          nodeFocusedBeforeTransfer.focus({ preventScroll: true })\n        }\n      }\n    }\n  }, [isOpen, isInsideDocument, stealFocus])\n\n  // put aria-hidden on elements behind this dialog\n  useEffect(() => {\n    if (!isOpen || !dialogRootNode || !dialogRootNode.parentNode)\n      return () => {}\n\n    const elementsToHide = []\n    /*\n    we hide previous and next siblings\n    because when dialog is opened everything around it should be considered\n    hidden (you cannot have several modal visible at the same time).\n\n    Let's keep in mind we are talking about a dialog in the accessibility terms.\n    It should focus trap, prevent interaction with the rest of the page\n    and consider the rest as hidden.\n    This dialog is not meant to be used for tooltip and so on.\n    */\n    const parentChildren = Array.from(dialogRootNode.parentNode.children)\n    parentChildren.forEach((child) => {\n      if (child !== dialogRootNode) {\n        elementsToHide.push(child)\n      }\n    })\n\n    elementsToHide.forEach((element) => {\n      element.setAttribute(\"aria-hidden\", \"true\")\n    })\n    return () => {\n      elementsToHide.forEach((element) => {\n        element.removeAttribute(\"aria-hidden\", \"true\")\n      })\n    }\n  }, [isOpen, dialogRootNode])\n\n  if (closeMethod === \"dom-remove\" && !isOpen) {\n    return null\n  }\n\n  return ReactDOM.createPortal(\n    <div\n      {...rest}\n      role=\"dialog\"\n      className={`dialog--root${rest.className ? ` ${rest.className}` : \"\"}`}\n      ref={(element) => {\n        dialogRootNodeSetter(element)\n        if (rest.ref) rest.ref(element)\n      }}\n      onKeyDown={(keydownEvent) => {\n        if (requestCloseOnEscape && keydownEvent.keyCode === ESC_KEY) {\n          onRequestClose(keydownEvent)\n        }\n        if (rest.onKeyDown) rest.onKeyDown(keydownEvent)\n      }}\n      tabIndex=\"-1\"\n      style={{\n        ...(closeMethod === \"display-none\" && !isOpen\n          ? { display: \"none\" }\n          : {}),\n        ...(closeMethod === \"visibility-hidden\" && !isOpen\n          ? { visibility: \"hidden\" }\n          : {}),\n      }}\n      hidden={closeMethod === \"hidden-attribute\" && !isOpen ? true : undefined}\n    >\n      <Stylesheet href={dialogBaseCssUrl} />\n      {isOpen ? (\n        <DialogBackDrop\n          {...backdropProps}\n          className=\"dialog--backdrop\"\n          // mousedown on backdrop -> transfer focus to dialog\n          onMouseDownActive={(mousedownEvent) => {\n            // prevent mousedown on backdrop from putting focus on document.body\n            mousedownEvent.preventDefault()\n            // instead foward focus to the dialog if not already inside\n            if (!hasOrContainsFocus(dialogRootNode)) {\n              const firstFocusableElement =\n                firstFocusableDescendantOrSelf(dialogRootNode)\n              if (firstFocusableElement) {\n                firstFocusableElement.focus({ preventScroll: true })\n              }\n            }\n          }}\n          onClick={(clickEvent) => {\n            // I wonder if we should clickEvent.stopPropagation()\n            // because back drop is also there to shallow click interaction\n            // it would prevent the click event from bubbling and creates the potential\n            // --- click-no-effect-scenario --- described at the top of this file.\n            if (requestCloseOnClickOutside) {\n              onRequestClose(clickEvent)\n            }\n            if (backdropProps.onClick) backdropProps.onClick(clickEvent)\n          }}\n        />\n      ) : null}\n      <div className=\"dialog--document\">\n        <div className=\"dialog--insert-top\">{insertTop}</div>\n        <div className=\"dialog--main\">\n          <div className=\"dialog--insert-left\">{insertLeft}</div>\n          <div className=\"dialog--scrollable-content\">{children}</div>\n          <div className=\"dialog--insert-right\">{insertRight}</div>\n        </div>\n        <div className=\"dialog--insert-bottom\">{insertBottom}</div>\n      </div>\n    </div>,\n    container,\n  )\n}\n\nconst DialogBackDrop = ({ onMouseDownActive, ...props }) => {\n  const [backdropElement, setBackdropElement] = React.useState(null)\n  useEffect(() => {\n    if (!backdropElement) return () => {}\n\n    backdropElement.addEventListener(\"mousedown\", onMouseDownActive, {\n      passive: false,\n    })\n    return () => {\n      backdropElement.removeEventListener(\"mousedown\", onMouseDownActive, {\n        passive: false,\n      })\n    }\n  }, [backdropElement])\n\n  return (\n    <div\n      ref={(element) => {\n        setBackdropElement(element)\n        if (props.ref) props.ref(element)\n      }}\n      {...props}\n    ></div>\n  )\n}\n\nconst hasOrContainsFocus = (element) => {\n  const { activeElement } = document\n  return element === activeElement || element.contains(activeElement)\n}\n\nconst ESC_KEY = 27\n",
    "import React from \"react\"\n\nimport { useMainDomNode } from \"root/src/app/dom/dom.main.jsx\"\nimport { Stylesheet } from \"root/src/app/generic/Stylesheet.jsx\"\n\nimport { DialogBase } from \"./DialogBase.jsx\"\n\nconst dialogCssUrl = new URL(\"./dialog.css\", import.meta.url)\n\nexport const Dialog = (props) => {\n  return (\n    <>\n      <Stylesheet href={dialogCssUrl} />\n      <DialogBase container={useMainDomNode()} {...props} />\n    </>\n  )\n}\n\nexport const useDialogState = (initialValue = false) => {\n  const [dialogIsOpen, setDialogIsOpen] = React.useState(initialValue)\n  const openDialog = () => {\n    setDialogIsOpen(true)\n  }\n  const closeDialog = () => {\n    setDialogIsOpen(false)\n  }\n  return [dialogIsOpen, openDialog, closeDialog]\n}\n",
    "import React from \"react\"\n\nexport const StarRain = () => {\n  return (\n    <div className=\"star-rain-container\">\n      <div className=\"star\" id=\"star-01\">\n        <Star />\n      </div>\n      <div className=\"star\" id=\"star-02\">\n        <Star />\n      </div>\n      <div className=\"star\" id=\"star-03\">\n        <Star />\n      </div>\n      <div className=\"star\" id=\"star-04\">\n        <Star />\n      </div>\n      <div className=\"star\" id=\"star-05\">\n        <Star />\n      </div>\n      <div className=\"star\" id=\"star-06\">\n        <Star />\n      </div>\n    </div>\n  )\n}\n\nconst Star = () => (\n  <svg viewBox=\"0 0 217.791 210.633\">\n    <path\n      fill=\"#FFFFE6\"\n      d=\"M94.15,77.97c0,0-2-54,10-73.5s23,28.5,25.5,72.5c0,0,69.197,4.589,86.5,21c13.637,12.934-61.5,31-87,33.5\n\tc-2,14.5-1.831,60.464-16.5,75.5c-20,20.5-25.5-50.5-23-78c-19-1.5-81.5-3.5-89-17.5S52.15,85.97,94.15,77.97z\"\n    />\n  </svg>\n)\n",
    "import React from \"react\"\n\nexport const CloseIcon = () => (\n    <svg viewBox=\"0 0 320 512\" width=\"32\" heiht=\"32\">\n      <path fill=\"currentColor\" d=\"M207.6 256l107.72-107.72c6.23-6.23 6.23-16.34 0-22.58l-25.03-25.03c-6.23-6.23-16.34-6.23-22.58 0L160 208.4 52.28 100.68c-6.23-6.23-16.34-6.23-22.58 0L4.68 125.7c-6.23 6.23-6.23 16.34 0 22.58L112.4 256 4.68 363.72c-6.23 6.23-6.23 16.34 0 22.58l25.03 25.03c6.23 6.23 16.34 6.23 22.58 0L160 303.6l107.72 107.72c6.23 6.23 16.34 6.23 22.58 0l25.03-25.03c6.23-6.23 6.23-16.34 0-22.58L207.6 256z\">\n      </path>\n    </svg>\n  )",
    "import React from \"react\"\n\nimport { Dialog } from \"./dialog.component.jsx\"\nimport { CloseIcon } from \"./CloseIcon.jsx\"\n\nexport const DialogWood = ({ title, spacingClasses, children, ...props }) => {\n  return (\n    <Dialog\n      requestCloseOnClickOutside={true}\n      insertTop={\n        <>\n          <div className=\"dialog-border-top\"></div>\n          <div className=\"dialog-title\">\n            <div className=\"dialog-title-text\">{title}</div>\n          </div>\n          <div className=\"dialog-close\" onClick={props.onRequestClose}>\n            <CloseIcon />\n          </div>\n        </>\n      }\n      insertBottom={<div className=\"dialog-border-bottom\"></div>}\n      insertLeft={<div className=\"dialog-border-left\"></div>}\n      insertRight={<div className=\"dialog-border-right\"></div>}\n      {...props}\n      className={`dialog-theme-wood ${\n        spacingClasses ||\n        \"dialog-spacing-10 dialog-spacing-fluid dialog-spacing-top-fixed\"\n      } ${props.className}`}\n    >\n      {children}\n    </Dialog>\n  )\n}\n",
    "/* eslint-disable import/max-dependencies */\nimport React from \"react\"\n\nimport { Image } from \"root/src/app/generic/Image.jsx\"\n\nimport { DialogWood } from \"root/src/app/dialog/dialog.wood.jsx\"\nimport {\n  symbolCoinUrl,\n  symbolDiamondUrl,\n} from \"root/src/app/symbols/symbols.js\"\n\nexport const RoundScoreRulesDialog = ({ dialogIsOpen, closeDialog }) => {\n  return (\n    <DialogWood\n      className=\"score-rules-dialog\"\n      isOpen={dialogIsOpen}\n      onRequestClose={closeDialog}\n      requestCloseOnClickOutside={true}\n      title=\"Score\"\n      spacingClasses=\"dialog-spacing-10 dialog-spacing-fixed\"\n    >\n      <>\n        <div className=\"dialog-box\">\n          <div className=\"dialog-label\">Combinaisons de dés</div>\n          <div className=\"columns\">\n            <div className=\"column\">\n              <div className=\"column-title\">Symbols identiques</div>\n              <span className=\"symbol-number\">Combo 3</span>\n              <span className=\"symbol-number\">Combo 4</span>\n              <span className=\"symbol-number\">Combo 5</span>\n              <span className=\"symbol-number\">Combo 6</span>\n              <span className=\"symbol-number\">Combo 7</span>\n              <span className=\"symbol-number\">Combo 8</span>\n            </div>\n            <div className=\"column\">\n              <div className=\"column-title\">Points</div>\n              <span className=\"points\">100</span>\n              <span className=\"points\">200</span>\n              <span className=\"points\">500</span>\n              <span className=\"points\">1000</span>\n              <span className=\"points\">2000</span>\n              <span className=\"points\">4000</span>\n            </div>\n          </div>\n        </div>\n        <div className=\"dialog-box\">\n          <div className=\"dialog-label\">Dés spéciaux</div>\n          <div className=\"columns\">\n            <div className=\"column\">\n              <div className=\"column-title\">Symbol</div>\n              <Image src={symbolCoinUrl} />\n              <Image src={symbolDiamondUrl} />\n            </div>\n            <div className=\"column\">\n              <div className=\"column-title\">Points</div>\n              <span className=\"points\">100</span>\n              <span className=\"points\">100</span>\n            </div>\n          </div>\n        </div>\n        <div className=\"dialog-box last\">\n          <div className=\"dialog-label\">Bonus coffre parfait</div>\n          <div className=\"columns\">\n            <div className=\"column\">\n              <div className=\"column-title\">Dés utilisés</div>\n              <span className=\"symbol-number\">8</span>\n            </div>\n            <div className=\"column\">\n              <div className=\"column-title\">Points</div>\n              <span className=\"points\">500</span>\n            </div>\n          </div>\n        </div>\n      </>\n    </DialogWood>\n  )\n}\n",
    "import React from \"react\"\n\nexport const useScoreParticles = ({\n  totalScore = 0,\n  onScoreParticleAdded = () => {},\n  onScoreParticleRemoved = () => {},\n  onScoreParticleMerged = () => {},\n} = {}) => {\n  const [score, scoreSetter] = React.useState(totalScore)\n  const [scoreParticles, scoreParticlesSetter] = React.useState([])\n\n  React.useEffect(() => {\n    scoreSetter(totalScore)\n  }, [totalScore])\n\n  const addScoreParticleToState = (scoreParticle) => {\n    // scoreParticlesSetter([...scoreParticles, scoreParticle])\n    // return () => {\n    //   scoreParticlesSetter(\n    //     scoreParticles.filter((scoreParticleCandidate) => scoreParticleCandidate !== scoreParticle),\n    //   )\n    // }\n    scoreParticlesSetter((scoreParticles) => {\n      const scoreParticlesWithParticle = [...scoreParticles, scoreParticle]\n      return scoreParticlesWithParticle\n    })\n    onScoreParticleAdded(scoreParticle)\n    let removed = false\n    return () => {\n      if (removed) return\n      removed = true\n      scoreParticlesSetter((scoreParticles) => {\n        const scoreParticlesWithoutParticle = scoreParticles.filter(\n          (scoreParticleCandidate) => scoreParticleCandidate !== scoreParticle,\n        )\n        return scoreParticlesWithoutParticle\n      })\n      scoreSetter((score) => score - scoreParticle.value)\n      onScoreParticleRemoved(scoreParticle)\n    }\n  }\n\n  const addScoreParticle = ({ id, value, ...rest }) => {\n    const scoreParticle = {\n      id,\n      value,\n      ...rest,\n      oncancel: () => {\n        // not really needed as long as code calling addScoreParticle\n        // does it in a useEffect and returns removeScoreParticleFromState\n        removeScoreParticleFromState()\n      },\n      onfinish: () => {\n        removeScoreParticleFromState()\n        onScoreParticleMerged(scoreParticle)\n        scoreSetter((score) => score + value)\n      },\n    }\n    const removeScoreParticleFromState = addScoreParticleToState(scoreParticle)\n    return removeScoreParticleFromState\n  }\n\n  const scoreInParticles = scoreParticles.reduce(\n    (previous, particle) => previous + particle.value,\n    0,\n  )\n  const scoreDisplayed = score - scoreInParticles\n\n  return [scoreParticles, addScoreParticle, scoreDisplayed]\n}\n",
    "import { getDocumentScroll, getStyleValue } from \"root/src/app/dom/dom.util.js\"\n\nexport const rotatePoint = (origin, point, degrees) => {\n  const radians = degreesToRadians(degrees)\n  const cosinus = Math.cos(radians)\n  const sinus = Math.sin(radians)\n  const run = point.x - origin.x\n  const rise = point.y - origin.y\n\n  return {\n    x: Math.round(cosinus * run + sinus * rise + origin.x),\n    y: Math.round(cosinus * rise - sinus * run + origin.y),\n  }\n}\n\nexport const getDistanceBetweenTwoPoints = (firstPoint, secondPoint) => {\n  const horizontalDiff = firstPoint.x - secondPoint.x\n  const verticalDiff = firstPoint.y - secondPoint.y\n  return Math.sqrt(\n    horizontalDiff * horizontalDiff + verticalDiff * verticalDiff,\n  )\n}\n\nconst getRectangleCenterPoint = ([\n  topLeft,\n  topRight,\n  bottomRight,\n  bottomLeft,\n]) => {\n  return {\n    x: (topLeft.x + topRight.x + bottomRight.x + bottomLeft.x) / 4,\n    y: (topLeft.y + topRight.y + bottomRight.y + bottomLeft.y) / 4,\n  }\n}\n\nexport const rotateRectangle = (\n  points,\n  degree,\n  origin = getRectangleCenterPoint(points),\n) => {\n  return points.map((point) => rotatePoint(origin, point, degree))\n}\n\nconst degreesToRadians = (degrees) => (degrees * Math.PI) / 180\n\nconst radiansToDegree = (radians) => Math.round(radians * (180 / Math.PI))\n\n// https://github.com/davidfig/intersects/blob/master/lineToLine.js\nexport const lineCollidesWithLine = (\n  [firstLineStartPoint, firstLineEndPoint],\n  [secondLineStartPoint, secondLineEndPoint],\n) => {\n  let unknownA =\n    (secondLineEndPoint.x - secondLineStartPoint.x) *\n      (firstLineStartPoint.y - secondLineStartPoint.y) -\n    (secondLineEndPoint.y - secondLineStartPoint.y) *\n      (firstLineStartPoint.x - secondLineStartPoint.x)\n  let unknownB =\n    (firstLineEndPoint.x - firstLineStartPoint.x) *\n      (firstLineStartPoint.y - secondLineStartPoint.y) -\n    (firstLineEndPoint.y - firstLineStartPoint.y) *\n      (firstLineStartPoint.x - secondLineStartPoint.x)\n  const denominator =\n    (secondLineEndPoint.y - secondLineStartPoint.y) *\n      (firstLineEndPoint.x - firstLineStartPoint.x) -\n    (secondLineEndPoint.x - secondLineStartPoint.x) *\n      (firstLineEndPoint.y - firstLineStartPoint.y)\n\n  // Test if Coincident\n  // If the denominator and numerator for the ua and ub are 0\n  // then the two lines are coincident.\n  if (unknownA === 0 && unknownB === 0 && denominator === 0) {\n    return false\n  }\n\n  // Test if Parallel\n  // If the denominator for the equations for ua and ub is 0\n  // then the two lines are parallel.\n  if (denominator === 0) {\n    return false\n  }\n\n  // test if line segments are colliding\n  unknownA /= denominator\n  unknownB /= denominator\n  const isIntersecting =\n    unknownA >= 0 && unknownA <= 1 && unknownB >= 0 && unknownB <= 1\n\n  return isIntersecting\n}\n\nexport const rotatedRectangleCollidesWithRotatedRectangle = (\n  firstRotatedRectangle,\n  secondRotatedRectangle,\n) =>\n  someRectangleSideLine(\n    firstRotatedRectangle,\n    (firstRotatedRectangleSideLine) =>\n      lineCollidesWithRectangle(\n        firstRotatedRectangleSideLine,\n        secondRotatedRectangle,\n      ),\n  )\n\n// https://riptutorial.com/html5-canvas/example/17710/are-line-segment-and-rectangle-colliding-\nexport const lineCollidesWithRectangle = (line, rectangle) => {\n  const lineIntersects = someRectangleSideLine(rectangle, (rectangleSideLine) =>\n    lineCollidesWithLine(line, rectangleSideLine),\n  )\n  if (lineIntersects) return true\n  // TODO: here we should check if line is contained inside the rectangle because in that case\n  // it's not intersecting but it's colliding\n  return false\n}\n\nconst someRectangleSideLine = (\n  [firstPoint, secondPoint, thirdPoint, fourthPoint],\n  predicate,\n) => {\n  const rectangleFirstLine = [firstPoint, secondPoint]\n  if (predicate(rectangleFirstLine)) return true\n  const rectangleSecondLine = [secondPoint, thirdPoint]\n  if (predicate(rectangleSecondLine)) return true\n  const rectangleThirdLine = [thirdPoint, fourthPoint]\n  if (predicate(rectangleThirdLine)) return true\n  const rectangleFourthLine = [fourthPoint, firstPoint]\n  if (predicate(rectangleFourthLine)) return true\n  return false\n}\n\n/**\nA matrix is an array composed by\n[\n  scale x,\n  skew y,\n  skew x,\n  scale y,\n  translate x,\n  translate y,\n]\n*/\n\n// https://stackoverflow.com/questions/14687318/how-to-find-new-coordinates-of-rectangle-after-rotation\nexport const getDomNodePoints = (domNode) => {\n  const transformMatrix = getStyleValue(domNode, \"transform\")\n  const transformOrigin = getStyleValue(domNode, \"transform-origin\")\n\n  domNode.style.transform = \"matrix(1, 0, 0, 1, 0, 0)\"\n  domNode.style.transformOrigin = \"0 0\"\n  const boundlingClientRectangle = domNode.getBoundingClientRect()\n  domNode.style.transform = transformMatrix\n  domNode.style.transformOrigin = transformOrigin\n\n  const documentScroll = getDocumentScroll(domNode)\n  const left = boundlingClientRectangle.left + documentScroll.x\n  const top = boundlingClientRectangle.top + documentScroll.y\n  const right = left + boundlingClientRectangle.width\n  const bottom = top + boundlingClientRectangle.height\n\n  const topLeftPoint = { x: left, y: top }\n  const topRightPoint = { x: right, y: top }\n  const bottomLeftPoint = { x: right, y: bottom }\n  const bottomRightPoint = { x: left, y: bottom }\n  const points = [\n    topLeftPoint,\n    topRightPoint,\n    bottomLeftPoint,\n    bottomRightPoint,\n  ]\n\n  if (transformMatrix) {\n    const matrix = transformMatrix\n      .slice(\"matrix(\".length, -1)\n      .split(\", \")\n      .map(parseFloat)\n\n    let rotateOrigin\n    // this code assume transform is only about rotation, no scaling, no translation\n    // it does not work if there is a transform origin for some reason\n    if (transformOrigin) {\n      const origin = transformOrigin.split(\" \").map(parseFloat)\n      rotateOrigin = {\n        x: left + origin[0],\n        y: top + origin[1],\n      }\n    } else {\n      // center of the element by default\n      rotateOrigin = {\n        x: left + (right - left) / 2,\n        y: top + (bottom - top) / 2,\n      }\n    }\n\n    const rotationInDegrees = matrixToRotationInDegrees(matrix)\n    return rotateRectangle(points, rotationInDegrees, rotateOrigin)\n  }\n\n  return points\n}\n\nconst matrixToRotationInDegrees = ([a, b]) => radiansToDegree(Math.atan2(b, a))\n\n// https://github.com/leeoniya/transformation-matrix-js/blob/3595d2b36aa1b0f593bdffdb786b9e832c50c3b0/src/matrix.js#L234\nexport const invertMatrix = ([a, b, c, d, e, f]) => {\n  const dt = a * d - b * c\n  return [\n    d / dt,\n    -b / dt,\n    -c / dt,\n    a / dt,\n    (c * f - d * e) / dt,\n    -(a * f - b * e) / dt,\n  ]\n}\n\nexport const transformPoint = ({ x, y }, [a, b, c, d, e, f]) => {\n  return {\n    x: x * a + y * c + e,\n    y: x * b + y * d + f,\n  }\n}\n\nexport const transformPoints = (points, matrix) => {\n  return points.map((point) => transformPoint(point, matrix))\n}\n",
    "// https://github.com/infusion/Rectangles.js/blob/master/rectangles.js\n\nimport { getDistanceBetweenTwoPoints } from \"./geometry.js\"\n\nexport const rectangleCollidesWithRectangle = (firstRectangle, secondRectangle) => {\n  // first left of second\n  if (firstRectangle.right <= secondRectangle.left) return false\n  // first right of second\n  if (firstRectangle.left >= secondRectangle.right) return false\n  // first above second\n  if (firstRectangle.bottom <= secondRectangle.top) return false\n  // first below second\n  if (firstRectangle.top >= secondRectangle.bottom) return false\n\n  return true\n}\n\nexport const rectangleInsideOf = (rectangle, parentRectangle) => {\n  let left = rectangle.left\n  let right = rectangle.right\n  const width = right - left\n  if (left < parentRectangle.left) {\n    left = parentRectangle.left\n    right = left + width\n  } else if (right > parentRectangle.right) {\n    left = parentRectangle.right - width\n    right = left + width\n  }\n\n  let top = rectangle.top\n  let bottom = rectangle.bottom\n  const height = bottom - top\n  if (top < parentRectangle.top) {\n    top = parentRectangle.top\n    bottom = top + height\n  } else if (bottom > parentRectangle.bottom) {\n    top = parentRectangle.bottom - height\n    bottom = top + height\n  }\n\n  return {\n    left,\n    right,\n    top,\n    bottom,\n  }\n}\n\nexport const rectangleRelativeTo = (rectangle, parentRectangle) => {\n  const left = rectangle.left - parentRectangle.left\n  const width = rectangle.right - rectangle.left\n  const right = left + width\n\n  const top = rectangle.top - parentRectangle.top\n  const height = rectangle.bottom - rectangle.top\n  const bottom = top + height\n\n  return {\n    left,\n    right,\n    top,\n    bottom,\n  }\n}\n\nexport const findRectangleCloserToRectangle = (rectangleCandidates, rectangle) => {\n  let smallestDistance = getDistanceBetweenRectangles(rectangle, rectangleCandidates[0])\n  return rectangleCandidates.reduce((prev, rectangleCandidate) => {\n    const distance = getDistanceBetweenRectangles(rectangle, rectangleCandidate)\n    if (distance < smallestDistance) {\n      smallestDistance = distance\n      return rectangleCandidate\n    }\n    return prev\n  })\n}\n\nconst getRectangleArea = ({ left, right, top, bottom }) => {\n  const width = right - left\n  const height = bottom - top\n  return width * height\n}\n\nexport const getRectangleCenterPoint = ({ left, right, top, bottom }) => {\n  return {\n    x: left + (right - left) / 2,\n    y: top + (bottom - top) / 2,\n  }\n}\n\nconst getDistanceBetweenRectangles = (firstRectangle, secondRectangle) => {\n  const firstRectangleCenterPoint = getRectangleCenterPoint(firstRectangle)\n  const secondRectangleCenterPoint = getRectangleCenterPoint(secondRectangle)\n  return getDistanceBetweenTwoPoints(firstRectangleCenterPoint, secondRectangleCenterPoint)\n}\n\nexport const getRectangleIntersectionRatio = (firstRectangle, secondRectangle) => {\n  const firstRectangleArea = getRectangleArea(firstRectangle)\n  const overlapArea = getRectangleArea(rectangleOverlapping(firstRectangle, secondRectangle))\n  return firstRectangleArea / overlapArea\n}\n\nexport const rectangleOverlapping = ({ left, right, top, bottom }, intersectingRectangle) => {\n  const overlapRectangle = {\n    left: left < intersectingRectangle.left ? intersectingRectangle.left : left,\n    right: right < intersectingRectangle.right ? right : intersectingRectangle.right,\n    top: top < intersectingRectangle.top ? intersectingRectangle.top : top,\n    bottom: bottom < intersectingRectangle.bottom ? bottom : intersectingRectangle.bottom,\n  }\n  return overlapRectangle\n}\n",
    "import {\n  rectangleInsideOf,\n  rectangleRelativeTo,\n  rectangleCollidesWithRectangle,\n  findRectangleCloserToRectangle,\n} from \"root/src/app/helper/rectangle.js\"\n\nimport { getDocumentScroll } from \"./dom.util.js\"\n\nexport const getDomNodeRectangle = (domNode) => {\n  const domNodeRect = domNode.getBoundingClientRect()\n  const documentScroll = getDocumentScroll(domNode)\n  const left = domNodeRect.left + documentScroll.x\n  const top = domNodeRect.top + documentScroll.y\n  const right = left + domNodeRect.width\n  const bottom = top + domNodeRect.height\n\n  return {\n    left: Math.floor(left),\n    top: Math.floor(top),\n    right: Math.floor(right),\n    bottom: Math.floor(bottom),\n  }\n}\n\nexport const rectangleToRectangleInsideDomNode = (rectangle, domNode) => {\n  const domNodeRectangle = getDomNodeRectangle(domNode)\n  const rectangleInsideDomNode = rectangleInsideOf(rectangle, domNodeRectangle)\n  return rectangleInsideDomNode\n}\n\nexport const rectangleRelativeToDomNode = (rectangle, domNode) => {\n  const domNodeRectangle = getDomNodeRectangle(domNode)\n  const rectangleInsideDomNode = rectangleInsideOf(rectangle, domNodeRectangle)\n  const rectangleInsideAndRelative = rectangleRelativeTo(\n    rectangleInsideDomNode,\n    domNodeRectangle,\n  )\n  return rectangleInsideAndRelative\n}\n\nexport const rectangleAbsoluteToDomNode = (rectangle, domNode) => {\n  const domNodeRectangle = getDomNodeRectangle(domNode)\n  const rectangleWidth = rectangle.right - rectangle.left\n  const rectangleHeight = rectangle.bottom - rectangle.top\n  const rectangleAbsolute = {\n    left: domNodeRectangle.left + rectangle.left,\n    top: domNodeRectangle.top + rectangle.top,\n    right: domNodeRectangle.left + rectangle.left + rectangleWidth,\n    bottom: domNodeRectangle.top + rectangle.top + rectangleHeight,\n  }\n  return rectangleAbsolute\n}\n\nexport const domNodeCollidesWithRectangle = (domNode, rectangle) => {\n  const domNodeRectangle = getDomNodeRectangle(domNode)\n  return rectangleCollidesWithRectangle(domNodeRectangle, rectangle)\n}\n\nexport const findDomNodeClosestToRectangle = (domNodeCandidates, rectangle) => {\n  const rectangleCandidates = domNodeCandidates.map((domNodeCandidate) =>\n    getDomNodeRectangle(domNodeCandidate),\n  )\n  const closestRectangle = findRectangleCloserToRectangle(\n    rectangleCandidates,\n    rectangle,\n  )\n  return domNodeCandidates[rectangleCandidates.indexOf(closestRectangle)]\n}\n\nexport const printPointInDocument = (\n  { x, y },\n  { color = \"yellow\", autoRemove = true, autoRemoveAfter = 2000 } = {},\n) => {\n  const div = document.createElement(\"div\")\n  div.style.position = \"absolute\"\n  div.style.zIndex = \"1000\"\n  div.style.left = `${x}px`\n  div.style.top = `${y}px`\n  div.style.width = \"5px\"\n  div.style.height = \"5px\"\n  div.style.background = color\n  div.style.border = \"1px solid red\"\n  document.body.appendChild(div)\n\n  const remove = () => {\n    document.body.removeChild(div)\n  }\n\n  let autoRemoveTimeout\n  if (autoRemove) {\n    autoRemoveTimeout = setTimeout(remove, autoRemoveAfter)\n  }\n\n  return () => {\n    remove()\n    clearTimeout(autoRemoveTimeout)\n  }\n}\n",
    "import React from \"react\"\n\nimport { getDomNodeRectangle } from \"root/src/app/dom/dom.position.js\"\nimport { getRectangleCenterPoint } from \"root/src/app/helper/rectangle.js\"\nimport { symbolToImageUrl } from \"root/src/app/symbols/symbols.js\"\n\nexport const RoundScoreParticle = ({\n  totalScoreDomNodeRef,\n  scoreParticle,\n  animationDelayGetter = () => 0,\n}) => {\n  if (scoreParticle.type === \"bonus\") {\n    return (\n      <ScoreParticleTreasure\n        totalScoreDomNodeRef={totalScoreDomNodeRef}\n        scoreParticle={scoreParticle}\n        animationDelayGetter={animationDelayGetter}\n      ></ScoreParticleTreasure>\n    )\n  }\n\n  if (scoreParticle.type === \"combo\") {\n    return (\n      <ScoreParticleCombo\n        scoreParticle={scoreParticle}\n        animationDelayGetter={animationDelayGetter}\n      ></ScoreParticleCombo>\n    )\n  }\n\n  return (\n    <ScoreParticlePerfect\n      scoreParticle={scoreParticle}\n      animationDelayGetter={animationDelayGetter}\n    ></ScoreParticlePerfect>\n  )\n}\n\nconst ScoreParticleTreasure = ({\n  totalScoreDomNodeRef,\n  scoreParticle,\n  animationDuration = 800,\n  animationDelayGetter,\n}) => {\n  const symbolUrl = symbolToImageUrl(scoreParticle.symbol)\n  const particleDomNodeRef = React.useRef()\n\n  React.useEffect(() => {\n    const particleDomNode = particleDomNodeRef.current\n    const totalScoreDomNode = totalScoreDomNodeRef.current\n    const particlePosition = domNodeToCenterPoint(\n      document.querySelector(`[data-chest-slot=\"${scoreParticle.chestSlot}\"]`),\n    )\n    return animateScoreParticleMoveToTotalScore({\n      particleDomNode,\n      totalScoreDomNode,\n      x: particlePosition.x,\n      y: particlePosition.y,\n      duration: animationDuration,\n      delay: animationDelayGetter(),\n      onfinish: scoreParticle.onfinish,\n      oncancel: scoreParticle.oncancel,\n    })\n  }, [])\n\n  return (\n    <svg\n      ref={particleDomNodeRef}\n      width=\"32\"\n      height=\"32\"\n      className=\"score-particle--symbol\"\n    >\n      <image href={symbolUrl} width=\"32\" height=\"32\" />,\n    </svg>\n  )\n}\n\nconst ScoreParticleCombo = ({\n  scoreParticle,\n  animationDuration = 800,\n  animationDelayGetter,\n}) => {\n  const [svgDomNodeRef, svgChildDomNodeRef] = useSvgFluidSizeEffect()\n\n  React.useEffect(() => {\n    const svgDomNode = svgDomNodeRef.current\n    const particlePosition = domNodeToCenterPoint(\n      document.querySelector(`.chest .box`),\n    )\n    return animateScoreParticlePopOnPlace({\n      particleDomNode: svgDomNode,\n      x: particlePosition.x,\n      y: particlePosition.y,\n      duration: animationDuration,\n      delay: animationDelayGetter(),\n      onfinish: scoreParticle.onfinish,\n      oncancel: scoreParticle.oncancel,\n    })\n  }, [])\n\n  return (\n    <svg ref={svgDomNodeRef} className=\"score-particle--perfect\">\n      <g ref={svgChildDomNodeRef}>\n        <text x=\"0\" y=\"0\" dominantBaseline=\"text-before-edge\">\n          Combo {scoreParticle.symbolCount}\n        </text>\n      </g>\n    </svg>\n  )\n}\n\nconst ScoreParticlePerfect = ({\n  scoreParticle,\n  animationDuration = 800,\n  animationDelayGetter,\n}) => {\n  const [svgDomNodeRef, svgChildDomNodeRef] = useSvgFluidSizeEffect()\n\n  React.useEffect(() => {\n    const svgDomNode = svgDomNodeRef.current\n    const particlePosition = domNodeToCenterPoint(\n      document.querySelector(`.chest .box`),\n    )\n    return animateScoreParticlePopOnPlace({\n      particleDomNode: svgDomNode,\n      x: particlePosition.x,\n      y: particlePosition.y,\n      duration: animationDuration,\n      delay: animationDelayGetter(),\n      onfinish: scoreParticle.onfinish,\n      oncancel: scoreParticle.oncancel,\n    })\n  }, [])\n\n  return (\n    <svg ref={svgDomNodeRef} className=\"score-particle--combo\">\n      <g ref={svgChildDomNodeRef}>\n        <text x=\"0\" y=\"0\" dominantBaseline=\"text-before-edge\">\n          Coffre parfait\n        </text>\n      </g>\n    </svg>\n  )\n}\n\nconst animateScoreParticleMoveToTotalScore = ({\n  particleDomNode,\n  totalScoreDomNode,\n  x,\n  y,\n  duration,\n  delay,\n  onfinish = () => {},\n  oncancel = () => {},\n}) => {\n  const particleDomNodeRectangle = getDomNodeRectangle(particleDomNode)\n  const totalScoreDomNodeRectangle = getDomNodeRectangle(totalScoreDomNode)\n\n  const particleWidth =\n    particleDomNodeRectangle.right - particleDomNodeRectangle.left\n  const particleHeight =\n    particleDomNodeRectangle.bottom - particleDomNodeRectangle.top\n  const startX = x - particleWidth / 2\n  const startY = y - particleHeight / 2\n  const intermediateX = startX\n  const intermediateY = startY - particleHeight * 1.1\n  const endX = totalScoreDomNodeRectangle.left\n  const endY = totalScoreDomNodeRectangle.top\n\n  particleDomNode.style.left = `${startX}px`\n  particleDomNode.style.top = `${startY}px`\n\n  const animation = particleDomNode.animate(\n    [\n      {\n        opacity: 0,\n        visibility: \"visible\",\n        transform: \"translate(0px, 0px)\",\n      },\n      {\n        offset: 0.1,\n        opacity: 1,\n      },\n      {\n        offset: 0.6,\n        opacity: 1,\n        transform: `translate(${intermediateX - startX}px, ${\n          intermediateY - startY\n        }px)`,\n      },\n      {\n        transform: `translate(${endX - startX}px, ${endY - startY}px)`,\n      },\n    ],\n    {\n      duration,\n      delay,\n      fill: \"forwards\",\n    },\n  )\n  animation.onfinish = () => {\n    onfinish()\n  }\n\n  return () => {\n    oncancel()\n    animation.cancel()\n  }\n}\n\nconst animateScoreParticlePopOnPlace = ({\n  particleDomNode,\n  x,\n  y,\n  duration,\n  delay,\n  onfinish = () => {},\n  oncancel = () => {},\n}) => {\n  const particleDomNodeRectangle = getDomNodeRectangle(particleDomNode)\n\n  const particleWidth =\n    particleDomNodeRectangle.right - particleDomNodeRectangle.left\n  const particleHeight =\n    particleDomNodeRectangle.bottom - particleDomNodeRectangle.top\n  const startX = x - particleWidth / 2\n  const startY = y - particleHeight / 2\n\n  particleDomNode.style.left = `${startX}px`\n  particleDomNode.style.top = `${startY}px`\n\n  const animation = particleDomNode.animate(\n    [\n      {\n        opacity: 0,\n        visibility: \"visible\",\n        transform: \"translate(0px, 0px)\",\n      },\n      {\n        offset: 0.1,\n        opacity: 1,\n      },\n      {\n        offset: 0.4,\n        opacity: 1,\n        transform: `scale(1.2)`,\n      },\n      {\n        // transform: `scale(0)`,\n      },\n    ],\n    {\n      duration,\n      delay,\n      fill: \"forwards\",\n    },\n  )\n  animation.onfinish = () => {\n    onfinish()\n  }\n\n  return () => {\n    oncancel()\n    animation.cancel()\n  }\n}\n\nconst useSvgFluidSizeEffect = () => {\n  const svgDomNodeRef = React.useRef()\n  const svgChildDomNodeRef = React.useRef()\n  React.useLayoutEffect(() => {\n    const svgDomNode = svgDomNodeRef.current\n    const svgChildDomNode = svgChildDomNodeRef.current\n    const svgChildDomNodeBox = svgChildDomNode.getBBox()\n\n    svgDomNode.setAttribute(\"width\", Math.ceil(svgChildDomNodeBox.width))\n    svgDomNode.setAttribute(\"height\", Math.ceil(svgChildDomNodeBox.height))\n  }, [])\n  return [svgDomNodeRef, svgChildDomNodeRef]\n}\n\nconst domNodeToCenterPoint = (domNode) => {\n  const domNodeRectangle = getDomNodeRectangle(domNode)\n  const centerPoint = getRectangleCenterPoint(domNodeRectangle)\n  return centerPoint\n}\n",
    "/* eslint-disable import/max-dependencies */\nimport React from \"react\"\n\nimport { useUpdateEffect } from \"root/src/app/hooks.js\"\nimport {\n  useChestSlots,\n  useDices,\n  useCurrentCardId,\n} from \"root/src/app/main.store.js\"\nimport { chestSlotContentToSymbol } from \"root/src/app/chest/chest.util.js\"\nimport { cardIdToCard, isAnimalsCard } from \"root/src/app/cards/cards.js\"\nimport {\n  symbolIsCoin,\n  symbolIsDiamond,\n  symbolIsMonkey,\n  symbolIsParrot,\n  SYMBOLS,\n  SYMBOL_COIN,\n  SYMBOL_DIAMOND,\n} from \"root/src/app/symbols/symbols.js\"\nimport { getScoreAndPerfectBonus } from \"root/src/app/round/computeRoundScore.js\"\nimport { useSwordChallengeOnGoing } from \"root/src/app/round/round.selectors.js\"\n\nexport const useRoundScoreParticleEffects = ({ addScoreParticle }) => {\n  useCoinEffect({ addScoreParticle })\n  useDiamondEffect({ addScoreParticle })\n  useComboEffect({ addScoreParticle })\n  usePerfectEffect({ addScoreParticle })\n}\n\nconst useCoinEffect = ({ addScoreParticle }) => {\n  const chestSlots = useChestSlots()\n  const dices = useDices()\n  const effectSuspended = useSwordChallengeOnGoing()\n\n  Object.keys(chestSlots).forEach((chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n    const chestSlotSymbol = chestSlotContentToSymbol(chestSlotContent, dices)\n    const chestSlotContentIsCoin =\n      chestSlotSymbol && symbolIsCoin(chestSlotSymbol)\n\n    useUpdateEffect(() => {\n      if (effectSuspended) return undefined\n\n      if (!chestSlotContentIsCoin) return undefined\n\n      return addScoreParticle({\n        id: `chest-slot-${chestSlot}-coin`,\n        type: \"bonus\",\n        value: 100,\n        symbol: SYMBOL_COIN,\n        chestSlot,\n      })\n    }, [effectSuspended, chestSlotContentIsCoin])\n  })\n}\n\nconst useDiamondEffect = ({ addScoreParticle }) => {\n  const chestSlots = useChestSlots()\n  const dices = useDices()\n  const effectSuspended = useSwordChallengeOnGoing()\n\n  Object.keys(chestSlots).forEach((chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n    const chestSlotSymbol = chestSlotContentToSymbol(chestSlotContent, dices)\n    const chestSlotContentIsDiamond =\n      chestSlotSymbol && symbolIsDiamond(chestSlotSymbol)\n\n    useUpdateEffect(() => {\n      if (effectSuspended) return undefined\n\n      if (!chestSlotContentIsDiamond) return undefined\n\n      return addScoreParticle({\n        id: `chest-slot-${chestSlot}-diamond`,\n        type: \"bonus\",\n        value: 100,\n        symbol: SYMBOL_DIAMOND,\n        chestSlot,\n      })\n    }, [effectSuspended, chestSlotContentIsDiamond])\n  })\n}\n\nconst usePerfectEffect = ({ addScoreParticle }) => {\n  const chestSlots = useChestSlots()\n  const dices = useDices()\n  const effectSuspended = useSwordChallengeOnGoing()\n  const perfect = React.useMemo(() => {\n    const symbols = []\n    Object.keys(chestSlots).forEach((chestSlot) => {\n      const chestSlotContent = chestSlots[chestSlot]\n      if (!chestSlotContent) {\n        return\n      }\n\n      const chestSlotHasDice = chestSlotContent.type === \"dice\"\n      if (!chestSlotHasDice) {\n        return\n      }\n\n      symbols.push(chestSlotContentToSymbol(chestSlotContent, dices))\n    })\n    const { perfectBonus } = getScoreAndPerfectBonus(symbols)\n    return Boolean(perfectBonus)\n  }, [chestSlots, dices])\n\n  useUpdateEffect(() => {\n    if (effectSuspended) return undefined\n\n    if (!perfect) return undefined\n\n    return addScoreParticle({\n      id: \"perfect\",\n      type: \"perfect\",\n      value: 500,\n    })\n  }, [effectSuspended, perfect])\n}\n\n// on voudrait aussi déclencher une animation\n// sur les chest slots faisant partie de la combo\n\nconst useComboEffect = ({ addScoreParticle }) => {\n  const chestSlots = useChestSlots()\n  const dices = useDices()\n  const currentCardId = useCurrentCardId()\n  const currentCard = cardIdToCard(currentCardId)\n  const effectSuspended = useSwordChallengeOnGoing()\n\n  SYMBOLS.forEach((symbol) => {\n    const chestSlotsWithThatSymbol = []\n    Object.keys(chestSlots).forEach((chestSlot) => {\n      const chestSlotContent = chestSlots[chestSlot]\n      const chestSlotSymbol = chestSlotContentToSymbol(chestSlotContent, dices)\n\n      if (!chestSlotSymbol) {\n        return\n      }\n\n      if (compareSymbols(chestSlotSymbol, symbol, currentCard)) {\n        chestSlotsWithThatSymbol.push(chestSlot)\n      }\n    })\n    const symbolCount = chestSlotsWithThatSymbol.length\n    const comboScore = COMBO_SCORES[symbolCount] || 0\n    const comboScorePreviousRef = React.useRef(comboScore)\n    // si la combo vient se se produire -> animation\n    // si la combo part -> on annule l'ancienne\n    // si la combo increases -> annule l'ancienne + joue la nouvelle\n    // si la combo decrease -> on annule juste l'ancienne\n    // attention avec la carte animals on a 2 fois la combo singe et perroquet\n    // donc il ne faudra en faire que une\n    const animationRef = React.useRef(() => {})\n\n    useUpdateEffect(() => {\n      const comboScorePrevious = comboScorePreviousRef.current\n      // const comboFound = Boolean(!comboScorePrevious && comboScore)\n      const comboIncreased = Boolean(\n        comboScorePrevious && comboScore && comboScorePrevious < comboScore,\n      )\n      const comboDecreased = Boolean(\n        comboScorePrevious && comboScore && comboScorePrevious > comboScore,\n      )\n      // const comboLost = Boolean(comboScorePrevious && !comboScore)\n      comboScorePreviousRef.current = comboScore\n\n      // ne tiens pas compte des parrot lorsqu'ils sont transformé\n      // en singe par la carte animals\n      if (isAnimalsCard(currentCard) && symbolIsParrot(symbol)) return undefined\n\n      if (effectSuspended) return undefined\n\n      if (!comboScore) return undefined\n\n      if (comboDecreased) {\n        animationRef.current()\n        return undefined\n      }\n\n      if (comboIncreased) {\n        animationRef.current()\n      }\n\n      const id = `${symbolCount}-${symbol}-combo`\n      const value = comboScore - comboScorePrevious\n      const cleanupScoreParticle = addScoreParticle({\n        id,\n        type: \"combo\",\n        value,\n        symbol,\n        symbolCount,\n      })\n      animationRef.current = cleanupScoreParticle\n\n      const chestSlotAnimationCleanups = chestSlotsWithThatSymbol.map(\n        (chestSlotWithThatSymbol) => {\n          const chestSlotDomNodeSymbol =\n            document.querySelector(\n              `[data-chest-slot=\"${chestSlotWithThatSymbol}\"] image`,\n            ) ||\n            // symbol coming from coin or diamond card have a different html structure\n            // (they use an <img> tag)\n            document.querySelector(\n              `[data-chest-slot=\"${chestSlotWithThatSymbol}\"] img`,\n            )\n          // attention: l'animation de combo\n          // peut etre delay\n          // et dans ce cas on voudrait que le scaling se fasse en meme temps ?\n          const animation = chestSlotDomNodeSymbol.animate(\n            [\n              {\n                transform: \"scale(1)\",\n                transformOrigin: \"center center\",\n              },\n              {\n                transform: \"scale(1.2)\",\n                transformOrigin: \"center center\",\n              },\n              {\n                transform: \"scale(1)\",\n                transformOrigin: \"center center\",\n              },\n            ],\n            { duration: 400 },\n          )\n          return () => {\n            animation.cancel()\n          }\n        },\n      )\n      return () => {\n        cleanupScoreParticle()\n        chestSlotAnimationCleanups.forEach((chestSlotAnimationCleanup) => {\n          chestSlotAnimationCleanup()\n        })\n      }\n    }, [effectSuspended, currentCard, comboScore])\n  })\n}\n\nconst compareSymbols = (leftSymbol, rightSymbol, currentCard) => {\n  if (leftSymbol === rightSymbol) {\n    return true\n  }\n\n  if (isAnimalsCard(currentCard)) {\n    if (symbolIsMonkey(leftSymbol) && symbolIsParrot(rightSymbol)) {\n      return true\n    }\n    if (symbolIsParrot(leftSymbol) && symbolIsMonkey(rightSymbol)) {\n      return true\n    }\n  }\n\n  return false\n}\n\nconst COMBO_SCORES = {\n  3: 100,\n  4: 200,\n  5: 500,\n  6: 1000,\n  7: 2000,\n  8: 4000,\n}\n",
    "/* eslint-disable import/max-dependencies */\nimport React from \"react\"\n\nimport { useBecomes } from \"root/src/app/hooks.js\"\nimport { useSignal, useSignalState } from \"root/src/app/helper/signal.js\"\nimport {\n  useCurrentCardId,\n  useCurrentCardActivated,\n  useScoreMarked,\n  useAnimationsDisabled,\n} from \"root/src/app/main.store.js\"\nimport {\n  useRoundScore,\n  useSymbolsInChest,\n  useSwordQuantityRequired,\n} from \"root/src/app/round/round.selectors.js\"\nimport { ValueWithAnimatedTransition } from \"root/src/app/animation/ValueWithAnimatedTransition.jsx\"\n\nimport {\n  cardIdToCard,\n  isPirateCard,\n  isSwordChallengeCard,\n} from \"root/src/app/cards/cards.js\"\nimport { useDialogState } from \"root/src/app/dialog/dialog.component.jsx\"\n\nimport { SYMBOL_SWORD } from \"root/src/app/symbols/symbols.js\"\nimport { countSymbol } from \"root/src/app/round/computeRoundScore.js\"\nimport { StarRain } from \"root/src/app/game-design/StarRain.jsx\"\nimport { RoundScoreRulesDialog } from \"root/src/app/round/RoundScoreRulesDialog.jsx\"\nimport { useScoreParticles } from \"root/src/app/score/useScoreParticles.js\"\nimport { RoundScoreParticle } from \"root/src/app/round/RoundScoreParticle.jsx\"\nimport { useRoundScoreParticleEffects } from \"root/src/app/round/useRoundScoreParticleEffects.js\"\n\nconst { useState, useEffect } = React\n\nexport const RoundScore = () => {\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const swordChallengeOngoing = useSwordChallengeOngoing()\n\n  return (\n    <div className={`score-area ${swordChallengeOngoing ? \"animated\" : \"\"}`}>\n      {currentCard ? <ScoreDisplay /> : null}\n    </div>\n  )\n}\n\nconst useSwordChallengeOngoing = () => {\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const symbolsInChest = useSymbolsInChest()\n  const quantityKept = countSymbol(symbolsInChest, SYMBOL_SWORD)\n  const quantityRequired = useSwordQuantityRequired()\n\n  if (!isSwordChallengeCard(currentCard)) {\n    return false\n  }\n\n  const challengeWon = quantityKept >= quantityRequired\n  return !challengeWon\n}\n\nconst ScoreDisplay = () => {\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const scoreMarked = useScoreMarked()\n  const swordChallengeOngoing = useSwordChallengeOngoing()\n  const [scoreDialogIsOpen, openScoreDialog, closeScoreDialog] =\n    useDialogState()\n\n  const animationsDisabled = useAnimationsDisabled()\n\n  return (\n    <>\n      {isPirateCard(currentCard) ? <DoubleScoreIndicator /> : null}\n      {scoreMarked ? <StarRain /> : null}\n      <button\n        className={`round-score ${swordChallengeOngoing ? \"hidden\" : \"\"}`}\n        onClick={openScoreDialog}\n      >\n        {animationsDisabled ? (\n          <ScoreWithoutAnimation />\n        ) : (\n          <ScoreWithAnimations />\n        )}\n      </button>\n      {isSwordChallengeCard(currentCard) ? <NegativeScoreSign /> : null}\n      <RoundScoreRulesDialog\n        dialogIsOpen={scoreDialogIsOpen}\n        closeDialog={closeScoreDialog}\n      />\n    </>\n  )\n}\n\nconst ScoreWithAnimations = () => {\n  const roundScore = useRoundScore()\n  const roundScoreDomNodeRef = React.useRef()\n  const [scoreParticleMergedListener, scoreParticleMergedEmitter] = useSignal()\n  const [scoreParticles, addScoreParticle, scoreDisplayed] = useScoreParticles({\n    totalScore: roundScore,\n    onScoreParticleMerged: scoreParticleMergedEmitter,\n  })\n\n  useRoundScoreParticleEffects({ addScoreParticle })\n  useScoreParticleMergeEffect({\n    roundScoreDomNodeRef,\n    scoreParticleMergedListener,\n  })\n\n  const minDelayBetweenParticles = 600\n  const lastScoreParticleMsRef = React.useRef(null)\n  const animationDelayGetter = () => {\n    const lastScoreParticleMs = lastScoreParticleMsRef.current\n    const animationDelay = scoreParticleAnimationDelayGetter(\n      lastScoreParticleMs,\n      minDelayBetweenParticles,\n    )\n    lastScoreParticleMsRef.current = Date.now() + animationDelay\n    return animationDelay\n  }\n\n  return (\n    <>\n      <span ref={roundScoreDomNodeRef} className=\"round-score--value\">\n        <ValueWithAnimatedTransition\n          value={scoreDisplayed}\n          condition={(value, previousValue) => value > previousValue}\n          duration={600}\n        />\n      </span>\n      {scoreParticles.map((scoreParticle) => {\n        return (\n          <RoundScoreParticle\n            key={scoreParticle.id}\n            totalScoreDomNodeRef={roundScoreDomNodeRef}\n            scoreParticle={scoreParticle}\n            animationDelayGetter={animationDelayGetter}\n          />\n        )\n      })}\n    </>\n  )\n}\n\nconst scoreParticleAnimationDelayGetter = (\n  lastScoreParticleMs,\n  minDelayBetweenParticles,\n) => {\n  if (!lastScoreParticleMs) {\n    return 0\n  }\n\n  const nowMs = Date.now()\n  const msEllapsedSinceLastParticle = nowMs - lastScoreParticleMs\n  const msToWait = minDelayBetweenParticles - msEllapsedSinceLastParticle\n  if (msToWait <= 0) {\n    return 0\n  }\n\n  return msToWait\n}\n\nconst ScoreWithoutAnimation = () => {\n  const roundScore = useRoundScore()\n  return <span className=\"round-score--value\">{roundScore}</span>\n}\n\nconst useScoreParticleMergeEffect = ({\n  roundScoreDomNodeRef,\n  scoreParticleMergedListener,\n}) => {\n  const scoreParticleMerged = useSignalState(scoreParticleMergedListener)\n\n  React.useEffect(() => {\n    if (!scoreParticleMerged) {\n      return undefined\n    }\n    const roundScoreDomNode = roundScoreDomNodeRef.current\n    return animateScoreParticleMerge({\n      roundScoreDomNode,\n    })\n  }, [scoreParticleMerged])\n}\n\nconst animateScoreParticleMerge = ({\n  roundScoreDomNode,\n  duration = 500,\n  easing = \"ease-in-out\",\n}) => {\n  const animation = roundScoreDomNode.animate(\n    [\n      {\n        transform: \"scale(1.8)\",\n      },\n    ],\n    {\n      duration,\n      easing,\n    },\n  )\n  return () => {\n    animation.cancel()\n  }\n}\n\nconst DoubleScoreIndicator = () => {\n  const currentCardActivated = useCurrentCardActivated()\n  if (!currentCardActivated) {\n    return <div style={{ display: \"none\" }} className=\"pirate-hook\"></div>\n  }\n  return <div className=\"pirate-hook\"></div>\n}\n\nconst NegativeScoreSign = () => {\n  const roundScore = useRoundScore()\n\n  const symbolsInChest = useSymbolsInChest()\n  const quantityKept = countSymbol(symbolsInChest, SYMBOL_SWORD)\n  const quantityRequired = useSwordQuantityRequired()\n  const quantityRequiredArray = new Array(quantityRequired).fill(\"\")\n  const challengeWon = quantityKept >= quantityRequired\n\n  const swordNumberIncreased = useBecomes(\n    (quantityKeptPrevious) => quantityKeptPrevious < quantityKept,\n    [quantityKept],\n  )\n\n  const [swordSliceAnimation, swordSliceAnimationSetter] = useState(false)\n\n  useEffect(() => {\n    if (swordNumberIncreased) {\n      swordSliceAnimationSetter(true)\n    }\n  }, [swordNumberIncreased])\n\n  useEffect(() => {\n    if (swordSliceAnimation) {\n      const timeout = setTimeout(() => {\n        swordSliceAnimationSetter(false)\n      }, 300)\n      return () => {\n        clearTimeout(timeout)\n      }\n    }\n    return () => {}\n  }, [swordSliceAnimation])\n\n  return (\n    <>\n      <div className={`ropes ${challengeWon ? \"challenge-won\" : \"\"}`}>\n        {quantityRequiredArray.map((value, index) => {\n          if (quantityKept >= index + 1)\n            return (\n              <div\n                key={index}\n                className={`rope rope-${index + 1} cut-rope`}\n              ></div>\n            )\n          return <div key={index} className={`rope rope-${index + 1}`}></div>\n        })}\n      </div>\n      {swordSliceAnimation && quantityKept <= quantityRequired ? (\n        <div className=\"sword-slice\">\n          <div className=\"triangle-left\"></div>\n          <div className=\"triangle-right\"></div>\n        </div>\n      ) : null}\n      <div\n        className={`negative-round-score rotate-${quantityKept} ${\n          challengeWon ? \"removed\" : \"\"\n        }`}\n      >\n        {roundScore}\n      </div>\n    </>\n  )\n}\n",
    "export const diceSize = 50\n",
    "/* eslint-disable import/max-dependencies */\nimport React from \"react\"\n\nimport { useSignalState } from \"root/src/app/helper/signal.js\"\nimport { useCurrentCardId, useChestSlots } from \"root/src/app/main.store.js\"\nimport { Image } from \"root/src/app/generic/Image.jsx\"\nimport { useThreeSkullsOrMoreInCursedArea } from \"root/src/app/round/round.selectors.js\"\n\nimport { symbolToImageUrl } from \"root/src/app/symbols/symbols.js\"\nimport { cardIdToCard, isChestCard } from \"root/src/app/cards/cards.js\"\nimport { RoundScore } from \"root/src/app/round/RoundScore.jsx\"\nimport { diceSize } from \"root/src/app/dices/dicePosition.js\"\n\nconst cursedGridImageUrl = new URL(\"./cursed-grid.png\", import.meta.url)\n\nexport const Chest = ({ chestRef, diceOverChestListener }) => {\n  const chestSlots = useChestSlots()\n  const threeSkullsOrMoreInCursedArea = useThreeSkullsOrMoreInCursedArea()\n  const diceOverChest = useSignalState(diceOverChestListener)\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const protectedByChestCard =\n    threeSkullsOrMoreInCursedArea && isChestCard(currentCard)\n\n  return (\n    <div className=\"chest\">\n      <div\n        ref={chestRef}\n        className={`dice-area ${isChestCard(currentCard) ? \"glow\" : \"\"}`}\n        style={{\n          ...(diceOverChest ? { outline: \"2px dotted\" } : {}),\n        }}\n      >\n        <div className=\"box\">\n          {Object.keys(chestSlots).map((chestSlot) => (\n            <div className=\"slot\" key={chestSlot} data-chest-slot={chestSlot}>\n              <ChestSlot chestSlotContent={chestSlots[chestSlot]} />\n            </div>\n          ))}\n        </div>\n        <div className=\"top-left-corner\"></div>\n        <div className=\"top-right-corner\"></div>\n        <div className=\"bottom-left-corner\"></div>\n        <div className=\"bottom-right-corner\"></div>\n        {threeSkullsOrMoreInCursedArea && !protectedByChestCard ? (\n          <CursedCover />\n        ) : null}\n      </div>\n      <RoundScore />\n    </div>\n  )\n}\n\nexport const compareChestSlotContent = (\n  chestSlotContentLeft,\n  chestSlotContentRight,\n) => {\n  const leftHasContent = Boolean(chestSlotContentLeft)\n  const rightHasContent = Boolean(chestSlotContentRight)\n  if (!leftHasContent && !rightHasContent) {\n    return true\n  }\n  if (leftHasContent !== rightHasContent) {\n    return false\n  }\n\n  const leftType = chestSlotContentLeft.type\n  const rightType = chestSlotContentRight.type\n  if (leftType !== rightType) {\n    return false\n  }\n\n  return chestSlotContentLeft.value === chestSlotContentRight.value\n}\n\nconst ChestSlot = ({ chestSlotContent }) => {\n  const currentCard = cardIdToCard(useCurrentCardId())\n\n  if (!chestSlotContent) {\n    return null\n  }\n\n  if (chestSlotContent.type === \"symbol\") {\n    const symbol = chestSlotContent.value\n    return (\n      <button\n        className=\"dice\"\n        style={{\n          width: diceSize,\n          height: diceSize,\n          color: \"#eaeaea\",\n          margin: \"5px\",\n          backgroundColor: currentCard.color1,\n          borderColor: currentCard.color2,\n          borderWidth: \"2px\",\n          borderStyle: \"solid\",\n        }}\n      >\n        <Image\n          src={symbolToImageUrl(symbol)}\n          draggable=\"false\"\n          style={{\n            width: \"100%\",\n            height: \"100%\",\n          }}\n        />\n      </button>\n    )\n  }\n\n  // it's a dice\n  return null\n}\n\nconst CursedCover = () => {\n  return (\n    <div className=\"cursed-cover\">\n      <Image draggable=\"false\" src={cursedGridImageUrl} alt=\"cursed-cover\" />\n    </div>\n  )\n}\n",
    "export const cardsRules = {\n  \"animals\": {\n    name: \"Animaux\",\n    rule:\n      \"Les singes et les perroquest obtenus sur les dés comptent comme un même symbol dans une combinaison.\",\n    more:\n      \"Par exemple 2 perroquets et 3 singes forment une conbinaison de 5 dés identiques, soit 500 points.\",\n  },\n  \"chest\": {\n    name: \"Coffre au trésor\",\n    rule:\n      'Lorsque le joueur sauvegarde ses dés, grâce à la carte \"Coffre au trésor\" les dés sont protégés du mauvais sort.',\n    more:\n      \"Ainsi même lorsque le joueur obtient 3 têtes de morts, son tour prends fin, mais il peut marquer les points totalisés grâce aux dés sauvegardés!\",\n  },\n  \"coin\": {\n    name: \"Pièce d'or\",\n    rule:\n      \"Le joueur commence son tour avec un symbol pièce d'or. Il rapporte des points aussi bien dans une combinaison de dés que comme simple pièce (+100).\",\n  },\n  \"diamond\": {\n    name: \"Diamant\",\n    rule:\n      \"Le joueur commence son tour avec un symbol diamant. Il rapporte des points aussi bien dans une combinaison de dés que comme simple diamant (+100).\",\n  },\n  \"pirate\": {\n    name: \"Capitaine des pirates\",\n    rule:\n      \"Grâce à l'aide du capitaine, tous les points comptabilisés pendant ce tour sont doublés !\",\n    //   more: \"Si le joueur doit se rendre sur l'île de la tête de mort, ses adversaires perdent 200 points pour chaque tête de mort révélée.\"\n  },\n  \"witch\": {\n    name: \"Sorcière\",\n    rule:\n      \"Avec ses potions magiques, la sorcière permet exceptionnellement au joueur de relancer, une fois, un dé avec une tête de mort.\",\n  },\n  \"1skull\": {\n    name: \"Tête de mort\",\n    rule: \"Le tour du joueur débute avec un symbole tête de mort.\",\n  },\n  \"2skulls\": {\n    name: \"2 têtes de mort\",\n    rule: \"Le tour du joueur débute avec 2 symboles tête de mort.\",\n  },\n  \"2sword-challenge\": {\n    name: \"Bateau pirate\",\n    rule:\n      \"Le joueur doit obtenir au minimum 2 symbols sabres. Si il y parvient, il gagne +300 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -300 points pour ce tour, quelque soit son résultat aux dés.\",\n    more:\n      \"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points.\",\n    // more: \"Celui qui découvre un bateau pirate ne peut pas aller sur l'île de la tête de mort: un joueur qui obtiendrait 4 têtes de mort ou plus lors de son premier lancer perdrait donc immédiatement son tour.\"\n  },\n  \"3sword-challenge\": {\n    name: \"Bateau pirate\",\n    rule:\n      \"Le joueur doit obtenir au minimum 3 symbols sabres. Si il y parvient, il gagne +500 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -500 points pour ce tour, quelque soit son résultat aux dés.\",\n    more:\n      \"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points.\",\n    // more: \"Celui qui découvre un bateau pirate ne peut pas aller sur l'île de la tête de mort: un joueur qui obtiendrait 4 têtes de mort ou plus lors de son premier lancer perdrait donc immédiatement son tour.\"\n  },\n  \"4sword-challenge\": {\n    name: \"Bateau pirate\",\n    rule:\n      \"Le joueur doit obtenir au minimum 4 symbols sabres. Si il y parvient, il gagne +1000 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -1000 points pour ce tour, quelque soit son résultat aux dés.\",\n    more:\n      \"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points.\",\n    // more: \"Celui qui découvre un bateau pirate ne peut pas aller sur l'île de la tête de mort: un joueur qui obtiendrait 4 têtes de mort ou plus lors de son premier lancer perdrait donc immédiatement son tour.\"\n  },\n}\n",
    "import React from \"react\"\n\nimport { Image } from \"root/src/app/generic/Image.jsx\"\nimport { cardsRules } from \"root/src/app/cards/cards-rules.js\"\nimport { DialogWood } from \"root/src/app/dialog/dialog.wood.jsx\"\nimport { cardToImageUrl } from \"root/src/app/cards/cards.js\"\n\nexport const CardRulesDialog = ({ dialogIsOpen, closeDialog, card }) => {\n  const cardRules = cardsRules[card.type]\n\n  return (\n    <DialogWood\n      className=\"card-rules-dialog\"\n      isOpen={dialogIsOpen}\n      onRequestClose={closeDialog}\n      requestCloseOnClickOutside={true}\n      title=\"Carte\"\n    >\n      {cardRules ? (\n        <>\n          <div className=\"dialog-label\">{cardRules.name}</div>\n          <div style={{ textAlign: \"center\" }}>\n            <Image\n              className=\"current-card\"\n              src={cardToImageUrl(card)}\n              width=\"150\"\n              alt={card.type}\n            />\n          </div>\n          <div className=\"text-rule\">{cardRules.rule}</div>\n          {cardRules.more ? (\n            <div className=\"text-rule\">{cardRules.more}</div>\n          ) : null}\n        </>\n      ) : (\n        \"No rule\"\n      )}\n    </DialogWood>\n  )\n}\n",
    "import React from \"react\"\n\nimport { Image } from \"root/src/app/generic/Image.jsx\"\nimport { cardToSmallImageUrl } from \"root/src/app/cards/cards.js\"\n\nconst SmallCardForward = ({ card, ...props }, ref) => {\n  return (\n    <div\n      className=\"card current-card\"\n      ref={ref}\n      width=\"55\"\n      height=\"55\"\n      style={{\n        backgroundColor: card.color1,\n        borderColor: card.color2,\n      }}\n      {...props}\n    >\n      <Image\n        src={cardToSmallImageUrl(card)}\n        alt={card.type}\n        width=\"55\"\n        height=\"55\"\n      />\n    </div>\n  )\n}\n\nexport const SmallCard = React.forwardRef(SmallCardForward)\n",
    "import React from \"react\"\n\nimport { Image } from \"root/src/app/generic/Image.jsx\"\nimport { useCurrentCardId } from \"root/src/app/main.store.js\"\nimport {\n  useSymbolsInChest,\n  useSwordQuantityRequired,\n} from \"root/src/app/round/round.selectors.js\"\nimport { cardIdToCard, isSwordChallengeCard } from \"root/src/app/cards/cards.js\"\nimport { SYMBOL_SWORD, symbolSwordUrl } from \"root/src/app/symbols/symbols.js\"\nimport { countSymbol } from \"root/src/app/round/computeRoundScore.js\"\n\nconst swordsDisabledImageUrl = new URL(\"./swords-disabled.png\", import.meta.url)\n\nexport const SwordChallengeIndicator = () => {\n  const currentCardId = useCurrentCardId()\n  const symbolsInChest = useSymbolsInChest()\n  const quantityRequired = useSwordQuantityRequired()\n\n  if (!currentCardId) {\n    return null\n  }\n  const currentCard = cardIdToCard(currentCardId)\n  if (!isSwordChallengeCard(currentCard)) {\n    return null\n  }\n\n  const quantityKept = countSymbol(symbolsInChest, SYMBOL_SWORD)\n  const quantityRequiredArray = new Array(quantityRequired).fill(\"\")\n\n  return (\n    <div className=\"sword-challenge-indicators\">\n      {quantityRequiredArray.map((value, index) => {\n        if (quantityKept >= index + 1) return <SwordIconActivated key={index} />\n        return <SwordIconDisabled key={index} />\n      })}\n    </div>\n  )\n}\n\nconst SwordIconActivated = () => (\n  <div className=\"sword-icon\">\n    <Image src={symbolSwordUrl} />\n  </div>\n)\n\nconst SwordIconDisabled = () => (\n  <div className=\"sword-icon disabled\">\n    <Image src={swordsDisabledImageUrl} />\n  </div>\n)\n",
    "import React from \"react\"\n\nimport {\n  useCurrentCardId,\n  useCurrentCardActivated,\n} from \"root/src/app/main.store.js\"\nimport { Image } from \"root/src/app/generic/Image.jsx\"\nimport { useCurrentPlayer } from \"root/src/app/round/round.selectors.js\"\nimport { cardDefaultUrl, cardIdToCard } from \"root/src/app/cards/cards.js\"\nimport { CardRulesDialog } from \"root/src/app/header/CardRulesDialog.jsx\"\nimport { SmallCard } from \"root/src/app/cards/SmallCard.jsx\"\nimport { useAnimateTransitionUsingJs } from \"root/src/app/animation/useAnimateTransition.js\"\n\nimport { SwordChallengeIndicator } from \"./SwordChallengeIndicator.jsx\"\n\nexport const Header = ({ openScoreboard, headerSmallCardRef }) => {\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const currentCardActivated = useCurrentCardActivated()\n\n  return (\n    <div className=\"header\">\n      <div\n        className=\"card-container\"\n        style={{ opacity: currentCardActivated ? \"1\" : \"0\" }}\n      >\n        <div className=\"small-card\">\n          {currentCard ? (\n            <HeaderSmallCard\n              headerSmallCardRef={headerSmallCardRef}\n              currentCard={currentCard}\n            />\n          ) : (\n            <BackCard />\n          )}\n        </div>\n        {currentCardActivated && <SwordChallengeIndicator />}\n      </div>\n      <CurrentPlayer openScoreboard={openScoreboard} />\n      <TotalScore />\n    </div>\n  )\n}\n\nconst HeaderSmallCard = ({ headerSmallCardRef, currentCard }) => {\n  const [cardDialogIsOpen, cardDialogIsOpenSetter] = React.useState(false)\n  const openCardDialog = () => {\n    cardDialogIsOpenSetter(true)\n  }\n\n  const closeCardDialog = () => {\n    cardDialogIsOpenSetter(false)\n  }\n\n  return (\n    <>\n      <SmallCard\n        onClick={() => {\n          openCardDialog()\n        }}\n        card={currentCard}\n        ref={headerSmallCardRef}\n      />\n      <CardRulesDialog\n        card={currentCard}\n        dialogIsOpen={cardDialogIsOpen}\n        closeDialog={closeCardDialog}\n      />\n    </>\n  )\n}\n\nconst BackCard = () => {\n  return (\n    <div\n      className=\"card default-card\"\n      style={{\n        backgroundImage: `url(${cardDefaultUrl})`,\n        backgroundSize: \"217px\",\n      }}\n    ></div>\n  )\n}\n\nconst CurrentPlayer = ({ openScoreboard }) => {\n  const player = useCurrentPlayer()\n\n  return (\n    <Image\n      onClick={openScoreboard}\n      className=\"avatar\"\n      src={player && player.character.img}\n      alt=\"player\"\n      style={{\n        borderColor: (player && player.character.color) || \"white\",\n      }}\n      width=\"55\"\n      height=\"55\"\n    />\n  )\n}\n\nconst TotalScore = () => {\n  const player = useCurrentPlayer()\n  const totalScore = player.score\n  const totalScoreAnimation = useAnimateTransitionUsingJs(totalScore, {\n    duration: 1200,\n    timingFunction: (progress) => 1 - Math.pow(1 - progress, 5),\n  })\n\n  return (\n    <div className=\"total-score\">\n      <span\n        className=\"score\"\n        style={{\n          backgroundColor: (player && player.character.color) || \"white\",\n        }}\n      >\n        {totalScoreAnimation ? totalScoreAnimation.value : totalScore}\n      </span>\n    </div>\n  )\n}\n",
    "import { getDomNodeRectangle } from \"root/src/app/dom/dom.position.js\"\nimport {\n  rotateRectangle,\n  rotatedRectangleCollidesWithRotatedRectangle,\n} from \"root/src/app/helper/geometry.js\"\n\nimport { diceSize } from \"./dicePosition.js\"\n\n// margin because of rotation\nconst diceSpacing = diceSize / 8\n\nexport const rollDices = (dices, { rolledAreaDomNode }) => {\n  const rolledAreaRectangle = getDomNodeRectangle(rolledAreaDomNode)\n  const rolledAreaWidth = rolledAreaRectangle.right - rolledAreaRectangle.left\n  const rolledAreaHeight = rolledAreaRectangle.bottom - rolledAreaRectangle.top\n  const rectangleAllowed = {\n    left: diceSpacing,\n    right: rolledAreaWidth - (diceSize + diceSpacing),\n    top: diceSpacing,\n    bottom: rolledAreaHeight - (diceSize + diceSpacing),\n  }\n\n  const otherRotatedRectangles = []\n  const getRandomAndCollisionFreeInfo = (dice) => {\n    let count = 0\n    const next = () => {\n      const rectangleCandidate = getRandomDiceRectangle(dice, rectangleAllowed)\n      const rotation = getDiceRandomRotation()\n      const rotatedRectangleCandidate = rotateRectangle(\n        rectangleCandidate,\n        rotation,\n      )\n      const someOtherDiceCollides = otherRotatedRectangles.some(\n        (otherRotatedRectangle) =>\n          rotatedRectangleCollidesWithRotatedRectangle(\n            rotatedRectangleCandidate,\n            otherRotatedRectangle,\n          ),\n      )\n      if (\n        !someOtherDiceCollides ||\n        // better return a collisioning rectangle than an infinite loop\n        count > 50\n      ) {\n        return {\n          rectangle: rectangleCandidate,\n          rotation,\n          rotatedRectangle: rotatedRectangleCandidate,\n        }\n      }\n      count++\n      return next()\n    }\n    return next()\n  }\n\n  dices.forEach((dice, index) => {\n    dice.visibleFaceIndex = getDiceRandomFace(dice)\n\n    const { rectangle, rotation, rotatedRectangle } =\n      getRandomAndCollisionFreeInfo(dice)\n    otherRotatedRectangles.push(rotatedRectangle)\n\n    dice.rolledAreaZIndex = index + 1\n    dice.rolledAreaPosition = rectangle[0]\n    dice.rotation = rotation\n  })\n\n  return dices\n}\n\nconst getRandomDiceRectangle = (dice, rectangleAllowed) => {\n  const positionCandidate = {\n    x: getRandomNumberBetweenInterval(\n      rectangleAllowed.left,\n      rectangleAllowed.right,\n    ),\n    y: getRandomNumberBetweenInterval(\n      rectangleAllowed.top,\n      rectangleAllowed.bottom,\n    ),\n  }\n\n  const topLeft = {\n    x: positionCandidate.x,\n    y: positionCandidate.y,\n  }\n  const topRight = {\n    x: positionCandidate.x + diceSize,\n    y: positionCandidate.y,\n  }\n  const bottomRight = {\n    x: positionCandidate.x + diceSize,\n    y: positionCandidate.y + diceSize,\n  }\n  const bottomLeft = {\n    x: positionCandidate.x,\n    y: positionCandidate.y + diceSize,\n  }\n\n  const diceRectangle = [topLeft, topRight, bottomRight, bottomLeft]\n  return diceRectangle\n}\n\nconst getDiceRandomRotation = () => getRandomNumberBetweenInterval(-35, 35)\n\nconst getDiceRandomFace = (dice) =>\n  getRandomNumberBetweenInterval(0, dice.faces.length - 1)\n\nconst getRandomNumberBetweenInterval = (min, max) =>\n  Math.floor(Math.random() * (max - min + 1) + min)\n",
    "import React from \"react\"\n\nimport {\n  createAction,\n  useDiceRolledIds,\n  useCurrentCardId,\n} from \"root/src/app/main.store.js\"\nimport { Image } from \"root/src/app/generic/Image.jsx\"\nimport {\n  useRollDiceAllowed,\n  useHasNeverRolled,\n  useThreeSkullsOrMoreInCursedArea,\n} from \"root/src/app/round/round.selectors.js\"\nimport { rollDices } from \"root/src/app/dices/rollDices.js\"\nimport { cardIdToCard, isChestCard } from \"root/src/app/cards/cards.js\"\nimport { symbolSkullUrl } from \"root/src/app/symbols/symbols.js\"\n\nexport const ButtonRoll = ({ rolledAreaRef }) => {\n  const rollDiceAllowed = useRollDiceAllowed()\n  const diceRolledIds = useDiceRolledIds()\n  const hasNeverRolled = useHasNeverRolled()\n  const roll = useRoll()\n\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const threeSkullsOrMoreInCursedArea = useThreeSkullsOrMoreInCursedArea()\n\n  const disabledNotEnoughDice = diceRolledIds.length < 2 && !hasNeverRolled\n  const disabledChestCard =\n    threeSkullsOrMoreInCursedArea && isChestCard(currentCard)\n  const disabled = disabledNotEnoughDice || disabledChestCard\n\n  if (rollDiceAllowed) {\n    return (\n      <div className=\"roll-action\">\n        <button\n          onClick={() => {\n            roll(rolledAreaRef.current)\n          }}\n          disabled={disabled}\n        >\n          Lancer\n          {disabledNotEnoughDice && !disabledChestCard && (\n            <span className=\"button-subtitle\">(au moins 2 dés !)</span>\n          )}\n        </button>\n        {disabledChestCard && (\n          <Image src={symbolSkullUrl} className=\"skull-symbol\" />\n        )}\n      </div>\n    )\n  }\n\n  return null\n}\n\nconst useRoll = createAction((state, rolledAreaDomNode) => {\n  const { dices, rollCount, diceRolledIds } = state\n  const diceToRollIds = rollCount === 0 ? Object.keys(dices) : diceRolledIds\n  const dicesToRoll = diceToRollIds.map((diceRolledId) => dices[diceRolledId])\n\n  rollDices(dicesToRoll, { rolledAreaDomNode })\n  return {\n    ...state,\n    rollCount: rollCount + 1,\n    witchUncursedDiceId: null,\n    diceRolledIds: dicesToRoll.map((dice) => dice.id),\n    dices: { ...dices },\n  }\n})\n",
    "import React from \"react\"\n\nimport {\n  useMarkScore,\n  useEndPlayerRound,\n} from \"root/src/app/round/round.actions.js\"\nimport { Image } from \"root/src/app/generic/Image.jsx\"\nimport {\n  useMarkScoreAllowed,\n  useMarkScoreButtonVisible,\n  useStartNextRoundAllowed,\n  useRoundScore,\n  useThreeSkullsOrMoreInCursedArea,\n  useSwordChallengeOnGoing,\n  useSymbolsInChest,\n} from \"root/src/app/round/round.selectors.js\"\nimport { symbolSkullUrl } from \"root/src/app/symbols/symbols.js\"\n\nimport { ButtonRoll } from \"./ButtonRoll.jsx\"\n\nexport const Footer = ({ onRoundOver, rolledAreaRef }) => {\n  return (\n    <div className=\"footer actions\">\n      <ButtonRoll rolledAreaRef={rolledAreaRef} />\n      <ButtonMarkScore />\n      <ButtonEndRound onRoundOver={onRoundOver} />\n    </div>\n  )\n}\n\nconst ButtonMarkScore = () => {\n  const roundScore = useRoundScore()\n  const markScore = useMarkScore()\n  const markScoreAllowed = useMarkScoreAllowed()\n  const markScoreButtonVisible = useMarkScoreButtonVisible()\n\n  const sign = roundScore < 0 ? \"-\" : \"+\"\n\n  if (markScoreButtonVisible) {\n    return (\n      <div className=\"collect-action\">\n        <button\n          onClick={() => {\n            markScore(roundScore)\n          }}\n          disabled={!markScoreAllowed}\n        >\n          <span>Collecter</span>\n          <span className=\"score\">\n            {sign} {Math.abs(roundScore)}\n          </span>\n        </button>\n        {!markScoreAllowed && (\n          <Image src={symbolSkullUrl} className=\"skull-symbol\" />\n        )}\n      </div>\n    )\n  }\n\n  return null\n}\n\nconst ButtonEndRound = ({ onRoundOver }) => {\n  const startNextRoundAllowed = useStartNextRoundAllowed()\n  const endPlayerRound = useEndPlayerRound()\n  const roundScore = useRoundScore()\n  const threeSkullsOrMoreInCursedArea = useThreeSkullsOrMoreInCursedArea()\n  const swordChallengeOnGoing = useSwordChallengeOnGoing()\n  const symbolsInChest = useSymbolsInChest()\n\n  const computeReason = () => {\n    // TODO: case of the treasure chest card => some score will be marked even if 3 skulls (canMarkScore ?)\n    if (threeSkullsOrMoreInCursedArea) return \"3-skulls\"\n    // sword challenge is ongoing means is not resolved\n    // if the user clicks on 'Terminer mon tour' with an unresolved challenge, it means that he failed it\n    if (swordChallengeOnGoing) return \"chalenge-failed\"\n    return \"user-collect\"\n  }\n\n  if (startNextRoundAllowed) {\n    return (\n      <div className=\"next-round-action\">\n        <button\n          onClick={() => {\n            // ici on sait que le round est terminé\n            // on dit a ceux que ça intéresse comment ça s'est passé (scoreboard)\n            // qui va alors animer le fait qu'on a marqué un score, fail sword challenge\n            // ou qu'on s'est tapé 3 tete\n            endPlayerRound()\n            onRoundOver({\n              reason: computeReason(),\n              value: roundScore,\n              symbolsInChest,\n            })\n          }}\n        >\n          Terminer mon tour\n        </button>\n      </div>\n    )\n  }\n\n  return null\n}\n",
    "import React from \"react\"\n\nimport { Image } from \"root/src/app/generic/Image.jsx\"\nimport {\n  useCurrentCardId,\n  useCurrentCardActivated,\n} from \"root/src/app/main.store.js\"\nimport {\n  cardIdToCard,\n  isOneSkullCard,\n  isTwoSkullsCard,\n  isWitchCard,\n} from \"root/src/app/cards/cards.js\"\nimport { diceSize } from \"root/src/app/dices/dicePosition.js\"\nimport { symbolSkullUrl } from \"root/src/app/symbols/symbols.js\"\n\nconst wichLabelImageUrl = new URL(\"./witch-label.png\", import.meta.url)\n\nexport const SkullIsland = ({ cursedAreaRef }) => {\n  const currentCard = cardIdToCard(useCurrentCardId())\n\n  return (\n    <div className=\"skull-island\">\n      {isWitchCard(currentCard) ? <UncurseDiceLabel /> : null}\n      <div className=\"bottle\">\n        <div className=\"area\" ref={cursedAreaRef}>\n          {isOneSkullCard(currentCard) ? (\n            <ExtraSkull card={currentCard} />\n          ) : null}\n          {isTwoSkullsCard(currentCard) ? (\n            <>\n              <ExtraSkull card={currentCard} />\n              <ExtraSkull card={currentCard} />\n            </>\n          ) : null}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst ExtraSkull = ({ card }) => {\n  return (\n    <button\n      className=\"dice\"\n      style={{\n        width: diceSize,\n        height: diceSize,\n        color: \"#eaeaea\",\n        margin: \"1px 5px\",\n        backgroundColor: card.color1,\n        borderColor: card.color2,\n        borderWidth: \"2px\",\n      }}\n    >\n      <Image\n        src={symbolSkullUrl}\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n        }}\n      />\n    </button>\n  )\n}\n\nconst UncurseDiceLabel = () => {\n  const currentCardActivated = useCurrentCardActivated()\n\n  if (!currentCardActivated) {\n    return <Image style={{ display: \"none\" }} src={wichLabelImageUrl} />\n  }\n\n  return (\n    <div className=\"witch-label\">\n      <Image src={wichLabelImageUrl} />\n      <svg\n        x=\"0px\"\n        y=\"0px\"\n        width=\"156.083px\"\n        height=\"208.667px\"\n        viewBox=\"0 0 156.083 208.667\"\n      >\n        <path\n          id=\"path_01\"\n          fill=\"none\"\n          stroke=\"#E4AD30\"\n          d=\"M8.406,107.82\n\tc2.541,2.178,2.375,2.875,14.25,3.5c14.782,0.778,19.26-11.965,19.26-11.965S47.918,88,40.251,72.917s-18.916,4.583-9.083,8.167\n\ts27.759-1.338,35.142-12.417C74.75,56,77.583,45.333,79.25,37S78.477,15.833,66.31,3.833\"\n        />\n        <path\n          id=\"path_02\"\n          fill=\"none\"\n          stroke=\"#E4AD30\"\n          d=\"M44.031,110.094\n\tc0,0,1,1.313-4.438,3.344s-14.244,7.281-32.125-2\"\n        />\n        <path\n          id=\"path_03\"\n          fill=\"none\"\n          stroke=\"#E4AD30\"\n          d=\"M42.125,103.688\n\tc0,0,1.313,6.594-9.313,8.625S10.281,108.719,9.406,101\"\n        />\n        <path\n          id=\"path_04\"\n          fill=\"none\"\n          stroke=\"#E4AD30\"\n          d=\"M33.114,112.253c0,0,39.886-19.253,43.011,24.747\n\tc0.372,0.447-0.959,1.208-2.542,1.625\"\n        />\n      </svg>\n    </div>\n  )\n}\n",
    "import React from \"react\"\nimport ReactDOM from \"react-dom\"\n\nexport const Portal = ({ parent, children }) => {\n  if (!parent) {\n    return null\n  }\n  return ReactDOM.createPortal(<>{children}</>, parent)\n}\n",
    "export const stringifyClassNames = (classNames) => {\n  return classNames.join(\" \")\n}\n\nexport const stringifyTransformations = ({ rotate, scale, translate }) => {\n  return [\n    ...(rotate ? [`rotate(${rotate}deg)`] : []),\n    ...(scale && scale !== 1 ? [`scale(${scale})`] : []),\n    ...(translate ? [`translate(${translate})`] : []),\n  ].join(\"\")\n}\n",
    "export const throttle = (fn, ms = 60, { trailing = false } = {}) => {\n  let timeout\n  let previousMs\n\n  const throttled = (...args) => {\n    clearTimeout(timeout)\n    const nowMs = Date.now()\n    // la fonction a été appelé il y a previous\n    if (previousMs) {\n      // ca fait combien de temps\n      const msEllapsedSincePreviousCall = nowMs - previousMs\n\n      if (msEllapsedSincePreviousCall < ms) {\n        // pas suffisament de temps écoulé\n        if (trailing) {\n          const remaining = ms - msEllapsedSincePreviousCall\n          timeout = setTimeout(() => throttled(...args), remaining)\n        }\n      } else {\n        // suffisament de temps écoulé\n        previousMs = nowMs\n        fn(...args)\n      }\n    } else {\n      // calls right now\n      previousMs = nowMs\n      fn(...args)\n    }\n  }\n\n  const cancel = () => {\n    clearTimeout(timeout)\n  }\n  throttled.cancel = cancel\n\n  return throttled\n}\n",
    "import { createLogger } from \"@jsenv/logger\"\n\nimport { throttle } from \"root/src/app/helper/throttle.js\"\nimport { addDomEventListener } from \"root/src/app/dom/dom.util.js\"\n\nexport const enableDragGesture = (\n  domNode,\n  {\n    logLevel = \"warn\",\n    onGrip = () => {},\n    onLongGrip = () => {},\n    // in case it's passed we will call it only on fast and precise click\n    onClick = () => {},\n    onDrag = () => {},\n    onRelease = () => {},\n    onCancel = () => {},\n    longGripMs = 300,\n  },\n) => {\n  const logger = createLogger({ logLevel })\n  // a small move is a drag gesture but\n  // not yet a drag intent\n  // long grip or big enough move set drag intent to true\n  let dragIntent = false\n  let dragIntentTimeout\n  let pendingGesture\n  let removeMoveListener = () => {}\n  let removeReleaseListener = () => {}\n  let cancelMoveThrottling = () => {}\n\n  logger.debug(\"enable drag on\", domNode)\n\n  // disable native drag\n  // putting draggable=\"false\" on the element is not enough for firefox\n  const removeDragstartListener = addDomEventListener(\n    domNode,\n    \"dragstart\",\n    (dragstartEvent) => {\n      dragstartEvent.preventDefault()\n    },\n  )\n\n  const removeMousedownListener = addDomEventListener(\n    domNode,\n    \"mousedown\",\n    (mousedownEvent) => {\n      const isRightClick = mousedownEvent.which === 3\n      if (isRightClick) {\n        logger.debug(\"ignore right click\")\n        return\n      }\n\n      handleGrip(mouseEventToPagePosition(mousedownEvent), mousedownEvent)\n      const mousemoveThrottled = throttle((mousemoveEvent) => {\n        handleMove(mouseEventToPagePosition(mousemoveEvent), mousemoveEvent)\n      })\n      cancelMoveThrottling = () => mousemoveThrottled.cancel()\n      removeMoveListener = addDomEventListener(\n        document,\n        \"mousemove\",\n        mousemoveThrottled,\n      )\n      removeReleaseListener = addDomEventListener(\n        document,\n        \"mouseup\",\n        (mouseupEvent) => {\n          removeReleaseListener()\n          removeMoveListener()\n          handleRelease(mouseEventToPagePosition(mouseupEvent), mouseupEvent)\n        },\n      )\n    },\n    { passive: true },\n  )\n  const removeTouchstartListener = addDomEventListener(\n    domNode,\n    \"touchstart\",\n    (touchstartEvent) => {\n      handleGrip(touchEventToPagePosition(touchstartEvent), touchstartEvent)\n      const touchmoveThrottled = throttle((touchmoveEvent) => {\n        handleMove(touchEventToPagePosition(touchmoveEvent), touchmoveEvent)\n      })\n      cancelMoveThrottling = () => touchmoveThrottled.cancel()\n      removeMoveListener = addDomEventListener(\n        document,\n        \"touchmove\",\n        touchmoveThrottled,\n      )\n      removeReleaseListener = addDomEventListener(\n        document,\n        \"touchend\",\n        (touchendEvent) => {\n          removeReleaseListener()\n          removeMoveListener()\n          handleRelease(touchEventToPagePosition(touchendEvent), touchendEvent)\n        },\n      )\n    },\n    { passive: true },\n  )\n  const removeClickListener = addDomEventListener(\n    domNode,\n    \"click\",\n    (clickEvent) => {\n      if (!dragIntent && dropEffect === \"none\") {\n        onClick(clickEvent)\n      }\n    },\n  )\n\n  let pointerPositionPrevious\n  let domNodeStartPosition\n  let gripPointerPosition\n  let longGripTimeout\n  let dropEffect\n  const handleGrip = (pointerPosition, event) => {\n    logger.debug(\"gripping node at\", pointerPosition)\n    pendingGesture = true\n    dropEffect = \"none\"\n    gripPointerPosition = pointerPosition\n    pointerPositionPrevious = pointerPosition\n    domNodeStartPosition = domNodeToPagePosition(domNode)\n\n    onGrip({\n      x: domNodeStartPosition.x,\n      y: domNodeStartPosition.y,\n      event,\n    })\n    longGripTimeout = setTimeout(handleLongGrip, longGripMs)\n  }\n\n  const handleLongGrip = () => {\n    dragIntent = true\n    onLongGrip()\n  }\n\n  const handleMove = (pointerPosition, event) => {\n    if (\n      pointerPositionPrevious.x === pointerPosition.x &&\n      pointerPositionPrevious.y === pointerPosition.y\n    ) {\n      logger.debug(\"no real move\")\n      return\n    }\n    pointerPositionPrevious = pointerPosition\n\n    const gripHorizontalShift = gripPointerPosition.x - domNodeStartPosition.x\n    const gripVerticalShit = gripPointerPosition.y - domNodeStartPosition.y\n    const movePosition = {\n      // il y a un décalage entre le bord de l'élément et l'endroit ou l'on l'attrape\n      // ce décalage doit continuer d'exister pour savoir ou on place l'élément en position fixed\n      x: pointerPosition.x - gripHorizontalShift,\n      y: pointerPosition.y - gripVerticalShit,\n    }\n    const relativeX = pointerPosition.x - gripPointerPosition.x\n    const relativeY = pointerPosition.y - gripPointerPosition.y\n\n    logger.debug(\"move node at\", movePosition)\n    onDrag({\n      event,\n      ...movePosition,\n      relativeX,\n      relativeY,\n      setDropEffect: (value) => {\n        dropEffect = value\n      },\n    })\n  }\n\n  const handleRelease = (pointerPosition, event) => {\n    logger.debug(\"releasing node\")\n    pendingGesture = false\n    clearTimeout(longGripTimeout)\n\n    const gripHorizontalShift = gripPointerPosition.x - domNodeStartPosition.x\n    const gripVerticalShit = gripPointerPosition.y - domNodeStartPosition.y\n\n    onRelease({\n      event,\n      dropEffect,\n      x: pointerPositionPrevious.x - gripHorizontalShift,\n      y: pointerPositionPrevious.y - gripVerticalShit,\n    })\n    // setTimeout is to ensure the click cannot happen just after mouseup\n    dragIntentTimeout = setTimeout(() => {\n      dragIntent = false\n    })\n  }\n\n  const handleCancel = (event) => {\n    if (pendingGesture) {\n      logger.debug(\"cancelling drag\", event)\n      pendingGesture = false\n      onCancel({\n        event,\n      })\n    }\n  }\n\n  return (event) => {\n    removeDragstartListener()\n    removeClickListener()\n    removeMousedownListener()\n    removeTouchstartListener()\n    removeMoveListener()\n    removeReleaseListener()\n    clearTimeout(longGripTimeout)\n    clearTimeout(dragIntentTimeout)\n    cancelMoveThrottling()\n    handleCancel(event)\n  }\n}\n\nconst domNodeToPagePosition = (domNode) => {\n  const rect = domNode.getBoundingClientRect()\n  return {\n    x: rect.left,\n    y: rect.top,\n  }\n}\n\nconst mouseEventToPagePosition = (mouseEvent) => {\n  return {\n    x: mouseEvent.pageX,\n    y: mouseEvent.pageY,\n  }\n}\n\nconst touchEventToPagePosition = (touchEvent) => {\n  const firstChangedTouch = touchEvent.changedTouches[0]\n  return {\n    x: firstChangedTouch.pageX,\n    y: firstChangedTouch.pageY,\n  }\n}\n",
    "/* eslint-disable import/max-dependencies */\n/* eslint-disable no-nested-ternary */\nimport React from \"react\"\n\nimport { usePrevious } from \"root/src/app/hooks.js\"\nimport { Portal } from \"root/src/app/generic/Portal.jsx\"\nimport {\n  rectangleToRectangleInsideDomNode,\n  printPointInDocument,\n} from \"root/src/app/dom/dom.position.js\"\nimport { stringifyTransformations } from \"root/src/app/helper/render.js\"\nimport {\n  useDiceDomNode,\n  useDiceDomNodeSetter,\n  useMainDomNode,\n} from \"root/src/app/dom/dom.main.jsx\"\nimport { diceSize } from \"root/src/app/dices/dicePosition.js\"\nimport { diceIsOnSkull, diceToVisibleSymbol } from \"root/src/app/dices/dices.js\"\nimport { enableDragGesture } from \"root/src/app/drag/drag.js\"\nimport { symbolToImageUrl } from \"root/src/app/symbols/symbols.js\"\nimport { useDiceKeptIds } from \"root/src/app/round/round.selectors.js\"\n\nconst { useEffect, useState } = React\n\nexport const Dice = ({\n  dice,\n  diceAnimation,\n  anmationDebug = false,\n  parentNode,\n  zIndex,\n  x,\n  y,\n  rotation,\n  draggable,\n  onDiceClick,\n  onDiceDrag,\n  onDiceDrop,\n  onDiceDragEnd,\n  disapear,\n  appear,\n  traceUpdate = false,\n}) => {\n  if (import.meta.dev && traceUpdate) {\n    useTraceUpdate(\n      {\n        dice,\n        diceAnimation,\n        anmationDebug,\n        parentNode,\n        zIndex,\n        x,\n        y,\n        rotation,\n        draggable,\n        onDiceClick,\n        onDiceDrag,\n        onDiceDrop,\n        onDiceDragEnd,\n        disapear,\n        appear,\n      },\n      (propsUpdated) => {\n        console.log(`dice ${dice.id} re-render because:`, propsUpdated)\n      },\n    )\n  }\n\n  // state from contexts\n  const mainDomNode = useMainDomNode()\n  const diceDomNode = useDiceDomNode(dice.id)\n  const diceDomNodeSetter = useDiceDomNodeSetter(dice.id)\n  const diceKeptIds = useDiceKeptIds()\n  const isDiceKept = diceKeptIds.includes(dice.id)\n\n  // local states\n  const [diceGripped, diceGrippedSetter] = useState(false)\n  const [dragGesture, setDragGesture] = useState(null)\n\n  // si y'a une animation alors reste dans ton conteneur\n  // le temps qu'elle se finisse\n  const parentNodePrevious = usePrevious(parentNode)\n  const portalParentNode = diceAnimation ? parentNodePrevious : parentNode\n\n  useEffect(() => {\n    if (!draggable || !diceDomNode || !mainDomNode) {\n      return () => {}\n    }\n\n    let bigMoveOccured = false\n    const disableDragGesture = enableDragGesture(diceDomNode, {\n      onGrip: () => {\n        diceGrippedSetter(true)\n      },\n      onClick: (clickEvent) => {\n        onDiceClick(dice, clickEvent)\n      },\n      onDrag: ({ x, y, relativeX, relativeY, setDropEffect }) => {\n        const diceDesiredRect = {\n          left: x,\n          right: x + diceSize,\n          top: y,\n          bottom: y + diceSize,\n        }\n        const diceRectangle = rectangleToRectangleInsideDomNode(\n          diceDesiredRect,\n          mainDomNode,\n        )\n        setDragGesture({ x: diceRectangle.left, y: diceRectangle.top })\n        bigMoveOccured =\n          bigMoveOccured || Math.abs(relativeX) > 10 || Math.abs(relativeY) > 10\n        if (bigMoveOccured) {\n          onDiceDrag(dice, {\n            relativeX,\n            relativeY,\n            setDropEffect,\n            diceRectangle,\n          })\n        }\n      },\n      onRelease: ({ dropEffect, x, y }) => {\n        if (dropEffect !== \"none\") {\n          const diceRectangle = {\n            left: x,\n            right: x + diceSize,\n            top: y,\n            bottom: y + diceSize,\n          }\n          onDiceDrop(dice, {\n            diceRectangle,\n          })\n        }\n        diceGrippedSetter(false)\n        setDragGesture(null)\n        onDiceDragEnd(dice)\n      },\n      onCancel: () => {\n        diceGrippedSetter(false)\n        setDragGesture(null)\n        onDiceDragEnd(dice)\n      },\n    })\n    return () => {\n      disableDragGesture()\n    }\n  }, [\n    draggable,\n    diceDomNode,\n    mainDomNode,\n    onDiceClick,\n    onDiceDrag,\n    onDiceDrop,\n    onDiceDragEnd,\n  ])\n\n  useEffect(() => {\n    if (!diceAnimation || !diceDomNode) return () => {}\n    const { from, to, onfinish } = diceAnimation\n\n    if (anmationDebug) {\n      printPointInDocument(from)\n      printPointInDocument(to)\n    }\n    const transform = `translate(${Math.floor(to.x - from.x)}px, ${Math.floor(\n      to.y - from.y,\n    )}px)`\n    const animation = diceDomNode.parentNode.animate(\n      [\n        {\n          transform,\n        },\n      ],\n      {\n        duration: 500,\n        fill: \"forwards\",\n        easing: \"cubic-bezier(0, 0.55, 0.45, 1)\",\n      },\n    )\n    animation.onfinish = onfinish\n    return () => {\n      animation.cancel()\n    }\n  }, [diceDomNode, diceAnimation])\n\n  const onSkull = diceIsOnSkull(dice)\n  const diceX =\n    diceAnimation && diceAnimation.from\n      ? diceAnimation.from.x\n      : dragGesture\n      ? dragGesture.x\n      : x\n\n  const diceY =\n    diceAnimation && diceAnimation.from\n      ? diceAnimation.from.y\n      : dragGesture\n      ? dragGesture.y\n      : y\n\n  const diceZIndex = dragGesture || diceAnimation ? 1000 : zIndex\n\n  // if (dice.id === 4 && !dragGesture) {\n  //   console.log({\n  //     diceX,\n  //     diceY,\n  //     diceAnimation: Boolean(diceAnimation),\n  //     dragGesture: Boolean(dragGesture),\n  //   })\n  // }\n\n  return (\n    <Portal parent={portalParentNode}>\n      <svg\n        data-dice-id={dice.id}\n        className=\"dice\"\n        onClick={\n          draggable\n            ? undefined\n            : (clickEvent) => {\n                onDiceClick(dice, clickEvent)\n              }\n        }\n        style={{\n          width: diceSize,\n          height: diceSize,\n          left: `${diceX}px`,\n          top: `${diceY}px`,\n          zIndex: diceZIndex,\n          cursor: draggable ? (diceGripped ? \"grabbing\" : \"grab\") : undefined,\n          position: dragGesture || diceAnimation ? \"fixed\" : undefined,\n        }}\n      >\n        <g\n          ref={diceDomNodeSetter}\n          className={\n            disapear\n              ? \"dice-cursed-disapear\"\n              : appear\n              ? \"dice-cursed-appear\"\n              : \"\"\n          }\n          style={{\n            transform: stringifyTransformations({\n              rotate: rotation ? rotation : 0,\n              scale: diceGripped ? \"1.1\" : \"1\",\n            }),\n            transitionProperty: \"transform\",\n            transitionDuration: \"500ms\",\n            // https://easings.net/#easeOutCirc\n            transitionTimingFunction: \"cubic-bezier(0, 0.55, 0.45, 1)\",\n            transformOrigin: \"center center\",\n          }}\n        >\n          <rect\n            className=\"dice-background\"\n            width=\"100%\"\n            height=\"100%\"\n            rx=\"5\"\n            ry=\"5\"\n            fill={computeDiceColors(onSkull, isDiceKept).fill}\n            stroke={computeDiceColors(onSkull, isDiceKept).stroke}\n            strokeWidth=\"1\"\n          ></rect>\n          <image\n            href={symbolToImageUrl(diceToVisibleSymbol(dice))}\n            draggable=\"false\"\n            style={{\n              width: \"100%\",\n              height: \"100%\",\n            }}\n          />\n        </g>\n      </svg>\n    </Portal>\n  )\n}\n\nconst useTraceUpdate = (\n  props,\n  onUpdate = (changedProps) => {\n    console.log(\"Changed props:\", changedProps)\n  },\n) => {\n  const prev = React.useRef(props)\n  React.useEffect(() => {\n    const changedProps = Object.entries(props).reduce((ps, [k, v]) => {\n      if (prev.current[k] !== v) {\n        ps[k] = [prev.current[k], v]\n      }\n      return ps\n    }, {})\n    if (Object.keys(changedProps).length > 0) {\n      onUpdate(changedProps)\n    }\n    prev.current = props\n  })\n}\n\nconst computeDiceColors = (onSkull, isDiceKept) => {\n  if (onSkull) {\n    return { fill: \"black\", stroke: \"black\" }\n  } else if (isDiceKept) {\n    return { fill: \"none\", stroke: \"none\" }\n  }\n  return { fill: \"#eaeaea\", stroke: \"#b9b9b9\" }\n}\n",
    "import React from \"react\"\n\nimport {\n  useDices,\n  useDiceCursedIds,\n  useDiceRolledIds,\n  useChestSlots,\n  useWitchUncursedDiceId,\n  useWitchCardEffectUsed,\n  useScoreMarked,\n  useCurrentCardId,\n} from \"root/src/app/main.store.js\"\nimport { cardIdToCard, isWitchCard } from \"root/src/app/cards/cards.js\"\nimport {\n  rectangleRelativeToDomNode,\n  findDomNodeClosestToRectangle,\n  rectangleAbsoluteToDomNode,\n  getDomNodeRectangle,\n  domNodeCollidesWithRectangle,\n} from \"root/src/app/dom/dom.position.js\"\nimport {\n  useThreeSkullsOrMore,\n  useHasDicesToCurse,\n} from \"root/src/app/round/round.selectors.js\"\nimport { Dice } from \"root/src/app/dices/Dice.jsx\"\nimport { diceIsOnSkull } from \"root/src/app/dices/dices.js\"\nimport {\n  useSetDiceRolledAreaPosition,\n  useKeepDice,\n  useUnkeepDice,\n  useSetDiceChestSlot,\n  useUncurseDice,\n} from \"root/src/app/dices/dices.actions.js\"\n\nexport const DiceContainer = ({\n  offscreenDomNode,\n  chestDomNode,\n  rolledAreaDomNode,\n  cursedAreaDomNode,\n  onDiceOverChestChange = () => {},\n  onDiceOverRolledAreaChange = () => {},\n}) => {\n  // global state\n  const dices = useDices()\n  const chestSlots = useChestSlots()\n  const diceRolledIds = useDiceRolledIds()\n  const diceCursedIds = useDiceCursedIds()\n  const witchUncursedDiceId = useWitchUncursedDiceId()\n  const witchCardEffectUsed = useWitchCardEffectUsed()\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const scoreMarked = useScoreMarked()\n  const threeSkullsOrMore = useThreeSkullsOrMore()\n  const hasDicesToCurse = useHasDicesToCurse()\n  // local state\n  const [diceAnimationState, dispatchDiceAnimation] = React.useReducer(\n    (state, action) => {\n      return {\n        ...state,\n        [action.key]: action.value,\n      }\n    },\n    {},\n  )\n  // actions\n  const setDiceRolledAreaPosition = useSetDiceRolledAreaPosition()\n  const keepDice = useKeepDice()\n  const unkeepDice = useUnkeepDice()\n  const uncurseDice = useUncurseDice()\n  const setDiceChestSlot = useSetDiceChestSlot()\n  // other\n  const dropTargetRef = React.useRef(null)\n\n  return Object.keys(dices).map((diceId) => {\n    const dice = dices[diceId]\n\n    const diceLocation = diceToLocation(dice, {\n      chestSlots,\n      diceRolledIds,\n      diceCursedIds,\n    })\n    const propsFromLocation = diceLocationToProps(diceLocation, {\n      chestDomNode,\n      rolledAreaDomNode,\n      cursedAreaDomNode,\n      offscreenDomNode,\n    })\n    const { parentNode } = propsFromLocation\n    const diceIsGoingToBeCursed =\n      dice.id !== witchUncursedDiceId &&\n      parentNode === rolledAreaDomNode &&\n      diceIsOnSkull(dice)\n    const diceIsInCursedArea = parentNode === cursedAreaDomNode\n    const diceIsInRolledArea = diceIsInRolledAreaGetter(dice, diceRolledIds)\n\n    // we use useCallback because it prevents dices\n    // from being re-rendered and drag gesture to become\n    // shortly unavailable while react is rerendering\n    const onDiceClick = React.useCallback(\n      (dice) => {\n        const clickEffect = getClickEffect(dice, {\n          currentCard,\n          witchCardEffectUsed,\n          diceIsInRolledArea,\n          diceIsInCursedArea,\n          chestSlots,\n          hasDicesToCurse,\n          threeSkullsOrMore,\n          scoreMarked,\n        })\n        // console.log(`click dice#${dice.id} -> ${clickEffect} effect`)\n        if (clickEffect === \"keep\") {\n          const firstAvailableChestSlot =\n            firstAvailableChestSlotGetter(chestSlots)\n          keepDice(dice, firstAvailableChestSlot)\n        } else if (clickEffect === \"unkeep\") {\n          unkeepDice(dice)\n        } else if (clickEffect === \"uncurse\") {\n          uncurseDice(dice)\n        }\n      },\n      [\n        diceIsInRolledArea,\n        diceIsInCursedArea,\n        chestSlots,\n        scoreMarked,\n        threeSkullsOrMore,\n        currentCard,\n        witchCardEffectUsed,\n      ],\n    )\n\n    const onDiceDrag = React.useCallback(\n      (dice, dragDiceGesture) => {\n        dropTargetRef.current = dropTargetGetter({\n          dragDiceGesture,\n          chestDomNode,\n          rolledAreaDomNode,\n        })\n        const dropEffect = getDropEffect(dice, {\n          diceIsInRolledArea,\n          chestSlots,\n          dropTargetRef,\n          rolledAreaDomNode,\n          chestDomNode,\n          hasDicesToCurse,\n          threeSkullsOrMore,\n          scoreMarked,\n        })\n        dragDiceGesture.setDropEffect(dropEffect)\n        onDiceOverChestChange(dropEffect === \"keep\" ? dice : null)\n        onDiceOverRolledAreaChange(dropEffect === \"unkeep\" ? dice : null)\n      },\n      [\n        diceIsInRolledArea,\n        chestSlots,\n        dropTargetRef,\n        rolledAreaDomNode,\n        chestDomNode,\n        scoreMarked,\n        threeSkullsOrMore,\n        onDiceOverChestChange,\n        onDiceOverRolledAreaChange,\n      ],\n    )\n\n    const onDiceDrop = React.useCallback(\n      (dice, dropDiceGesture) => {\n        const dropEffect = getDropEffect(dice, {\n          diceIsInRolledArea,\n          chestSlots,\n          dropTargetRef,\n          rolledAreaDomNode,\n          chestDomNode,\n          scoreMarked,\n          threeSkullsOrMore,\n        })\n        // console.log(`drop dice#${dice.id} -> ${dropEffect} effect`)\n\n        let dropAnimation = false\n        let dropPosition = null\n\n        if (dropEffect === \"reposition-in-rolled-area\") {\n          const closestRolledAreaPosition = closestRolledAreaPositionGetter(\n            dropDiceGesture.diceRectangle,\n            rolledAreaDomNode,\n          )\n          const highestRolledAreaZIndex = highestRolledAreaZIndexGetter(dice, {\n            dices,\n            diceRolledIds,\n          })\n          setDiceRolledAreaPosition(\n            dice,\n            closestRolledAreaPosition,\n            highestRolledAreaZIndex,\n          )\n          // no animation needed, we drop exactly where we want it\n        } else if (dropEffect === \"back-to-rolled-area\") {\n          dropAnimation = true\n          dropPosition = rolledAreaDropPositionGetter(\n            dice.rolledAreaPosition,\n            rolledAreaDomNode,\n          )\n        } else if (dropEffect === \"keep\") {\n          const closestAvailableChestSlot = closestAvailableChestSlotGetter(\n            dice,\n            {\n              chestSlots,\n              rectangle: dropDiceGesture.diceRectangle,\n              chestDomNode,\n            },\n          )\n          keepDice(dice, closestAvailableChestSlot)\n          dropAnimation = true\n          dropPosition = chestSlotDropPositionGetter(\n            closestAvailableChestSlot,\n            chestDomNode,\n          )\n        } else if (dropEffect === \"reposition-in-chest\") {\n          const closestAvailableChestSlot = closestAvailableChestSlotGetter(\n            dice,\n            {\n              chestSlots,\n              rectangle: dropDiceGesture.diceRectangle,\n              chestDomNode,\n            },\n          )\n          const diceChestSlot = diceToChestSlot(dice, chestSlots)\n          if (diceChestSlot !== closestAvailableChestSlot) {\n            setDiceChestSlot(dice, closestAvailableChestSlot)\n            dropAnimation = true\n            dropPosition = chestSlotDropPositionGetter(\n              closestAvailableChestSlot,\n              chestDomNode,\n            )\n          }\n        } else if (dropEffect === \"back-to-chest\") {\n          const diceChestSlot = diceToChestSlot(dice, chestSlots)\n          dropAnimation = true\n          dropPosition = chestSlotDropPositionGetter(\n            diceChestSlot,\n            chestDomNode,\n          )\n        } else if (dropEffect === \"unkeep\") {\n          const closestRolledAreaPosition = closestRolledAreaPositionGetter(\n            dropDiceGesture.diceRectangle,\n            rolledAreaDomNode,\n          )\n          setDiceRolledAreaPosition(\n            dice,\n            closestRolledAreaPosition,\n            highestRolledAreaZIndexGetter(dice, { dices, diceRolledIds }),\n          )\n          unkeepDice(dice)\n          dropAnimation = true\n          dropPosition = rolledAreaDropPositionGetter(\n            closestRolledAreaPosition,\n            rolledAreaDomNode,\n          )\n        }\n\n        if (dropAnimation) {\n          dispatchDiceAnimation({\n            key: dice.id,\n            value: {\n              from: {\n                x: dropDiceGesture.diceRectangle.left,\n                y: dropDiceGesture.diceRectangle.top,\n              },\n              to: dropPosition,\n              onfinish: () => {\n                // at the end of dice animation, dice is flickering briely\n                // (moving somewhere on the page and going back to where it's supposed to be)\n                // the following setTimeout fixes this\n                // of course we should improve that because it's an hint there is a deeper\n                // issue to resolve.\n                setTimeout(() => {\n                  dispatchDiceAnimation({\n                    key: dice.id,\n                    value: null,\n                  })\n                })\n              },\n            },\n          })\n        }\n      },\n      [\n        diceIsInRolledArea,\n        chestSlots,\n        dropTargetRef,\n        rolledAreaDomNode,\n        chestDomNode,\n        scoreMarked,\n        threeSkullsOrMore,\n      ],\n    )\n\n    const onDiceDragEnd = React.useCallback(() => {\n      onDiceOverChestChange(null)\n      onDiceOverRolledAreaChange(null)\n    }, [onDiceOverChestChange, onDiceOverRolledAreaChange])\n\n    const props = {\n      key: dice.id,\n      ...propsFromLocation,\n      dice,\n      diceAnimation: diceAnimationState[dice.id],\n      witchCardEffectUsed,\n      disapear: diceIsGoingToBeCursed,\n      appear: diceIsInCursedArea,\n      onDiceClick,\n      onDiceDrag,\n      onDiceDrop,\n      onDiceDragEnd,\n    }\n\n    return React.useMemo(\n      () => <Dice {...props} />,\n      Object.keys(props).map((key) => props[key]),\n    )\n  })\n}\n\nconst getClickEffect = (\n  dice,\n  {\n    currentCard,\n    witchCardEffectUsed,\n    diceIsInRolledArea,\n    diceIsInCursedArea,\n    chestSlots,\n    hasDicesToCurse,\n    threeSkullsOrMore,\n    scoreMarked,\n  },\n) => {\n  if (diceIsInRolledArea) {\n    if (\n      keepDiceAllowedGetter(dice, {\n        hasDicesToCurse,\n        threeSkullsOrMore,\n        scoreMarked,\n      })\n    ) {\n      return \"keep\"\n    }\n    return \"none\"\n  }\n\n  if (diceIsInChestGetter(dice, chestSlots)) {\n    if (unkeepDiceAllowedGetter(dice, { threeSkullsOrMore, scoreMarked })) {\n      return \"unkeep\"\n    }\n    return \"none\"\n  }\n\n  if (diceIsInCursedArea) {\n    if (\n      uncurseDiceAllowedGetter(dice, {\n        currentCard,\n        witchCardEffectUsed,\n        scoreMarked,\n        threeSkullsOrMore,\n      })\n    ) {\n      return \"uncurse\"\n    }\n    return \"none\"\n  }\n\n  return \"none\"\n}\n\nconst getDropEffect = (\n  dice,\n  {\n    diceIsInRolledArea,\n    chestSlots,\n    dropTargetRef,\n    rolledAreaDomNode,\n    chestDomNode,\n    hasDicesToCurse,\n    threeSkullsOrMore,\n    scoreMarked,\n  },\n) => {\n  if (diceIsInRolledArea) {\n    if (dropTargetRef.current === rolledAreaDomNode) {\n      return \"reposition-in-rolled-area\"\n    }\n\n    if (dropTargetRef.current === chestDomNode) {\n      if (\n        keepDiceAllowedGetter(dice, {\n          hasDicesToCurse,\n          threeSkullsOrMore,\n          scoreMarked,\n        })\n      ) {\n        return \"keep\"\n      }\n      return \"back-to-rolled-area\"\n    }\n\n    return \"back-to-rolled-area\"\n  }\n\n  if (diceIsInChestGetter(dice, chestSlots)) {\n    if (dropTargetRef.current === chestDomNode) {\n      return \"reposition-in-chest\"\n    }\n\n    if (dropTargetRef.current === rolledAreaDomNode) {\n      if (unkeepDiceAllowedGetter(dice, { scoreMarked, threeSkullsOrMore })) {\n        return \"unkeep\"\n      }\n      return \"back-to-chest\"\n    }\n\n    return \"back-to-chest\"\n  }\n\n  return \"none\"\n}\n\nconst dropTargetGetter = ({\n  dragDiceGesture,\n  chestDomNode,\n  rolledAreaDomNode,\n}) => {\n  const diceIsOverChest = domNodeCollidesWithRectangle(\n    chestDomNode,\n    dragDiceGesture.diceRectangle,\n  )\n  if (diceIsOverChest) {\n    return chestDomNode\n  }\n\n  const diceIsOverRolledArea = domNodeCollidesWithRectangle(\n    rolledAreaDomNode,\n    dragDiceGesture.diceRectangle,\n  )\n  if (diceIsOverRolledArea) {\n    return rolledAreaDomNode\n  }\n\n  return null\n}\n\nconst diceIsInRolledAreaGetter = (dice, diceRolledIds) =>\n  diceRolledIds.includes(dice.id)\nconst diceIsInChestGetter = (dice, chestSlots) =>\n  Object.keys(chestSlots).some((chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n    return (\n      chestSlotContent &&\n      chestSlotContent.type === \"dice\" &&\n      chestSlotContent.value === dice.id\n    )\n  })\n// const diceIsInCursedAreaGetter = (dice, diceCursedIds) => diceCursedIds.includes(dice.id)\n\nconst keepDiceAllowedGetter = (\n  dice,\n  { hasDicesToCurse, threeSkullsOrMore, scoreMarked },\n) => {\n  if (diceIsOnSkull(dice)) {\n    return false\n  }\n\n  if (hasDicesToCurse) {\n    return false\n  }\n\n  if (threeSkullsOrMore) {\n    return false\n  }\n\n  if (scoreMarked) {\n    return false\n  }\n\n  return true\n}\nconst unkeepDiceAllowedGetter = (dice, { scoreMarked, threeSkullsOrMore }) => {\n  if (scoreMarked) {\n    return false\n  }\n\n  if (threeSkullsOrMore) {\n    return false\n  }\n\n  return true\n}\nconst uncurseDiceAllowedGetter = (\n  dice,\n  { currentCard, witchCardEffectUsed, scoreMarked, threeSkullsOrMore },\n) => {\n  if (!isWitchCard(currentCard)) {\n    return false\n  }\n\n  if (witchCardEffectUsed) {\n    return false\n  }\n\n  if (scoreMarked) {\n    return false\n  }\n\n  if (threeSkullsOrMore) {\n    return false\n  }\n\n  return true\n}\n\nconst rolledAreaDropPositionGetter = (\n  rolledAreaPosition,\n  rolledAreaDomNode,\n) => {\n  const absoluteRolledAreaPositionRectangle = rectangleAbsoluteToDomNode(\n    {\n      left: rolledAreaPosition.x,\n      top: rolledAreaPosition.y,\n      right: 0,\n      bottom: 0,\n    },\n    rolledAreaDomNode,\n  )\n  return {\n    x: absoluteRolledAreaPositionRectangle.left,\n    y: absoluteRolledAreaPositionRectangle.top,\n  }\n}\n\nconst chestSlotDropPositionGetter = (chestSlot, chestDomNode) => {\n  const destinationSlotDomNode = chestSlotToChestSlotDomNode(\n    chestSlot,\n    chestDomNode,\n  )\n  const destinationSlotRectangle = getDomNodeRectangle(destinationSlotDomNode)\n  return {\n    // + 5 is because dice is centered in the chest slot\n    x: destinationSlotRectangle.left + 5,\n    y: destinationSlotRectangle.top + 5,\n  }\n}\n\nconst closestRolledAreaPositionGetter = (\n  requestedRectangle,\n  rolledAreaDomNode,\n) => {\n  const rectangle = rectangleRelativeToDomNode(\n    requestedRectangle,\n    rolledAreaDomNode,\n  )\n  const closestRolledAreaPosition = {\n    x: rectangle.left,\n    y: rectangle.top,\n  }\n  return closestRolledAreaPosition\n}\n\nconst highestRolledAreaZIndexGetter = (dice, { diceRolledIds, dices }) => {\n  if (diceRolledIds.length === 0) {\n    return 1\n  }\n  const diceWithHighestZIndex = diceRolledIds\n    .slice(1)\n    .reduce((previous, diceId) => {\n      const dice = dices[diceId]\n      const diceZIndex = dice.rolledAreaZIndex\n      if (diceZIndex > previous.rolledAreaZIndex) return dice\n      return previous\n    }, dices[diceRolledIds[0]])\n  if (diceWithHighestZIndex === dice) return dice.rolledAreaZIndex\n  return diceWithHighestZIndex.rolledAreaZIndex + 1\n}\n\nconst firstAvailableChestSlotGetter = (chestSlots) => {\n  const firstAvailableChestSlot = Object.keys(chestSlots).find((chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n    return !chestSlotContent\n  })\n  return firstAvailableChestSlot\n}\n\nconst closestAvailableChestSlotGetter = (\n  dice,\n  { chestSlots, rectangle, chestDomNode },\n) => {\n  const chestSlotMap = new Map()\n  const domNodeCandidates = []\n  Object.keys(chestSlots).forEach((chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n    const chestSlotIsEmpty = !chestSlotContent\n    if (\n      chestSlotIsEmpty ||\n      (chestSlotContent.type === \"dice\" && chestSlotContent.value === dice.id)\n    ) {\n      const chestSlotDomNode = chestSlotToChestSlotDomNode(\n        chestSlot,\n        chestDomNode,\n      )\n      chestSlotMap.set(chestSlotDomNode, chestSlot)\n      domNodeCandidates.push(chestSlotDomNode)\n    }\n  })\n  const closestDomNode = findDomNodeClosestToRectangle(\n    domNodeCandidates,\n    rectangle,\n  )\n  const closestChestSlot = chestSlotMap.get(closestDomNode)\n  return closestChestSlot\n}\n\nconst diceToChestSlot = (dice, chestSlots) => {\n  const diceChestSlot = Object.keys(chestSlots).find((chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n    return (\n      chestSlotContent &&\n      chestSlotContent.type === \"dice\" &&\n      chestSlotContent.value === dice.id\n    )\n  })\n  return diceChestSlot\n}\n\nconst chestSlotToChestSlotDomNode = (chestSlot, chestDomNode) => {\n  const chestSlotDomNode = chestDomNode.querySelector(\n    `[data-chest-slot=\"${chestSlot}\"]`,\n  )\n  return chestSlotDomNode\n}\n\nconst diceToLocation = (dice, { chestSlots, diceRolledIds, diceCursedIds }) => {\n  const diceChestSlot = Object.keys(chestSlots).find(\n    (chestSlot) =>\n      chestSlots[chestSlot] &&\n      chestSlots[chestSlot].type === \"dice\" &&\n      chestSlots[chestSlot].value === dice.id,\n  )\n  if (diceChestSlot) {\n    return {\n      type: \"chest-slot\",\n      value: diceChestSlot,\n    }\n  }\n\n  if (diceRolledIds.includes(dice.id)) {\n    return {\n      type: \"rolled-area\",\n      value: {\n        ...dice.rolledAreaPosition,\n        rotation: dice.rotation,\n        zIndex: dice.rolledAreaZIndex,\n      },\n    }\n  }\n\n  if (diceCursedIds.includes(dice.id)) {\n    return {\n      type: \"cursed-area\",\n      value: undefined,\n    }\n  }\n\n  return {\n    type: \"offscreen-area\",\n  }\n}\n\nconst diceLocationToProps = (\n  { type, value },\n  { chestDomNode, rolledAreaDomNode, cursedAreaDomNode, offscreenDomNode },\n) => {\n  if (type === \"chest-slot\") {\n    return {\n      parentNode: chestDomNode.querySelector(`[data-chest-slot=\"${value}\"]`),\n      zIndex: undefined,\n      rotation: 0,\n      x: undefined,\n      y: undefined,\n      draggable: true,\n    }\n  }\n\n  if (type === \"rolled-area\") {\n    return {\n      parentNode: rolledAreaDomNode,\n      zIndex: value.zIndex,\n      rotation: value.rotation,\n      x: value.x,\n      y: value.y,\n      draggable: true,\n    }\n  }\n\n  if (type === \"cursed-area\") {\n    return {\n      parentNode: cursedAreaDomNode,\n      zIndex: undefined,\n      rotation: 0,\n      x: undefined,\n      y: undefined,\n      draggable: false,\n    }\n  }\n\n  return {\n    parentNode: offscreenDomNode,\n    zIndex: undefined,\n    rotation: 0,\n    x: undefined,\n    y: undefined,\n    draggable: false,\n  }\n}\n",
    "/* eslint-disable import/max-dependencies */\nimport React from \"react\"\n\nimport {\n  useCurrentCardId,\n  useAnimationsDisabled,\n} from \"root/src/app/main.store.js\"\nimport { Image } from \"root/src/app/generic/Image.jsx\"\nimport { useCardDeck } from \"root/src/app/round/round.selectors.js\"\nimport {\n  useDrawCard,\n  useShuffleDeck,\n} from \"root/src/app/cards/cards.actions.js\"\nimport { useActivateCurrentCard } from \"root/src/app/round/round.actions.js\"\n\nimport { cardsRules } from \"root/src/app/cards/cards-rules.js\"\nimport { Dialog } from \"root/src/app/dialog/dialog.component.jsx\"\nimport {\n  cardIdToCard,\n  cardToImageUrl,\n  cardDefaultUrl,\n} from \"root/src/app/cards/cards.js\"\nimport { SmallCard } from \"root/src/app/cards/SmallCard.jsx\"\nimport { getDomNodeRectangle } from \"root/src/app/dom/dom.position.js\"\n\nexport const DrawCardDialog = ({\n  dialogIsOpen,\n  closeDialog,\n  headerSmallCardRef,\n}) => {\n  const cardDeck = useCardDeck()\n  const currentCardId = useCurrentCardId()\n  const currentCard = cardIdToCard(currentCardId) || null\n\n  const backCardRef = React.useRef()\n  const topCardRef = React.useRef()\n  const smallCardRef = React.useRef()\n\n  const shuffleCardsText =\n    \"Paquet de cartes épuisé. Mélangez-le pour pouvoir piocher à nouveau !\"\n  const drawCardText = \"Piochez une carte pour le tour suivant.\"\n\n  return (\n    <Dialog\n      className=\"draw-card-dialog dialog-spacing-10 dialog-spacing-fluid\"\n      isOpen={dialogIsOpen}\n      onRequestClose={closeDialog}\n      requestCloseOnClickOutside={false}\n    >\n      <div className=\"dialog-content\">\n        <div className=\"dialog-body\">\n          <div className=\"dialog-label\">\n            {cardDeck.length === 0 && !currentCard && shuffleCardsText}\n            {cardDeck.length !== 0 && !currentCard && drawCardText}\n            {currentCard && (\n              <span className=\"card-name\">\n                {cardsRules[currentCard.type].name}\n              </span>\n            )}\n          </div>\n          <div className=\"card-area\">\n            <div\n              style={{\n                position: \"relative\",\n              }}\n            >\n              <BackCard\n                backCardRef={backCardRef}\n                currentCard={currentCard}\n                remainingCardCount={cardDeck.length}\n              />\n              <TopCard\n                topCardRef={topCardRef}\n                smallCardRef={smallCardRef}\n                currentCard={currentCard}\n              />\n            </div>\n          </div>\n        </div>\n        <div className=\"dialog-actions\">\n          <DeckButton\n            backCardRef={backCardRef}\n            cardDeck={cardDeck}\n            currentCard={currentCard}\n          />\n          {currentCard ? (\n            <StartButton\n              headerSmallCardRef={headerSmallCardRef}\n              smallCardRef={smallCardRef}\n              backCardRef={backCardRef}\n              topCardRef={topCardRef}\n              currentCard={currentCard}\n              closeDialog={closeDialog}\n            />\n          ) : null}\n        </div>\n      </div>\n    </Dialog>\n  )\n}\n\nconst BackCard = ({ backCardRef, currentCard, remainingCardCount }) => {\n  return (\n    <div\n      ref={backCardRef}\n      className=\"card default-card\"\n      style={{ background: \"none\" }}\n    >\n      <Image src={cardDefaultUrl} width=\"150\" />\n      {currentCard ? null : (\n        <div className=\"remaining-cards-number\">{remainingCardCount}</div>\n      )}\n    </div>\n  )\n}\n\nconst TopCard = ({ topCardRef, smallCardRef, currentCard }) => {\n  if (!currentCard) {\n    return null\n  }\n\n  return (\n    <>\n      <div className=\"card current-card\" ref={topCardRef}>\n        <div className=\"flip-card\">\n          <div className=\"flip-card-inner\">\n            <div className=\"flip-card-front\">\n              <Image className=\"card default-card\" src={cardDefaultUrl} />\n            </div>\n            <div className=\"flip-card-back\">\n              <Image\n                className=\"card-img\"\n                src={cardToImageUrl(currentCard)}\n                width=\"150\"\n                alt={currentCard.type}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"small-card\">\n        <SmallCard card={currentCard} ref={smallCardRef} />\n      </div>\n    </>\n  )\n}\n\nconst DeckButton = ({ backCardRef, cardDeck, currentCard }) => {\n  if (currentCard) {\n    return null\n  }\n\n  if (cardDeck.length === 0) {\n    return <ButtonShuffleDeck backCardRef={backCardRef} />\n  }\n\n  return <ButtonDrawCard />\n}\n\nconst ButtonDrawCard = () => {\n  const drawCard = useDrawCard()\n\n  return (\n    <button className=\"button-card-main button-draw-card\" onClick={drawCard}>\n      Piocher\n    </button>\n  )\n}\n\nconst ButtonShuffleDeck = ({ backCardRef }) => {\n  const animationsDisabled = useAnimationsDisabled()\n  const shuffleDeck = useShuffleDeck()\n  const [shufflePending, sufflePendingSetter] = React.useState(false)\n\n  const startShuffle = () => {\n    sufflePendingSetter(true)\n  }\n\n  React.useEffect(() => {\n    if (!shufflePending) {\n      return () => {}\n    }\n\n    shuffleDeck()\n\n    if (animationsDisabled) {\n      sufflePendingSetter(false)\n      return () => {}\n    }\n    return animateDeckShuffle({\n      backCard: backCardRef.current,\n      duration: 1000,\n      onfinish: () => {\n        sufflePendingSetter(false)\n      },\n    })\n  }, [shufflePending])\n\n  return (\n    <button\n      className=\"button-card-main button-shuffle-deck\"\n      onClick={startShuffle}\n    >\n      Mélanger\n    </button>\n  )\n}\n\nconst animateDeckShuffle = ({ backCard, duration, onfinish }) => {\n  backCard.setAttribute(\"shaking-deck\", \"\")\n  const timeoutId = setTimeout(() => {\n    backCard.removeAttribute(\"shaking-deck\", \"\")\n    onfinish()\n  }, duration)\n  return () => {\n    backCard.removeAttribute(\"shaking-deck\", \"\")\n    clearTimeout(timeoutId)\n  }\n}\n\nconst StartButton = ({\n  headerSmallCardRef,\n  smallCardRef,\n  backCardRef,\n  topCardRef,\n}) => {\n  const animationsDisabled = useAnimationsDisabled()\n  const activateCurrentCard = useActivateCurrentCard()\n\n  const [cardActivating, cardActivatingSetter] = React.useState(false)\n\n  const start = () => {\n    if (cardActivating) {\n      return\n    }\n    cardActivatingSetter(true)\n  }\n\n  React.useEffect(() => {\n    if (!cardActivating) {\n      return () => {}\n    }\n\n    if (animationsDisabled) {\n      activateCurrentCard()\n      return () => {}\n    }\n\n    return animateCardActivation({\n      headerSmallCard: headerSmallCardRef.current,\n      smallCard: smallCardRef.current,\n      backCard: backCardRef.current,\n      topCard: topCardRef.current,\n      duration: 500,\n      onfinish: () => {\n        activateCurrentCard()\n      },\n    })\n  }, [cardActivating])\n\n  return (\n    <button\n      className=\"button-card-main button-activate-card\"\n      onClick={() => {\n        start()\n      }}\n    >\n      Commencer\n    </button>\n  )\n}\n\nconst animateCardActivation = ({\n  headerSmallCard,\n  topCard,\n  backCard,\n  smallCard,\n  duration,\n  onfinish,\n}) => {\n  backCard.style.opacity = 0\n\n  const headerSmallCardRectangle = getDomNodeRectangle(headerSmallCard)\n\n  const topCardAnimation = topCard.animate(\n    [\n      {\n        transform: \"scale(1)\",\n        opacity: 1,\n      },\n      {\n        transform: \"scale(0)\",\n        opacity: 0,\n      },\n    ],\n    {\n      duration,\n      fill: \"forwards\",\n    },\n  )\n\n  const smallCardAnimation = smallCard.animate(\n    [\n      {\n        transform: \"scale(0)\",\n        opacity: 0,\n        position: \"fixed\",\n        top: `${headerSmallCardRectangle.top}.px`,\n        left: `${headerSmallCardRectangle.left}.px`,\n      },\n      {\n        transform: \"scale(1)\",\n        opacity: 1,\n        position: \"fixed\",\n        top: `${headerSmallCardRectangle.top}.px`,\n        left: `${headerSmallCardRectangle.left}.px`,\n      },\n    ],\n    {\n      duration,\n      fill: \"forwards\",\n    },\n  )\n  smallCardAnimation.onfinish = onfinish\n\n  return () => {\n    topCardAnimation.cancel()\n    smallCardAnimation.cancel()\n  }\n}\n",
    "/* eslint-disable import/max-dependencies */\nimport React from \"react\"\n\nimport { RoundEffects } from \"root/src/app/round/round.effects.js\"\nimport { CardsEffects } from \"root/src/app/cards/cards.effects.js\"\nimport { DiceOnGoing } from \"root/src/app/dice-ongoing/DiceOnGoing.jsx\"\nimport { Chest } from \"root/src/app/chest/chest.component.jsx\"\nimport { Header } from \"root/src/app/header/Header.jsx\"\nimport { Footer } from \"root/src/app/footer/Footer.jsx\"\nimport { SkullIsland } from \"root/src/app/skull-island/SkullIsland.jsx\"\nimport { DiceContainer } from \"root/src/app/dices/DiceContainer.jsx\"\nimport { useSignal } from \"root/src/app/helper/signal.js\"\nimport { DrawCardDialog } from \"root/src/app/footer/DrawCardDialog.jsx\"\nimport { useCurrentCardActivated } from \"root/src/app/main.store.js\"\n\nexport const Round = ({ openScoreboard, onRoundStart, onRoundOver }) => {\n  const currentCardActivated = useCurrentCardActivated()\n\n  const [roundMounted, roundMountedSetter] = React.useState(false)\n\n  React.useEffect(() => {\n    onRoundStart()\n  }, [])\n\n  const [diceOverRolledAreaListener, diceOverRolledAreaEmitter] = useSignal()\n  const [diceOverChestListener, diceOverChestEmitter] = useSignal()\n\n  const headerSmallCardRef = React.useRef()\n\n  return (\n    <div className=\"round-container\">\n      <CardsEffects />\n      <Header\n        openScoreboard={openScoreboard}\n        headerSmallCardRef={headerSmallCardRef}\n      />\n      {currentCardActivated ? (\n        <RoundGameBoard\n          diceOverRolledAreaListener={diceOverRolledAreaListener}\n          diceOverChestListener={diceOverChestListener}\n          openScoreboard={openScoreboard}\n          onRoundOver={onRoundOver}\n          onRoundMounted={(refs) => {\n            roundMountedSetter(refs)\n          }}\n        />\n      ) : null}\n      {roundMounted ? (\n        <DiceContainer\n          offscreenDomNode={roundMounted.offscreenDomNode}\n          chestDomNode={roundMounted.chestDomNode}\n          rolledAreaDomNode={roundMounted.rolledAreaDomNode}\n          cursedAreaDomNode={roundMounted.cursedAreaDomNode}\n          onDiceOverChestChange={diceOverChestEmitter}\n          onDiceOverRolledAreaChange={diceOverRolledAreaEmitter}\n        />\n      ) : null}\n      <DrawCardDialog\n        dialogIsOpen={!currentCardActivated}\n        headerSmallCardRef={headerSmallCardRef}\n      />\n    </div>\n  )\n}\n\nconst RoundGameBoard = ({\n  diceOverRolledAreaListener,\n  diceOverChestListener,\n  onRoundMounted,\n  onRoundOver,\n}) => {\n  const rolledAreaRef = React.useRef(null)\n  const chestRef = React.useRef(null)\n  const cursedAreaRef = React.useRef(null)\n  const offscreenRef = React.useRef(null)\n\n  React.useEffect(() => {\n    onRoundMounted({\n      rolledAreaDomNode: rolledAreaRef.current,\n      chestDomNode: chestRef.current,\n      cursedAreaDomNode: cursedAreaRef.current,\n      offscreenDomNode: offscreenRef.current,\n    })\n  }, [])\n\n  return (\n    <>\n      <RoundEffects />\n      <div className=\"chest-and-skulls\">\n        <Chest\n          chestRef={chestRef}\n          diceOverChestListener={diceOverChestListener}\n        />\n        <SkullIsland cursedAreaRef={cursedAreaRef} />\n      </div>\n      <DiceOnGoing\n        rolledAreaRef={rolledAreaRef}\n        offscreenRef={offscreenRef}\n        diceOverRolledAreaListener={diceOverRolledAreaListener}\n      />\n      <Footer onRoundOver={onRoundOver} rolledAreaRef={rolledAreaRef} />\n    </>\n  )\n}\n",
    "import React from \"react\"\n\nimport { Image } from \"root/src/app/generic/Image.jsx\"\nimport { useStartPlayerRound } from \"root/src/app/round/round.actions.js\"\nimport { Dialog } from \"root/src/app/dialog/dialog.component.jsx\"\nimport { CloseIcon } from \"root/src/app/dialog/CloseIcon.jsx\"\n\nexport const StartPlayerRoundDialog = ({\n  closeDialog,\n  dialogIsOpen,\n  player,\n}) => {\n  const startPlayerRound = useStartPlayerRound()\n  return (\n    <Dialog\n      className=\"score-board-dialog dialog-spacing-10 dialog-spacing-fluid dialog-spacing-left-fixed dialog-spacing-right-fixed\"\n      isOpen={dialogIsOpen}\n      onRequestClose={closeDialog}\n      requestCloseOnClickOutside={true}\n    >\n      <div className=\"dialog-content\">\n        <div className=\"dialog-close\" onClick={closeDialog}>\n          <CloseIcon />\n        </div>\n        <div className=\"dialog-body\">\n          <div>\n            Au tour de\n            <div className=\"dialog-label\">{player.character.name}</div>\n            <Image\n              className=\"player-img\"\n              src={player && player.character.img}\n              alt=\"player\"\n              width=\"40\"\n              height=\"40\"\n              style={{\n                boxShadow: `inset 0px 0px 0px 4px ${\n                  (player && player.character.color) || \"black\"\n                }`,\n              }}\n            />\n          </div>\n          <div className=\"dialog-actions\">\n            <button\n              onClick={() => {\n                closeDialog()\n                startPlayerRound(player)\n              }}\n            >\n              Jouer\n            </button>\n          </div>\n        </div>\n      </div>\n    </Dialog>\n  )\n}\n",
    "import React from \"react\"\n\nimport { Image } from \"root/src/app/generic/Image.jsx\"\nimport { usePlayers, useRoundStarted } from \"root/src/app/main.store.js\"\nimport { useCurrentPlayer } from \"root/src/app/round/round.selectors.js\"\nimport { StartPlayerRoundDialog } from \"root/src/app/score-board/StartPlayerRoundDialog.jsx\"\nimport {\n  symbolSkullUrl,\n  symbolToImageUrl,\n} from \"root/src/app/symbols/symbols.js\"\n\nconst winTreasureUrl = new URL(\n  \"./win-treasure.png\",\n  import.meta.url,\n)\nconst boarUrl = new URL(\"./boat.png\", import.meta.url)\nconst SCORE_MAX = 6000\n\nconst pathList = {\n  path1:\n    \"M39.582,739.564c0-91.824,39.191-96.32,38.045-166.691s-30.042-70.37-47.326-161.729s38.128-86.388,31.276-186.42C55.405,134.602-3.014,89.176,8.812,129.825c5.333,18.333,30.77-21,30.77-129.825\",\n  path2:\n    \"M39.582,739.564c0-113.074-5.437-166.074-8.437-198.074s36-20.667,33.019-2c-1.796,11.248-24.583,13.333-23.699-22c1.229-49.158,22.68-111,23.68-169s-38-95-46-181S39.582,0,39.582,0\",\n  path3:\n    \"M39.582,739.564c0-71.926-15.437-155.074-17.437-253.074s30-185,31.087-217s-31.087-46-31.087-26s33,10,31-32s-31-110-31-144S39.582,0,39.582,0\",\n  path4:\n    \"M39.582,739.564c0-113.074-5.437-166.074-8.437-198.074s36-20.667,33.019-2c-1.796,11.248-24.583,13.333-23.699-22c1.229-49.158,22.68-111,23.68-169s-38-95-46-181S39.582,0,39.582,0\",\n}\n\nexport const ScoreBoard = ({\n  openedByUser,\n  closeScoreboard,\n  playerAnimation,\n}) => {\n  const players = usePlayers()\n  const currentPlayer = useCurrentPlayer()\n  const roundStarted = useRoundStarted()\n\n  // dialogue StartPlayerRoundDialog\n  const [startPlayerRoundDialogIsOpen, startPlayerRoundDialogIsOpenSetter] =\n    React.useState(false)\n  const openStartPlayerRoundDialog = () => {\n    startPlayerRoundDialogIsOpenSetter(true)\n  }\n  const closeStartPlayerRoundDialog = () => {\n    startPlayerRoundDialogIsOpenSetter(false)\n  }\n\n  const nextPlayer = getNextPlayer()\n\n  return (\n    <div className=\"score-board-container\">\n      {openedByUser && (\n        <div className=\"cross\" onClick={closeScoreboard}>\n          X\n        </div>\n      )}\n      {!roundStarted && !currentPlayer && (\n        <div className=\"action-container\">\n          <button\n            className=\"score-board-action\"\n            onClick={() => {\n              openStartPlayerRoundDialog()\n            }}\n          >\n            Commencer à jouer\n          </button>\n        </div>\n      )}\n      <Image\n        className=\"win-treasure-img\"\n        src={winTreasureUrl}\n        alt=\"win-treasure\"\n        width=\"230\"\n        height=\"150\"\n      />\n      <div className=\"users-path\">\n        {players.map((player) => (\n          <PlayerPath\n            key={player.id}\n            player={player}\n            openedByUser={openedByUser}\n            pathCoordinates={pathList[`path${player.id}`]}\n            score={player.score}\n            character={player.character}\n            openStartPlayerRoundDialog={openStartPlayerRoundDialog}\n            isCurrentPlayer={currentPlayer && player.id === currentPlayer.id}\n            playerAnimation={playerAnimation}\n          />\n        ))}\n      </div>\n      <StartPlayerRoundDialog\n        dialogIsOpen={startPlayerRoundDialogIsOpen}\n        closeDialog={closeStartPlayerRoundDialog}\n        player={nextPlayer}\n      />\n    </div>\n  )\n}\n\nconst getNextPlayer = () => {\n  const currentPlayer = useCurrentPlayer()\n  const players = usePlayers()\n\n  let nextPlayer\n  if (currentPlayer) {\n    const currentPlayerIndex = players.findIndex(\n      (player) => player.id === currentPlayer.id,\n    )\n    nextPlayer =\n      currentPlayerIndex === players.length - 1\n        ? players[0]\n        : players[currentPlayerIndex + 1]\n  } else {\n    nextPlayer = players[0]\n  }\n  return nextPlayer\n}\n\nconst PlayerPath = ({\n  pathCoordinates,\n  player,\n  openedByUser,\n  character,\n  score,\n  openStartPlayerRoundDialog,\n  playerAnimation,\n}) => {\n  const pathForegroundElementRef = React.useRef(null)\n  const boatElementRef = React.useRef(null)\n  const animation3SkullsElementRef = React.useRef(null)\n  const animationSymbolsElementRef = React.useRef(null)\n\n  const nextPlayer = getNextPlayer()\n\n  const [scoreAnimation, scoreAnimationSetter] = React.useState(null)\n  const [symbolsAnimation, symbolsAnimationSetter] = React.useState([])\n  const [skullsAnimation, skullsAnimationSetter] = React.useState(false)\n\n  React.useEffect(() => {\n    if (playerAnimation && playerAnimation.player === player) {\n      if (playerAnimation.roundOverReason === \"user-collect\") {\n        scoreAnimationSetter(playerAnimation.score)\n        symbolsAnimationSetter(playerAnimation.symbolsInChest)\n      } else if (playerAnimation.roundOverReason === \"3-skulls\") {\n        skullsAnimationSetter(true)\n      } else if (playerAnimation.roundOverReason === \"chalenge-failed\") {\n        scoreAnimationSetter(playerAnimation.score)\n      }\n    } else {\n      scoreAnimationSetter(null)\n    }\n  }, [playerAnimation, player])\n\n  // // symbols animation\n  // React.useEffect(() => {\n  //   if (symbolsAnimation) {\n  //     console.log(symbolsAnimation)\n  //     //  HERE\n  //   }\n  // }, [symbolsAnimation])\n\n  // score progress animation\n  React.useEffect(() => {\n    if (!scoreAnimation) return undefined\n    const { from, to } = scoreAnimation\n\n    // Boat animation along the path\n    const boatElement = boatElementRef.current\n    const boatAnimation = boatElement.animate(\n      [\n        { offsetDistance: ratioToOffsetDistance(from / SCORE_MAX) },\n        { offsetDistance: ratioToOffsetDistance(to / SCORE_MAX) },\n      ],\n      {\n        duration: 1000,\n        fill: \"forwards\",\n      },\n    )\n\n    // Symbols animation along the path (if exist)\n    const symbolsElement = animationSymbolsElementRef.current\n    let symbolsAnimation = null\n    if (symbolsElement) {\n      symbolsAnimation = symbolsElement.animate(\n        [\n          { offsetDistance: ratioToOffsetDistance(from / SCORE_MAX) },\n          { offsetDistance: ratioToOffsetDistance(to / SCORE_MAX) },\n        ],\n        {\n          duration: 1000,\n          fill: \"forwards\",\n        },\n      )\n    }\n\n    // path animation\n    const pathForegroundElement = pathForegroundElementRef.current\n    const pathLength = pathForegroundElement.getTotalLength()\n    console.log(\"from\", from)\n    console.log(\"to\", to)\n    const pathForegroundAnimation = pathForegroundElement.animate(\n      [\n        {\n          strokeDashoffset: ratioToStrokeDashOffset(\n            from / SCORE_MAX,\n            pathLength,\n          ),\n        },\n        {\n          strokeDashoffset: ratioToStrokeDashOffset(to / SCORE_MAX, pathLength),\n        },\n      ],\n      {\n        duration: 1000,\n        fill: \"forwards\",\n      },\n    )\n\n    pathForegroundAnimation.onfinish = () => {\n      if (boatAnimation.playState === \"finished\") scoreAnimationSetter(null)\n    }\n    boatAnimation.onfinish = () => {\n      if (pathForegroundAnimation.playState === \"finished\")\n        scoreAnimationSetter(null)\n    }\n\n    return () => {\n      pathForegroundAnimation.cancel()\n      boatAnimation.cancel()\n      if (symbolsAnimation) symbolsAnimation.cancel()\n    }\n  }, [scoreAnimation])\n\n  React.useEffect(() => {\n    // path-foreground line fill\n    const pathForegroundElement = pathForegroundElementRef.current\n    const pathLength = pathForegroundElement.getTotalLength()\n    pathForegroundElement.style.strokeDasharray = pathLength\n    pathForegroundElement.style.strokeDashoffset = ratioToStrokeDashOffset(\n      score / SCORE_MAX,\n      pathLength,\n    )\n  }, [score])\n\n  return (\n    <div className=\"user-path\">\n      <svg\n        viewBox=\"0 0 79.164 739.564\"\n        width=\"50\"\n        height=\"450\"\n        fill=\"none\"\n        stroke=\"none\"\n      >\n        <path d={pathCoordinates} className=\"path-background\" />\n        <path\n          ref={pathForegroundElementRef}\n          d={pathCoordinates}\n          className=\"path-foreground\"\n        />\n        <g className=\"score-indicator\">\n          <image\n            ref={boatElementRef}\n            href={boarUrl}\n            width=\"26\"\n            height=\"26\"\n            className=\"boat\"\n            style={{\n              offsetPath: `path('${pathCoordinates}')`,\n              offsetDistance: ratioToOffsetDistance(score / SCORE_MAX),\n            }}\n          />\n          {symbolsAnimation && symbolsAnimation.length > 0 && (\n            <g\n              className=\"animation-symbols\"\n              ref={animationSymbolsElementRef}\n              style={{\n                offsetPath: `path('${pathCoordinates}')`,\n                offsetDistance: ratioToOffsetDistance(score / SCORE_MAX),\n              }}\n            >\n              {symbolsAnimation.map((symbol, index) => (\n                <image\n                  key={index}\n                  width=\"30\"\n                  height=\"30\"\n                  className={`symbol symbol-${index + 1}`}\n                  href={symbolToImageUrl(symbol)}\n                />\n              ))}\n            </g>\n          )}\n        </g>\n      </svg>\n      <div className=\"speech-bubble\">{score}</div>\n      <div\n        className={`user-avatar ${\n          nextPlayer.character.id === character.id && !openedByUser\n            ? \"next-player\"\n            : \"\"\n        }`}\n        onClick={() => {\n          if (nextPlayer.character.id === character.id && !openedByUser)\n            openStartPlayerRoundDialog()\n        }}\n      >\n        {skullsAnimation && (\n          <div className=\"animation-3skulls\" ref={animation3SkullsElementRef}>\n            <ThreeSkullsAnimated />\n          </div>\n        )}\n        <Avatar character={character} />\n      </div>\n    </div>\n  )\n}\n\nconst ratioToOffsetDistance = (ratio) => `${ratio * 100}%`\n\nconst ratioToStrokeDashOffset = (ratio, pathLength) =>\n  pathLength - ratio * pathLength\n\nconst ThreeSkullsAnimated = () =>\n  new Array(3)\n    .fill(\"\")\n    .map((item, index) => (\n      <Image\n        key={index}\n        width=\"30\"\n        height=\"30\"\n        className={`skull skull-${index + 1}`}\n        src={symbolSkullUrl}\n        animateLoaded={false}\n      />\n    ))\n\nconst Avatar = ({ character }) => (\n  <Image\n    className=\"player-img\"\n    src={character.img}\n    alt=\"player\"\n    width=\"40\"\n    height=\"40\"\n    style={{\n      boxShadow: `inset 0px 0px 0px 4px ${character.color || \"black\"}`,\n    }}\n  />\n)\n",
    "import React from \"react\"\n\nimport { createAction } from \"root/src/app/main.store.js\"\n\nexport const GameConfiguration = () => {\n  const setPlayerCount = useSetPlayerCount()\n\n  return (\n    <div className=\"game-configuration\">\n      <div className=\"background-image\" />\n      <div className=\"content\">\n        <div className=\"title\">A l’abordage !</div>\n        <div className=\"subtitle\">\n          Combien de joueurs participent à l’aventure ?\n        </div>\n        <div className=\"buttons\">\n          {[1, 2, 3, 4, 5].map((playerCount) => {\n            return (\n              <button\n                key={playerCount}\n                onClick={() => {\n                  setPlayerCount(playerCount)\n                }}\n              >\n                {playerCount}\n              </button>\n            )\n          })}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst useSetPlayerCount = createAction((state, playerCount) => {\n  return {\n    ...state,\n    players: new Array(playerCount).fill(\"\").map((_, index) => {\n      return {\n        id: index + 1,\n        number: index + 1,\n        score: 0,\n      }\n    }),\n  }\n})\n",
    "const luffyUrl = String(new URL(\"./Luffy.png\", import.meta.url))\nconst missFortuneUrl = String(new URL(\"./miss_fortune.png\", import.meta.url))\nconst jackSparrowUrl = String(new URL(\"./JackSparrow.png\", import.meta.url))\nconst barbeRougeUrl = String(new URL(\"./BarbeRouge.png\", import.meta.url))\nconst ginetteBouletteUrl = String(\n  new URL(\"./GinetteBoulette.png\", import.meta.url),\n)\nconst capitaineCrochetUrl = String(\n  new URL(\"./CapitaineCrochet.png\", import.meta.url),\n)\n\nexport const createPlayers = (characters) => {\n  return characters.map((character, index) => {\n    return {\n      id: index + 1,\n      character,\n      score: 0,\n    }\n  })\n}\n\nexport const CHARACTERS = [\n  { id: 1, name: \"Luffy\", color: \"#ef9620\", img: luffyUrl },\n  { id: 2, name: \"Miss Fortune\", color: \"#d90f1b\", img: missFortuneUrl },\n  { id: 3, name: \"Jack Sparrow\", color: \"#007033\", img: jackSparrowUrl },\n  { id: 4, name: \"Barbe Rouge\", color: \"#7baac9\", img: barbeRougeUrl },\n  {\n    id: 5,\n    name: \"Ginette Boulette\",\n    color: \"#e2500c\",\n    img: ginetteBouletteUrl,\n  },\n  {\n    id: 6,\n    name: \"Capitaine Crochet\",\n    color: \"#952460\",\n    img: capitaineCrochetUrl,\n  },\n]\n",
    "import React from \"react\"\n\nimport { CHARACTERS } from \"root/src/app/players/players.main.js\"\nimport { Image } from \"root/src/app/generic/Image.jsx\"\nimport { usePlayers, createAction } from \"root/src/app/main.store.js\"\nimport {\n  mixDeck,\n  cardToSmallImageUrl,\n  CARD_TWO_SWORDS_CHALLENGE,\n} from \"root/src/app/cards/cards.js\"\nimport { startJavaScriptAnimation } from \"root/src/app/animation/startJavaScriptAnimation.js\"\n\nexport const CharacterSelection = ({ players }) => {\n  const setPlayerCharacter = useSetPlayerCharacter()\n  const startGame = useStartGame()\n  const playerWithoutCharacter = players.find((player) => !player.character)\n  scrollEffect()\n\n  React.useEffect(() => {\n    scrollEffect()\n  }, [])\n\n  return (\n    <div className=\"character-selection-page\">\n      <CrewMembers />\n      {playerWithoutCharacter && (\n        <>\n          <p>\n            Joueur {playerWithoutCharacter.number} : quel pirate êtes vous ?\n          </p>\n          <div className=\"characters-container\" id=\"menu-wrapper\">\n            <div className=\"characters menu\">\n              {CHARACTERS.map((character) => {\n                return (\n                  <div\n                    className={`character item ${\n                      characterIsAvailable(character, players) ? \"\" : \"disabled\"\n                    }`}\n                    key={character.id}\n                    onClick={(event) => {\n                      if (characterIsAvailable(character, players)) {\n                        event.target.animate(\n                          [\n                            { transform: \"scale(1)\" },\n                            { transform: \"scale(1.3)\" },\n                            { transform: \"scale(1)\" },\n                          ],\n                          {\n                            duration: 400,\n                            fill: \"forwards\",\n                          },\n                        )\n                        setPlayerCharacter(playerWithoutCharacter, character)\n                      }\n                    }}\n                  >\n                    <Image\n                      className=\"character-img\"\n                      width=\"40\"\n                      height=\"40\"\n                      src={character && character.img}\n                      alt=\"player\"\n                      style={{\n                        border: `4px solid ${\n                          (character && character.color) || \"black\"\n                        }`,\n                      }}\n                    />\n                    <span>{character.name}</span>\n                  </div>\n                )\n              })}\n            </div>\n            <div className=\"paddles\">\n              <button className=\"left-paddle paddle hidden\">{\"<\"}</button>\n              <button\n                className=\"right-paddle paddle\"\n                onClick={() => {\n                  scrollEffect()\n                }}\n              >\n                {\">\"}\n              </button>\n            </div>\n          </div>\n        </>\n      )}\n\n      {!playerWithoutCharacter && (\n        <div className=\"crew-completed\">\n          <p>L’équipage est au complet !</p>\n          <Image\n            style={{ opacity: 0.5 }}\n            src={cardToSmallImageUrl({ type: CARD_TWO_SWORDS_CHALLENGE })}\n          />\n          <button\n            onClick={() => {\n              startGame()\n            }}\n          >\n            Démarrer la partie\n          </button>\n        </div>\n      )}\n    </div>\n  )\n}\n\nconst CrewMembers = () => {\n  const players = usePlayers()\n\n  return (\n    <div className={`crew ${players.length > 3 ? \"large-crew\" : \"\"}`}>\n      <div className=\"title\">Votre equipage:</div>\n      <ul>\n        {players.map((player) => {\n          return (\n            <li key={player.id}>\n              {player.character ? (\n                <Image\n                  className=\"crew-member-img\"\n                  width=\"40px\"\n                  height=\"40px\"\n                  src={player.character && player.character.img}\n                  alt=\"player\"\n                  style={{\n                    border: `4px solid ${\n                      (player.character && player.character.color) || \"black\"\n                    }`,\n                  }}\n                  loadWhenIntersecting={false}\n                />\n              ) : (\n                <div className=\"placeholder-img\"></div>\n              )}\n              <span>\n                {player.character\n                  ? player.character.name\n                  : `Joueur${player.number}`}\n              </span>\n            </li>\n          )\n        })}\n      </ul>\n    </div>\n  )\n}\n\nconst useStartGame = createAction((state) => {\n  const { cardIds } = state\n  return {\n    ...state,\n    gameStarted: true,\n    cardIds: mixDeck(cardIds),\n  }\n})\n\nconst characterIsAvailable = (character, players) => {\n  return !players.some(\n    (player) => player.character && player.character.name === character.name,\n  )\n}\n\nconst useSetPlayerCharacter = createAction((state, player, character) => {\n  const { players } = state\n  player.character = character\n  return {\n    ...state,\n    players: [...players],\n  }\n})\n\nconst scrollEffect = () => {\n  var scrollDuration = 300\n  var itemsLength = document.getElementsByClassName(\"item\").length\n  var itemSize = 123\n\n  var getMenuWrapperSize = function () {\n    return document.getElementById(\"menu-wrapper\")\n      ? document.getElementById(\"menu-wrapper\").offsetWidth\n      : null\n  }\n  var menuWrapperSize = getMenuWrapperSize()\n  var getMenuSize = function () {\n    return itemsLength * itemSize\n  }\n  var menuSize = getMenuSize()\n  window.onresize = () => {\n    menuWrapperSize = getMenuWrapperSize()\n  }\n  var menuVisibleSize = menuWrapperSize\n  var menuInvisibleSize = menuSize - menuVisibleSize\n\n  var getMenuPosition = function () {\n    return document.querySelector(\".menu\").scrollLeft\n  }\n  var leftPaddle = document.querySelector(\".left-paddle\")\n  var rightPaddle = document.querySelector(\".right-paddle\")\n\n  if (document.querySelector(\".menu\")) {\n    document.querySelector(\".menu\").onscroll = () => {\n      menuInvisibleSize = menuSize - menuWrapperSize\n      var menuPosition = getMenuPosition()\n      var menuEndOffset = menuInvisibleSize\n\n      if (menuPosition <= 0) {\n        leftPaddle.classList.add(\"hidden\")\n        rightPaddle.classList.remove(\"hidden\")\n      } else if (menuPosition < menuEndOffset) {\n        // show both paddles in the middle\n        leftPaddle.classList.remove(\"hidden\")\n        rightPaddle.classList.remove(\"hidden\")\n      } else if (menuPosition >= menuEndOffset) {\n        leftPaddle.classList.remove(\"hidden\")\n        rightPaddle.classList.add(\"hidden\")\n      }\n    }\n  }\n\n  if (rightPaddle) {\n    rightPaddle.onclick = () => {\n      if (document.querySelector(\".menu\")) {\n        const scrollStart = document.querySelector(\".menu\").scrollLeft\n        const scrollEnd = scrollStart + menuWrapperSize\n        startJavaScriptAnimation({\n          duration: scrollDuration,\n          onProgress: ({ progress }) => {\n            document.querySelector(\".menu\").scrollLeft =\n              scrollStart + (scrollEnd - scrollStart) * progress\n          },\n        })\n      }\n    }\n  }\n\n  if (leftPaddle) {\n    leftPaddle.onclick = () => {\n      if (document.querySelector(\".menu\")) {\n        const scrollStart = document.querySelector(\".menu\").scrollLeft\n        const scrollEnd = scrollStart - menuWrapperSize\n        startJavaScriptAnimation({\n          duration: scrollDuration,\n          onProgress: ({ progress }) => {\n            document.querySelector(\".menu\").scrollLeft =\n              scrollStart + (scrollEnd - scrollStart) * progress\n          },\n        })\n      }\n    }\n  }\n}\n",
    "import React from \"react\"\n\nimport {\n  usePlayers,\n  useGameStarted,\n  useRoundStarted,\n  useCurrentPlayerId,\n} from \"root/src/app/main.store.js\"\nimport { Round } from \"root/src/app/round/Round.jsx\"\nimport { ScoreBoard } from \"root/src/app/score-board/ScoreBoard.jsx\"\nimport { GameConfiguration } from \"root/src/app/game/GameConfiguration.jsx\"\nimport { CharacterSelection } from \"root/src/app/game/CharacterSelection.jsx\"\n\nexport const Game = ({ playerAnimationListener }) => {\n  const players = usePlayers()\n  const currentPlayerId = useCurrentPlayerId()\n  const roundStarted = useRoundStarted()\n  const isOnGameConfigurationScreen = useIsOnGameConfigurationScreen()\n  const isOnCharacterSelectionScreen = useIsOnCharacterSelectionScreen()\n\n  const [scoreboardOpenedByUser, scoreboardOpenedByUserSetter] =\n    React.useState(false)\n  const [roundOverPayload, roundOverPayloadSetter] = React.useState(null)\n  const [playerAnimation, playerAnimationSetter] = React.useState(null)\n\n  const isOnScoreboardScreen = !roundStarted || scoreboardOpenedByUser\n\n  const player = players.find((player) => player.id === currentPlayerId)\n  const playerScoreWhenRoundStartedRef = React.useRef(null)\n\n  React.useEffect(() => {\n    if (roundOverPayload) {\n      playerAnimationSetter({\n        player,\n        score: {\n          from: playerScoreWhenRoundStartedRef.current,\n          to: player.score,\n        },\n        roundOverReason: roundOverPayload.reason,\n        symbolsInChest: roundOverPayload.symbolsInChest,\n      })\n    } else {\n      playerAnimationSetter(null)\n    }\n  }, [roundOverPayload, currentPlayerId])\n\n  React.useEffect(() => {\n    if (playerAnimationListener) {\n      return playerAnimationListener(playerAnimationSetter)\n    }\n    return undefined\n  }, [playerAnimationListener])\n\n  if (isOnGameConfigurationScreen) {\n    return <GameConfiguration />\n  }\n\n  if (isOnCharacterSelectionScreen) {\n    return <CharacterSelection players={players} />\n  }\n\n  if (isOnScoreboardScreen) {\n    return (\n      <ScoreBoard\n        openedByUser={scoreboardOpenedByUser}\n        closeScoreboard={() => {\n          scoreboardOpenedByUserSetter(false)\n        }}\n        playerAnimation={playerAnimation}\n      />\n    )\n  }\n\n  return (\n    <Round\n      openScoreboard={() => {\n        scoreboardOpenedByUserSetter(true)\n      }}\n      onRoundStart={() => {\n        playerScoreWhenRoundStartedRef.current = player.score\n        roundOverPayloadSetter(null)\n      }}\n      onRoundOver={(roundOverPayload) => {\n        roundOverPayloadSetter(roundOverPayload)\n      }}\n    />\n  )\n}\n\nexport const useIsOnGameConfigurationScreen = () => {\n  const players = usePlayers()\n  const needsToChooseNumberOfPlayers = players.length === 0\n  return needsToChooseNumberOfPlayers\n}\n\nexport const useIsOnCharacterSelectionScreen = () => {\n  const gameStarted = useGameStarted()\n  return !gameStarted\n}\n",
    "import { createAction, defaultState } from \"root/src/app/main.store.js\"\n\nexport const useDisableAnimations = createAction((state) => {\n  return {\n    ...state,\n    animationsDisabled: true,\n  }\n})\n\nexport const useEnableAnimations = createAction((state) => {\n  return {\n    ...state,\n    animationsDisabled: false,\n  }\n})\n\nexport const useDisableSound = createAction((state) => {\n  return {\n    ...state,\n    soundDisabled: true,\n  }\n})\n\nexport const useEnableSound = createAction((state) => {\n  return {\n    ...state,\n    soundDisabled: false,\n  }\n})\n\nexport const useCancelGame = createAction(() => {\n  return defaultState\n})\n",
    "import React from \"react\"\nimport { addToHomescreen } from \"@jsenv/pwa\"\n\nexport const useAddToHomescreen = () => {\n  const available = useAddToHomescreenAvailable()\n  const prompt = useAddToHomescreenPrompt()\n  return [available, prompt]\n}\n\nconst useAddToHomescreenAvailable = () => {\n  const [addToHomescreenAvailable, addToHomescreenAvailableSetter] =\n    React.useState()\n\n  React.useEffect(() => {\n    return addToHomescreen.listenAvailabilityChange(() => {\n      addToHomescreenAvailableSetter(addToHomescreen.isAvailable())\n    })\n  }, [])\n\n  return addToHomescreenAvailable\n}\n\nconst useAddToHomescreenPrompt = () => {\n  return React.useCallback(addToHomescreen.prompt)\n}\n",
    "import React from \"react\"\nimport {\n  serviceWorkerIsAvailable,\n  getServiceWorkerUpdate,\n  listenServiceWorkerUpdate,\n  checkServiceWorkerUpdate,\n  activateServiceWorkerUpdate,\n} from \"@jsenv/pwa\"\n\nexport const useServiceWorkerIsAvailable = () => {\n  return serviceWorkerIsAvailable()\n}\n\nexport const useServiceWorkerUpdate = () => {\n  const [update, updateSetter] = React.useState(getServiceWorkerUpdate())\n  React.useEffect(() => {\n    return listenServiceWorkerUpdate(() => {\n      updateSetter(getServiceWorkerUpdate())\n    })\n  }, [])\n  return update\n}\n\nexport const useCheckServiceWorkerUpdate = () => {\n  return checkServiceWorkerUpdate\n}\n\nexport const useActivateServiceWorkerUpdate = () => {\n  return activateServiceWorkerUpdate\n}\n",
    "/* eslint-disable no-nested-ternary */\nimport React from \"react\"\n\nimport {\n  useServiceWorkerIsAvailable,\n  useServiceWorkerUpdate,\n  useCheckServiceWorkerUpdate,\n  useActivateServiceWorkerUpdate,\n} from \"./service-worker.hooks.js\"\n\nexport const UpdateApplication = ({ settingsDialogIsOpen }) => {\n  const serviceWorkerIsAvailable = useServiceWorkerIsAvailable()\n\n  if (!serviceWorkerIsAvailable) {\n    return null\n  }\n\n  return <ServiceWorkerView settingsDialogIsOpen={settingsDialogIsOpen} />\n}\n\nconst ServiceWorkerView = ({ checkOnOpen = true, settingsDialogIsOpen }) => {\n  const checkServiceWorkerUpdate = useCheckServiceWorkerUpdate()\n  const serviceWorkerUpdate = useServiceWorkerUpdate()\n\n  React.useEffect(() => {\n    if (checkOnOpen && settingsDialogIsOpen) {\n      checkServiceWorkerUpdate()\n    }\n  }, [checkOnOpen, settingsDialogIsOpen])\n\n  return (\n    <fieldset style={{ minHeight: \"4em\" }}>\n      <legend>Mise a jour</legend>\n      {serviceWorkerUpdate ? (\n        <UpdateAvailable serviceWorkerUpdate={serviceWorkerUpdate} />\n      ) : (\n        <UpdateNotAvailable />\n      )}\n    </fieldset>\n  )\n}\n\nconst UpdateAvailable = ({ serviceWorkerUpdate }) => {\n  const { shouldBecomeNavigatorController, navigatorWillReload } =\n    serviceWorkerUpdate\n  const activateServiceWorkerUpdate = useActivateServiceWorkerUpdate()\n\n  const [updatingStatus, updatingStatusSetter] = React.useState(\"\")\n\n  const update = async () => {\n    updatingStatusSetter(\"updating\")\n    await activateServiceWorkerUpdate({\n      onActivating: () => updatingStatusSetter(\"activating\"),\n      onActivated: () => updatingStatusSetter(\"activated\"),\n      onBecomesNavigatorController: () => updatingStatusSetter(\"\"),\n    })\n  }\n\n  return (\n    <>\n      <p>\n        {updatingStatus === \"\" ? \"Mise a jour prête\" : null}\n        {updatingStatus === \"updating\" || updatingStatus === \"activating\"\n          ? \"Mise a jour...\"\n          : null}\n        {updatingStatus === \"activated\" && navigatorWillReload\n          ? `Mise a jour activée, la page va se recharger`\n          : null}\n        {updatingStatus === \"activated\" &&\n        !navigatorWillReload &&\n        shouldBecomeNavigatorController\n          ? `Mise a jour activée, recharger la page pour installer`\n          : null}\n        {updatingStatus === \"activated\" &&\n        !navigatorWillReload &&\n        !shouldBecomeNavigatorController\n          ? `Mise a jour activée`\n          : null}\n      </p>\n      <button disabled={Boolean(updatingStatus)} onClick={update}>\n        {navigatorWillReload ? `Recharger pour mettre a jour` : `Mettre a jour`}\n      </button>\n    </>\n  )\n}\n\nconst UpdateNotAvailable = () => {\n  const checkServiceWorkerUpdate = useCheckServiceWorkerUpdate()\n  const [updateAttemptStatus, updateAttemptStatusSetter] = React.useState(\"\")\n\n  const check = async () => {\n    updateAttemptStatusSetter(\"fetching\")\n    try {\n      const found = await checkServiceWorkerUpdate()\n      if (found) {\n        // no need to handle that case because\n        // an update is now available\n        // meaning <UpdateAvailable /> will take over.\n      } else {\n        updateAttemptStatusSetter(\"notfound\")\n      }\n    } catch (e) {\n      updateAttemptStatusSetter(\"failed\")\n      console.error(e)\n    }\n  }\n\n  return (\n    <>\n      <p>\n        {updateAttemptStatus === \"fetching\"\n          ? \"Recherche de mise a jour...\"\n          : null}\n        {updateAttemptStatus === \"notfound\"\n          ? \"Pas de mise a jour disponible.\"\n          : null}\n        {updateAttemptStatus === \"failed\" ? \"Une erreur est survenue.\" : null}\n      </p>\n      <button disabled={updateAttemptStatus === \"fetching\"} onClick={check}>\n        Chercher\n      </button>\n    </>\n  )\n}\n",
    "/* eslint-disable import/max-dependencies */\n/* eslint-disable no-nested-ternary */\nimport React from \"react\"\n\nimport { Stylesheet } from \"root/src/app/generic/Stylesheet.jsx\"\nimport {\n  Dialog,\n  useDialogState,\n} from \"root/src/app/dialog/dialog.component.jsx\"\nimport {\n  useAnimationsDisabled,\n  useSoundDisabled,\n} from \"root/src/app/main.store.js\"\nimport {\n  useDisableAnimations,\n  useEnableAnimations,\n  useDisableSound,\n  useEnableSound,\n  useCancelGame,\n} from \"root/src/app/main.actions.js\"\nimport { CloseIcon } from \"root/src/app/dialog/CloseIcon.jsx\"\nimport { symbolMonkeyUrl } from \"root/src/app/symbols/symbols.js\"\nimport { Image } from \"root/src/app/generic/Image.jsx\"\n\nimport { useAddToHomescreen } from \"./add-to-home-screen.hooks.js\"\nimport { UpdateApplication } from \"./UpdateApplication.jsx\"\n\nconst settingsCssUrl = new URL(\"./settings.css\", import.meta.url)\n\nexport const Settings = () => {\n  const [settingsDialogIsOpen, openSettingsDialog, closeSettingsDialog] =\n    useDialogState()\n\n  return (\n    <>\n      <Stylesheet href={settingsCssUrl} />\n      <div\n        id=\"settings\"\n        onClick={() => {\n          openSettingsDialog()\n        }}\n      >\n        <svg\n          className=\"settings-icon\"\n          width=\"24px\"\n          height=\"24px\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path\n            fill=\"currentColor\"\n            d=\"M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z\"\n          />\n        </svg>\n      </div>\n      <SettingsDialog\n        settingsDialogIsOpen={settingsDialogIsOpen}\n        closeSettingsDialog={closeSettingsDialog}\n      />\n    </>\n  )\n}\n\nconst SettingsDialog = ({ settingsDialogIsOpen, closeSettingsDialog }) => {\n  const animationsDisabled = useAnimationsDisabled()\n  const disableAnimations = useDisableAnimations()\n  const enableAnimations = useEnableAnimations()\n\n  // TODO later: give this an effect on sounds\n  const soundDisabled = useSoundDisabled()\n  const disableSound = useDisableSound()\n  const enableSound = useEnableSound()\n\n  const cancelGame = useCancelGame()\n\n  const [confirmCancelGameDialogIsOpen, confirmCancelGameDialogIsOpenSetter] =\n    React.useState(false)\n  const openConfirmCancelGameDialog = () => {\n    confirmCancelGameDialogIsOpenSetter(true)\n  }\n  const closeConfirmCancelGameDialog = () => {\n    confirmCancelGameDialogIsOpenSetter(false)\n  }\n\n  const requestCancelGame = () => {\n    openConfirmCancelGameDialog()\n  }\n  const performCancelGame = () => {\n    cancelGame()\n    closeSettingsDialog()\n  }\n\n  return (\n    <Dialog\n      className=\"settings-dialog dialog-spacing-10 dialog-spacing-fluid dialog-spacing-left-fixed dialog-spacing-right-fixed\"\n      isOpen={settingsDialogIsOpen}\n      onRequestClose={closeSettingsDialog}\n      requestCloseOnClickOutside={true}\n    >\n      <div className=\"settings-dialog-content\">\n        <div className=\"dialog-close\" onClick={closeSettingsDialog}>\n          <CloseIcon />\n        </div>\n        <div className=\"dialog-simple-title\">Settings</div>\n        <div className=\"setting-element\">\n          <label>\n            <input\n              type=\"checkbox\"\n              className={animationsDisabled ? \"checked\" : \"unchecked\"}\n              checked={animationsDisabled}\n              onChange={(e) => {\n                if (e.target.checked) {\n                  disableAnimations()\n                } else {\n                  enableAnimations()\n                }\n              }}\n            />\n            {animationsDisabled && <CheckIcon />}\n            Désactiver les animations\n          </label>\n        </div>\n        <div className=\"setting-element\">\n          <label>\n            <input\n              type=\"checkbox\"\n              className={soundDisabled ? \"checked\" : \"unchecked\"}\n              checked={soundDisabled}\n              onChange={(e) => {\n                if (e.target.checked) {\n                  disableSound()\n                } else {\n                  enableSound()\n                }\n              }}\n            />\n            {soundDisabled && <CheckIcon />}\n            Couper le son\n          </label>\n        </div>\n        <div className=\"setting-element\">\n          <button\n            onClick={() => {\n              requestCancelGame()\n            }}\n          >\n            Annuler la partie\n          </button>\n        </div>\n        <AddToHomescreen />\n        <UpdateApplication settingsDialogIsOpen={settingsDialogIsOpen} />\n        <ConfirmCancelGameDialog\n          confirmCancelGameDialogIsOpen={confirmCancelGameDialogIsOpen}\n          closeConfirmCancelGameDialog={closeConfirmCancelGameDialog}\n          performCancelGame={performCancelGame}\n        />\n      </div>\n    </Dialog>\n  )\n}\n\nconst AddToHomescreen = () => {\n  const [available, prompt] = useAddToHomescreen()\n\n  if (!available) {\n    return null\n  }\n\n  return (\n    <button\n      onClick={() => {\n        prompt()\n      }}\n    >\n      Installer application\n    </button>\n  )\n}\n\nconst CheckIcon = () => (\n  <svg className=\"check-icon\" width=\"20\" height=\"20\" viewBox=\"0 0 512 512\">\n    <path\n      fill=\"currentColor\"\n      d=\"M435.848 83.466L172.804 346.51l-96.652-96.652c-4.686-4.686-12.284-4.686-16.971 0l-28.284 28.284c-4.686 4.686-4.686 12.284 0 16.971l133.421 133.421c4.686 4.686 12.284 4.686 16.971 0l299.813-299.813c4.686-4.686 4.686-12.284 0-16.971l-28.284-28.284c-4.686-4.686-12.284-4.686-16.97 0z\"\n    ></path>\n  </svg>\n)\n\nconst ConfirmCancelGameDialog = ({\n  confirmCancelGameDialogIsOpen,\n  closeConfirmCancelGameDialog,\n  performCancelGame,\n}) => {\n  return (\n    <Dialog\n      className=\"confirm-cancel-game-dialog dialog-spacing-10 dialog-spacing-fluid dialog-spacing-left-fixed dialog-spacing-right-fixed\"\n      isOpen={confirmCancelGameDialogIsOpen}\n      onRequestClose={closeConfirmCancelGameDialog}\n      requestCloseOnClickOutside={true}\n    >\n      <div className=\"settings-dialog-content\">\n        <div className=\"dialog-close\" onClick={closeConfirmCancelGameDialog}>\n          <CloseIcon />\n        </div>\n        <div className=\"title-container\">\n          <Image\n            className=\"illustration\"\n            src={symbolMonkeyUrl}\n            width=\"40\"\n            height=\"40\"\n          />\n          <div className=\"title\">\n            Êtes-vous certain de vouloir annuler la partie ?\n          </div>\n        </div>\n        <div className=\"content\">\n          Cette action irréversible effacera la progression actuelle et remettra\n          la partie à zéro !\n        </div>\n        <div className=\"confirm-action\">\n          <button\n            onClick={() => {\n              performCancelGame()\n              closeConfirmCancelGameDialog()\n            }}\n          >\n            Confirmer\n          </button>\n        </div>\n      </div>\n    </Dialog>\n  )\n}\n",
    "import React from \"react\"\n\nimport { useGameCreated } from \"root/src/app/main.store.js\"\nimport { useMainDomNodeSetter } from \"root/src/app/dom/dom.main.jsx\"\nimport { Home } from \"root/src/app/home/Home.jsx\"\nimport { Game } from \"root/src/app/game/Game.jsx\"\nimport { Stylesheet } from \"root/src/app/generic/Stylesheet.jsx\"\nimport { Settings } from \"root/src/app/settings/settings.component.jsx\"\n\nconst appCssUrl = new URL(\"./app.css\", import.meta.url)\n\nexport const App = (props) => {\n  return (\n    <div id=\"main\" ref={useMainDomNodeSetter()}>\n      <Stylesheet href={appCssUrl} />\n      <Settings />\n      <AppBody {...props} />\n    </div>\n  )\n}\n\nconst AppBody = (props) => {\n  const gameCreated = useGameCreated()\n\n  if (gameCreated) {\n    return <Game {...props} />\n  }\n\n  return <Home {...props} />\n}\n"
  ],
  "names": [
    "cache",
    "Map",
    "Status",
    "useImage",
    "src",
    "lazy",
    "statusInitial",
    "get",
    "status",
    "setStatus",
    "React",
    "useState",
    "mounted",
    "useRef",
    "useEffect",
    "current",
    "startLoading",
    "useCallback",
    "async",
    "image",
    "loadImage",
    "console",
    "log",
    "set",
    "error",
    "delete",
    "useUpdateEffect",
    "effect",
    "dependencies",
    "layout",
    "isInitialMount",
    "useLayoutEffect",
    "useBecomes",
    "becomesPredicate",
    "deps",
    "transition",
    "useTransition",
    "Boolean",
    "transitionPredicate",
    "mountedRef",
    "depsRef",
    "from",
    "to",
    "usePrevious",
    "value",
    "ref",
    "Image",
    "loadWhenIntersecting",
    "usePlaceholderWhileLoading",
    "animateLoaded",
    "intersectionRoot",
    "intersectionRootMargin",
    "intersectionThreshold",
    "FallbackWhileNotIntersecting",
    "ImageNotIntersectingFallback",
    "FallbackWhileLoading",
    "ImageLoadingFallback",
    "useImageStatusHook",
    "props",
    "startLoadingImage",
    "statusPrevious",
    "imageFetchStart",
    "imageFetchEnd",
    "useUrlLoadingNotifier",
    "domNodeRefForIntersection",
    "intersecting",
    "root",
    "rootMargin",
    "threshold",
    "isIntersecting",
    "isIntersectingSetter",
    "domNodeRef",
    "domNode",
    "observer",
    "window",
    "IntersectionObserver",
    "entry",
    "unobserve",
    "observe",
    "disconnect",
    "useIntersecting",
    "intersectingPrevious",
    "domNodeRefForAnimation",
    "startAnimation",
    "useImageLoadAnimation",
    "opacity",
    "getComputedStyle",
    "getPropertyValue",
    "animate",
    "duration",
    "forwardRef",
    "TRANSPARENT_PNG_DATA_URL",
    "Home",
    "ButtonNewGame",
    "createNewGame",
    "useCreateNewGame",
    "className",
    "symbolSwordUrl",
    "onClick",
    "createAction",
    "state",
    "gameCreated",
    "chestSlotContentToSymbol",
    "chestSlotContent",
    "dices",
    "type",
    "dice",
    "diceToVisibleSymbol",
    "computeScoreForSwordChallenge",
    "symbols",
    "goal",
    "gamble",
    "countSymbol",
    "SYMBOL_SWORD",
    "computeScoreForSymbols",
    "symbolArray",
    "symbol",
    "filter",
    "symbolCandidate",
    "length",
    "perfectCount",
    "score",
    "perfectBonus",
    "getScoreAndPerfectBonus",
    "usefullSymbol",
    "symbolCountMap",
    "countSymbolsOccurences",
    "Object",
    "values",
    "forEach",
    "symbolCount",
    "SYMBOL_DIAMOND",
    "SYMBOL_COIN",
    "hasOwnProperty",
    "useMemo",
    "useCurrentPlayer",
    "currentPlayerId",
    "useCurrentPlayerId",
    "players",
    "usePlayers",
    "find",
    "playerCandidate",
    "id",
    "useHasNeverRolled",
    "rollCount",
    "useRollCount",
    "useHasRolledOnce",
    "useSymbolsInChest",
    "useDices",
    "chestSlots",
    "useChestSlots",
    "keys",
    "reduce",
    "previous",
    "chestSlot",
    "useRemainingSpotInCursedArea",
    "skullCountInCursedArea",
    "useSkullCountInCursedArea",
    "useHasDicesToCurse",
    "dicesToCurse",
    "useDicesToCurse",
    "diceRolledIds",
    "useDiceRolledIds",
    "witchUncursedDiceId",
    "useWitchUncursedDiceId",
    "remainingSpotInCursedArea",
    "map",
    "diceRolledId",
    "diceRolled",
    "diceIsOnSkull",
    "slice",
    "useRollDiceAllowed",
    "currentCardId",
    "useCurrentCardId",
    "hasNeverRolled",
    "scoreMarked",
    "useScoreMarked",
    "threeSkullsOrMoreInCursedArea",
    "useThreeSkullsOrMoreInCursedArea",
    "hasDicesToCurse",
    "isChestCard",
    "cardIdToCard",
    "useCursedCount",
    "diceCursedIds",
    "useDiceCursedIds",
    "symbolsFromCard",
    "useSymbolsFromCard",
    "symbolIsSkull",
    "currentCard",
    "isCoinCard",
    "isDiamondCard",
    "isOneSkullCard",
    "SYMBOL_SKULL",
    "isTwoSkullsCard",
    "useMarkScoreAllowed",
    "useRoundScore",
    "symbolsInChest",
    "markScoreAllowed",
    "card",
    "isSwordChallengeCard",
    "numberOfSwords",
    "gambleAmount",
    "isAnimalsCard",
    "SYMBOL_PARROT",
    "SYMBOL_MONKEY",
    "isPirateCard",
    "computeRoundScore",
    "useSwordChallengeOnGoing",
    "quantityKept",
    "quantityRequired",
    "useSwordQuantityRequired",
    "useStartPlayerRound",
    "player",
    "currentCardActivated",
    "roundStarted",
    "ROUND_START_STATE",
    "useEndPlayerRound",
    "useActivateCurrentCard",
    "useSendToSkullIsland",
    "isOnSkullIsland",
    "useMarkScore",
    "currentPlayer",
    "nextScore",
    "witchCardEffectUsed",
    "useSetDiceRolledAreaPosition",
    "x",
    "y",
    "zIndex",
    "rolledAreaPosition",
    "rolledAreaZIndex",
    "useSetDiceChestSlot",
    "previousChestSlot",
    "useCurseDice",
    "useUncurseDice",
    "fromLab",
    "diceCursedId",
    "useUnkeepDice",
    "useKeepDice",
    "RoundEffects",
    "useRoundEffects",
    "useCurseDiceEffect",
    "useFailSwordChallengeEffect",
    "useFourSkullsOrMoreOnFirstRollEffect",
    "animationsDisabled",
    "useAnimationsDisabled",
    "curseDice",
    "timeout",
    "setTimeout",
    "clearTimeout",
    "markScore",
    "threeSkullsOrMoreInCursedAreaBecomesTrue",
    "threeSkullsOrMoreInCursedAreaPrevious",
    "roundScore",
    "swordChallengeCard",
    "isFirstRoll",
    "useIsFirstRoll",
    "useIsOnSkullIsland",
    "sendToSkullIsland",
    "useDrawCard",
    "cardIds",
    "cardUsedIds",
    "cardDrawnId",
    "useAddExtraCoin",
    "useAddExtraDiamond",
    "useShuffleDeck",
    "mixDeck",
    "CardsEffects",
    "useCoinCardEffect",
    "useDiamondCardEffect",
    "addExtraCoin",
    "useCurrentCardActivated",
    "currentCardBecomesActivated",
    "currentCardActivatedPrevious",
    "currentCardIsCoinCard",
    "addExtraDiamond",
    "currentCardIsDiamondCard",
    "useSignal",
    "signal",
    "listeners",
    "listen",
    "callback",
    "once",
    "callbackOriginal",
    "args",
    "stopListening",
    "removed",
    "listenersWithoutCallback",
    "i",
    "searching",
    "listenerCandidate",
    "push",
    "emit",
    "listener",
    "createSignal",
    "useSignalState",
    "stateSetter",
    "DiceOnGoing",
    "rolledAreaRef",
    "offscreenRef",
    "diceOverRolledAreaListener",
    "diceOverRolledArea",
    "style",
    "outline",
    "startJavaScriptAnimation",
    "timingFunction",
    "t",
    "onProgress",
    "onCancel",
    "onComplete",
    "isNaN",
    "warn",
    "parseInt",
    "startMs",
    "performance",
    "now",
    "currentRequestAnimationFrameId",
    "done",
    "rawProgress",
    "progress",
    "handler",
    "nowMs",
    "Math",
    "min",
    "requestAnimationFrame",
    "cancelAnimationFrame",
    "useAnimateTransitionUsingJs",
    "condition",
    "animatedValue",
    "animatedValueSetter",
    "useAnimateTransition",
    "round",
    "transitionSetter",
    "valuePrevious",
    "ValueWithAnimatedTransition",
    "Stylesheet",
    "href",
    "onLoad",
    "fetchStart",
    "fetchEnd",
    "injectStylesheetIntoDocument",
    "onload",
    "fn",
    "linkMap",
    "stopUsing",
    "has",
    "useCount",
    "rest",
    "linkCleanup",
    "memoizeLinksByHref",
    "link",
    "document",
    "createElement",
    "rel",
    "removeLoadedListener",
    "addLoadedListener",
    "head",
    "appendChild",
    "removeChild",
    "findFirstDescendant",
    "rootNode",
    "iterator",
    "createNextNodeIterator",
    "node",
    "next",
    "getNextNode",
    "skipChild",
    "firstChild",
    "nextSibling",
    "parentNode",
    "nextNode",
    "createAfterNodeIterator",
    "fromNode",
    "skipChildren",
    "childrenSkipped",
    "getDeepestNode",
    "deepestNode",
    "lastChild",
    "createPreviousNodeIterator",
    "previousNode",
    "previousSibling",
    "getPreviousNode",
    "firstFocusableDescendantOrSelf",
    "element",
    "firstFocusableDescendant",
    "isFocusable",
    "trapFocusInside",
    "nodeType",
    "activeTraps",
    "activeTrap",
    "getFirstTabbable",
    "isDiscoverableWithKeyboard",
    "getLastTabbable",
    "findLastDescendant",
    "getPreviousTabbableOrLast",
    "predicate",
    "findBefore",
    "activeElement",
    "getNextTabbableOrFirst",
    "findAfter",
    "deactivate",
    "activate",
    "lock",
    "onmousedown",
    "event",
    "target",
    "contains",
    "isEventOutside",
    "preventDefault",
    "stopImmediatePropagation",
    "onkeydown",
    "isTabEvent",
    "activeElementIsBody",
    "body",
    "shiftKey",
    "elementToFocus",
    "focus",
    "performTabEventNavigation",
    "addEventListener",
    "capture",
    "passive",
    "removeEventListener",
    "hasAttribute",
    "Number",
    "getAttribute",
    "hasNegativeTabIndex",
    "key",
    "keyCode",
    "previousTrap",
    "unlock",
    "trap",
    "lastTrap",
    "pop",
    "getAllScrollableParent",
    "scrollableParents",
    "visitElement",
    "elementOrScrollableParent",
    "scrollableParent",
    "getScrollableParent",
    "arg",
    "TypeError",
    "documentElement",
    "getStyleValue",
    "getScrollingElement",
    "ownerDocument",
    "findScrollableParent",
    "scrollingElement",
    "isCompliant",
    "possiblyScrollingElement",
    "test",
    "tagName",
    "getNextBodyElement",
    "bodyIsScrollable",
    "frameset",
    "isBodyElement",
    "isScrollable",
    "isHidden",
    "display",
    "compatMode",
    "testScrollCompliance",
    "iframe",
    "height",
    "iframeDocument",
    "contentWindow",
    "write",
    "close",
    "scrollComplianceResult",
    "scrollHeight",
    "verticalOverflowIsVisible",
    "horizontalOverflowIsVisible",
    "position",
    "parent",
    "isDocumentElement",
    "dialogBaseCssUrl",
    "DialogBase",
    "container",
    "insertTop",
    "insertLeft",
    "insertRight",
    "insertBottom",
    "children",
    "isOpen",
    "requestCloseOnEscape",
    "requestCloseOnClickOutside",
    "closeMethod",
    "stealFocus",
    "restoreStolenFocus",
    "trapFocus",
    "onAfterOpen",
    "onRequestClose",
    "onFocusIn",
    "onFocusOut",
    "backdropProps",
    "dialogRootNode",
    "dialogRootNodeSetter",
    "isInsideDocument",
    "isOpenPrevious",
    "focusIsInsideDialog",
    "hasOrContainsFocus",
    "onDocumentBlur",
    "blurEvent",
    "relatedTarget",
    "onDialogFocus",
    "focusEvent",
    "onDocumentFocus",
    "elementsToScrollLock",
    "cleanUpArray",
    "prev",
    "overflow",
    "removeProperty",
    "cleanup",
    "trapScrollInside",
    "nodeFocusedBeforeTransfer",
    "firstFocusableElement",
    "preventScroll",
    "elementsToHide",
    "Array",
    "child",
    "setAttribute",
    "removeAttribute",
    "ReactDOM",
    "createPortal",
    "role",
    "onKeyDown",
    "keydownEvent",
    "ESC_KEY",
    "tabIndex",
    "visibility",
    "hidden",
    "undefined",
    "DialogBackDrop",
    "onMouseDownActive",
    "mousedownEvent",
    "clickEvent",
    "backdropElement",
    "setBackdropElement",
    "dialogCssUrl",
    "Dialog",
    "useMainDomNode",
    "useDialogState",
    "initialValue",
    "dialogIsOpen",
    "setDialogIsOpen",
    "StarRain",
    "Star",
    "viewBox",
    "fill",
    "d",
    "CloseIcon",
    "width",
    "heiht",
    "DialogWood",
    "title",
    "spacingClasses",
    "RoundScoreRulesDialog",
    "closeDialog",
    "symbolCoinUrl",
    "symbolDiamondUrl",
    "useScoreParticles",
    "totalScore",
    "onScoreParticleAdded",
    "onScoreParticleRemoved",
    "onScoreParticleMerged",
    "scoreSetter",
    "scoreParticles",
    "scoreParticlesSetter",
    "scoreInParticles",
    "particle",
    "scoreParticle",
    "oncancel",
    "removeScoreParticleFromState",
    "onfinish",
    "scoreParticleCandidate",
    "addScoreParticleToState",
    "rotateRectangle",
    "points",
    "degree",
    "origin",
    "topLeft",
    "topRight",
    "bottomRight",
    "bottomLeft",
    "getRectangleCenterPoint",
    "point",
    "degrees",
    "radians",
    "degreesToRadians",
    "cosinus",
    "cos",
    "sinus",
    "sin",
    "run",
    "rise",
    "rotatePoint",
    "PI",
    "lineCollidesWithRectangle",
    "line",
    "rectangle",
    "someRectangleSideLine",
    "rectangleSideLine",
    "firstLineStartPoint",
    "firstLineEndPoint",
    "secondLineStartPoint",
    "secondLineEndPoint",
    "unknownA",
    "unknownB",
    "denominator",
    "lineCollidesWithLine",
    "firstPoint",
    "secondPoint",
    "thirdPoint",
    "fourthPoint",
    "rectangleInsideOf",
    "parentRectangle",
    "left",
    "right",
    "top",
    "bottom",
    "getDistanceBetweenRectangles",
    "firstRectangle",
    "secondRectangle",
    "horizontalDiff",
    "verticalDiff",
    "sqrt",
    "getDistanceBetweenTwoPoints",
    "getDomNodeRectangle",
    "domNodeRect",
    "getBoundingClientRect",
    "documentScroll",
    "getDocumentScroll",
    "floor",
    "domNodeCollidesWithRectangle",
    "domNodeRectangle",
    "findDomNodeClosestToRectangle",
    "domNodeCandidates",
    "rectangleCandidates",
    "domNodeCandidate",
    "closestRectangle",
    "smallestDistance",
    "rectangleCandidate",
    "distance",
    "findRectangleCloserToRectangle",
    "indexOf",
    "printPointInDocument",
    "color",
    "autoRemove",
    "autoRemoveAfter",
    "div",
    "background",
    "border",
    "remove",
    "autoRemoveTimeout",
    "RoundScoreParticle",
    "totalScoreDomNodeRef",
    "animationDelayGetter",
    "ScoreParticleTreasure",
    "ScoreParticleCombo",
    "ScoreParticlePerfect",
    "animationDuration",
    "symbolUrl",
    "symbolToImageUrl",
    "particleDomNodeRef",
    "particleDomNode",
    "totalScoreDomNode",
    "particlePosition",
    "domNodeToCenterPoint",
    "querySelector",
    "animateScoreParticleMoveToTotalScore",
    "delay",
    "svgDomNodeRef",
    "svgChildDomNodeRef",
    "useSvgFluidSizeEffect",
    "svgDomNode",
    "animateScoreParticlePopOnPlace",
    "dominantBaseline",
    "particleDomNodeRectangle",
    "totalScoreDomNodeRectangle",
    "particleWidth",
    "particleHeight",
    "startX",
    "startY",
    "intermediateX",
    "intermediateY",
    "endX",
    "endY",
    "animation",
    "transform",
    "offset",
    "cancel",
    "svgChildDomNodeBox",
    "getBBox",
    "ceil",
    "useCoinEffect",
    "addScoreParticle",
    "effectSuspended",
    "chestSlotSymbol",
    "chestSlotContentIsCoin",
    "symbolIsCoin",
    "useDiamondEffect",
    "chestSlotContentIsDiamond",
    "symbolIsDiamond",
    "usePerfectEffect",
    "perfect",
    "useComboEffect",
    "SYMBOLS",
    "chestSlotsWithThatSymbol",
    "compareSymbols",
    "comboScore",
    "COMBO_SCORES",
    "comboScorePreviousRef",
    "animationRef",
    "comboScorePrevious",
    "comboIncreased",
    "comboDecreased",
    "symbolIsParrot",
    "cleanupScoreParticle",
    "chestSlotAnimationCleanups",
    "chestSlotWithThatSymbol",
    "transformOrigin",
    "chestSlotAnimationCleanup",
    "leftSymbol",
    "rightSymbol",
    "symbolIsMonkey",
    "RoundScore",
    "swordChallengeOngoing",
    "useSwordChallengeOngoing",
    "ScoreDisplay",
    "scoreDialogIsOpen",
    "openScoreDialog",
    "closeScoreDialog",
    "DoubleScoreIndicator",
    "ScoreWithoutAnimation",
    "ScoreWithAnimations",
    "NegativeScoreSign",
    "roundScoreDomNodeRef",
    "scoreParticleMergedListener",
    "scoreParticleMergedEmitter",
    "scoreDisplayed",
    "useRoundScoreParticleEffects",
    "useScoreParticleMergeEffect",
    "lastScoreParticleMsRef",
    "lastScoreParticleMs",
    "animationDelay",
    "scoreParticleAnimationDelayGetter",
    "Date",
    "previousValue",
    "minDelayBetweenParticles",
    "msToWait",
    "scoreParticleMerged",
    "roundScoreDomNode",
    "animateScoreParticleMerge",
    "easing",
    "quantityRequiredArray",
    "challengeWon",
    "swordNumberIncreased",
    "quantityKeptPrevious",
    "swordSliceAnimation",
    "swordSliceAnimationSetter",
    "index",
    "diceSize",
    "cursedGridImageUrl",
    "Chest",
    "chestRef",
    "diceOverChestListener",
    "diceOverChest",
    "protectedByChestCard",
    "ChestSlot",
    "CursedCover",
    "margin",
    "backgroundColor",
    "color1",
    "borderColor",
    "color2",
    "borderWidth",
    "borderStyle",
    "draggable",
    "alt",
    "cardsRules",
    "name",
    "rule",
    "more",
    "CardRulesDialog",
    "cardRules",
    "textAlign",
    "cardToImageUrl",
    "SmallCard",
    "cardToSmallImageUrl",
    "swordsDisabledImageUrl",
    "SwordChallengeIndicator",
    "SwordIconActivated",
    "SwordIconDisabled",
    "Header",
    "openScoreboard",
    "headerSmallCardRef",
    "HeaderSmallCard",
    "BackCard",
    "CurrentPlayer",
    "TotalScore",
    "cardDialogIsOpen",
    "cardDialogIsOpenSetter",
    "backgroundImage",
    "cardDefaultUrl",
    "backgroundSize",
    "character",
    "img",
    "totalScoreAnimation",
    "pow",
    "diceSpacing",
    "rollDices",
    "rolledAreaDomNode",
    "rolledAreaRectangle",
    "rolledAreaWidth",
    "rolledAreaHeight",
    "rectangleAllowed",
    "otherRotatedRectangles",
    "getRandomAndCollisionFreeInfo",
    "count",
    "getRandomDiceRectangle",
    "rotation",
    "getDiceRandomRotation",
    "rotatedRectangleCandidate",
    "some",
    "otherRotatedRectangle",
    "rotatedRectangleCollidesWithRotatedRectangle",
    "secondRotatedRectangle",
    "firstRotatedRectangleSideLine",
    "rotatedRectangle",
    "visibleFaceIndex",
    "getDiceRandomFace",
    "positionCandidate",
    "getRandomNumberBetweenInterval",
    "faces",
    "max",
    "random",
    "ButtonRoll",
    "rollDiceAllowed",
    "roll",
    "useRoll",
    "disabledNotEnoughDice",
    "disabledChestCard",
    "disabled",
    "symbolSkullUrl",
    "dicesToRoll",
    "Footer",
    "onRoundOver",
    "ButtonMarkScore",
    "ButtonEndRound",
    "markScoreButtonVisible",
    "hasRolledOnce",
    "useMarkScoreButtonVisible",
    "sign",
    "abs",
    "startNextRoundAllowed",
    "useStartNextRoundAllowed",
    "endPlayerRound",
    "swordChallengeOnGoing",
    "reason",
    "wichLabelImageUrl",
    "SkullIsland",
    "cursedAreaRef",
    "isWitchCard",
    "UncurseDiceLabel",
    "ExtraSkull",
    "stroke",
    "Portal",
    "stringifyTransformations",
    "rotate",
    "scale",
    "translate",
    "join",
    "throttle",
    "ms",
    "trailing",
    "previousMs",
    "throttled",
    "msEllapsedSincePreviousCall",
    "enableDragGesture",
    "logLevel",
    "onGrip",
    "onLongGrip",
    "onDrag",
    "onRelease",
    "longGripMs",
    "logger",
    "createLogger",
    "dragIntentTimeout",
    "pendingGesture",
    "dragIntent",
    "removeMoveListener",
    "removeReleaseListener",
    "cancelMoveThrottling",
    "debug",
    "removeDragstartListener",
    "addDomEventListener",
    "dragstartEvent",
    "removeMousedownListener",
    "which",
    "handleGrip",
    "mouseEventToPagePosition",
    "mousemoveThrottled",
    "mousemoveEvent",
    "handleMove",
    "mouseupEvent",
    "handleRelease",
    "removeTouchstartListener",
    "touchstartEvent",
    "touchEventToPagePosition",
    "touchmoveThrottled",
    "touchmoveEvent",
    "touchendEvent",
    "removeClickListener",
    "dropEffect",
    "pointerPositionPrevious",
    "domNodeStartPosition",
    "gripPointerPosition",
    "longGripTimeout",
    "pointerPosition",
    "domNodeToPagePosition",
    "handleLongGrip",
    "gripHorizontalShift",
    "gripVerticalShit",
    "movePosition",
    "relativeX",
    "relativeY",
    "setDropEffect",
    "handleCancel",
    "rect",
    "mouseEvent",
    "pageX",
    "pageY",
    "touchEvent",
    "firstChangedTouch",
    "changedTouches",
    "Dice",
    "diceAnimation",
    "anmationDebug",
    "onDiceClick",
    "onDiceDrag",
    "onDiceDrop",
    "onDiceDragEnd",
    "disapear",
    "appear",
    "traceUpdate",
    "import",
    "useTraceUpdate",
    "propsUpdated",
    "mainDomNode",
    "diceDomNode",
    "useDiceDomNode",
    "diceDomNodeSetter",
    "useDiceDomNodeSetter",
    "isDiceKept",
    "useDiceKeptIds",
    "includes",
    "diceGripped",
    "diceGrippedSetter",
    "dragGesture",
    "setDragGesture",
    "parentNodePrevious",
    "portalParentNode",
    "bigMoveOccured",
    "disableDragGesture",
    "diceRectangle",
    "rectangleToRectangleInsideDomNode",
    "onSkull",
    "diceX",
    "diceY",
    "diceZIndex",
    "cursor",
    "transitionProperty",
    "transitionDuration",
    "transitionTimingFunction",
    "rx",
    "ry",
    "computeDiceColors",
    "strokeWidth",
    "onUpdate",
    "changedProps",
    "entries",
    "ps",
    "k",
    "v",
    "DiceContainer",
    "offscreenDomNode",
    "chestDomNode",
    "cursedAreaDomNode",
    "onDiceOverChestChange",
    "onDiceOverRolledAreaChange",
    "useWitchCardEffectUsed",
    "threeSkullsOrMore",
    "cursedCount",
    "useThreeSkullsOrMore",
    "diceAnimationState",
    "dispatchDiceAnimation",
    "useReducer",
    "action",
    "setDiceRolledAreaPosition",
    "keepDice",
    "unkeepDice",
    "uncurseDice",
    "setDiceChestSlot",
    "dropTargetRef",
    "diceId",
    "diceLocation",
    "diceToLocation",
    "propsFromLocation",
    "diceLocationToProps",
    "diceIsGoingToBeCursed",
    "diceIsInCursedArea",
    "diceIsInRolledArea",
    "diceIsInRolledAreaGetter",
    "clickEffect",
    "getClickEffect",
    "firstAvailableChestSlot",
    "firstAvailableChestSlotGetter",
    "dragDiceGesture",
    "dropTargetGetter",
    "getDropEffect",
    "dropDiceGesture",
    "dropAnimation",
    "dropPosition",
    "closestRolledAreaPosition",
    "closestRolledAreaPositionGetter",
    "highestRolledAreaZIndex",
    "highestRolledAreaZIndexGetter",
    "rolledAreaDropPositionGetter",
    "closestAvailableChestSlot",
    "closestAvailableChestSlotGetter",
    "chestSlotDropPositionGetter",
    "diceToChestSlot",
    "diceChestSlot",
    "keepDiceAllowedGetter",
    "diceIsInChestGetter",
    "unkeepDiceAllowedGetter",
    "uncurseDiceAllowedGetter",
    "absoluteRolledAreaPositionRectangle",
    "rectangleWidth",
    "rectangleHeight",
    "rectangleAbsoluteToDomNode",
    "destinationSlotDomNode",
    "chestSlotToChestSlotDomNode",
    "destinationSlotRectangle",
    "requestedRectangle",
    "rectangleInsideAndRelative",
    "rectangleRelativeTo",
    "rectangleRelativeToDomNode",
    "diceWithHighestZIndex",
    "chestSlotMap",
    "chestSlotDomNode",
    "closestDomNode",
    "DrawCardDialog",
    "cardDeck",
    "useCardIds",
    "cardId",
    "useCardDeck",
    "backCardRef",
    "topCardRef",
    "smallCardRef",
    "remainingCardCount",
    "TopCard",
    "DeckButton",
    "StartButton",
    "ButtonShuffleDeck",
    "ButtonDrawCard",
    "drawCard",
    "shuffleDeck",
    "shufflePending",
    "sufflePendingSetter",
    "animateDeckShuffle",
    "backCard",
    "timeoutId",
    "activateCurrentCard",
    "cardActivating",
    "cardActivatingSetter",
    "animateCardActivation",
    "headerSmallCard",
    "smallCard",
    "topCard",
    "headerSmallCardRectangle",
    "topCardAnimation",
    "smallCardAnimation",
    "Round",
    "onRoundStart",
    "roundMounted",
    "roundMountedSetter",
    "diceOverRolledAreaEmitter",
    "diceOverChestEmitter",
    "RoundGameBoard",
    "onRoundMounted",
    "refs",
    "StartPlayerRoundDialog",
    "startPlayerRound",
    "boxShadow",
    "winTreasureUrl",
    "boarUrl",
    "SCORE_MAX",
    "pathList",
    "path1",
    "path2",
    "path3",
    "path4",
    "ScoreBoard",
    "openedByUser",
    "closeScoreboard",
    "playerAnimation",
    "useRoundStarted",
    "startPlayerRoundDialogIsOpen",
    "startPlayerRoundDialogIsOpenSetter",
    "openStartPlayerRoundDialog",
    "nextPlayer",
    "getNextPlayer",
    "PlayerPath",
    "pathCoordinates",
    "isCurrentPlayer",
    "currentPlayerIndex",
    "findIndex",
    "pathForegroundElementRef",
    "boatElementRef",
    "animation3SkullsElementRef",
    "animationSymbolsElementRef",
    "scoreAnimation",
    "scoreAnimationSetter",
    "symbolsAnimation",
    "symbolsAnimationSetter",
    "skullsAnimation",
    "skullsAnimationSetter",
    "roundOverReason",
    "boatAnimation",
    "offsetDistance",
    "ratioToOffsetDistance",
    "symbolsElement",
    "pathForegroundElement",
    "pathLength",
    "getTotalLength",
    "pathForegroundAnimation",
    "strokeDashoffset",
    "ratioToStrokeDashOffset",
    "playState",
    "strokeDasharray",
    "offsetPath",
    "ThreeSkullsAnimated",
    "Avatar",
    "ratio",
    "item",
    "GameConfiguration",
    "setPlayerCount",
    "useSetPlayerCount",
    "playerCount",
    "_",
    "number",
    "CHARACTERS",
    "String",
    "CharacterSelection",
    "setPlayerCharacter",
    "useSetPlayerCharacter",
    "startGame",
    "useStartGame",
    "playerWithoutCharacter",
    "scrollEffect",
    "CrewMembers",
    "characterIsAvailable",
    "CARD_TWO_SWORDS_CHALLENGE",
    "gameStarted",
    "itemsLength",
    "getElementsByClassName",
    "getMenuWrapperSize",
    "getElementById",
    "offsetWidth",
    "menuWrapperSize",
    "menuSize",
    "onresize",
    "menuInvisibleSize",
    "leftPaddle",
    "rightPaddle",
    "onscroll",
    "menuPosition",
    "scrollLeft",
    "menuEndOffset",
    "classList",
    "add",
    "onclick",
    "scrollStart",
    "scrollEnd",
    "Game",
    "playerAnimationListener",
    "isOnGameConfigurationScreen",
    "useIsOnGameConfigurationScreen",
    "isOnCharacterSelectionScreen",
    "useIsOnCharacterSelectionScreen",
    "scoreboardOpenedByUser",
    "scoreboardOpenedByUserSetter",
    "roundOverPayload",
    "roundOverPayloadSetter",
    "playerAnimationSetter",
    "isOnScoreboardScreen",
    "playerScoreWhenRoundStartedRef",
    "useGameStarted",
    "useDisableAnimations",
    "useEnableAnimations",
    "useDisableSound",
    "soundDisabled",
    "useEnableSound",
    "useCancelGame",
    "defaultState",
    "useAddToHomescreenAvailable",
    "addToHomescreenAvailable",
    "addToHomescreenAvailableSetter",
    "addToHomescreen",
    "listenAvailabilityChange",
    "isAvailable",
    "useAddToHomescreenPrompt",
    "prompt",
    "useServiceWorkerIsAvailable",
    "serviceWorkerIsAvailable",
    "useCheckServiceWorkerUpdate",
    "checkServiceWorkerUpdate",
    "useActivateServiceWorkerUpdate",
    "activateServiceWorkerUpdate",
    "UpdateApplication",
    "settingsDialogIsOpen",
    "ServiceWorkerView",
    "checkOnOpen",
    "serviceWorkerUpdate",
    "update",
    "updateSetter",
    "getServiceWorkerUpdate",
    "listenServiceWorkerUpdate",
    "useServiceWorkerUpdate",
    "minHeight",
    "UpdateAvailable",
    "UpdateNotAvailable",
    "shouldBecomeNavigatorController",
    "navigatorWillReload",
    "updatingStatus",
    "updatingStatusSetter",
    "onActivating",
    "onActivated",
    "onBecomesNavigatorController",
    "updateAttemptStatus",
    "updateAttemptStatusSetter",
    "e",
    "settingsCssUrl",
    "Settings",
    "openSettingsDialog",
    "closeSettingsDialog",
    "SettingsDialog",
    "disableAnimations",
    "enableAnimations",
    "useSoundDisabled",
    "disableSound",
    "enableSound",
    "cancelGame",
    "confirmCancelGameDialogIsOpen",
    "confirmCancelGameDialogIsOpenSetter",
    "requestCancelGame",
    "checked",
    "onChange",
    "CheckIcon",
    "AddToHomescreen",
    "ConfirmCancelGameDialog",
    "closeConfirmCancelGameDialog",
    "performCancelGame",
    "available",
    "symbolMonkeyUrl",
    "appCssUrl",
    "AppBody",
    "useMainDomNodeSetter",
    "useGameCreated"
  ],
  "mappings": "kyBAIA,MAAMA,GAAQ,IAAIC,IAELC,GACF,UADEA,GAEH,SAFGA,GAGH,SAGGC,GAAW,CAACC,GAAOC,KAAAA,GAAO,GAAU,YAEzCC,EADaN,GAAMO,IAAIH,GACMF,GAAgBA,IAC5CM,EAAQC,GAAaC,EAAMC,SAASL,GAErCM,EAAUF,EAAMG,QAAO,GAC7BH,EAAMI,WAAU,KACdF,EAAQG,SAAU,EACX,KACLH,EAAQG,SAAU,KAEnB,UAEGC,EAAeN,EAAMO,aAAYC,aACjCV,IAAWN,aAKPiB,QAAcC,EAAUhB,OAEzBQ,EAAQG,oBAEXM,QAAQC,IAAI,mBAGdtB,GAAMuB,IAAInB,EAAKe,GACfV,EAAUP,IACV,MAAOsB,OACFZ,EAAQG,eAIbf,GAAMyB,OAAOrB,GACbK,EAAUP,OAEX,CAACO,EAAWL,WAEfM,EAAMI,WAAU,KACTT,GACHW,MAED,CAACX,IAEG,CAACG,EAAQQ,IClDLU,GAAkB,CAACC,EAAQC,EAAe,IAAMC,OAAAA,GAAS,GAAU,YACxEC,EAAiBpB,EAAMG,QAAO,IAClCgB,EAASnB,EAAMqB,gBAAkBrB,EAAMI,YAAW,SAC9CgB,EAAef,eAKZY,IAJLG,EAAef,SAAU,IAK1Ba,IAIQI,GAAa,CAACC,EAAkBC,WACrCC,EAAaC,GAAcH,EAAkBC,UAC5CG,QAAQF,IAGJC,GAAgB,CAACE,EAAqBJ,WAC3CK,EAAa7B,EAAMG,QAAO,GAChCH,EAAMI,WAAU,MACa,IAAvByB,EAAWxB,UACbwB,EAAWxB,SAAU,YAInByB,EAAU9B,EAAMG,OAAOqB,UAC7BxB,EAAMI,WAAU,KACd0B,EAAQzB,QAAUmB,IACjBA,GAEEK,EAAWxB,SAGXuB,KAAuBE,EAAQzB,SAG7B,CACL0B,KAAMD,EAAQzB,QACd2B,GAAIR,GAPG,MAWES,GAAeC,UACpBC,EAAMnC,EAAMG,OAAO+B,UACzBlC,EAAMI,WAAU,KACd+B,EAAI9B,QAAU6B,IACb,CAACA,IACGC,EAAI9B,SC9CA+B,GAAQ,EACnBC,qBAAAA,GAAuB,EACvBC,2BAAAA,GAA6B,EAC7BC,cAAAA,GAAgB,EAEhBC,iBAAAA,EACAC,uBAAAA,EACAC,sBAAAA,EACAC,6BAAAA,EAA+BC,GAC/BC,qBAAAA,EAAuBC,GACvBC,mBAAAA,EAAqBtD,GAErBC,IAAAA,KACGsD,YAEIlD,EAAQmD,GAAqBF,EAAmBrD,EAAK,CAC1DC,KAAM0C,IAEFa,EAAiBjB,GAAYnC,IAE5BqD,EAAiBC,GAAiBC,EAAsB3D,GAC/DM,EAAMI,WAAU,KACS,YAAnB8C,GAA2C,YAAXpD,GAClCqD,IAEqB,WAAnBD,GAA0C,WAAXpD,GACjCsD,MAED,CAACF,EAAgBpD,UAEbwD,EAA2BC,GCpCL,GAAGC,KAAAA,EAAMC,WAAAA,EAAYC,UAAAA,EAAY,YACvDC,EAAgBC,GAAwB5D,EAAMC,UAAS,GACxD4D,EAAa7D,EAAMG,gBAEzBH,EAAMI,WAAU,WACR0D,EAAUD,EAAWxD,YACtByD,SACI,QAELH,SACK,WAIHI,EAAW,IAAIC,OAAOC,sBAC1B,EAAEC,MACIA,EAAMP,gBACRI,EAASI,UAAUL,GACnBF,GAAqB,IAErBA,GAAqB,KAGzB,CACEJ,KAAAA,EACAC,WAAAA,EACAC,UAAAA,WAGJK,EAASK,QAAQN,GAEV,KACLC,EAASM,gBAEV,CAACV,IAEG,CAACE,EAAYF,IDA8BW,CAAgB,CAChEd,KAAMhB,EACNiB,WAAYhB,EACZiB,UAAWhB,IAGP6B,EAAuBtC,GAAYsB,GACzCvD,EAAMI,WAAU,KAEViC,IAAyBkC,GAAwBhB,GAEnDN,MAED,CAACZ,EAAsBkC,EAAsBhB,UAEzCiB,EAAwBC,GAAkBC,YACjD1E,EAAMqB,iBAAgB,KAChBkB,GAAoC,WAAnBW,GAA0C,WAAXpD,GAClD2E,MAED,CAAClC,EAAeW,EAAgBpD,IAE/BuC,GAAmC,WAAXvC,IAAwByD,EAC3CvD,gBAAC2C,GAA6BR,IAAKmB,IAGxChB,GAAyC,WAAXxC,EACzBE,gBAAC6C,QAGH7C,yBAAKN,IAAKA,EAAKyC,IAAKqC,GAA4BxB,KAGnD0B,GAAwB,WACtBb,EAAa7D,EAAMG,SAEnBsE,EAAiBzE,EAAMO,aAAY,WACjCuD,EAAUD,EAAWxD,QACrBsE,EAAUX,OAAOY,iBAAiBd,GAASe,iBAAiB,WAClEf,EAAQgB,QAAQ,CAAC,CAAEH,QAAS,GAAK,CAAEA,QAAAA,IAAY,CAC7CI,SAAU,eAIP,CAAClB,EAAYY,IAIhB3B,GAAuB9C,EAAMgF,YAAW,CAAChC,EAAOb,IAC7CnC,yBAAKN,IAAKuF,GAA0B9C,IAAKA,GAASa,MAIrDJ,GAA+B5C,EAAMgF,YAAW,CAAChC,EAAOb,IACrDnC,yBAAKN,IAAKuF,GAA0B9C,IAAKA,GAASa,MAGrDiC,GACJ,qHE1FWC,GAAO,IACXlF,gBAACmF,SAGJA,GAAgB,WACdC,EAAgBC,YAGpBrF,uBAAKsF,UAAU,YACbtF,gBAACoC,IAAM1C,IAAK6F,IACZvF,0BAAQwF,QAASJ,wBAKjBC,GAAmBI,GAAcC,IAC9B,IACFA,EACHC,aAAa,MCtBJC,GAA2B,CAACC,EAAkBC,QACrDD,GAA8C,WAA1BA,EAAiBE,YAChCF,EAAiB3D,SAGtB2D,GAA8C,SAA1BA,EAAiBE,KAAiB,OAElDC,EAAOF,EADED,EAAiB3D,cAEzB+D,EAAoBD,UAGtB,MCyCHE,GAAgC,CAACC,GAAWC,KAAAA,EAAMC,OAAAA,KACvBC,GAAYH,EAASI,IAAiBH,EAE5DI,GAAuBL,GAAWE,GAEnCA,EAGGC,GAAc,CAACG,EAAaC,IAChCD,EAAYE,QAAQC,GAAoBA,IAAoBF,IAChEG,OAGCL,GAAyB,CAACL,EAASW,WACjCC,MAAEA,EAAFC,aAASA,GAAiBC,GAAwBd,EAASW,UAC1DC,EAAQC,GAGJC,GAA0B,CAACd,EAASW,EAAe,SAC1DC,EAAQ,EACRG,EAAgB,QAGdC,EAAiBC,GAAuBjB,UAC9CkB,OAAOC,OAAOH,GAAgBI,SAASC,IACjB,IAAhBA,IAAmBT,GAAS,KACZ,IAAhBS,IAAmBT,GAAS,KACZ,IAAhBS,IAAmBT,GAAS,KACZ,IAAhBS,IAAmBT,GAAS,KACZ,IAAhBS,IAAmBT,GAAS,KACZ,IAAhBS,IAAmBT,GAAS,KAC5BS,EAAc,IAAGN,GAAiBM,MAIxCrB,EAAQoB,SAASb,IACXA,IAAWe,IACbV,GAAS,IACLI,EAAeM,GAAkB,IAAGP,GAAiB,IAEvDR,IAAWgB,IACbX,GAAS,IACLI,EAAeO,GAAe,IAAGR,GAAiB,OAInD,CACLH,MAAAA,EACAC,aAAcE,IAAkBJ,EAAe,IAAM,IAInDM,GAA0BjB,UACxBgB,EAAiB,UACvBhB,EAAQoB,SAASb,IACXS,EAAeQ,eAAejB,GAChCS,EAAeT,KAEfS,EAAeT,GAAU,KAGtBS,IC5EHS,QAAEA,IAAY5H,EAMP6H,GAAmB,EAC9BC,gBAAAA,EAAkBC,IAClBC,QAAAA,EAAUC,KACR,KACKD,EAAQE,MACZC,GAAoBA,EAAgBC,KAAON,IAOnCO,GAAoB,EAAGC,UAAAA,EAAYC,KAAmB,KACnD,IAAdD,EAEWE,GAAmB,EAAGF,UAAAA,EAAYC,KAAmB,KAChED,EAAY,EAQDG,GAAoB,EAC/B3C,MAAAA,EAAQ4C,IACRC,WAAAA,EAAaC,KACX,KACKvB,OAAOwB,KAAKF,GAAYG,QAAO,CAACC,EAAUC,WACzCtC,EAASd,GAAyB+C,EAAWK,GAAYlD,UAE3DY,EACK,IAAIqC,EAAUrC,GAGhBqC,IACN,IAGQE,GAA+B,EAC1CC,uBAAAA,EAAyBC,MACvB,KACK,EAAID,EAGAE,GAAqB,EAChCC,aAAAA,EAAeC,MACb,KACKD,EAAaxC,OAAS,EAalByC,GAAkB,EAC7BxD,MAAAA,EAAQ4C,IACRa,cAAAA,EAAgBC,IAChBC,oBAAAA,EAAsBC,IACtBC,0BAAAA,EAA4BV,MAC1B,KACmBM,EAClBK,KAAKC,GAAiB/D,EAAM+D,KAC5BlD,QAAQmD,KACFC,EAAcD,IACfA,EAAW1B,KAAOqB,IAGvBO,MAAM,EAAGL,GAIDM,GAAqB,EAChCC,cAAAA,EAAgBC,IAChBC,eAAAA,EAAiB/B,KACjBgC,YAAAA,EAAcC,IACdC,8BAAAA,EAAgCC,KAChCC,gBAAAA,EAAkBrB,MAChB,OACGc,KAIDG,MAIAD,IAIAG,IACEG,EAAYC,EAAaT,KAM3BO,KAOOG,GAAiB,EAC5BvB,aAAAA,EAAeC,KACfJ,uBAAAA,EAAyBC,MACvB,KAC4BE,EAAaxC,OACCqC,EAUjCsB,GAAmC,EAC9CtB,uBAAAA,EAAyBC,MACvB,KACKD,EAAyB,EAGrBC,GAA4B,EACvC0B,cAAAA,EAAgBC,IAChBC,gBAAAA,EAAkBC,MAChB,KAEAH,EAAchE,OACdkE,EAAgBpE,QAAQD,GAAWuE,EAAcvE,KAASG,OAIxDmE,GAAqB,EAAGd,cAAAA,EAAgBC,KAAuB,UAC9DD,EAAe,MAAO,SACrBgB,EAAcP,EAAaT,UAC7BiB,EAAWD,GAAqB,CAACxD,GACjC0D,EAAcF,GAAqB,CAACzD,GACpC4D,EAAeH,GAAqB,CAACI,GACrCC,EAAgBL,GAAqB,CAACI,EAAcA,GACjD,IA4BIE,GAAsB,EACjCnB,YAAAA,EAAcC,IACdJ,cAAAA,EAAgBC,IAChBI,8BAAAA,EAAgCC,KAChCC,gBAAAA,EAAkBrB,MAChB,MACEiB,IAIAE,IACEG,EAAYC,EAAaT,KAM3BO,KAICP,GA2BMuB,GAAgB,EAC3BvB,cAAAA,EAAgBC,IAChBuB,eAAAA,EAAiBjD,KACjB4B,YAAAA,EAAcC,IACdqB,iBAAAA,EAAmBH,MACjB,KACK5D,IACL,IDtQ6B,GAC/BgE,KAAAA,EACAF,eAAAA,EACArB,YAAAA,EACAsB,iBAAAA,KAEIE,EAAqBD,GAClBvB,GAAgBsB,EAGdzF,GAA8BwF,EAAgB,CACnDtF,KAAMwF,EAAKE,eACXzF,OAAQuF,EAAKG,gBAJLH,EAAKG,aAQbC,EAAcJ,GACTpF,GACLkF,EAAe9B,KAAKlD,GAClBA,IAAWuF,EAAgBC,EAAgBxF,KAK7CyF,EAAaP,GACiC,EAAzCpF,GAAuBkF,GAG5BP,EAAWS,IAIXR,EAAcQ,GAHTpF,GAAuBkF,EAAgB,GAOzClF,GAAuBkF,GCmO1BU,CAAkB,CAChBR,KAAMjB,EAAaT,GACnBwB,eAAAA,EACArB,YAAAA,EACAsB,iBAAAA,KAEJ,CAACzB,EAAewB,EAAgBrB,EAAasB,IAIpCU,GAA2B,WAChCnC,EAAgBC,IAChByB,EAAOjB,EAAaT,GACpBwB,EAAiBjD,KACjB6D,EAAehG,GAAYoF,EAAgBnF,GAC3CgG,EAAmBC,aAEpBX,EAAqBD,IAGnBU,EAAeC,GAGXC,GAA2B,EACtCtC,cAAAA,EAAgBC,KACd,YACIyB,EAAOjB,EAAaT,UACtB2B,EAAqBD,GAAcA,EAAKE,eACrC,MChTIW,GAAsBhH,GAAa,CAACC,EAAOgH,KAC/C,IACFhH,EACHoC,gBAAiB4E,EAAOtE,GACxB8B,cAAe,KACfyC,sBAAsB,EACtBC,cAAc,KACXC,OAIMC,GAAoBrH,GAAcC,IACtC,IACFA,EACHwE,cAAe,KACfyC,sBAAsB,EACtBC,cAAc,MAILG,GAAyBtH,GAAcC,IAC3C,IACFA,EACHiH,sBAAsB,MAIbK,GAAuBvH,GAAcC,IACzC,IACFA,EACHuH,iBAAiB,MAIRC,GAAezH,GAAa,CAACC,EAAOqB,WACzCiB,QAAEA,EAAFF,gBAAWA,GAAoBpC,EAC/ByH,EAAgBnF,EAAQE,MAAK,EAAGE,GAAAA,KAASA,IAAON,IAChDsF,EAAYD,EAAcpG,MAAQA,SACxCoG,EAAcpG,MAAQqG,EAAY,EAAI,EAAIA,EAEnC,IACF1H,EACHsC,QAAS,IAAIA,GACbqC,aAAa,MAWXwC,GAAoB,CACxBpD,oBAAqB,KACrB4D,qBAAqB,EACrB/E,UAAW,EACXiB,cAAe,GACfsB,cAAe,GACflC,WAAY,GACP,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,MAEL0B,aAAa,EACb4C,iBAAiB,GCxENK,GAA+B7H,GAC1C,CAACC,EAAOM,GAAQuH,EAAAA,EAAGC,EAAAA,GAAKC,WAChB3H,MAAEA,GAAUJ,SAClBM,EAAK0H,mBAAqB,CAAEH,EAAAA,EAAGC,EAAAA,GAC/BxH,EAAK2H,iBAAmBF,EACjB,IACF/H,EACHI,MAAO,IAAKA,OAKL8H,GAAsBnI,GAAa,CAACC,EAAOM,EAAMgD,WACtDL,WAAEA,GAAejD,EACjBmI,EAAoBxG,OAAOwB,KAAKF,GAAYT,MAAMc,UAChDnD,EAAmB8C,EAAWK,UAElCnD,GAC0B,SAA1BA,EAAiBE,MACjBF,EAAiB3D,QAAU8D,EAAKoC,YAG7B,IACF1C,EACHiD,WAAY,IACPA,KACCkF,EAAoB,EAAGA,GAAoB,MAAS,IACvD7E,GAAY,CAAEjD,KAAM,OAAQ7D,MAAO8D,EAAKoC,SAKlC0F,GAAerI,GAAa,CAACC,EAAOM,WACzCuD,cAAEA,EAAFsB,cAAiBA,GAAkBnF,QAClC,IACFA,EACH6D,cAAeA,EAAc5C,QAC1BkD,GAAiBA,IAAiB7D,EAAKoC,KAE1CyC,cAAe,IAAIA,EAAe7E,EAAKoC,QAI9B2F,GAAiBtI,GAAa,CAACC,EAAOM,EAAMgI,GAAU,WAC3DzE,cAAEA,EAAFsB,cAAiBA,GAAkBnF,QAClC,IACFA,KACCsI,EACA,GACA,CACEvE,oBAAqBzD,EAAKoC,GAC1BiF,qBAAqB,GAE3B9D,cAAe,IAAIA,EAAevD,EAAKoC,IACvCyC,cAAeA,EAAclE,QAC1BsH,GAAiBA,IAAiBjI,EAAKoC,SAKjC8F,GAAgBzI,GAAa,CAACC,EAAOM,WAC1CuD,cAAEA,EAAFZ,WAAiBA,GAAejD,EAChCmI,EAAoBxG,OAAOwB,KAAKF,GAAYT,MAAMc,UAChDnD,EAAmB8C,EAAWK,UAElCnD,GAC0B,SAA1BA,EAAiBE,MACjBF,EAAiB3D,QAAU8D,EAAKoC,YAG7B,IACF1C,EACH6D,cAAe,IAAIA,EAAevD,EAAKoC,IACvCO,WAAY,IACPA,GACFkF,GAAoB,UAKdM,GAAc1I,GAAa,CAACC,EAAOM,EAAMgD,WAC9CO,cAAEA,EAAFZ,WAAiBA,GAAejD,QAC/B,IACFA,EACH6D,cAAeA,EAAc5C,QAC1BkD,GAAiBA,IAAiB7D,EAAKoC,KAE1CO,WAAY,IACPA,GACFK,GAAY,CACXjD,KAAM,OACN7D,MAAO8D,EAAKoC,oBCtEZhI,IAAcJ,EAEToO,GAAe,KAC1BC,KACO,MAGIA,GAAkB,KAC7BC,KACAC,KACAC,MAGIF,GAAqB,WACnBG,EAAqBC,IACrBrF,EAAeC,KACfqF,EAAYb,KAElB1N,IAAU,QACoB,IAAxBiJ,EAAaxC,aACR,UAGL4H,SACFpF,EAAa9B,SAASvB,IACpB2I,EAAU3I,MAEL,aAGH4I,EAAUC,YAAW,KACzBxF,EAAa9B,SAASvB,IACpB2I,EAAU3I,QAEX,WAEI,KACL8I,aAAaF,MAEd,CAACvF,KAIAkF,GAA8B,WAC5BrD,EAAcP,EAAaR,KAC3BE,EAAcC,IACdyE,EAAY7B,KACZ3C,EAAgCC,KAChCwE,EAA2C1N,IAC9C2N,IACEA,GAAyC1E,GAC5C,CAACA,IAEG2E,EAAazD,KACb0D,EAAqBtD,EAAqBX,GAEhD9K,IAAU,KAEN+O,IACC9E,GACD2E,GAEAD,EAAUG,KAEX,CACDC,EACA9E,EACA2E,EACAE,KAKEV,GAAuC,WACrCY,EHlCsB,GAAG9G,UAAAA,EAAYC,KAAmB,KAChD,IAAdD,EGiCoB+G,GACdnE,EAAcP,EAAaR,KAC3B8C,EAAkBqC,IAClBpG,EAAyBC,KACzBoG,EAAoBvC,KAE1B5M,IAAU,KACHgP,IAEDnC,GAEApB,EAAqBX,IAErBhC,EAAyB,GAE7BqG,OACC,CAACH,EAAanC,EAAiB/B,EAAahC,KC7GpCsG,GAAc/J,GAAcC,UACjC+J,QAAEA,EAAFC,YAAWA,GAAgBhK,EAC3BiK,EAAcF,EAAQ,SACrB,IACF/J,EACH+J,QAASA,EAAQzF,MAAM,GACvB0F,YAAa,IAAIA,EAAaC,GAC9BzF,cAAeyF,MAINC,GAAkBnK,GAAcC,UACrCiD,WAAEA,GAAejD,QAChB,IACFA,EACHiD,WAAY,IACPA,IACA,CACD5C,KAAM,SACN7D,MAAOwF,QAMFmI,GAAqBpK,GAAcC,UACxCiD,WAAEA,GAAejD,QAChB,IACFA,EACHiD,WAAY,IACPA,IACA,CACD5C,KAAM,SACN7D,MAAOuF,QAMFqI,GAAiBrK,GAAcC,UACpC+J,QAAEA,EAAFC,YAAWA,GAAgBhK,QAC1B,IACFA,EAQH+J,QAASM,EAAQ,IAAIN,KAAYC,IACjCA,YAAa,OCtCJM,GAAe,KAC1BC,KACAC,KACO,MAGHD,GAAoB,WAClBE,EAAeP,KACf1F,EAAgBC,IAChBwC,EAAuByD,IAEvBC,EAA8B/O,IACjCgP,IACEA,IAAiC3D,GACpC,CAACA,IAEG4D,EACJrG,GAAiBiB,EAAWR,EAAaT,IAE3ClK,EAAMI,WAAU,KACVmQ,GACFJ,MAED,IAEHnQ,EAAMI,WAAU,KACViQ,GAA+BE,GACjCJ,MAED,CAACE,EAA6BE,KAG7BL,GAAuB,WACrBM,EAAkBX,KAClB3F,EAAgBC,IAChBwC,EAAuByD,IAEvBC,EAA8B/O,IACjCgP,IACEA,IAAiC3D,GACpC,CAACA,IAEG8D,EACJvG,GAAiBkB,EAAcT,EAAaT,IAE9ClK,EAAMI,WAAU,KACVqQ,GACFD,MAED,IAEHxQ,EAAMI,WAAU,KACViQ,GAA+BI,GACjCD,MAED,CAACH,EAA6BI,KCpBtBC,GAAY,WAChBC,GAAU3Q,EAAMC,UAAS,IAnDN,UACtB2Q,EAAY,SA2CT,CACLC,OA1Ca,CAACC,GAAYC,KAAAA,GAAO,GAAU,SACvCA,EAAM,OACFC,EAAmBF,EACzBA,EAAW,IAAIG,KACbC,IACAF,KAAoBC,IAIxBL,EAAY,IAAIA,EAAWE,OAEvBK,GAAU,QACRD,EAAgB,QAChBC,EAAS,OACbA,GAAU,QACJC,EAA2B,OAC7BC,EAAIT,EAAU/J,OACdyK,GAAY,OACTD,KAAK,OACJE,EAAoBX,EAAUS,GAChCC,GACEC,IAAsBT,EACxBQ,GAAY,EAKdF,EAAyBI,KAAKD,GAGlCX,EAAYQ,UAEPF,GAWPO,KARW,IAAIR,KACfL,EAAUrJ,SAASmK,IACjBA,KAAYT,SAWsBU,WAC/B,CAAChB,EAAOE,OAAQF,EAAOc,OAGnBG,GAAkBf,UACtBnL,EAAOmM,GAAe7R,EAAMC,kBACnCD,EAAMI,WAAU,IACPyQ,EAAOgB,IACb,IACInM,GC1DIoM,GAAc,EACzBC,cAAAA,EACAC,aAAAA,EACAC,2BAAAA,YAEMC,EAAqBN,GAAeK,UAExCjS,uBAAKsF,UAAU,gBACbtF,uBAAKsF,UAAU,QACftF,uBACEsF,UAAU,OACVnD,IAAK4P,EACLI,MAAO,IACDD,EAAqB,CAAEE,QAAS,cAAiB,MAGzDpS,uBAAKsF,UAAU,iBAAiBnD,IAAK6P,MCpB9BK,GAA2B,EACtCtN,SAAAA,EAAW,IACXuN,eAAAA,EAAkBC,CAAAA,GAAMA,GACxBC,WAAAA,EAAa,SACbC,SAAAA,EAAW,SACXC,WAAAA,EAAa,gBAETC,MAAM5N,UACRpE,QAAQiS,KAAM,uCAAsC7N,KAC7C,OAETA,EAAW8N,SAAS9N,EAAU,UACxB+N,EAAUC,YAAYC,UACxBC,EACAC,GAAO,EACPC,EAAc,EACdC,EAAW,QACTC,EAAU,KACdJ,EAAiC,WAC3BK,EAAQP,YAAYC,MAC1BG,EAAcI,KAAKC,KAAKF,EAAQR,GAAW/N,EAAU,GACrDqO,EAAWd,EAAea,GAC1BD,EAAuB,IAAhBC,EACPX,EAAW,CACTU,KAAAA,EACAC,YAAAA,EACAC,SAAAA,IAEEF,EACFR,IAEAO,EAAiCjP,OAAOyP,sBAAsBJ,IAGlEA,UACa,KACPJ,IACFjP,OAAO0P,qBAAqBT,GAC5BA,EAAiC,MAE9BC,IACHA,GAAO,EACPT,EAAS,CACPU,YAAAA,EACAC,SAAAA,OCrCKO,GAA8B,CACzCzR,GACE6C,SAAAA,EAAW,IAAKuN,eAAAA,EAAgBsB,UAAAA,GAAc,YAEzCC,EAAeC,GAAuB9T,EAAMC,SAAS,aAC5D8T,GACE7R,GACA,CAACH,EAAMC,KACL8R,EAAoB,CAAE5R,MAAOH,IACtBsQ,GAAyB,CAC9BtN,SAAAA,EACAuN,eAAAA,EACAE,WAAY,EAAGY,SAAAA,YACPlR,EAAQqR,KAAKS,MAAMjS,GAAQC,EAAKD,GAAQqR,GAC9CU,EAAoB,CAClB5R,MAAAA,KAGJwQ,WAAY,KACVoB,EAAoB,WAI1B,CAAEF,UAAAA,IAEGC,GAYHE,GAAuB,CAC3B7R,EACA4C,GACE8O,UAAAA,EAAY,MAAM,IAAS,YAEtBnS,EAAYwS,GAAoBjU,EAAMC,SAAS,MAEhDiU,EAAgBjS,GAAYC,GAClClC,EAAMI,WAAU,KACV8T,IAAkBhS,GAAS0R,EAAU1R,EAAOgS,IAC9CD,EAAiB,CACflS,KAAMmS,EACNlS,GAAIE,MAGP,CAACgS,EAAehS,IACnBlC,EAAMI,WAAU,IACVqB,EACKqD,EAAQrD,EAAWM,KAAMN,EAAWO,IAEtC,QACN,CAACP,KC/DO0S,GAA8B,EAAGjS,MAAAA,EAAO6C,SAAAA,EAAU6O,UAAAA,YACvDC,EAAgBF,GAA4BzR,EAAO,CAAE6C,SAAAA,EAAU6O,UAAAA,WAC9DC,EAAgBA,EAAc3R,MAAQA,GCiBlCkS,GAAa,EAAGC,KAAAA,EAAMC,OAAAA,EAAS,mBACnCC,EAAYC,GAAYnR,EAAsBgR,UAErDrU,EAAMI,WAAU,KACdmU,IACOE,GAA6BJ,EAAM,CACxCK,OAAQ,KACNF,IACAF,SAGH,CAACD,IAEG,MA2CHI,GAxCsBE,CAAAA,UACpBC,EAAU,IAAIrV,IAEdsV,EAAaR,QACZO,EAAQE,IAAIT,gBAIXU,SAAEA,KAAaC,GAASJ,EAAQ/U,IAAIwU,GACtCU,EAAW,EACbH,EAAQ/T,IAAIwT,EAAM,CAChBU,SAAUA,EAAW,KAClBC,KAKPJ,EAAQ7T,OAAOsT,GACfW,EAAKC,sBAGA,CAACZ,KAASpD,QACX2D,EAAQE,IAAIT,GAAO,OACfU,SAAEA,KAAaC,GAASJ,EAAQ/U,IAAIwU,UAC1CO,EAAQ/T,IAAIwT,EAAM,CAChBU,SAAUA,EAAW,KAClBC,IAEEH,QAGHI,EAAcN,EAAGN,KAASpD,UAChC2D,EAAQ/T,IAAIwT,EAAM,CAChBU,SAAU,EACVE,YAAAA,IAEKJ,IAI0BK,EACnC,CAACb,GAAQK,OAAAA,EAAS,UAAa,YACvBS,EAAOC,SAASC,cAAc,QACpCF,EAAKG,IAAM,aACXH,EAAKpP,KAAO,iBACNwP,EAAuBC,EAAkBL,EAAMT,UACrDS,EAAKd,KAAOA,EACZe,SAASK,KAAKC,YAAYP,GACnB,KACLI,IACAH,SAASK,KAAKE,YAAYR,OC5EnBS,GAAsB,CAACC,EAAUlB,WACtCmB,EAAWC,GAAuBF,EAAUA,OAC9C3C,KAAEA,EAAMhR,MAAO8T,GAASF,EAASG,aACrB,IAAT/C,GAAgB,IACjByB,EAAGqB,UACEA,IAEL9C,KAAAA,EAAMhR,MAAO8T,GAASF,EAASG,eAE9B,MA4CHC,GAAc,CAACF,EAAMH,EAAUM,GAAY,SAC1CA,EAAW,OACRC,EAAaJ,EAAKI,cACpBA,SACKA,QAILC,EAAcL,EAAKK,eACrBA,SACKA,QAGHC,EAAaN,EAAKM,kBACpBA,GAAcA,IAAeT,EACxBK,GAAYI,EAAYT,GAAU,GAGpC,MAGHE,GAAyB,CAACC,EAAMH,SAChCxV,EAAU2V,QASP,CAAEC,KARI,WACLM,EAAWL,GAAY7V,EAASwV,UACtCxV,EAAUkW,EACH,CACLrD,MAA4B,IAAtBvR,QAAQ4U,GACdrU,MAAOqU,MAMPC,GAA0B,CAACC,EAAUZ,EAAUa,GAAe,SAC9DrW,EAAUoW,EACVE,GAAkB,QAUf,CAAEV,KATI,WACLM,EAAWL,GAAY7V,EAASwV,EAAUa,IAAoC,IAApBC,UAChEA,GAAkB,EAClBtW,EAAUkW,EACH,CACLrD,MAA4B,IAAtBvR,QAAQ4U,GACdrU,MAAOqU,MAMPK,GAAkBZ,QAClBa,EAAcb,EAAKc,eAChBD,GAAa,OACZC,EAAYD,EAAYC,cAC1BA,QACFD,EAAcC,SAKXD,GAsBHE,GAA6B,CAACN,EAAUZ,SACxCxV,EAAUoW,QASP,CACLR,KATW,WACLe,EAtBc,EAAChB,EAAMH,WACvBoB,EAAkBjB,EAAKiB,mBACzBA,EAAiB,QACEL,GAAeK,IAK7BA,KAELjB,IAASH,EAAU,OACfS,EAAaN,EAAKM,cACpBA,GAAcA,IAAeT,SACxBS,SAGJ,MAMgBY,CAAgB7W,EAASwV,UAC9CxV,EAAU2W,EACH,CACL9D,MAAgC,IAA1BvR,QAAQqV,GACd9U,MAAO8U,MChJAG,GAAkCC,UACvCC,EAA2BzB,GAAoBwB,EAASE,UAC1DD,IAEAC,EAAYF,GAAiBA,EAE1B,OAGIG,GAAmBH,OACL,IAArBA,EAAQI,gBACV7W,QAAQiS,KAAK,wCACN,UAGc6E,GAAYvP,MAChCwP,GAAeA,EAAWN,UAAYA,WAGvCzW,QAAQiS,KAAK,6CACN,aASH+E,EAAmB,IACvB/B,GAAoBwB,EAASQ,IAEzBC,EAAkB,IDjBQ,EAAChC,EAAUlB,WACrCkC,EAAcD,GAAef,MAC/BgB,EAAa,OACTf,EAAWiB,GAA2BF,EAAahB,OACrD3C,KAAEA,EAAMhR,MAAO8T,GAASF,EAASG,aACrB,IAAT/C,GAAgB,IACjByB,EAAGqB,UACEA,IAEL9C,KAAAA,EAAMhR,MAAO8T,GAASF,EAASG,gBAGhC,MCML6B,CAAmBV,EAASQ,IAExBG,EAA4B,IDSV,GAAGhW,KAAAA,EAAMyB,KAAAA,EAAO,KAAMwU,UAAAA,YACxClC,EAAWiB,GAA2BhV,EAAMyB,OAC9C0P,KAAEA,EAAMhR,MAAO8T,GAASF,EAASG,aACrB,IAAT/C,GAAgB,IACjB8E,EAAUhC,UACLA,IAEL9C,KAAAA,EAAMhR,MAAO8T,GAASF,EAASG,eAE9B,MCjBYgC,CAAW,CAC1BlW,KAAMqT,SAAS8C,cACf1U,KAAM4T,EACNY,UAAWJ,MAEMC,IAGfM,EAAyB,IDdR,GAAGpW,KAAAA,EAAMyB,KAAAA,EAAO,KAAMwU,UAAAA,EAAWtB,aAAAA,GAAe,YACjEZ,EAAWU,GAAwBzU,EAAMyB,EAAMkT,OACjDxD,KAAEA,EAAMhR,MAAO8T,GAASF,EAASG,aACrB,IAAT/C,GAAgB,IACjB8E,EAAUhC,UACLA,IAEL9C,KAAAA,EAAMhR,MAAO8T,GAASF,EAASG,eAE9B,MCMQmC,CAAU,CACrBrW,KAAMqT,SAAS8C,cACf1U,KAAM4T,EACNY,UAAWJ,MAEED,IA4DXU,EAAaC,GAAS,CAAElB,QAAAA,EAASmB,KApC1B,WACLC,EAAeC,IApDCA,CAAAA,GAClBA,EAAMC,SAAWtB,IACjBA,EAAQuB,SAASF,EAAMC,QAmDrBE,CAAeH,KACjBA,EAAMI,iBACNJ,EAAMK,6BAIJC,EAAaN,IACbO,GAAWP,KACbA,EAAMI,iBA/BuBJ,CAAAA,UAE3BQ,EADgB7D,SAAS8C,gBACe9C,SAAS8D,QAEnDT,EAAMU,SAAU,OACZC,EAAiBH,EACnBpB,IACAE,IACAqB,GACFA,EAAeC,YAEZ,OACCD,EAAiBH,EACnBtB,IACAQ,IACAiB,GACFA,EAAeC,UAgBfC,CAA0Bb,YAI9BrD,SAASmE,iBAAiB,YAAaf,EAAa,CAClDgB,SAAS,EACTC,SAAS,IAEXrE,SAASmE,iBAAiB,UAAWR,EAAW,CAC9CS,SAAS,EACTC,SAAS,IAGJ,KACLrE,SAASsE,oBAAoB,YAAalB,EAAa,CACrDgB,SAAS,EACTC,SAAS,IAEXrE,SAASsE,oBAAoB,UAAWX,EAAW,CACjDS,SAAS,EACTC,SAAS,cAOA,KACbpB,MAcET,GAA8BR,IARPA,CAAAA,GAEzBA,EAAQuC,cACRvC,EAAQuC,aAAa,aACrBC,OAAOxC,EAAQyC,aAAa,aAAe,EAKzCC,CAAoB1C,IAGjBE,EAAYF,GAGf4B,GAAcP,GAAwB,QAAdA,EAAMsB,KAAmC,IAAlBtB,EAAMuB,QAErDvC,GAAc,GACda,GAAW,EAAGC,KAAAA,UAEd0B,EACAxC,GAAY5Q,OAAS,IACvBoT,EAAexC,GAAYA,GAAY5Q,OAAS,GAChDoT,EAAaC,gBAITC,EAAO,CAAE5B,KAAAA,EAAM2B,OAAQ3B,YAC7Bd,GAAYjG,KAAK2I,GAEV,QACsB,IAAvB1C,GAAY5Q,mBACdlG,QAAQiS,KAAK,uDAGTwH,EAAW3C,GAAYA,GAAY5Q,OAAS,GAC9CsT,IAASC,GAOb3C,GAAY4C,MACZF,EAAKD,SAEDD,IACFA,EAAaC,OAASD,EAAa1B,SATnC5X,QAAQiS,KACN,oECnIF0H,GAA0BlD,UACxBmD,EAAoB,GAEpBC,EAAgBC,UACdC,EAAmBC,GAAoBF,MACzCC,EAAkB,IACpBH,EAAkB/I,KAAKkJ,GACnBA,IAAqBtF,gBAGzBoF,EAAaE,YAGjBF,EAAapD,GAENmD,GAGHI,GAAuBC,OACR,iBAARA,GAAqC,IAAjBA,EAAIpD,eAC3B,IAAIqD,UAAU,6DAEhBzD,EAAUwD,KACZxD,IAAYhC,SAAS0F,uBAChB,WAIQ,UAFAC,EAAc3D,EAAS,YAG/B4D,GAAoB5D,EAAQ6D,eAGnCC,GAAqB9D,IAAY4D,GAAoB5D,EAAQ6D,gBAI3DD,GAAuB5F,OACvB,qBAAsBA,SACjBA,EAAS+F,oBAGdC,GAAYhG,UACPA,EAAS0F,sBAGZ5B,EAAO9D,EAAS8D,KAEhBmC,EADanC,IAAS,QAAQoC,KAAKpC,EAAKqC,SACAC,GAAmBtC,GAAQA,SAGlEmC,GAA4BI,GAAiBJ,GAChD,KACAA,GAGAG,GAAsBE,QAMtBrb,EAAUqb,OACNrb,EAAUA,EAAQgW,gBACC,IAArBhW,EAAQmX,UAAkBmE,GAActb,UACnCA,SAGJ,MAGHsb,GAAiBvE,GAAYA,EAAQ6D,cAAc/B,OAAS9B,EAE5DqE,GAAoBvC,QAEnB0C,GAAa1C,UACT,KAEL2C,GAAS3C,UACJ,QAGH4B,EAAkB5B,EAAK+B,cAAcH,wBACtCc,GAAad,KAGde,GAASf,IAOTe,GAAYzE,UACV0E,EAAUf,EAAc3D,EAAS,iBACvB,SAAZ0E,IAKU,cAAZA,GACY,gBAAZA,GACY,iBAAZA,GAEgD,cAAzCf,EAAc3D,EAAS,gBAM5BgE,GAAehG,KAEK,QAAQkG,KAAKlG,EAAS2G,aAErCC,GAAqB5G,GAK1B4G,GAAwB5G,UACtB6G,EAAS7G,EAASC,cAAc,UACtC4G,EAAO9J,MAAM+J,OAAS,OACH9G,EAAS8D,MAAQ9D,EAAS0F,iBAAmB1F,GACrDM,YAAYuG,SACjBE,EAAiBF,EAAOG,cAAchH,SAC5C+G,EAAeE,MAAM,qDACrBF,EAAeG,cACTC,EACJJ,EAAerB,gBAAgB0B,aAC/BL,EAAejD,KAAKsD,oBACtBP,EAAO3F,WAAWX,YAAYsG,GACvBM,GAGHX,GAAgBxE,IAGfqF,GAA0BrF,KAI1BsF,GAA4BtF,GAO7BqF,GAA6BrF,OAER,YADA2D,EAAc3D,EAAS,qBAEvC,QAIW,YADH2D,EAAc3D,EAAS,aAIpCsF,GAA+BtF,OAER,YADA2D,EAAc3D,EAAS,qBAEzC,QAGW,YADH2D,EAAc3D,EAAS,aAIpC8D,GAAwB9D,OACxBA,IAAYhC,SAAS0F,gBAAiB,OAAO,WAE3C6B,EAAW5B,EAAc3D,EAAS,gBACpCwF,EAASxF,EAAQd,gBACdsG,GAAQ,IACTC,EAAkBD,UACb,QAGM,aAAbD,GACsC,WAAtC5B,EAAc6B,EAAQ,gBAKpBhB,GAAagB,UACRA,EAETA,EAASA,EAAOtG,gBANdsG,EAASA,EAAOtG,kBAQb,MCjMHwG,GAAmB,0EAEjB1c,IAAcJ,EAQT+c,GAAa,EACxBC,UAAAA,EAAY5H,SAAS8D,KACrB+D,UAAAA,EACAC,WAAAA,EACAC,YAAAA,EACAC,aAAAA,EACAC,SAAAA,EAEAC,OAAAA,EACAC,qBAAAA,GAAuB,EACvBC,2BAAAA,GAA6B,EAK7BC,YAAAA,EAAc,eAEdC,WAAAA,GAAa,EACbC,mBAAAA,GAAqB,EACrBC,UAAAA,GAAY,EAEZC,YAAAA,EAAc,SACdC,eAAAA,EAAiB,SACjBC,UAAAA,EAAY,SACZC,WAAAA,EAAa,SACbC,cAAAA,EAAgB,MACbjJ,UAEEgI,EAAW,OAAO,WAChBkB,EAAgBC,GAAwBne,EAAMC,SAAS,MAExDme,EAAmBzc,QAAQuc,UACb5c,IACjB+c,IAAoBA,GAAkBf,GACvC,CAACA,KAIDO,IAKFzd,IAAU,SACHkd,IAAWc,EAAkB,MAAO,WAErCE,EAAsBC,GAAmBL,SAEvCM,EAAkBC,IAEjBA,EAAUC,eACTJ,IACFA,GAAsB,EACtBN,EAAWS,KAKXE,EAAiBC,IACrBb,EAAUa,GACVN,GAAsB,GAElBO,EAAmBD,IACnBL,GAAmBL,GACrBI,GAAsB,GAEtBA,GAAsB,EACtBN,EAAWY,YAIfV,EAAe3E,iBAAiB,QAASoF,GAAe,GACxDvJ,SAASmE,iBAAiB,QAASsF,GAAiB,GACpDzJ,SAASmE,iBAAiB,OAAQiF,GAAgB,GAC3C,KACLN,EAAexE,oBAAoB,QAASiF,GAAe,GAC3DvJ,SAASsE,oBAAoB,QAASmF,GAAiB,GACvDzJ,SAASsE,oBAAoB,OAAQ8E,GAAgB,MAEtD,CAAClB,EAAQc,EAAkBL,EAAWC,IAGzC5d,IAAU,IACHkd,GAAWc,EDxHahH,CAAAA,UACzB0H,EAAuB,OACzB/V,EAAWqO,EAAQH,qBAChBlO,GACqB,IAAtBA,EAASyO,UACPoE,GAAa7S,IACf+V,EAAqBtN,KAAKzI,GAG9BA,EAAWA,EAASkO,sBAGhBsD,EAAoBD,GAAuBlD,GACjD0H,EAAqBtN,QAAQ+I,SACvBwE,EAAeD,EAAqBlV,KAAKwN,UACvC4H,EAAO5H,EAAQjF,MAAM8M,gBAC3B7H,EAAQjF,MAAM8M,SAAW,SAClB,KACDD,EACF5H,EAAQjF,MAAM8M,SAAWD,EAEzB5H,EAAQjF,MAAM+M,eAAe,sBAK5B,KACLH,EAAaxX,SAAS4X,IACpBA,SC+FKC,CAAiBlB,GAFf,QAGR,CAACZ,EAAQc,IAGZhe,IAAU,IACHkd,GAAWc,GAAqBR,EAE9BrG,GAAgB2G,GAFgC,QAGtD,CAACZ,EAAQc,EAAkBR,IAG9Bxd,IAAU,SACHkd,IAAWc,IAAqBV,EAAY,MAAO,aAElD2B,EAA4BjK,SAAS8C,cACrCoH,EAAwBnI,GAA+B+G,UACzDoB,GACFA,EAAsBjG,MAAM,CAAEkG,eAAe,IAExC,KACDD,IACgC,mBAAvB3B,EACTA,EAAmB0B,IACa,IAAvB1B,GACT0B,EAA0BhG,MAAM,CAAEkG,eAAe,QAItD,CAACjC,EAAQc,EAAkBV,IAG9Btd,IAAU,SACHkd,IAAWY,IAAmBA,EAAe5H,WAChD,MAAO,aAEHkJ,EAAiB,UAWAC,MAAM1d,KAAKmc,EAAe5H,WAAW+G,UAC7C9V,SAASmY,IAClBA,IAAUxB,GACZsB,EAAehO,KAAKkO,MAIxBF,EAAejY,SAAS6P,IACtBA,EAAQuI,aAAa,cAAe,WAE/B,KACLH,EAAejY,SAAS6P,IACtBA,EAAQwI,gBAAgB,cAAe,cAG1C,CAACtC,EAAQY,IAEQ,eAAhBT,GAAiCH,EAI9BuC,EAASC,aACd9f,2BACMgV,GACJ+K,KAAK,SACLza,UAAY,gBAAc0P,EAAK1P,UAAa,IAAG0P,EAAK1P,YAAc,IAClEnD,IAAMiV,IACJ+G,EAAqB/G,GACjBpC,EAAK7S,KAAK6S,EAAK7S,IAAIiV,IAEzB4I,UAAYC,IACN1C,GAAwB0C,EAAajG,UAAYkG,IACnDpC,EAAemC,GAEbjL,EAAKgL,WAAWhL,EAAKgL,UAAUC,IAErCE,SAAS,KACThO,MAAO,IACe,iBAAhBsL,GAAmCH,EAEnC,GADA,CAAExB,QAAS,WAEK,sBAAhB2B,GAAwCH,EAExC,GADA,CAAE8C,WAAY,WAGpBC,OAAwB,qBAAhB5C,IAAuCH,QAAgBgD,IAE/DtgB,gBAACoU,IAAWC,KAAMyI,KACjBQ,EACCtd,gBAACugB,QACKtC,GACJ3Y,UAAU,mBAEVkb,kBAAoBC,OAElBA,EAAe5H,kBAEV0F,GAAmBL,GAAiB,OACjCoB,EACJnI,GAA+B+G,GAC7BoB,GACFA,EAAsBjG,MAAM,CAAEkG,eAAe,MAInD/Z,QAAUkb,IAKJlD,GACFM,EAAe4C,GAEbzC,EAAczY,SAASyY,EAAczY,QAAQkb,OAGnD,KACJ1gB,uBAAKsF,UAAU,oBACbtF,uBAAKsF,UAAU,sBAAsB2X,GACrCjd,uBAAKsF,UAAU,gBACbtF,uBAAKsF,UAAU,uBAAuB4X,GACtCld,uBAAKsF,UAAU,8BAA8B+X,GAC7Crd,uBAAKsF,UAAU,wBAAwB6X,IAEzCnd,uBAAKsF,UAAU,yBAAyB8X,KAG5CJ,GArEO,MAyELuD,GAAiB,EAAGC,kBAAAA,KAAsBxd,YACvC2d,EAAiBC,GAAsB5gB,EAAMC,SAAS,aAC7DG,IAAU,IACHugB,GAELA,EAAgBpH,iBAAiB,YAAaiH,EAAmB,CAC/D/G,SAAS,IAEJ,KACLkH,EAAgBjH,oBAAoB,YAAa8G,EAAmB,CAClE/G,SAAS,MAPgB,QAU5B,CAACkH,IAGF3gB,yBACEmC,IAAMiV,IACJwJ,EAAmBxJ,GACfpU,EAAMb,KAAKa,EAAMb,IAAIiV,KAEvBpU,KAKJub,GAAsBnH,UACpBc,cAAEA,GAAkB9C,gBACnBgC,IAAYc,GAAiBd,EAAQuB,SAAST,IAGjDgI,GAAU,GC9RVW,GAAe,0DAERC,GAAU9d,GAEnBhD,gCACEA,gBAACoU,IAAWC,KAAMwM,KAClB7gB,gBAAC+c,MAAWC,UAAW+D,KAAsB/d,KAKtCge,GAAiB,CAACC,GAAe,WACrCC,EAAcC,GAAmBnhB,EAAMC,SAASghB,SAOhD,CAACC,EANW,KACjBC,GAAgB,IAEE,KAClBA,GAAgB,MCtBPC,GAAW,IAEpBphB,uBAAKsF,UAAU,uBACbtF,uBAAKsF,UAAU,OAAO8C,GAAG,WACvBpI,gBAACqhB,UAEHrhB,uBAAKsF,UAAU,OAAO8C,GAAG,WACvBpI,gBAACqhB,UAEHrhB,uBAAKsF,UAAU,OAAO8C,GAAG,WACvBpI,gBAACqhB,UAEHrhB,uBAAKsF,UAAU,OAAO8C,GAAG,WACvBpI,gBAACqhB,UAEHrhB,uBAAKsF,UAAU,OAAO8C,GAAG,WACvBpI,gBAACqhB,UAEHrhB,uBAAKsF,UAAU,OAAO8C,GAAG,WACvBpI,gBAACqhB,WAMHA,GAAO,IACXrhB,uBAAKshB,QAAQ,uBACXthB,wBACEuhB,KAAK,UACLC,EAAE,uNC7BKC,GAAY,IACrBzhB,uBAAKshB,QAAQ,cAAcI,MAAM,KAAKC,MAAM,MAC1C3hB,wBAAMuhB,KAAK,eAAeC,EAAE,0YCCrBI,GAAa,EAAGC,MAAAA,EAAOC,eAAAA,EAAgBzE,SAAAA,KAAara,KAE7DhD,gBAAC8gB,MACCtD,4BAA4B,EAC5BP,UACEjd,gCACEA,uBAAKsF,UAAU,sBACftF,uBAAKsF,UAAU,gBACbtF,uBAAKsF,UAAU,qBAAqBuc,IAEtC7hB,uBAAKsF,UAAU,eAAeE,QAASxC,EAAM8a,gBAC3C9d,gBAACyhB,WAIPrE,aAAcpd,uBAAKsF,UAAU,yBAC7B4X,WAAYld,uBAAKsF,UAAU,uBAC3B6X,YAAand,uBAAKsF,UAAU,yBACxBtC,GACJsC,UAAY,qBACVwc,GACA,qEACE9e,EAAMsC,cAET+X,GClBM0E,GAAwB,EAAGb,aAAAA,EAAcc,YAAAA,KAElDhiB,gBAAC4hB,IACCtc,UAAU,qBACVgY,OAAQ4D,EACRpD,eAAgBkE,EAChBxE,4BAA4B,EAC5BqE,MAAM,QACNC,eAAe,0CAEf9hB,gCACEA,uBAAKsF,UAAU,cACbtF,uBAAKsF,UAAU,uCACftF,uBAAKsF,UAAU,WACbtF,uBAAKsF,UAAU,UACbtF,uBAAKsF,UAAU,sCACftF,wBAAMsF,UAAU,4BAChBtF,wBAAMsF,UAAU,4BAChBtF,wBAAMsF,UAAU,4BAChBtF,wBAAMsF,UAAU,4BAChBtF,wBAAMsF,UAAU,4BAChBtF,wBAAMsF,UAAU,6BAElBtF,uBAAKsF,UAAU,UACbtF,uBAAKsF,UAAU,0BACftF,wBAAMsF,UAAU,iBAChBtF,wBAAMsF,UAAU,iBAChBtF,wBAAMsF,UAAU,iBAChBtF,wBAAMsF,UAAU,kBAChBtF,wBAAMsF,UAAU,kBAChBtF,wBAAMsF,UAAU,qBAItBtF,uBAAKsF,UAAU,cACbtF,uBAAKsF,UAAU,gCACftF,uBAAKsF,UAAU,WACbtF,uBAAKsF,UAAU,UACbtF,uBAAKsF,UAAU,0BACftF,gBAACoC,IAAM1C,IAAKuiB,IACZjiB,gBAACoC,IAAM1C,IAAKwiB,KAEdliB,uBAAKsF,UAAU,UACbtF,uBAAKsF,UAAU,0BACftF,wBAAMsF,UAAU,iBAChBtF,wBAAMsF,UAAU,oBAItBtF,uBAAKsF,UAAU,mBACbtF,uBAAKsF,UAAU,wCACftF,uBAAKsF,UAAU,WACbtF,uBAAKsF,UAAU,UACbtF,uBAAKsF,UAAU,gCACftF,wBAAMsF,UAAU,uBAElBtF,uBAAKsF,UAAU,UACbtF,uBAAKsF,UAAU,0BACftF,wBAAMsF,UAAU,sBCnEjB6c,GAAoB,EAC/BC,WAAAA,EAAa,EACbC,qBAAAA,EAAuB,SACvBC,uBAAAA,EAAyB,SACzBC,sBAAAA,EAAwB,UACtB,YACKxb,EAAOyb,GAAexiB,EAAMC,SAASmiB,IACrCK,EAAgBC,GAAwB1iB,EAAMC,SAAS,IAE9DD,EAAMI,WAAU,KACdoiB,EAAYJ,KACX,CAACA,UAiDEO,EAAmBF,EAAe3Z,QACtC,CAACC,EAAU6Z,IAAa7Z,EAAW6Z,EAAS1gB,OAC5C,SAIK,CAACugB,EA1BiB,EAAGra,GAAAA,EAAIlG,MAAAA,KAAU8S,YAClC6N,EAAgB,CACpBza,GAAAA,EACAlG,MAAAA,KACG8S,EACH8N,SAAU,KAGRC,KAEFC,SAAU,KACRD,IACAR,EAAsBM,GACtBL,GAAazb,GAAUA,EAAQ7E,MAG7B6gB,EA3CyBF,CAAAA,IAO/BH,GAAsBD,GACe,IAAIA,EAAgBI,KAGzDR,EAAqBQ,OACjB1R,GAAU,QACP,KACDA,IACJA,GAAU,EACVuR,GAAsBD,GACkBA,EAAe9b,QAClDsc,GAA2BA,IAA2BJ,MAI3DL,GAAazb,GAAUA,EAAQ8b,EAAc3gB,QAC7CogB,EAAuBO,MAoBYK,CAAwBL,UACtDE,GAOchc,EAAQ4b,IC/BpBQ,GAAkB,CAC7BC,EACAC,EACAC,EAf8B,GAC9BC,EACAC,EACAC,EACAC,MAEO,CACLnW,GAAIgW,EAAQhW,EAAIiW,EAASjW,EAAIkW,EAAYlW,EAAImW,EAAWnW,GAAK,EAC7DC,GAAI+V,EAAQ/V,EAAIgW,EAAShW,EAAIiW,EAAYjW,EAAIkW,EAAWlW,GAAK,IAOtDmW,CAAwBP,KAE1BA,EAAOxZ,KAAKga,GAtCM,EAACN,EAAQM,EAAOC,WACnCC,EAAUC,GAAiBF,GAC3BG,EAAUzQ,KAAK0Q,IAAIH,GACnBI,EAAQ3Q,KAAK4Q,IAAIL,GACjBM,EAAMR,EAAMrW,EAAI+V,EAAO/V,EACvB8W,EAAOT,EAAMpW,EAAI8V,EAAO9V,QAEvB,CACLD,EAAGgG,KAAKS,MAAMgQ,EAAUI,EAAMF,EAAQG,EAAOf,EAAO/V,GACpDC,EAAG+F,KAAKS,MAAMgQ,EAAUK,EAAOH,EAAQE,EAAMd,EAAO9V,KA6BzB8W,CAAYhB,EAAQM,EAAOP,KAGpDU,GAAoBF,GAAaA,EAAUtQ,KAAKgR,GAAM,IA8D/CC,GAA4B,CAACC,EAAMC,MACvBC,GAAsBD,GAAYE,GA1DvB,GACjCC,EAAqBC,IACrBC,EAAsBC,UAEnBC,GACDD,EAAmBzX,EAAIwX,EAAqBxX,IAC1CsX,EAAoBrX,EAAIuX,EAAqBvX,IAC/CwX,EAAmBxX,EAAIuX,EAAqBvX,IAC1CqX,EAAoBtX,EAAIwX,EAAqBxX,GAC9C2X,GACDJ,EAAkBvX,EAAIsX,EAAoBtX,IACxCsX,EAAoBrX,EAAIuX,EAAqBvX,IAC/CsX,EAAkBtX,EAAIqX,EAAoBrX,IACxCqX,EAAoBtX,EAAIwX,EAAqBxX,SAC5C4X,GACHH,EAAmBxX,EAAIuX,EAAqBvX,IAC1CsX,EAAkBvX,EAAIsX,EAAoBtX,IAC5CyX,EAAmBzX,EAAIwX,EAAqBxX,IAC1CuX,EAAkBtX,EAAIqX,EAAoBrX,UAK9B,IAAbyX,GAA+B,IAAbC,GAAkC,IAAhBC,KAOpB,IAAhBA,IAKJF,GAAYE,EACZD,GAAYC,EAEVF,GAAY,GAAKA,GAAY,GAAKC,GAAY,GAAKA,GAAY,KAqB/DE,CAAqBX,EAAMG,KAQzBD,GAAwB,EAC3BU,EAAYC,EAAaC,EAAYC,GACtCxN,QAGIA,EADuB,CAACqN,EAAYC,IACL,OAAO,KAEtCtN,EADwB,CAACsN,EAAaC,IACN,OAAO,KAEvCvN,EADuB,CAACuN,EAAYC,IACL,OAAO,UAEtCxN,EADwB,CAACwN,EAAaH,KC5G/BI,GAAoB,CAACf,EAAWgB,SACvCC,EAAOjB,EAAUiB,KACjBC,EAAQlB,EAAUkB,YAChBlE,EAAQkE,EAAQD,EAClBA,EAAOD,EAAgBC,MACzBA,EAAOD,EAAgBC,KACvBC,EAAQD,EAAOjE,GACNkE,EAAQF,EAAgBE,QACjCD,EAAOD,EAAgBE,MAAQlE,EAC/BkE,EAAQD,EAAOjE,OAGbmE,EAAMnB,EAAUmB,IAChBC,EAASpB,EAAUoB,aACjB5J,EAAS4J,EAASD,SACpBA,EAAMH,EAAgBG,KACxBA,EAAMH,EAAgBG,IACtBC,EAASD,EAAM3J,GACN4J,EAASJ,EAAgBI,SAClCD,EAAMH,EAAgBI,OAAS5J,EAC/B4J,EAASD,EAAM3J,GAGV,CACLyJ,KAAAA,EACAC,MAAAA,EACAC,IAAAA,EACAC,OAAAA,IAuCSnC,GAA0B,EAAGgC,KAAAA,EAAMC,MAAAA,EAAOC,IAAAA,EAAKC,OAAAA,MACnD,CACLvY,EAAGoY,GAAQC,EAAQD,GAAQ,EAC3BnY,EAAGqY,GAAOC,EAASD,GAAO,IAIxBE,GAA+B,CAACC,EAAgBC,ID3EX,EAACZ,EAAYC,WAChDY,EAAiBb,EAAW9X,EAAI+X,EAAY/X,EAC5C4Y,EAAed,EAAW7X,EAAI8X,EAAY9X,SACzC+F,KAAK6S,KACVF,EAAiBA,EAAiBC,EAAeA,IC0E5CE,CAF2B1C,GAAwBqC,GACvBrC,GAAwBsC,ICnFhDK,GAAuBxiB,UAC5ByiB,EAAcziB,EAAQ0iB,wBACtBC,EAAiBC,EAAkB5iB,GACnC6hB,EAAOY,EAAYZ,KAAOc,EAAelZ,EACzCsY,EAAMU,EAAYV,IAAMY,EAAejZ,EACvCoY,EAAQD,EAAOY,EAAY7E,MAC3BoE,EAASD,EAAMU,EAAYrK,aAE1B,CACLyJ,KAAMpS,KAAKoT,MAAMhB,GACjBE,IAAKtS,KAAKoT,MAAMd,GAChBD,MAAOrS,KAAKoT,MAAMf,GAClBE,OAAQvS,KAAKoT,MAAMb,KAiCVc,GAA+B,CAAC9iB,EAAS4gB,WAC9CmC,EAAmBP,GAAoBxiB,UDnDgBmiB,ECoDLvB,KDpDXsB,ECoDPa,GDlDnBjB,OAASK,EAAgBN,MAExCK,EAAeL,MAAQM,EAAgBL,OAEvCI,EAAeF,QAAUG,EAAgBJ,KAEzCG,EAAeH,KAAOI,EAAgBH,QARE,IAACE,EAAgBC,GCuDlDa,GAAgC,CAACC,EAAmBrC,WACzDsC,EAAsBD,EAAkBnd,KAAKqd,GACjDX,GAAoBW,KAEhBC,EDEsC,EAACF,EAAqBtC,SAC9DyC,EAAmBpB,GAA6BrB,EAAWsC,EAAoB,WAC5EA,EAAoBle,QAAO,CAACkW,EAAMoI,WACjCC,EAAWtB,GAA6BrB,EAAW0C,UACrDC,EAAWF,GACbA,EAAmBE,EACZD,GAEFpI,MCVgBsI,CACvBN,EACAtC,UAEKqC,EAAkBC,EAAoBO,QAAQL,KAG1CM,GAAuB,EAChCja,EAAAA,EAAGC,EAAAA,IACHia,MAAAA,EAAQ,SAAUC,WAAAA,GAAa,EAAMC,gBAAAA,EAAkB,KAAS,YAE5DC,EAAMxS,SAASC,cAAc,OACnCuS,EAAIzV,MAAMwK,SAAW,WACrBiL,EAAIzV,MAAM1E,OAAS,OACnBma,EAAIzV,MAAMwT,KAAQ,GAAEpY,MACpBqa,EAAIzV,MAAM0T,IAAO,GAAErY,MACnBoa,EAAIzV,MAAMuP,MAAQ,MAClBkG,EAAIzV,MAAM+J,OAAS,MACnB0L,EAAIzV,MAAM0V,WAAaJ,EACvBG,EAAIzV,MAAM2V,OAAS,gBACnB1S,SAAS8D,KAAKxD,YAAYkS,SAEpBG,EAAS,KACb3S,SAAS8D,KAAKvD,YAAYiS,QAGxBI,SACAN,IACFM,EAAoBnZ,WAAWkZ,EAAQJ,IAGlC,KACLI,IACAjZ,aAAakZ,KC1FJC,GAAqB,EAChCC,qBAAAA,EACArF,cAAAA,EACAsF,qBAAAA,EAAuB,KAAM,MAEF,UAAvBtF,EAAc9c,KAEd/F,gBAACooB,IACCF,qBAAsBA,EACtBrF,cAAeA,EACfsF,qBAAsBA,IAKD,UAAvBtF,EAAc9c,KAEd/F,gBAACqoB,IACCxF,cAAeA,EACfsF,qBAAsBA,IAM1BnoB,gBAACsoB,IACCzF,cAAeA,EACfsF,qBAAsBA,IAKtBC,GAAwB,EAC5BF,qBAAAA,EACArF,cAAAA,EACA0F,kBAAAA,EAAoB,IACpBJ,qBAAAA,YAEMK,EAAYC,EAAiB5F,EAAcnc,QAC3CgiB,EAAqB1oB,EAAMG,gBAEjCH,EAAMI,WAAU,WACRuoB,EAAkBD,EAAmBroB,QACrCuoB,EAAoBV,EAAqB7nB,QACzCwoB,EAAmBC,GACvB1T,SAAS2T,cAAe,qBAAoBlG,EAAc7Z,uBAErDggB,GAAqC,CAC1CL,gBAAAA,EACAC,kBAAAA,EACArb,EAAGsb,EAAiBtb,EACpBC,EAAGqb,EAAiBrb,EACpBzI,SAAUwjB,EACVU,MAAOd,IACPnF,SAAUH,EAAcG,SACxBF,SAAUD,EAAcC,aAEzB,IAGD9iB,uBACEmC,IAAKumB,EACLhH,MAAM,KACNxF,OAAO,KACP5W,UAAU,0BAEVtF,yBAAOqU,KAAMmU,EAAW9G,MAAM,KAAKxF,OAAO,aAK1CmM,GAAqB,EACzBxF,cAAAA,EACA0F,kBAAAA,EAAoB,IACpBJ,qBAAAA,YAEOe,EAAeC,GAAsBC,YAE5CppB,EAAMI,WAAU,WACRipB,EAAaH,EAAc7oB,QAC3BwoB,EAAmBC,GACvB1T,SAAS2T,cAAe,uBAEnBO,GAA+B,CACpCX,gBAAiBU,EACjB9b,EAAGsb,EAAiBtb,EACpBC,EAAGqb,EAAiBrb,EACpBzI,SAAUwjB,EACVU,MAAOd,IACPnF,SAAUH,EAAcG,SACxBF,SAAUD,EAAcC,aAEzB,IAGD9iB,uBAAKmC,IAAK+mB,EAAe5jB,UAAU,2BACjCtF,qBAAGmC,IAAKgnB,GACNnpB,wBAAMuN,EAAE,IAAIC,EAAE,IAAI+b,iBAAiB,6BAC1B1G,EAAcrb,gBAOzB8gB,GAAuB,EAC3BzF,cAAAA,EACA0F,kBAAAA,EAAoB,IACpBJ,qBAAAA,YAEOe,EAAeC,GAAsBC,YAE5CppB,EAAMI,WAAU,WACRipB,EAAaH,EAAc7oB,QAC3BwoB,EAAmBC,GACvB1T,SAAS2T,cAAe,uBAEnBO,GAA+B,CACpCX,gBAAiBU,EACjB9b,EAAGsb,EAAiBtb,EACpBC,EAAGqb,EAAiBrb,EACpBzI,SAAUwjB,EACVU,MAAOd,IACPnF,SAAUH,EAAcG,SACxBF,SAAUD,EAAcC,aAEzB,IAGD9iB,uBAAKmC,IAAK+mB,EAAe5jB,UAAU,yBACjCtF,qBAAGmC,IAAKgnB,GACNnpB,wBAAMuN,EAAE,IAAIC,EAAE,IAAI+b,iBAAiB,yCAQrCP,GAAuC,EAC3CL,gBAAAA,EACAC,kBAAAA,EACArb,EAAAA,EACAC,EAAAA,EACAzI,SAAAA,EACAkkB,MAAAA,EACAjG,SAAAA,EAAW,SACXF,SAAAA,EAAW,mBAEL0G,EAA2BlD,GAAoBqC,GAC/Cc,EAA6BnD,GAAoBsC,GAEjDc,EACJF,EAAyB5D,MAAQ4D,EAAyB7D,KACtDgE,EACJH,EAAyB1D,OAAS0D,EAAyB3D,IACvD+D,EAASrc,EAAImc,EAAgB,EAC7BG,EAASrc,EAAImc,EAAiB,EAC9BG,EAAgBF,EAChBG,EAAgBF,EAA0B,IAAjBF,EACzBK,EAAOP,EAA2B9D,KAClCsE,EAAOR,EAA2B5D,IAExC8C,EAAgBxW,MAAMwT,KAAQ,GAAEiE,MAChCjB,EAAgBxW,MAAM0T,IAAO,GAAEgE,YAEzBK,EAAYvB,EAAgB7jB,QAChC,CACE,CACEH,QAAS,EACTyb,WAAY,UACZ+J,UAAW,uBAEb,CACEC,OAAQ,GACRzlB,QAAS,GAEX,CACEylB,OAAQ,GACRzlB,QAAS,EACTwlB,UAAY,aAAYL,EAAgBF,QACtCG,EAAgBF,QAGpB,CACEM,UAAY,aAAYH,EAAOJ,QAAaK,EAAOJ,SAGvD,CACE9kB,SAAAA,EACAkkB,MAAAA,EACA1H,KAAM,oBAGV2I,EAAUlH,SAAW,KACnBA,KAGK,KACLF,IACAoH,EAAUG,WAIRf,GAAiC,EACrCX,gBAAAA,EACApb,EAAAA,EACAC,EAAAA,EACAzI,SAAAA,EACAkkB,MAAAA,EACAjG,SAAAA,EAAW,SACXF,SAAAA,EAAW,mBAEL0G,EAA2BlD,GAAoBqC,GAM/CiB,EAASrc,GAHbic,EAAyB5D,MAAQ4D,EAAyB7D,MAGzB,EAC7BkE,EAASrc,GAFbgc,EAAyB1D,OAAS0D,EAAyB3D,KAEzB,EAEpC8C,EAAgBxW,MAAMwT,KAAQ,GAAEiE,MAChCjB,EAAgBxW,MAAM0T,IAAO,GAAEgE,YAEzBK,EAAYvB,EAAgB7jB,QAChC,CACE,CACEH,QAAS,EACTyb,WAAY,UACZ+J,UAAW,uBAEb,CACEC,OAAQ,GACRzlB,QAAS,GAEX,CACEylB,OAAQ,GACRzlB,QAAS,EACTwlB,UAAY,cAEd,IAIF,CACEplB,SAAAA,EACAkkB,MAAAA,EACA1H,KAAM,oBAGV2I,EAAUlH,SAAW,KACnBA,KAGK,KACLF,IACAoH,EAAUG,WAIRjB,GAAwB,WACtBF,EAAgBlpB,EAAMG,SACtBgpB,EAAqBnpB,EAAMG,gBACjCH,EAAMqB,iBAAgB,WACdgoB,EAAaH,EAAc7oB,QAE3BiqB,EADkBnB,EAAmB9oB,QACAkqB,UAE3ClB,EAAW1J,aAAa,QAASpM,KAAKiX,KAAKF,EAAmB5I,QAC9D2H,EAAW1J,aAAa,SAAUpM,KAAKiX,KAAKF,EAAmBpO,WAC9D,IACI,CAACgN,EAAeC,IAGnBL,GAAwBhlB,UACtB+iB,EAAmBP,GAAoBxiB,UACzB6f,GAAwBkD,IC7PxC4D,GAAgB,EAAGC,iBAAAA,YACjB/hB,EAAaC,IACb9C,EAAQ4C,IACRiiB,EAAkBte,KAExBhF,OAAOwB,KAAKF,GAAYpB,SAASyB,UACzBnD,EAAmB8C,EAAWK,GAC9B4hB,EAAkBhlB,GAAyBC,EAAkBC,GAC7D+kB,EACJD,GAAmBE,GAAaF,GAElC5pB,IAAgB,SACV2pB,GAECE,SAEEH,EAAiB,CACtBtiB,GAAK,cAAaY,SAClBjD,KAAM,QACN7D,MAAO,IACPwE,OAAQgB,EACRsB,UAAAA,MAED,CAAC2hB,EAAiBE,QAInBE,GAAmB,EAAGL,iBAAAA,YACpB/hB,EAAaC,IACb9C,EAAQ4C,IACRiiB,EAAkBte,KAExBhF,OAAOwB,KAAKF,GAAYpB,SAASyB,UACzBnD,EAAmB8C,EAAWK,GAC9B4hB,EAAkBhlB,GAAyBC,EAAkBC,GAC7DklB,EACJJ,GAAmBK,GAAgBL,GAErC5pB,IAAgB,SACV2pB,GAECK,SAEEN,EAAiB,CACtBtiB,GAAK,cAAaY,YAClBjD,KAAM,QACN7D,MAAO,IACPwE,OAAQe,EACRuB,UAAAA,MAED,CAAC2hB,EAAiBK,QAInBE,GAAmB,EAAGR,iBAAAA,YACpB/hB,EAAaC,IACb9C,EAAQ4C,IACRiiB,EAAkBte,KAClB8e,EAAUnrB,EAAM4H,SAAQ,WACtBzB,EAAU,GAChBkB,OAAOwB,KAAKF,GAAYpB,SAASyB,UACzBnD,EAAmB8C,EAAWK,OAC/BnD,SAI8C,SAA1BA,EAAiBE,MAK1CI,EAAQqL,KAAK5L,GAAyBC,EAAkBC,aAEpDkB,aAAEA,GAAiBC,GAAwBd,UAC1CxE,QAAQqF,KACd,CAAC2B,EAAY7C,IAEhB9E,IAAgB,SACV2pB,GAECQ,SAEET,EAAiB,CACtBtiB,GAAI,UACJrC,KAAM,UACN7D,MAAO,QAER,CAACyoB,EAAiBQ,KAMjBC,GAAiB,EAAGV,iBAAAA,YAClB/hB,EAAaC,IACb9C,EAAQ4C,IACRwB,EAAgBC,IAChBe,EAAcP,EAAaT,GAC3BygB,EAAkBte,KAExBgf,EAAQ9jB,SAASb,UACT4kB,EAA2B,GACjCjkB,OAAOwB,KAAKF,GAAYpB,SAASyB,UACzBnD,EAAmB8C,EAAWK,GAC9B4hB,EAAkBhlB,GAAyBC,EAAkBC,GAE9D8kB,GAIDW,GAAeX,EAAiBlkB,EAAQwE,IAC1CogB,EAAyB9Z,KAAKxI,YAG5BxB,EAAc8jB,EAAyBzkB,OACvC2kB,EAAaC,GAAajkB,IAAgB,EAC1CkkB,EAAwB1rB,EAAMG,OAAOqrB,GAOrCG,EAAe3rB,EAAMG,QAAO,SAElCa,IAAgB,WACR4qB,EAAqBF,EAAsBrrB,QAE3CwrB,EAAiBlqB,QACrBiqB,GAAsBJ,GAAcI,EAAqBJ,GAErDM,EAAiBnqB,QACrBiqB,GAAsBJ,GAAcI,EAAqBJ,MAG3DE,EAAsBrrB,QAAUmrB,EAI5Bxf,EAAcd,IAAgB6gB,EAAerlB,GAAS,UAEtDikB,EAAiB,WAEhBa,EAAY,UAEbM,cACFH,EAAatrB,UAIXwrB,GACFF,EAAatrB,gBAKT2rB,EAAuBtB,EAAiB,CAC5CtiB,GAHU,GAAEZ,KAAed,UAI3BX,KAAM,QACN7D,MAJYspB,EAAaI,EAKzBllB,OAAAA,EACAc,YAAAA,IAEFmkB,EAAatrB,QAAU2rB,QAEjBC,EAA6BX,EAAyB1hB,KACzDsiB,UAaOhC,GAXJ9U,SAAS2T,cACN,qBAAoBmD,cAIvB9W,SAAS2T,cACN,qBAAoBmD,YAKgBpnB,QACvC,CACE,CACEqlB,UAAW,WACXgC,gBAAiB,iBAEnB,CACEhC,UAAW,aACXgC,gBAAiB,iBAEnB,CACEhC,UAAW,WACXgC,gBAAiB,kBAGrB,CAAEpnB,SAAU,YAEP,KACLmlB,EAAUG,mBAIT,KACL2B,IACAC,EAA2B1kB,SAAS6kB,IAClCA,UAGH,CAACzB,EAAiBzf,EAAasgB,QAIhCD,GAAiB,CAACc,EAAYC,EAAaphB,QAC3CmhB,IAAeC,SACV,KAGLtgB,EAAcd,GAAc,IAC1BqhB,EAAeF,IAAeN,EAAeO,UACxC,KAELP,EAAeM,IAAeE,EAAeD,UACxC,SAIJ,GAGHb,GAAe,GAChB,MACA,MACA,MACA,MACA,MACA,eCvOGxrB,aAAUG,IAAcJ,EAEnBwsB,GAAa,WAClBthB,EAAcP,EAAaR,KAC3BsiB,EAAwBC,YAG5B1sB,uBAAKsF,UAAY,eAAamnB,EAAwB,WAAa,KAChEvhB,EAAclL,gBAAC2sB,SAAkB,OAKlCD,GAA2B,WACzBxhB,EAAcP,EAAaR,KAC3BuB,EAAiBjD,KACjB6D,EAAehG,GAAYoF,EAAgBnF,GAC3CgG,EAAmBC,SAEpBX,EAAqBX,UACjB,UAGYoB,GAAgBC,IAIjCogB,GAAe,WACbzhB,EAAcP,EAAaR,KAC3BE,EAAcC,IACdmiB,EAAwBC,MACvBE,EAAmBC,EAAiBC,GACzC9L,KAEIvS,EAAqBC,WAGzB1O,gCACGmM,EAAajB,GAAelL,gBAAC+sB,SAA0B,KACvD1iB,EAAcrK,gBAACohB,SAAc,KAC9BphB,0BACEsF,UAAY,gBAAcmnB,EAAwB,SAAW,IAC7DjnB,QAASqnB,GAERpe,EACCzO,gBAACgtB,SAEDhtB,gBAACitB,UAGJphB,EAAqBX,GAAelL,gBAACktB,SAAuB,KAC7DltB,gBAAC+hB,IACCb,aAAc0L,EACd5K,YAAa8K,MAMfG,GAAsB,WACpB/d,EAAazD,KACb0hB,EAAuBntB,EAAMG,UAC5BitB,EAA6BC,GAA8B3c,MAC3D+R,EAAgBiI,EAAkB4C,GAAkBnL,GAAkB,CAC3EC,WAAYlT,EACZqT,sBAAuB8K,ID3EiB,GAAG3C,iBAAAA,MAC7CD,GAAc,CAAEC,iBAAAA,IAChBK,GAAiB,CAAEL,iBAAAA,IACnBU,GAAe,CAAEV,iBAAAA,IACjBQ,GAAiB,CAAER,iBAAAA,KC0EnB6C,CAA6B,CAAE7C,iBAAAA,IAC/B8C,GAA4B,CAC1BL,qBAAAA,EACAC,4BAAAA,UAIIK,EAAyBztB,EAAMG,OAAO,MACtCgoB,EAAuB,WACrBuF,EAAsBD,EAAuBptB,QAC7CstB,EAAiBC,GACrBF,EAL6B,YAQ/BD,EAAuBptB,QAAUwtB,KAAK7a,MAAQ2a,EACvCA,UAIP3tB,gCACEA,wBAAMmC,IAAKgrB,EAAsB7nB,UAAU,sBACzCtF,gBAACmU,IACCjS,MAAOorB,EACP1Z,UAAW,CAAC1R,EAAO4rB,IAAkB5rB,EAAQ4rB,EAC7C/oB,SAAU,OAGb0d,EAAe7Y,KAAKiZ,GAEjB7iB,gBAACioB,IACClO,IAAK8I,EAAcza,GACnB8f,qBAAsBiF,EACtBtK,cAAeA,EACfsF,qBAAsBA,QAQ5ByF,GAAoC,CACxCF,EACAK,SAEKL,SACI,QAKHM,EAAWD,GAFHF,KAAK7a,MACyB0a,UAExCM,GAAY,EACP,EAGFA,GAGHhB,GAAwB,WACtB9d,EAAazD,YACZzL,wBAAMsF,UAAU,sBAAsB4J,IAGzCse,GAA8B,EAClCL,qBAAAA,EACAC,4BAAAA,YAEMa,EAAsBrc,GAAewb,GAE3CptB,EAAMI,WAAU,SACT6tB,eAGCC,EAAoBf,EAAqB9sB,eACxC8tB,GAA0B,CAC/BD,kBAAAA,MAED,CAACD,KAGAE,GAA4B,EAChCD,kBAAAA,EACAnpB,SAAAA,EAAW,IACXqpB,OAAAA,EAAS,wBAEHlE,EAAYgE,EAAkBppB,QAClC,CACE,CACEqlB,UAAW,eAGf,CACEplB,SAAAA,EACAqpB,OAAAA,UAGG,KACLlE,EAAUG,WAIR0C,GAAuB,IACE3c,IAItBpQ,uBAAKsF,UAAU,gBAFbtF,uBAAKmS,MAAO,CAAE2J,QAAS,QAAUxW,UAAU,gBAKhD4nB,GAAoB,WAClBhe,EAAazD,KAEbC,EAAiBjD,KACjB6D,EAAehG,GAAYoF,EAAgBnF,GAC3CgG,EAAmBC,KACnB6hB,EAAwB,IAAI5O,MAAMlT,GAAkBgV,KAAK,IACzD+M,EAAehiB,GAAgBC,EAE/BgiB,EAAuBjtB,IAC1BktB,GAAyBA,EAAuBliB,GACjD,CAACA,KAGImiB,EAAqBC,GAA6BzuB,IAAS,UAElEG,IAAU,KACJmuB,GACFG,GAA0B,KAE3B,CAACH,IAEJnuB,IAAU,QACJquB,EAAqB,OACjB7f,EAAUC,YAAW,KACzB6f,GAA0B,KACzB,WACI,KACL5f,aAAaF,UAGV,SACN,CAAC6f,IAGFzuB,gCACEA,uBAAKsF,UAAY,UAAQgpB,EAAe,gBAAkB,KACvDD,EAAsBzkB,KAAI,CAAC1H,EAAOysB,IAC7BriB,GAAgBqiB,EAAQ,EAExB3uB,uBACE+Z,IAAK4U,EACLrpB,UAAY,aAAYqpB,EAAQ,eAG/B3uB,uBAAK+Z,IAAK4U,EAAOrpB,UAAY,aAAYqpB,EAAQ,SAG3DF,GAAuBniB,GAAgBC,EACtCvM,uBAAKsF,UAAU,eACbtF,uBAAKsF,UAAU,kBACftF,uBAAKsF,UAAU,oBAEf,KACJtF,uBACEsF,UAAY,+BAA8BgH,KACxCgiB,EAAe,UAAY,MAG5Bpf,KC9QI0f,GAAW,GCalBC,GAAqB,+DAEdC,GAAQ,EAAGC,SAAAA,EAAUC,sBAAAA,YAC1BrmB,EAAaC,IACb2B,EAAgCC,KAChCykB,EAAgBrd,GAAeod,GAC/B9jB,EAAcP,EAAaR,KAC3B+kB,EACJ3kB,GAAiCG,EAAYQ,UAG7ClL,uBAAKsF,UAAU,SACbtF,uBACEmC,IAAK4sB,EACLzpB,UAAY,cAAYoF,EAAYQ,GAAe,OAAS,IAC5DiH,MAAO,IACD8c,EAAgB,CAAE7c,QAAS,cAAiB,KAGlDpS,uBAAKsF,UAAU,OACZ+B,OAAOwB,KAAKF,GAAYiB,KAAKZ,GAC5BhJ,uBAAKsF,UAAU,OAAOyU,IAAK/Q,oBAA4BA,GACrDhJ,gBAACmvB,IAAUtpB,iBAAkB8C,EAAWK,SAI9ChJ,uBAAKsF,UAAU,oBACftF,uBAAKsF,UAAU,qBACftF,uBAAKsF,UAAU,uBACftF,uBAAKsF,UAAU,wBACdiF,IAAkC2kB,EACjClvB,gBAACovB,SACC,MAENpvB,gBAACwsB,WA2BD2C,GAAY,EAAGtpB,iBAAAA,YACbqF,EAAcP,EAAaR,SAE5BtE,SACI,QAGqB,WAA1BA,EAAiBE,KAAmB,OAChCW,EAASb,EAAiB3D,aAE9BlC,0BACEsF,UAAU,OACV6M,MAAO,CACLuP,MAAOkN,GACP1S,OAAQ0S,GACRnH,MAAO,UACP4H,OAAQ,MACRC,gBAAiBpkB,EAAYqkB,OAC7BC,YAAatkB,EAAYukB,OACzBC,YAAa,MACbC,YAAa,UAGf3vB,gBAACoC,IACC1C,IAAK+oB,EAAiB/hB,GACtBkpB,UAAU,QACVzd,MAAO,CACLuP,MAAO,OACPxF,OAAQ,kBAQX,MAGHkT,GAAc,IAEhBpvB,uBAAKsF,UAAU,gBACbtF,gBAACoC,IAAMwtB,UAAU,QAAQlwB,IAAKmvB,GAAoBgB,IAAI,kBCpH/CC,GAAa,SACb,CACTC,KAAM,UACNC,KACE,uGACFC,KACE,4GAEK,CACPF,KAAM,mBACNC,KACE,mHACFC,KACE,yJAEI,CACNF,KAAM,aACNC,KACE,+JAEO,CACTD,KAAM,UACNC,KACE,6JAEM,CACRD,KAAM,wBACNC,KACE,mGAGK,CACPD,KAAM,WACNC,KACE,2IAEM,CACRD,KAAM,eACNC,KAAM,oEAEG,CACTD,KAAM,kBACNC,KAAM,6EAEY,CAClBD,KAAM,gBACNC,KACE,2NACFC,KACE,kKAGgB,CAClBF,KAAM,gBACNC,KACE,2NACFC,KACE,kKAGgB,CAClBF,KAAM,gBACNC,KACE,6NACFC,KACE,gJC1DOC,GAAkB,EAAGhP,aAAAA,EAAcc,YAAAA,EAAapW,KAAAA,YACrDukB,EAAYL,GAAWlkB,EAAK7F,aAGhC/F,gBAAC4hB,IACCtc,UAAU,oBACVgY,OAAQ4D,EACRpD,eAAgBkE,EAChBxE,4BAA4B,EAC5BqE,MAAM,SAELsO,EACCnwB,gCACEA,uBAAKsF,UAAU,gBAAgB6qB,EAAUJ,MACzC/vB,uBAAKmS,MAAO,CAAEie,UAAW,WACvBpwB,gBAACoC,IACCkD,UAAU,eACV5F,IAAK2wB,GAAezkB,GACpB8V,MAAM,MACNmO,IAAKjkB,EAAK7F,QAGd/F,uBAAKsF,UAAU,aAAa6qB,EAAUH,MACrCG,EAAUF,KACTjwB,uBAAKsF,UAAU,aAAa6qB,EAAUF,MACpC,MAGN,YCPKK,GAAYtwB,EAAMgF,YAvBN,EAAG4G,KAAAA,KAAS5I,GAASb,IAE1CnC,yBACEsF,UAAU,oBACVnD,IAAKA,EACLuf,MAAM,KACNxF,OAAO,KACP/J,MAAO,CACLmd,gBAAiB1jB,EAAK2jB,OACtBC,YAAa5jB,EAAK6jB,SAEhBzsB,GAEJhD,gBAACoC,IACC1C,IAAK6wB,GAAoB3kB,GACzBikB,IAAKjkB,EAAK7F,KACV2b,MAAM,KACNxF,OAAO,UCVTsU,GAAyB,mEAElBC,GAA0B,WAC/BvmB,EAAgBC,IAChBuB,EAAiBjD,KACjB8D,EAAmBC,SAEpBtC,SACI,WAEHgB,EAAcP,EAAaT,OAC5B2B,EAAqBX,UACjB,WAGHoB,EAAehG,GAAYoF,EAAgBnF,GAC3C8nB,EAAwB,IAAI5O,MAAMlT,GAAkBgV,KAAK,WAG7DvhB,uBAAKsF,UAAU,8BACZ+oB,EAAsBzkB,KAAI,CAAC1H,EAAOysB,IAC7BriB,GAAgBqiB,EAAQ,EAAU3uB,gBAAC0wB,IAAmB3W,IAAK4U,IACxD3uB,gBAAC2wB,IAAkB5W,IAAK4U,QAMjC+B,GAAqB,IACzB1wB,uBAAKsF,UAAU,cACbtF,gBAACoC,IAAM1C,IAAK6F,KAIVorB,GAAoB,IACxB3wB,uBAAKsF,UAAU,uBACbtF,gBAACoC,IAAM1C,IAAK8wB,MCjCHI,GAAS,EAAGC,eAAAA,EAAgBC,mBAAAA,YACjC5lB,EAAcP,EAAaR,KAC3BwC,EAAuByD,WAG3BpQ,uBAAKsF,UAAU,UACbtF,uBACEsF,UAAU,iBACV6M,MAAO,CAAExN,QAASgI,EAAuB,IAAM,MAE/C3M,uBAAKsF,UAAU,cACZ4F,EACClL,gBAAC+wB,IACCD,mBAAoBA,EACpB5lB,YAAaA,IAGflL,gBAACgxB,UAGJrkB,GAAwB3M,gBAACywB,UAE5BzwB,gBAACixB,IAAcJ,eAAgBA,IAC/B7wB,gBAACkxB,WAKDH,GAAkB,EAAGD,mBAAAA,EAAoB5lB,YAAAA,YACtCimB,EAAkBC,GAA0BpxB,EAAMC,UAAS,UAUhED,gCACEA,gBAACswB,IACC9qB,QAAS,KAVb4rB,GAAuB,IAanBxlB,KAAMV,EACN/I,IAAK2uB,IAEP9wB,gBAACkwB,IACCtkB,KAAMV,EACNgW,aAAciQ,EACdnP,YAhBkB,KACtBoP,GAAuB,QAqBrBJ,GAAW,IAEbhxB,uBACEsF,UAAU,oBACV6M,MAAO,CACLkf,gBAAkB,OAAMC,MACxBC,eAAgB,WAMlBN,GAAgB,EAAGJ,eAAAA,YACjBnkB,EAAS7E,YAGb7H,gBAACoC,IACCoD,QAASqrB,EACTvrB,UAAU,SACV5F,IAAKgN,GAAUA,EAAO8kB,UAAUC,IAChC5B,IAAI,SACJ1d,MAAO,CACLqd,YAAc9iB,GAAUA,EAAO8kB,UAAU/J,OAAU,SAErD/F,MAAM,KACNxF,OAAO,QAKPgV,GAAa,WACXxkB,EAAS7E,KACTua,EAAa1V,EAAO3F,MACpB2qB,EAAsB/d,GAA4ByO,EAAY,CAClErd,SAAU,KACVuN,eAAiBc,GAAa,EAAIG,KAAKoe,IAAI,EAAIve,EAAU,YAIzDpT,uBAAKsF,UAAU,eACbtF,wBACEsF,UAAU,QACV6M,MAAO,CACLmd,gBAAkB5iB,GAAUA,EAAO8kB,UAAU/J,OAAU,UAGxDiK,EAAsBA,EAAoBxvB,MAAQkgB,KC5GrDwP,GAAchD,KAEPiD,GAAY,CAAC/rB,GAASgsB,kBAAAA,YAC3BC,EAAsBzL,GAAoBwL,GAC1CE,EAAkBD,EAAoBnM,MAAQmM,EAAoBpM,KAClEsM,EAAmBF,EAAoBjM,OAASiM,EAAoBlM,IACpEqM,EAAmB,CACvBvM,KAAMiM,GACNhM,MAAOoM,QACPnM,IAAK+L,GACL9L,OAAQmM,SAGJE,EAAyB,GACzBC,EAAiCpsB,QACjCqsB,EAAQ,QACNpc,EAAO,WACLmR,EAAqBkL,GAAuBtsB,EAAMksB,GAClDK,EAAWC,KACXC,EAA4BtP,GAChCiE,EACAmL,UAE4BJ,EAAuBO,MAClDC,IACCC,Ob2DRC,EazDUF,Eb2DVhO,Ga5DU8N,Gb8DPK,GACCtO,GACEsO,EACAD,KAToD,IAE1DA,ManDMR,EAAQ,GAED,CACL3N,UAAW0C,EACXmL,SAAAA,EACAQ,iBAAkBN,IAGtBJ,IACOpc,aAEFA,YAGTnQ,EAAMyB,SAAQ,CAACvB,EAAM2oB,KACnB3oB,EAAKgtB,iBAAmBC,GAAkBjtB,SAEpC0e,UAAEA,EAAF6N,SAAaA,EAAbQ,iBAAuBA,GAC3BX,EAA8BpsB,GAChCmsB,EAAuB3gB,KAAKuhB,GAE5B/sB,EAAK2H,iBAAmBghB,EAAQ,EAChC3oB,EAAK0H,mBAAqBgX,EAAU,GACpC1e,EAAKusB,SAAWA,KAGXzsB,GAGHwsB,GAAyB,CAACtsB,EAAMksB,WAC9BgB,EAAoB,CACxB3lB,EAAG4lB,GACDjB,EAAiBvM,KACjBuM,EAAiBtM,OAEnBpY,EAAG2lB,GACDjB,EAAiBrM,IACjBqM,EAAiBpM,eAqBC,CAjBN,CACdvY,EAAG2lB,EAAkB3lB,EACrBC,EAAG0lB,EAAkB1lB,GAEN,CACfD,EAAG2lB,EAAkB3lB,EAAIqhB,GACzBphB,EAAG0lB,EAAkB1lB,GAEH,CAClBD,EAAG2lB,EAAkB3lB,EAAIqhB,GACzBphB,EAAG0lB,EAAkB1lB,EAAIohB,IAER,CACjBrhB,EAAG2lB,EAAkB3lB,EACrBC,EAAG0lB,EAAkB1lB,EAAIohB,MAOvB4D,GAAwB,IAAMW,IAAgC,GAAI,IAElEF,GAAqBjtB,GACzBmtB,GAA+B,EAAGntB,EAAKotB,MAAMvsB,OAAS,GAElDssB,GAAiC,CAAC3f,EAAK6f,IAC3C9f,KAAKoT,MAAMpT,KAAK+f,UAAYD,EAAM7f,EAAM,GAAKA,GC7FlC+f,GAAa,EAAGxhB,cAAAA,YACrByhB,EAAkBvpB,KAClBV,EAAgBC,IAChBY,EAAiB/B,KACjBorB,EAAOC,KAEPxoB,EAAcP,EAAaR,KAC3BI,EAAgCC,KAEhCmpB,EAAwBpqB,EAAc1C,OAAS,IAAMuD,EACrDwpB,EACJrpB,GAAiCG,EAAYQ,GACzC2oB,EAAWF,GAAyBC,SAEtCJ,EAEAxzB,uBAAKsF,UAAU,eACbtF,0BACEwF,QAAS,KACPiuB,EAAK1hB,EAAc1R,UAErBwzB,SAAUA,YAGTF,IAA0BC,GACzB5zB,wBAAMsF,UAAU,0CAGnBsuB,GACC5zB,gBAACoC,IAAM1C,IAAKo0B,GAAgBxuB,UAAU,kBAMvC,MAGHouB,GAAUjuB,GAAa,CAACC,EAAOosB,WAC7BhsB,MAAEA,EAAFwC,UAASA,EAATiB,cAAoBA,GAAkB7D,EAEtCquB,GAD8B,IAAdzrB,EAAkBjB,OAAOwB,KAAK/C,GAASyD,GAC3BK,KAAKC,GAAiB/D,EAAM+D,YAE9DgoB,GAAUkC,EAAa,CAAEjC,kBAAAA,IAClB,IACFpsB,EACH4C,UAAWA,EAAY,EACvBmB,oBAAqB,KACrBF,cAAewqB,EAAYnqB,KAAK5D,GAASA,EAAKoC,KAC9CtC,MAAO,IAAKA,OC9CHkuB,GAAS,EAAGC,YAAAA,EAAaliB,cAAAA,KAElC/R,uBAAKsF,UAAU,kBACbtF,gBAACuzB,IAAWxhB,cAAeA,IAC3B/R,gBAACk0B,SACDl0B,gBAACm0B,IAAeF,YAAaA,KAK7BC,GAAkB,WAChBhlB,EAAazD,KACbsD,EAAY7B,KACZvB,EAAmBH,KACnB4oB,ErCmKiC,GACvCC,cAAAA,EAAgB7rB,KAChB6B,YAAAA,EAAcC,IACdJ,cAAAA,EAAgBC,IAChBM,gBAAAA,EAAkBrB,MAChB,OACEiB,GAIAI,IAICP,IAIAmqB,GqCrL0BC,GAEzBC,EAAOrlB,EAAa,EAAI,IAAM,WAEhCklB,EAEAp0B,uBAAKsF,UAAU,kBACbtF,0BACEwF,QAAS,KACPuJ,EAAUG,IAEZ2kB,UAAWloB,GAEX3L,yCACAA,wBAAMsF,UAAU,SACbivB,MAAOhhB,KAAKihB,IAAItlB,MAGnBvD,GACA3L,gBAACoC,IAAM1C,IAAKo0B,GAAgBxuB,UAAU,kBAMvC,MAGH6uB,GAAiB,EAAGF,YAAAA,YAClBQ,ErC2LgC,GACtCjB,gBAAAA,EAAkBvpB,KAClB0B,iBAAAA,EAAmBH,KACnBf,gBAAAA,EAAkBrB,MAChB,MACEoqB,IAIA7nB,IAIAlB,EqCxM0BiqB,GACxBC,EAAiB7nB,KACjBoC,EAAazD,KACblB,EAAgCC,KAChCoqB,EAAwBvoB,KACxBX,EAAiBjD,YAWnBgsB,EAEAz0B,uBAAKsF,UAAU,qBACbtF,0BACEwF,QAAS,KAKPmvB,IACAV,EAAY,CACVY,OAlBNtqB,EAAsC,WAGtCqqB,EAA8B,kBAC3B,eAeG1yB,MAAOgN,EACPxD,eAAAA,4BAUL,MCtFHopB,GAAoB,+DAEbC,GAAc,EAAGC,cAAAA,YACtB9pB,EAAcP,EAAaR,YAG/BnK,uBAAKsF,UAAU,gBACZ2vB,GAAY/pB,GAAelL,gBAACk1B,SAAsB,KACnDl1B,uBAAKsF,UAAU,UACbtF,uBAAKsF,UAAU,OAAOnD,IAAK6yB,GACxB3pB,EAAeH,GACdlL,gBAACm1B,IAAWvpB,KAAMV,IAChB,KACHK,EAAgBL,GACflL,gCACEA,gBAACm1B,IAAWvpB,KAAMV,IAClBlL,gBAACm1B,IAAWvpB,KAAMV,KAElB,SAORiqB,GAAa,EAAGvpB,KAAAA,KAElB5L,0BACEsF,UAAU,OACV6M,MAAO,CACLuP,MAAOkN,GACP1S,OAAQ0S,GACRnH,MAAO,UACP4H,OAAQ,UACRC,gBAAiB1jB,EAAK2jB,OACtBC,YAAa5jB,EAAK6jB,OAClBC,YAAa,QAGf1vB,gBAACoC,IACC1C,IAAKo0B,GACL3hB,MAAO,CACLuP,MAAO,OACPxF,OAAQ,WAOZgZ,GAAmB,IACM9kB,IAO3BpQ,uBAAKsF,UAAU,eACbtF,gBAACoC,IAAM1C,IAAKo1B,KACZ90B,uBACEuN,EAAE,MACFC,EAAE,MACFkU,MAAM,YACNxF,OAAO,YACPoF,QAAQ,uBAERthB,wBACEoI,GAAG,UACHmZ,KAAK,OACL6T,OAAO,UACP5T,EAAE,oOAIJxhB,wBACEoI,GAAG,UACHmZ,KAAK,OACL6T,OAAO,UACP5T,EAAE,oEAGJxhB,wBACEoI,GAAG,UACHmZ,KAAK,OACL6T,OAAO,UACP5T,EAAE,0EAGJxhB,wBACEoI,GAAG,UACHmZ,KAAK,OACL6T,OAAO,UACP5T,EAAE,2FAvCDxhB,gBAACoC,IAAM+P,MAAO,CAAE2J,QAAS,QAAUpc,IAAKo1B,KCnEtCO,GAAS,EAAGzY,OAAAA,EAAQS,SAAAA,KAC1BT,EAGEiD,EAASC,aAAa9f,gCAAGqd,GAAcT,GAFrC,KCDE0Y,GAA2B,EAAGC,OAAAA,EAAQC,MAAAA,EAAOC,UAAAA,KACjD,IACDF,EAAS,CAAE,UAASA,SAAgB,MACpCC,GAAmB,IAAVA,EAAc,CAAE,SAAQA,MAAY,MAC7CC,EAAY,CAAE,aAAYA,MAAgB,IAC9CC,KAAK,ICTIC,GAAW,CAAChhB,EAAIihB,EAAK,IAAMC,SAAAA,GAAW,GAAU,UACvDjnB,EACAknB,QAEEC,EAAY,IAAI9kB,KACpBnC,aAAaF,SACP0E,EAAQua,KAAK7a,SAEf8iB,EAAY,OAERE,EAA8B1iB,EAAQwiB,KAExCE,EAA8BJ,MAE5BC,EAAU,CAEZjnB,EAAUC,YAAW,IAAMknB,KAAa9kB,IADtB2kB,EAAKI,SAKzBF,EAAaxiB,EACbqB,KAAM1D,QAIR6kB,EAAaxiB,EACbqB,KAAM1D,WAOV8kB,EAAU1L,OAHK,KACbvb,aAAaF,IAIRmnB,GC9BIE,GAAoB,CAC/BnyB,GAEEoyB,SAAAA,EAAW,OACXC,OAAAA,EAAS,SACTC,WAAAA,EAAa,SAEb5wB,QAAAA,EAAU,SACV6wB,OAAAA,EAAS,SACTC,UAAAA,EAAY,SACZ7jB,SAAAA,EAAW,SACX8jB,WAAAA,EAAa,cAGTC,EAASC,GAAa,CAAEP,SAAAA,QAK1BQ,EACAC,EAFAC,GAAa,EAGbC,EAAqB,OACrBC,EAAwB,OACxBC,EAAuB,OAE3BP,EAAOQ,MAAM,iBAAkBlzB,SAIzBmzB,EAA0BC,GAC9BpzB,EACA,aACCqzB,IACCA,EAAete,oBAIbue,EAA0BF,GAC9BpzB,EACA,aACC2c,OAC+C,IAAzBA,EAAe4W,kBAElCb,EAAOQ,MAAM,sBAIfM,EAAWC,GAAyB9W,GAAiBA,SAC/C+W,EAAqB7B,IAAU8B,IACnCC,EAAWH,GAAyBE,GAAiBA,MAEvDV,EAAuB,IAAMS,EAAmBnN,SAChDwM,EAAqBK,GACnB9hB,SACA,YACAoiB,GAEFV,EAAwBI,GACtB9hB,SACA,WACCuiB,IACCb,IACAD,IACAe,EAAcL,GAAyBI,GAAeA,QAI5D,CAAEle,SAAS,IAEPoe,EAA2BX,GAC/BpzB,EACA,cACCg0B,IACCR,EAAWS,GAAyBD,GAAkBA,SAChDE,EAAqBrC,IAAUsC,IACnCP,EAAWK,GAAyBE,GAAiBA,MAEvDlB,EAAuB,IAAMiB,EAAmB3N,SAChDwM,EAAqBK,GACnB9hB,SACA,YACA4iB,GAEFlB,EAAwBI,GACtB9hB,SACA,YACC8iB,IACCpB,IACAD,IACAe,EAAcG,GAAyBG,GAAgBA,QAI7D,CAAEze,SAAS,IAEP0e,EAAsBjB,GAC1BpzB,EACA,SACC4c,IACMkW,GAA6B,SAAfwB,GACjB5yB,EAAQkb,UAKV2X,EACAC,EACAC,EACAC,EACAJ,QACEd,EAAa,CAACmB,EAAiBhgB,KACnC+d,EAAOQ,MAAM,mBAAoByB,GACjC9B,GAAiB,EACjByB,EAAa,OACbG,EAAsBE,EACtBJ,EAA0BI,EAC1BH,EAAuBI,GAAsB50B,GAE7CqyB,EAAO,CACL5oB,EAAG+qB,EAAqB/qB,EACxBC,EAAG8qB,EAAqB9qB,EACxBiL,MAAAA,IAEF+f,EAAkB3pB,WAAW8pB,EAAgBpC,IAGzCoC,EAAiB,KACrB/B,GAAa,EACbR,KAGIsB,EAAa,CAACe,EAAiBhgB,QAEjC4f,EAAwB9qB,IAAMkrB,EAAgBlrB,GAC9C8qB,EAAwB7qB,IAAMirB,EAAgBjrB,cAE9CgpB,EAAOQ,MAAM,gBAGfqB,EAA0BI,QAEpBG,EAAsBL,EAAoBhrB,EAAI+qB,EAAqB/qB,EACnEsrB,EAAmBN,EAAoB/qB,EAAI8qB,EAAqB9qB,EAChEsrB,EAAe,CAGnBvrB,EAAGkrB,EAAgBlrB,EAAIqrB,EACvBprB,EAAGirB,EAAgBjrB,EAAIqrB,GAEnBE,EAAYN,EAAgBlrB,EAAIgrB,EAAoBhrB,EACpDyrB,EAAYP,EAAgBjrB,EAAI+qB,EAAoB/qB,EAE1DgpB,EAAOQ,MAAM,eAAgB8B,GAC7BzC,EAAO,CACL5d,MAAAA,KACGqgB,EACHC,UAAAA,EACAC,UAAAA,EACAC,cAAgB/2B,IACdk2B,EAAal2B,MAKb01B,EAAgB,CAACa,EAAiBhgB,KACtC+d,EAAOQ,MAAM,kBACbL,GAAiB,EACjB7nB,aAAa0pB,SAEPI,EAAsBL,EAAoBhrB,EAAI+qB,EAAqB/qB,EACnEsrB,EAAmBN,EAAoB/qB,EAAI8qB,EAAqB9qB,EAEtE8oB,EAAU,CACR7d,MAAAA,EACA2f,WAAAA,EACA7qB,EAAG8qB,EAAwB9qB,EAAIqrB,EAC/BprB,EAAG6qB,EAAwB7qB,EAAIqrB,IAGjCnC,EAAoB7nB,YAAW,KAC7B+nB,GAAa,aAcTne,IACNwe,IACAkB,IACAf,IACAS,IACAhB,IACAC,IACAhoB,aAAa0pB,GACb1pB,aAAa4nB,GACbK,IAnBoBte,CAAAA,IAChBke,IACFH,EAAOQ,MAAM,kBAAmBve,GAChCke,GAAiB,EACjBlkB,EAAS,CACPgG,MAAAA,MAeJygB,CAAazgB,KAIXigB,GAAyB50B,UACvBq1B,EAAOr1B,EAAQ0iB,8BACd,CACLjZ,EAAG4rB,EAAKxT,KACRnY,EAAG2rB,EAAKtT,MAIN0R,GAA4B6B,IACzB,CACL7rB,EAAG6rB,EAAWC,MACd7rB,EAAG4rB,EAAWE,QAIZvB,GAA4BwB,UAC1BC,EAAoBD,EAAWE,eAAe,SAC7C,CACLlsB,EAAGisB,EAAkBH,MACrB7rB,EAAGgsB,EAAkBF,SClNnBl5B,UAAEA,GAAFH,SAAaA,IAAaD,EAEnB05B,GAAO,EAClB1zB,KAAAA,EACA2zB,cAAAA,EACAC,cAAAA,GAAgB,EAChBtjB,WAAAA,EACA7I,OAAAA,EACAF,EAAAA,EACAC,EAAAA,EACA+kB,SAAAA,EACA3C,UAAAA,EACAiK,YAAAA,EACAC,WAAAA,EACAC,WAAAA,EACAC,cAAAA,EACAC,SAAAA,EACAC,OAAAA,EACAC,YAAAA,GAAc,MAEVC,YAAmBD,GACrBE,GACE,CACEr0B,KAAAA,EACA2zB,cAAAA,EACAC,cAAAA,EACAtjB,WAAAA,EACA7I,OAAAA,EACAF,EAAAA,EACAC,EAAAA,EACA+kB,SAAAA,EACA3C,UAAAA,EACAiK,YAAAA,EACAC,WAAAA,EACAC,WAAAA,EACAC,cAAAA,EACAC,SAAAA,EACAC,OAAAA,IAEDI,IACC35B,QAAQC,IAAK,QAAOoF,EAAKoC,wBAAyBkyB,YAMlDC,EAAcxZ,IACdyZ,EAAcC,GAAez0B,EAAKoC,IAClCsyB,EAAoBC,GAAqB30B,EAAKoC,IAE9CwyB,E3CwBsB,GAAGjyB,WAAAA,EAAaC,KAAoB,KACzDvB,OAAOwB,KAAKF,GAAYG,QAAO,CAACC,EAAUC,WACzCnD,EAAmB8C,EAAWK,UAChCnD,GAA8C,SAA1BA,EAAiBE,KAChC,IAAIgD,EAAUlD,EAAiB3D,OAEjC6G,IACN,I2ChCiB8xB,GACWC,SAAS90B,EAAKoC,KAGtC2yB,EAAaC,GAAqB/6B,IAAS,IAC3Cg7B,EAAaC,GAAkBj7B,GAAS,MAIzCk7B,EAAqBl5B,GAAYqU,GACjC8kB,EAAmBzB,EAAgBwB,EAAqB7kB,EAE9DlW,IAAU,SACHwvB,IAAc4K,IAAgBD,QAC1B,WAGLc,GAAiB,QACfC,EAAqBrF,GAAkBuE,EAAa,CACxDrE,OAAQ,KACN6E,GAAkB,IAEpBx1B,QAAUkb,IACRmZ,EAAY7zB,EAAM0a,IAEpB2V,OAAQ,EAAG9oB,EAAAA,EAAGC,EAAAA,EAAGurB,UAAAA,EAAWC,UAAAA,EAAWC,cAAAA,YAO/BsC,EnB9EmC,EAAC7W,EAAW5gB,WACrD+iB,EAAmBP,GAAoBxiB,UACd2hB,GAAkBf,EAAWmC,ImB4EhC2U,CANE,CACtB7V,KAAMpY,EACNqY,MAAOrY,EAAIqhB,GACX/I,IAAKrY,EACLsY,OAAQtY,EAAIohB,IAIZ2L,GAEFW,EAAe,CAAE3tB,EAAGguB,EAAc5V,KAAMnY,EAAG+tB,EAAc1V,MACzDwV,EACEA,GAAkB9nB,KAAKihB,IAAIuE,GAAa,IAAMxlB,KAAKihB,IAAIwE,GAAa,GAClEqC,GACFvB,EAAW9zB,EAAM,CACf+yB,UAAAA,EACAC,UAAAA,EACAC,cAAAA,EACAsC,cAAAA,KAINjF,UAAW,EAAG8B,WAAAA,EAAY7qB,EAAAA,EAAGC,EAAAA,SACR,SAAf4qB,EAAuB,CAOzB2B,EAAW/zB,EAAM,CACfu1B,cAPoB,CACpB5V,KAAMpY,EACNqY,MAAOrY,EAAIqhB,GACX/I,IAAKrY,EACLsY,OAAQtY,EAAIohB,MAMhBoM,GAAkB,GAClBE,EAAe,MACflB,EAAch0B,IAEhByM,SAAU,KACRuoB,GAAkB,GAClBE,EAAe,MACflB,EAAch0B,YAGX,KACLs1B,OAED,CACD1L,EACA4K,EACAD,EACAV,EACAC,EACAC,EACAC,IAGF55B,IAAU,SACHu5B,IAAkBa,EAAa,MAAO,aACrCz4B,KAAEA,EAAFC,GAAQA,EAARghB,SAAYA,GAAa2W,EAE3BC,IACFpS,GAAqBzlB,GACrBylB,GAAqBxlB,UAEjBmoB,EAAa,aAAY5W,KAAKoT,MAAM3kB,EAAGuL,EAAIxL,EAAKwL,SAASgG,KAAKoT,MAClE3kB,EAAGwL,EAAIzL,EAAKyL,QAER0c,EAAYsQ,EAAYlkB,WAAWxR,QACvC,CACE,CACEqlB,UAAAA,IAGJ,CACEplB,SAAU,IACVwc,KAAM,WACN6M,OAAQ,0CAGZlE,EAAUlH,SAAWA,EACd,KACLkH,EAAUG,YAEX,CAACmQ,EAAab,UAEX8B,EAAU1xB,EAAc/D,GACxB01B,EACJ/B,GAAiBA,EAAc53B,KAC3B43B,EAAc53B,KAAKwL,EACnB0tB,EACAA,EAAY1tB,EACZA,EAEAouB,EACJhC,GAAiBA,EAAc53B,KAC3B43B,EAAc53B,KAAKyL,EACnBytB,EACAA,EAAYztB,EACZA,EAEAouB,EAAaX,GAAetB,EAAgB,IAAOlsB,SAYvDzN,gBAACq1B,IAAOzY,OAAQwe,GACdp7B,sCACgBgG,EAAKoC,GACnB9C,UAAU,OACVE,QACEoqB,OACItP,EACCI,IACCmZ,EAAY7zB,EAAM0a,IAG1BvO,MAAO,CACLuP,MAAOkN,GACP1S,OAAQ0S,GACRjJ,KAAO,GAAE+V,MACT7V,IAAM,GAAE8V,MACRluB,OAAQmuB,EACRC,OAAQjM,EAAamL,EAAc,WAAa,YAAUza,EAC1D3D,SAAUse,GAAetB,EAAgB,aAAUrZ,IAGrDtgB,qBACEmC,IAAKu4B,EACLp1B,UACE20B,EACI,uBACAC,EACA,qBACA,GAEN/nB,MAAO,CACLgY,UAAWmL,GAAyB,CAClCC,OAAQhD,GAAsB,EAC9BiD,MAAOuF,EAAc,MAAQ,MAE/Be,mBAAoB,YACpBC,mBAAoB,QAEpBC,yBAA0B,iCAC1B7P,gBAAiB,kBAGnBnsB,wBACEsF,UAAU,kBACVoc,MAAM,OACNxF,OAAO,OACP+f,GAAG,IACHC,GAAG,IACH3a,KAAM4a,GAAkBV,EAASb,GAAYrZ,KAC7C6T,OAAQ+G,GAAkBV,EAASb,GAAYxF,OAC/CgH,YAAY,MAEdp8B,yBACEqU,KAAMoU,EAAiBxiB,EAAoBD,IAC3C4pB,UAAU,QACVzd,MAAO,CACLuP,MAAO,OACPxF,OAAQ,cAShBme,GAAiB,CACrBr3B,EACAq5B,EAAYC,CAAAA,IACV37B,QAAQC,IAAI,iBAAkB07B,cAG1Btd,EAAOhf,EAAMG,OAAO6C,GAC1BhD,EAAMI,WAAU,WACRk8B,EAAej1B,OAAOk1B,QAAQv5B,GAAO8F,QAAO,CAAC0zB,GAAKC,EAAGC,MACrD1d,EAAK3e,QAAQo8B,KAAOC,IACtBF,EAAGC,GAAK,CAACzd,EAAK3e,QAAQo8B,GAAIC,IAErBF,IACN,IACCn1B,OAAOwB,KAAKyzB,GAAcz1B,OAAS,GACrCw1B,EAASC,GAEXtd,EAAK3e,QAAU2C,MAIbm5B,GAAoB,CAACV,EAASb,IAC9Ba,EACK,CAAEla,KAAM,QAAS6T,OAAQ,SACvBwF,EACF,CAAErZ,KAAM,OAAQ6T,OAAQ,QAE1B,CAAE7T,KAAM,UAAW6T,OAAQ,WC7QvBuH,GAAgB,EAC3BC,iBAAAA,EACAC,aAAAA,EACA/K,kBAAAA,EACAgL,kBAAAA,EACAC,sBAAAA,EAAwB,SACxBC,2BAAAA,EAA6B,mBAGvBl3B,EAAQ4C,IACRC,EAAaC,IACbW,EAAgBC,IAChBqB,EAAgBC,IAChBrB,EAAsBC,IACtB2D,EAAsB4vB,KACtB/xB,EAAcP,EAAaR,KAC3BE,EAAcC,IACd4yB,E5CkH4B,GAClCC,YAAAA,EAAcvyB,MACZ,KACKuyB,EAAc,E4CrHKC,GACpB3yB,EAAkBrB,MAEjBi0B,EAAoBC,GAAyBt9B,EAAMu9B,YACxD,CAAC73B,EAAO83B,KACC,IACF93B,GACF83B,EAAOzjB,KAAMyjB,EAAOt7B,SAGzB,IAGIu7B,EAA4BnwB,KAC5BowB,EAAWvvB,KACXwvB,EAAazvB,KACb0vB,EAAc7vB,KACd8vB,EAAmBjwB,KAEnBkwB,EAAgB99B,EAAMG,OAAO,aAE5BkH,OAAOwB,KAAK/C,GAAO8D,KAAKm0B,UACvB/3B,EAAOF,EAAMi4B,GAEbC,EAAeC,GAAej4B,EAAM,CACxC2C,WAAAA,EACAY,cAAAA,EACAsB,cAAAA,IAEIqzB,EAAoBC,GAAoBH,EAAc,CAC1DnB,aAAAA,EACA/K,kBAAAA,EACAgL,kBAAAA,EACAF,iBAAAA,KAEItmB,WAAEA,GAAe4nB,EACjBE,EACJp4B,EAAKoC,KAAOqB,GACZ6M,IAAewb,GACf/nB,EAAc/D,GACVq4B,EAAqB/nB,IAAewmB,EACpCwB,EAAqBC,GAAyBv4B,EAAMuD,GAKpDswB,EAAc75B,EAAMO,aACvByF,UACOw4B,EAAcC,GAAez4B,EAAM,CACvCkF,YAAAA,EACAmC,oBAAAA,EACAixB,mBAAAA,EACAD,mBAAAA,EACA11B,WAAAA,EACA8B,gBAAAA,EACAyyB,kBAAAA,EACA7yB,YAAAA,OAGkB,SAAhBm0B,EAAwB,OACpBE,EACJC,GAA8Bh2B,GAChC+0B,EAAS13B,EAAM04B,OACU,WAAhBF,EACTb,EAAW33B,GACc,YAAhBw4B,GACTZ,EAAY53B,KAGhB,CACEs4B,EACAD,EACA11B,EACA0B,EACA6yB,EACAhyB,EACAmC,IAIEysB,EAAa95B,EAAMO,aACvB,CAACyF,EAAM44B,KACLd,EAAcz9B,QAAUw+B,GAAiB,CACvCD,gBAAAA,EACA/B,aAAAA,EACA/K,kBAAAA,UAEIsG,EAAa0G,GAAc94B,EAAM,CACrCs4B,mBAAAA,EACA31B,WAAAA,EACAm1B,cAAAA,EACAhM,kBAAAA,EACA+K,aAAAA,EACApyB,gBAAAA,EACAyyB,kBAAAA,EACA7yB,YAAAA,IAEFu0B,EAAgB3F,cAAcb,GAC9B2E,EAAqC,SAAf3E,EAAwBpyB,EAAO,MACrDg3B,EAA0C,WAAf5E,EAA0BpyB,EAAO,QAE9D,CACEs4B,EACA31B,EACAm1B,EACAhM,EACA+K,EACAxyB,EACA6yB,EACAH,EACAC,IAIEjD,EAAa/5B,EAAMO,aACvB,CAACyF,EAAM+4B,WACC3G,EAAa0G,GAAc94B,EAAM,CACrCs4B,mBAAAA,EACA31B,WAAAA,EACAm1B,cAAAA,EACAhM,kBAAAA,EACA+K,aAAAA,EACAxyB,YAAAA,EACA6yB,kBAAAA,QAIE8B,GAAgB,EAChBC,EAAe,QAEA,8BAAf7G,EAA4C,OACxC8G,EAA4BC,GAChCJ,EAAgBxD,cAChBzJ,GAEIsN,EAA0BC,GAA8Br5B,EAAM,CAClEF,MAAAA,EACAyD,cAAAA,IAEFk0B,EACEz3B,EACAk5B,EACAE,QAGG,GAAmB,wBAAfhH,EACT4G,GAAgB,EAChBC,EAAeK,GACbt5B,EAAK0H,mBACLokB,QAEG,GAAmB,SAAfsG,EAAuB,OAC1BmH,EAA4BC,GAChCx5B,EACA,CACE2C,WAAAA,EACA+b,UAAWqa,EAAgBxD,cAC3BsB,aAAAA,IAGJa,EAAS13B,EAAMu5B,GACfP,GAAgB,EAChBC,EAAeQ,GACbF,EACA1C,QAEG,GAAmB,wBAAfzE,EAAsC,OACzCmH,EAA4BC,GAChCx5B,EACA,CACE2C,WAAAA,EACA+b,UAAWqa,EAAgBxD,cAC3BsB,aAAAA,IAGkB6C,GAAgB15B,EAAM2C,KACtB42B,IACpB1B,EAAiB73B,EAAMu5B,GACvBP,GAAgB,EAChBC,EAAeQ,GACbF,EACA1C,SAGC,GAAmB,kBAAfzE,EAAgC,OACnCuH,EAAgBD,GAAgB15B,EAAM2C,GAC5Cq2B,GAAgB,EAChBC,EAAeQ,GACbE,EACA9C,QAEG,GAAmB,WAAfzE,EAAyB,OAC5B8G,EAA4BC,GAChCJ,EAAgBxD,cAChBzJ,GAEF2L,EACEz3B,EACAk5B,EACAG,GAA8Br5B,EAAM,CAAEF,MAAAA,EAAOyD,cAAAA,KAE/Co0B,EAAW33B,GACXg5B,GAAgB,EAChBC,EAAeK,GACbJ,EACApN,GAIAkN,GACF1B,EAAsB,CACpBvjB,IAAK/T,EAAKoC,GACVlG,MAAO,CACLH,KAAM,CACJwL,EAAGwxB,EAAgBxD,cAAc5V,KACjCnY,EAAGuxB,EAAgBxD,cAAc1V,KAEnC7jB,GAAIi9B,EACJjc,SAAU,KAMRnU,YAAW,KACTyuB,EAAsB,CACpBvjB,IAAK/T,EAAKoC,GACVlG,MAAO,gBAQrB,CACEo8B,EACA31B,EACAm1B,EACAhM,EACA+K,EACAxyB,EACA6yB,IAIElD,EAAgBh6B,EAAMO,aAAY,KACtCw8B,EAAsB,MACtBC,EAA2B,QAC1B,CAACD,EAAuBC,IAErBh6B,EAAQ,CACZ+W,IAAK/T,EAAKoC,MACP81B,EACHl4B,KAAAA,EACA2zB,cAAe0D,EAAmBr3B,EAAKoC,IACvCiF,oBAAAA,EACA4sB,SAAUmE,EACVlE,OAAQmE,EACRxE,YAAAA,EACAC,WAAAA,EACAC,WAAAA,EACAC,cAAAA,UAGKh6B,EAAM4H,SACX,IAAM5H,gBAAC05B,GAAS12B,IAChBqE,OAAOwB,KAAK7F,GAAO4G,KAAKmQ,GAAQ/W,EAAM+W,UAKtC0kB,GAAiB,CACrBz4B,GAEEkF,YAAAA,EACAmC,oBAAAA,EACAixB,mBAAAA,EACAD,mBAAAA,EACA11B,WAAAA,EACA8B,gBAAAA,EACAyyB,kBAAAA,EACA7yB,YAAAA,KAGEi0B,EAEAsB,GAAsB55B,EAAM,CAC1ByE,gBAAAA,EACAyyB,kBAAAA,EACA7yB,YAAAA,IAGK,OAEF,OAGLw1B,GAAoB75B,EAAM2C,GACxBm3B,GAAwB95B,EAAM,CAAEk3B,kBAAAA,EAAmB7yB,YAAAA,IAC9C,SAEF,OAGLg0B,GAEA0B,GAAyB/5B,EAAM,CAC7BkF,YAAAA,EACAmC,oBAAAA,EACAhD,YAAAA,EACA6yB,kBAAAA,IAGK,UAKJ,OAGH4B,GAAgB,CACpB94B,GAEEs4B,mBAAAA,EACA31B,WAAAA,EACAm1B,cAAAA,EACAhM,kBAAAA,EACA+K,aAAAA,EACApyB,gBAAAA,EACAyyB,kBAAAA,EACA7yB,YAAAA,KAGEi0B,EACER,EAAcz9B,UAAYyxB,EACrB,4BAGLgM,EAAcz9B,UAAYw8B,GAE1B+C,GAAsB55B,EAAM,CAC1ByE,gBAAAA,EACAyyB,kBAAAA,EACA7yB,YAAAA,IAGK,OAKJ,sBAGLw1B,GAAoB75B,EAAM2C,GACxBm1B,EAAcz9B,UAAYw8B,EACrB,sBAGLiB,EAAcz9B,UAAYyxB,GACxBgO,GAAwB95B,EAAM,CAAEqE,YAAAA,EAAa6yB,kBAAAA,IACxC,SAKJ,gBAGF,OAGH2B,GAAmB,EACvBD,gBAAAA,EACA/B,aAAAA,EACA/K,kBAAAA,SAEwBlL,GACtBiW,EACA+B,EAAgBrD,sBAGTsB,SAGoBjW,GAC3BkL,EACA8M,EAAgBrD,eAGTzJ,EAGF,MAGHyM,GAA2B,CAACv4B,EAAMuD,IACtCA,EAAcuxB,SAAS90B,EAAKoC,IACxBy3B,GAAsB,CAAC75B,EAAM2C,IACjCtB,OAAOwB,KAAKF,GAAY+pB,MAAM1pB,UACtBnD,EAAmB8C,EAAWK,UAElCnD,GAC0B,SAA1BA,EAAiBE,MACjBF,EAAiB3D,QAAU8D,EAAKoC,MAKhCw3B,GAAwB,CAC5B55B,GACEyE,gBAAAA,EAAiByyB,kBAAAA,EAAmB7yB,YAAAA,MAElCN,EAAc/D,MAIdyE,KAIAyyB,IAIA7yB,IAMAy1B,GAA0B,CAAC95B,GAAQqE,YAAAA,EAAa6yB,kBAAAA,MAChD7yB,IAIA6yB,EAMA6C,GAA2B,CAC/B/5B,GACEkF,YAAAA,EAAamC,oBAAAA,EAAqBhD,YAAAA,EAAa6yB,kBAAAA,OAE5CjI,GAAY/pB,MAIbmC,KAIAhD,IAIA6yB,IAOAoC,GAA+B,CACnC5xB,EACAokB,WAEMkO,EpBjekC,EAACtb,EAAW5gB,WAC9C+iB,EAAmBP,GAAoBxiB,GACvCm8B,EAAiBvb,EAAUkB,MAAQlB,EAAUiB,KAC7Cua,EAAkBxb,EAAUoB,OAASpB,EAAUmB,UAC3B,CACxBF,KAAMkB,EAAiBlB,KAAOjB,EAAUiB,KACxCE,IAAKgB,EAAiBhB,IAAMnB,EAAUmB,IACtCD,MAAOiB,EAAiBlB,KAAOjB,EAAUiB,KAAOsa,EAChDna,OAAQe,EAAiBhB,IAAMnB,EAAUmB,IAAMqa,IoBydLC,CAC1C,CACExa,KAAMjY,EAAmBH,EACzBsY,IAAKnY,EAAmBF,EACxBoY,MAAO,EACPE,OAAQ,GAEVgM,SAEK,CACLvkB,EAAGyyB,EAAoCra,KACvCnY,EAAGwyB,EAAoCna,MAIrC4Z,GAA8B,CAACz2B,EAAW6zB,WACxCuD,EAAyBC,GAC7Br3B,EACA6zB,GAEIyD,EAA2Bha,GAAoB8Z,SAC9C,CAEL7yB,EAAG+yB,EAAyB3a,KAAO,EACnCnY,EAAG8yB,EAAyBza,IAAM,IAIhCsZ,GAAkC,CACtCoB,EACAzO,WAEMpN,EpB3gBkC,EAACA,EAAW5gB,WAC9C+iB,EAAmBP,GAAoBxiB,GAEvC08B,EDc2B,EAAC9b,EAAWgB,WACvCC,EAAOjB,EAAUiB,KAAOD,EAAgBC,KAExCC,EAAQD,GADAjB,EAAUkB,MAAQlB,EAAUiB,MAGpCE,EAAMnB,EAAUmB,IAAMH,EAAgBG,UAIrC,CACLF,KAAAA,EACAC,MAAAA,EACAC,IAAAA,EACAC,OANaD,GADAnB,EAAUoB,OAASpB,EAAUmB,OCpBT4a,CADJhb,GAAkBf,EAAWmC,GAG1DA,UAEK2Z,GoBogBWE,CAChBH,EACAzO,SAEgC,CAChCvkB,EAAGmX,EAAUiB,KACbnY,EAAGkX,EAAUmB,MAKXwZ,GAAgC,CAACr5B,GAAQuD,cAAAA,EAAezD,MAAAA,SAC/B,IAAzByD,EAAc1C,cACT,QAEH85B,EAAwBp3B,EAC3BS,MAAM,GACNlB,QAAO,CAACC,EAAUg1B,WACX/3B,EAAOF,EAAMi4B,UACA/3B,EAAK2H,iBACP5E,EAAS4E,iBAAyB3H,EAC5C+C,IACNjD,EAAMyD,EAAc,YACrBo3B,IAA0B36B,EAAaA,EAAK2H,iBACzCgzB,EAAsBhzB,iBAAmB,GAG5CgxB,GAAiCh2B,GACLtB,OAAOwB,KAAKF,GAAYT,MAAMc,IACnCL,EAAWK,KAMlCw2B,GAAkC,CACtCx5B,GACE2C,WAAAA,EAAY+b,UAAAA,EAAWmY,aAAAA,YAEnB+D,EAAe,IAAIrhC,IACnBwnB,EAAoB,GAC1B1f,OAAOwB,KAAKF,GAAYpB,SAASyB,UACzBnD,EAAmB8C,EAAWK,OACVnD,GAGG,SAA1BA,EAAiBE,MAAmBF,EAAiB3D,QAAU8D,EAAKoC,GACrE,OACMy4B,EAAmBR,GACvBr3B,EACA6zB,GAEF+D,EAAa//B,IAAIggC,EAAkB73B,GACnC+d,EAAkBvV,KAAKqvB,aAGrBC,EAAiBha,GACrBC,EACArC,UAEuBkc,EAAa/gC,IAAIihC,IAItCpB,GAAkB,CAAC15B,EAAM2C,IACPtB,OAAOwB,KAAKF,GAAYT,MAAMc,UAC5CnD,EAAmB8C,EAAWK,UAElCnD,GAC0B,SAA1BA,EAAiBE,MACjBF,EAAiB3D,QAAU8D,EAAKoC,MAMhCi4B,GAA8B,CAACr3B,EAAW6zB,IACrBA,EAAa9T,cACnC,qBAAoB/f,OAKnBi1B,GAAiB,CAACj4B,GAAQ2C,WAAAA,EAAYY,cAAAA,EAAesB,cAAAA,YACnD80B,EAAgBt4B,OAAOwB,KAAKF,GAAYT,MAC3Cc,GACCL,EAAWK,IACoB,SAA/BL,EAAWK,GAAWjD,MACtB4C,EAAWK,GAAW9G,QAAU8D,EAAKoC,YAErCu3B,EACK,CACL55B,KAAM,aACN7D,MAAOy9B,GAIPp2B,EAAcuxB,SAAS90B,EAAKoC,IACvB,CACLrC,KAAM,cACN7D,MAAO,IACF8D,EAAK0H,mBACR6kB,SAAUvsB,EAAKusB,SACf9kB,OAAQzH,EAAK2H,mBAKf9C,EAAciwB,SAAS90B,EAAKoC,IACvB,CACLrC,KAAM,cACN7D,WAAOoe,GAIJ,CACLva,KAAM,mBAIJo4B,GAAsB,EACxBp4B,KAAAA,EAAM7D,MAAAA,IACN26B,aAAAA,EAAc/K,kBAAAA,EAAmBgL,kBAAAA,EAAmBF,iBAAAA,KAEzC,eAAT72B,EACK,CACLuQ,WAAYumB,EAAa9T,cAAe,qBAAoB7mB,OAC5DuL,YAAQ6S,EACRiS,SAAU,EACVhlB,OAAG+S,EACH9S,OAAG8S,EACHsP,WAAW,GAIF,gBAAT7pB,EACK,CACLuQ,WAAYwb,EACZrkB,OAAQvL,EAAMuL,OACd8kB,SAAUrwB,EAAMqwB,SAChBhlB,EAAGrL,EAAMqL,EACTC,EAAGtL,EAAMsL,EACToiB,WAAW,GAIF,gBAAT7pB,EACK,CACLuQ,WAAYwmB,EACZrvB,YAAQ6S,EACRiS,SAAU,EACVhlB,OAAG+S,EACH9S,OAAG8S,EACHsP,WAAW,GAIR,CACLtZ,WAAYsmB,EACZnvB,YAAQ6S,EACRiS,SAAU,EACVhlB,OAAG+S,EACH9S,OAAG8S,EACHsP,WAAW,GCprBFmR,GAAiB,EAC5B7f,aAAAA,EACAc,YAAAA,EACA8O,mBAAAA,YAEMkQ,E7CWmB,GAAGvxB,QAAAA,EAAUwxB,KAAiB,KAChDxxB,EAAQ7F,KAAKs3B,GAAWv2B,EAAau2B,K6CZ3BC,GACXj3B,EAAgBC,IAChBe,EAAcP,EAAaT,IAAkB,KAE7Ck3B,EAAcphC,EAAMG,SACpBkhC,EAAarhC,EAAMG,SACnBmhC,EAAethC,EAAMG,gBAOzBH,gBAAC8gB,IACCxb,UAAU,0DACVgY,OAAQ4D,EACRpD,eAAgBkE,EAChBxE,4BAA4B,GAE5Bxd,uBAAKsF,UAAU,kBACbtF,uBAAKsF,UAAU,eACbtF,uBAAKsF,UAAU,gBACQ,IAApB07B,EAASn6B,SAAiBqE,GAbnC,wEAc6B,IAApB81B,EAASn6B,SAAiBqE,GAbhB,0CAcVA,GACClL,wBAAMsF,UAAU,aACbwqB,GAAW5kB,EAAYnF,MAAMgqB,OAIpC/vB,uBAAKsF,UAAU,aACbtF,uBACEmS,MAAO,CACLwK,SAAU,aAGZ3c,gBAACgxB,IACCoQ,YAAaA,EACbl2B,YAAaA,EACbq2B,mBAAoBP,EAASn6B,SAE/B7G,gBAACwhC,IACCH,WAAYA,EACZC,aAAcA,EACdp2B,YAAaA,OAKrBlL,uBAAKsF,UAAU,kBACbtF,gBAACyhC,IACCL,YAAaA,EACbJ,SAAUA,EACV91B,YAAaA,IAEdA,EACClL,gBAAC0hC,IACC5Q,mBAAoBA,EACpBwQ,aAAcA,EACdF,YAAaA,EACbC,WAAYA,EACZn2B,YAAaA,EACb8W,YAAaA,IAEb,SAORgP,GAAW,EAAGoQ,YAAAA,EAAal2B,YAAAA,EAAaq2B,mBAAAA,KAE1CvhC,uBACEmC,IAAKi/B,EACL97B,UAAU,oBACV6M,MAAO,CAAE0V,WAAY,SAErB7nB,gBAACoC,IAAM1C,IAAK4xB,GAAgB5P,MAAM,QACjCxW,EAAc,KACblL,uBAAKsF,UAAU,0BAA0Bi8B,IAM3CC,GAAU,EAAGH,WAAAA,EAAYC,aAAAA,EAAcp2B,YAAAA,KACtCA,EAKHlL,gCACEA,uBAAKsF,UAAU,oBAAoBnD,IAAKk/B,GACtCrhC,uBAAKsF,UAAU,aACbtF,uBAAKsF,UAAU,mBACbtF,uBAAKsF,UAAU,mBACbtF,gBAACoC,IAAMkD,UAAU,oBAAoB5F,IAAK4xB,MAE5CtxB,uBAAKsF,UAAU,kBACbtF,gBAACoC,IACCkD,UAAU,WACV5F,IAAK2wB,GAAenlB,GACpBwW,MAAM,MACNmO,IAAK3kB,EAAYnF,WAM3B/F,uBAAKsF,UAAU,cACbtF,gBAACswB,IAAU1kB,KAAMV,EAAa/I,IAAKm/B,MAvBhC,KA6BLG,GAAa,EAAGL,YAAAA,EAAaJ,SAAAA,EAAU91B,YAAAA,KACvCA,EACK,KAGe,IAApB81B,EAASn6B,OACJ7G,gBAAC2hC,IAAkBP,YAAaA,IAGlCphC,gBAAC4hC,SAGJA,GAAiB,WACfC,EAAWryB,YAGfxP,0BAAQsF,UAAU,oCAAoCE,QAASq8B,eAM7DF,GAAoB,EAAGP,YAAAA,YACrB3yB,EAAqBC,IACrBozB,EAAchyB,MACbiyB,EAAgBC,GAAuBhiC,EAAMC,UAAS,UAM7DD,EAAMI,WAAU,IACT2hC,GAILD,IAEIrzB,GACFuzB,GAAoB,GACb,QAEFC,GAAmB,CACxBC,SAAUd,EAAY/gC,QACtB0E,SAAU,IACVie,SAAU,KACRgf,GAAoB,OAbf,QAgBR,CAACD,IAGF/hC,0BACEsF,UAAU,uCACVE,QA3BiB,KACnBw8B,GAAoB,kBAiClBC,GAAqB,EAAGC,SAAAA,EAAUn9B,SAAAA,EAAUie,SAAAA,MAChDkf,EAASviB,aAAa,eAAgB,UAChCwiB,EAAYtzB,YAAW,KAC3BqzB,EAAStiB,gBAAgB,eAAgB,IACzCoD,MACCje,SACI,KACLm9B,EAAStiB,gBAAgB,eAAgB,IACzC9Q,aAAaqzB,KAIXT,GAAc,EAClB5Q,mBAAAA,EACAwQ,aAAAA,EACAF,YAAAA,EACAC,WAAAA,YAEM5yB,EAAqBC,IACrB0zB,EAAsBr1B,MAErBs1B,EAAgBC,GAAwBtiC,EAAMC,UAAS,UAS9DD,EAAMI,WAAU,IACTiiC,EAID5zB,GACF2zB,IACO,QAGFG,GAAsB,CAC3BC,gBAAiB1R,EAAmBzwB,QACpCoiC,UAAWnB,EAAajhC,QACxB6hC,SAAUd,EAAY/gC,QACtBqiC,QAASrB,EAAWhhC,QACpB0E,SAAU,IACVie,SAAU,KACRof,OAfK,QAkBR,CAACC,IAGFriC,0BACEsF,UAAU,wCACVE,QAAS,KA/BP68B,GAGJC,GAAqB,mBAqCnBC,GAAwB,EAC5BC,gBAAAA,EACAE,QAAAA,EACAR,SAAAA,EACAO,UAAAA,EACA19B,SAAAA,EACAie,SAAAA,MAEAkf,EAAS/vB,MAAMxN,QAAU,QAEnBg+B,EAA2Brc,GAAoBkc,GAE/CI,EAAmBF,EAAQ59B,QAC/B,CACE,CACEqlB,UAAW,WACXxlB,QAAS,GAEX,CACEwlB,UAAW,WACXxlB,QAAS,IAGb,CACEI,SAAAA,EACAwc,KAAM,aAIJshB,EAAqBJ,EAAU39B,QACnC,CACE,CACEqlB,UAAW,WACXxlB,QAAS,EACTgY,SAAU,QACVkJ,IAAM,GAAE8c,EAAyB9c,SACjCF,KAAO,GAAEgd,EAAyBhd,WAEpC,CACEwE,UAAW,WACXxlB,QAAS,EACTgY,SAAU,QACVkJ,IAAM,GAAE8c,EAAyB9c,SACjCF,KAAO,GAAEgd,EAAyBhd,YAGtC,CACE5gB,SAAAA,EACAwc,KAAM,oBAGVshB,EAAmB7f,SAAWA,EAEvB,KACL4f,EAAiBvY,SACjBwY,EAAmBxY,WCxTVyY,GAAQ,EAAGjS,eAAAA,EAAgBkS,aAAAA,EAAc9O,YAAAA,YAC9CtnB,EAAuByD,KAEtB4yB,EAAcC,GAAsBjjC,EAAMC,UAAS,GAE1DD,EAAMI,WAAU,KACd2iC,MACC,UAEI9wB,EAA4BixB,GAA6BxyB,MACzDse,EAAuBmU,GAAwBzyB,KAEhDogB,EAAqB9wB,EAAMG,gBAG/BH,uBAAKsF,UAAU,mBACbtF,gBAACgQ,SACDhQ,gBAAC4wB,IACCC,eAAgBA,EAChBC,mBAAoBA,IAErBnkB,EACC3M,gBAACojC,IACCnxB,2BAA4BA,EAC5B+c,sBAAuBA,EACvB6B,eAAgBA,EAChBoD,YAAaA,EACboP,eAAiBC,IACfL,EAAmBK,MAGrB,KACHN,EACChjC,gBAAC28B,IACCC,iBAAkBoG,EAAapG,iBAC/BC,aAAcmG,EAAanG,aAC3B/K,kBAAmBkR,EAAalR,kBAChCgL,kBAAmBkG,EAAalG,kBAChCC,sBAAuBoG,EACvBnG,2BAA4BkG,IAE5B,KACJljC,gBAAC+gC,IACC7f,cAAevU,EACfmkB,mBAAoBA,MAMtBsS,GAAiB,EACrBnxB,2BAAAA,EACA+c,sBAAAA,EACAqU,eAAAA,EACApP,YAAAA,YAEMliB,EAAgB/R,EAAMG,OAAO,MAC7B4uB,EAAW/uB,EAAMG,OAAO,MACxB60B,EAAgBh1B,EAAMG,OAAO,MAC7B6R,EAAehS,EAAMG,OAAO,aAElCH,EAAMI,WAAU,KACdijC,EAAe,CACbvR,kBAAmB/f,EAAc1R,QACjCw8B,aAAc9N,EAAS1uB,QACvBy8B,kBAAmB9H,EAAc30B,QACjCu8B,iBAAkB5qB,EAAa3R,YAEhC,IAGDL,gCACEA,gBAACoO,SACDpO,uBAAKsF,UAAU,oBACbtF,gBAAC8uB,IACCC,SAAUA,EACVC,sBAAuBA,IAEzBhvB,gBAAC+0B,IAAYC,cAAeA,KAE9Bh1B,gBAAC8R,IACCC,cAAeA,EACfC,aAAcA,EACdC,2BAA4BA,IAE9BjS,gBAACg0B,IAAOC,YAAaA,EAAaliB,cAAeA,MC7F1CwxB,GAAyB,EACpCvhB,YAAAA,EACAd,aAAAA,EACAxU,OAAAA,YAEM82B,EAAmB/2B,YAEvBzM,gBAAC8gB,IACCxb,UAAU,iHACVgY,OAAQ4D,EACRpD,eAAgBkE,EAChBxE,4BAA4B,GAE5Bxd,uBAAKsF,UAAU,kBACbtF,uBAAKsF,UAAU,eAAeE,QAASwc,GACrChiB,gBAACyhB,UAEHzhB,uBAAKsF,UAAU,eACbtF,wCAEEA,uBAAKsF,UAAU,gBAAgBoH,EAAO8kB,UAAUzB,MAChD/vB,gBAACoC,IACCkD,UAAU,aACV5F,IAAKgN,GAAUA,EAAO8kB,UAAUC,IAChC5B,IAAI,SACJnO,MAAM,KACNxF,OAAO,KACP/J,MAAO,CACLsxB,UAAY,yBACT/2B,GAAUA,EAAO8kB,UAAU/J,OAAU,cAK9CznB,uBAAKsF,UAAU,kBACbtF,0BACEwF,QAAS,KACPwc,IACAwhB,EAAiB92B,mBClC3Bg3B,GAAiB,gEAIjBC,GAAU,wDACVC,GAAY,IAEZC,GAAW,CACfC,MACE,8LACFC,MACE,kLACFC,MACE,6IACFC,MACE,mLAGSC,GAAa,EACxBC,aAAAA,EACAC,gBAAAA,EACAC,gBAAAA,YAEMr8B,EAAUC,IACVkF,EAAgBtF,KAChB+E,EAAe03B,MAGdC,EAA8BC,GACnCxkC,EAAMC,UAAS,GACXwkC,EAA6B,KACjCD,GAAmC,IAM/BE,EAAaC,YAGjB3kC,uBAAKsF,UAAU,yBACZ6+B,GACCnkC,uBAAKsF,UAAU,QAAQE,QAAS4+B,SAIhCx3B,IAAiBO,GACjBnN,uBAAKsF,UAAU,oBACbtF,0BACEsF,UAAU,qBACVE,QAAS,KACPi/B,4BAORzkC,gBAACoC,IACCkD,UAAU,mBACV5F,IAAKgkC,GACL7T,IAAI,eACJnO,MAAM,MACNxF,OAAO,QAETlc,uBAAKsF,UAAU,cACZ0C,EAAQ4B,KAAK8C,GACZ1M,gBAAC4kC,IACC7qB,IAAKrN,EAAOtE,GACZsE,OAAQA,EACRy3B,aAAcA,EACdU,gBAAiBhB,GAAU,OAAMn3B,EAAOtE,MACxCrB,MAAO2F,EAAO3F,MACdyqB,UAAW9kB,EAAO8kB,UAClBiT,2BAA4BA,EAC5BK,gBAAiB33B,GAAiBT,EAAOtE,KAAO+E,EAAc/E,GAC9Di8B,gBAAiBA,OAIvBrkC,gBAACujC,IACCriB,aAAcqjB,EACdviB,YAjD8B,KAClCwiB,GAAmC,IAiD/B93B,OAAQg4B,MAMVC,GAAgB,WACdx3B,EAAgBtF,KAChBG,EAAUC,QAEZy8B,KACAv3B,EAAe,OACX43B,EAAqB/8B,EAAQg9B,WAChCt4B,GAAWA,EAAOtE,KAAO+E,EAAc/E,KAE1Cs8B,EACEK,IAAuB/8B,EAAQnB,OAAS,EACpCmB,EAAQ,GACRA,EAAQ+8B,EAAqB,QAEnCL,EAAa18B,EAAQ,UAEhB08B,GAGHE,GAAa,EACjBC,gBAAAA,EACAn4B,OAAAA,EACAy3B,aAAAA,EACA3S,UAAAA,EACAzqB,MAAAA,EACA09B,2BAAAA,EACAJ,gBAAAA,YAEMY,EAA2BjlC,EAAMG,OAAO,MACxC+kC,EAAiBllC,EAAMG,OAAO,MAC9BglC,EAA6BnlC,EAAMG,OAAO,MAC1CilC,EAA6BplC,EAAMG,OAAO,MAE1CukC,EAAaC,MAEZU,EAAgBC,GAAwBtlC,EAAMC,SAAS,OACvDslC,EAAkBC,GAA0BxlC,EAAMC,SAAS,KAC3DwlC,EAAiBC,GAAyB1lC,EAAMC,UAAS,UAEhED,EAAMI,WAAU,KACVikC,GAAmBA,EAAgB33B,SAAWA,EACR,iBAApC23B,EAAgBsB,iBAClBL,EAAqBjB,EAAgBt9B,OACrCy+B,EAAuBnB,EAAgB34B,iBACM,aAApC24B,EAAgBsB,gBACzBD,GAAsB,GACuB,oBAApCrB,EAAgBsB,iBACzBL,EAAqBjB,EAAgBt9B,OAGvCu+B,EAAqB,QAEtB,CAACjB,EAAiB33B,IAWrB1M,EAAMI,WAAU,SACTilC,EAAgB,aACftjC,KAAEA,EAAFC,GAAQA,GAAOqjC,EAIfO,EADcV,EAAe7kC,QACDyE,QAChC,CACE,CAAE+gC,eAAgBC,GAAsB/jC,EAAO6hC,KAC/C,CAAEiC,eAAgBC,GAAsB9jC,EAAK4hC,MAE/C,CACE7+B,SAAU,IACVwc,KAAM,aAKJwkB,EAAiBX,EAA2B/kC,YAC9CklC,EAAmB,KACnBQ,IACFR,EAAmBQ,EAAejhC,QAChC,CACE,CAAE+gC,eAAgBC,GAAsB/jC,EAAO6hC,KAC/C,CAAEiC,eAAgBC,GAAsB9jC,EAAK4hC,MAE/C,CACE7+B,SAAU,IACVwc,KAAM,oBAMNykB,EAAwBf,EAAyB5kC,QACjD4lC,EAAaD,EAAsBE,iBACzCvlC,QAAQC,IAAI,OAAQmB,GACpBpB,QAAQC,IAAI,KAAMoB,SACZmkC,EAA0BH,EAAsBlhC,QACpD,CACE,CACEshC,iBAAkBC,GAChBtkC,EAAO6hC,GACPqC,IAGJ,CACEG,iBAAkBC,GAAwBrkC,EAAK4hC,GAAWqC,KAG9D,CACElhC,SAAU,IACVwc,KAAM,oBAIV4kB,EAAwBnjB,SAAW,KACD,aAA5B4iB,EAAcU,WAA0BhB,EAAqB,OAEnEM,EAAc5iB,SAAW,KACmB,aAAtCmjB,EAAwBG,WAC1BhB,EAAqB,OAGlB,KACLa,EAAwB9b,SACxBub,EAAcvb,SACVkb,GAAkBA,EAAiBlb,YAExC,CAACgb,IAEJrlC,EAAMI,WAAU,WAER4lC,EAAwBf,EAAyB5kC,QACjD4lC,EAAaD,EAAsBE,iBACzCF,EAAsB7zB,MAAMo0B,gBAAkBN,EAC9CD,EAAsB7zB,MAAMi0B,iBAAmBC,GAC7Ct/B,EAAQ68B,GACRqC,KAED,CAACl/B,IAGF/G,uBAAKsF,UAAU,aACbtF,uBACEshB,QAAQ,qBACRI,MAAM,KACNxF,OAAO,MACPqF,KAAK,OACL6T,OAAO,QAEPp1B,wBAAMwhB,EAAGqjB,EAAiBv/B,UAAU,oBACpCtF,wBACEmC,IAAK8iC,EACLzjB,EAAGqjB,EACHv/B,UAAU,oBAEZtF,qBAAGsF,UAAU,mBACXtF,yBACEmC,IAAK+iC,EACL7wB,KAAMsvB,GACNjiB,MAAM,KACNxF,OAAO,KACP5W,UAAU,OACV6M,MAAO,CACLq0B,WAAa,SAAQ3B,MACrBgB,eAAgBC,GAAsB/+B,EAAQ68B,OAGjD2B,GAAoBA,EAAiB1+B,OAAS,GAC7C7G,qBACEsF,UAAU,oBACVnD,IAAKijC,EACLjzB,MAAO,CACLq0B,WAAa,SAAQ3B,MACrBgB,eAAgBC,GAAsB/+B,EAAQ68B,MAG/C2B,EAAiB37B,KAAI,CAAClD,EAAQioB,IAC7B3uB,yBACE+Z,IAAK4U,EACLjN,MAAM,KACNxF,OAAO,KACP5W,UAAY,iBAAgBqpB,EAAQ,IACpCta,KAAMoU,EAAiB/hB,UAOnC1G,uBAAKsF,UAAU,iBAAiByB,GAChC/G,uBACEsF,UAAY,gBACVo/B,EAAWlT,UAAUppB,KAAOopB,EAAUppB,IAAO+7B,EAEzC,GADA,eAGN3+B,QAAS,KACHk/B,EAAWlT,UAAUppB,KAAOopB,EAAUppB,IAAO+7B,GAC/CM,MAGHgB,GACCzlC,uBAAKsF,UAAU,oBAAoBnD,IAAKgjC,GACtCnlC,gBAACymC,UAGLzmC,gBAAC0mC,IAAOlV,UAAWA,OAMrBsU,GAAyBa,GAAqB,IAARA,EAAF,IAEpCN,GAA0B,CAACM,EAAOV,IACtCA,EAAaU,EAAQV,EAEjBQ,GAAsB,IAC1B,IAAIhnB,MAAM,GACP8B,KAAK,IACL3X,KAAI,CAACg9B,EAAMjY,IACV3uB,gBAACoC,IACC2X,IAAK4U,EACLjN,MAAM,KACNxF,OAAO,KACP5W,UAAY,eAAcqpB,EAAQ,IAClCjvB,IAAKo0B,GACLvxB,eAAe,MAIjBmkC,GAAS,EAAGlV,UAAAA,KAChBxxB,gBAACoC,IACCkD,UAAU,aACV5F,IAAK8xB,EAAUC,IACf5B,IAAI,SACJnO,MAAM,KACNxF,OAAO,KACP/J,MAAO,CACLsxB,UAAY,yBAAwBjS,EAAU/J,OAAS,aCpVhDof,GAAoB,WACzBC,EAAiBC,YAGrB/mC,uBAAKsF,UAAU,sBACbtF,uBAAKsF,UAAU,qBACftF,uBAAKsF,UAAU,WACbtF,uBAAKsF,UAAU,2BACftF,uBAAKsF,UAAU,6DAGftF,uBAAKsF,UAAU,WACZ,CAAC,EAAG,EAAG,EAAG,EAAG,GAAGsE,KAAKo9B,GAElBhnC,0BACE+Z,IAAKitB,EACLxhC,QAAS,KACPshC,EAAeE,KAGhBA,SAUXD,GAAoBthC,GAAa,CAACC,EAAOshC,KACtC,IACFthC,EACHsC,QAAS,IAAIyX,MAAMunB,GAAazlB,KAAK,IAAI3X,KAAI,CAACq9B,EAAGtY,KACxC,CACLvmB,GAAIumB,EAAQ,EACZuY,OAAQvY,EAAQ,EAChB5nB,MAAO,UCpBFogC,GAAa,CACxB,CAAE/+B,GAAI,EAAG2nB,KAAM,QAAStI,MAAO,UAAWgK,IAtB3B2V,OAAO,2DAuBtB,CAAEh/B,GAAI,EAAG2nB,KAAM,eAAgBtI,MAAO,UAAWgK,IAtB5B2V,OAAO,kEAuB5B,CAAEh/B,GAAI,EAAG2nB,KAAM,eAAgBtI,MAAO,UAAWgK,IAtB5B2V,OAAO,iEAuB5B,CAAEh/B,GAAI,EAAG2nB,KAAM,cAAetI,MAAO,UAAWgK,IAtB5B2V,OAAO,gEAuB3B,CACEh/B,GAAI,EACJ2nB,KAAM,mBACNtI,MAAO,UACPgK,IA1BuB2V,OACzB,qEA2BA,CACEh/B,GAAI,EACJ2nB,KAAM,oBACNtI,MAAO,UACPgK,IA7BwB2V,OAC1B,uECIWC,GAAqB,EAAGr/B,QAAAA,YAC7Bs/B,EAAqBC,KACrBC,EAAYC,KACZC,EAAyB1/B,EAAQE,MAAMwE,IAAYA,EAAO8kB,mBAChEmW,KAEA3nC,EAAMI,WAAU,KACdunC,OACC,IAGD3nC,uBAAKsF,UAAU,4BACbtF,gBAAC4nC,SACAF,GACC1nC,gCACEA,mCACU0nC,EAAuBR,qCAEjClnC,uBAAKsF,UAAU,uBAAuB8C,GAAG,gBACvCpI,uBAAKsF,UAAU,mBACZ6hC,GAAWv9B,KAAK4nB,GAEbxxB,uBACEsF,UAAY,mBACVuiC,GAAqBrW,EAAWxpB,GAAW,GAAK,YAElD+R,IAAKyX,EAAUppB,GACf5C,QAAUiT,IACJovB,GAAqBrW,EAAWxpB,KAClCyQ,EAAMC,OAAO5T,QACX,CACE,CAAEqlB,UAAW,YACb,CAAEA,UAAW,cACb,CAAEA,UAAW,aAEf,CACEplB,SAAU,IACVwc,KAAM,aAGV+lB,EAAmBI,EAAwBlW,MAI/CxxB,gBAACoC,IACCkD,UAAU,gBACVoc,MAAM,KACNxF,OAAO,KACPxc,IAAK8xB,GAAaA,EAAUC,IAC5B5B,IAAI,SACJ1d,MAAO,CACL2V,OAAS,aACN0J,GAAaA,EAAU/J,OAAU,aAIxCznB,4BAAOwxB,EAAUzB,UAKzB/vB,uBAAKsF,UAAU,WACbtF,0BAAQsF,UAAU,6BAA6B,KAC/CtF,0BACEsF,UAAU,sBACVE,QAAS,KACPmiC,OAGD,SAOTD,GACA1nC,uBAAKsF,UAAU,kBACbtF,wDACAA,gBAACoC,IACC+P,MAAO,CAAExN,QAAS,IAClBjF,IAAK6wB,GAAoB,CAAExqB,KAAM+hC,OAEnC9nC,0BACEwF,QAAS,KACPgiC,+BAWRI,GAAc,WACZ5/B,EAAUC,WAGdjI,uBAAKsF,UAAY,SAAO0C,EAAQnB,OAAS,EAAI,aAAe,KAC1D7G,uBAAKsF,UAAU,4BACftF,0BACGgI,EAAQ4B,KAAK8C,GAEV1M,sBAAI+Z,IAAKrN,EAAOtE,IACbsE,EAAO8kB,UACNxxB,gBAACoC,IACCkD,UAAU,kBACVoc,MAAM,OACNxF,OAAO,OACPxc,IAAKgN,EAAO8kB,WAAa9kB,EAAO8kB,UAAUC,IAC1C5B,IAAI,SACJ1d,MAAO,CACL2V,OAAS,aACNpb,EAAO8kB,WAAa9kB,EAAO8kB,UAAU/J,OAAU,WAGpDplB,sBAAsB,IAGxBrC,uBAAKsF,UAAU,oBAEjBtF,4BACG0M,EAAO8kB,UACJ9kB,EAAO8kB,UAAUzB,KAChB,SAAQrjB,EAAOw6B,gBAU9BO,GAAehiC,GAAcC,UAC3B+J,QAAEA,GAAY/J,QACb,IACFA,EACHqiC,aAAa,EACbt4B,QAASM,EAAQN,OAIfo4B,GAAuB,CAACrW,EAAWxpB,KAC/BA,EAAQ0qB,MACbhmB,GAAWA,EAAO8kB,WAAa9kB,EAAO8kB,UAAUzB,OAASyB,EAAUzB,OAIlEwX,GAAwB9hC,GAAa,CAACC,EAAOgH,EAAQ8kB,WACnDxpB,QAAEA,GAAYtC,SACpBgH,EAAO8kB,UAAYA,EACZ,IACF9rB,EACHsC,QAAS,IAAIA,OAIX2/B,GAAe,SAEfK,EAAc5yB,SAAS6yB,uBAAuB,QAAQphC,OAGtDqhC,EAAqB,kBAChB9yB,SAAS+yB,eAAe,gBAC3B/yB,SAAS+yB,eAAe,gBAAgBC,YACxC,MAEFC,EAAkBH,IAIlBI,EAXW,IASNN,EAGThkC,OAAOukC,SAAW,KAChBF,EAAkBH,SAGhBM,EAAoBF,EADFD,EAMlBI,EAAarzB,SAAS2T,cAAc,gBACpC2f,EAActzB,SAAS2T,cAAc,iBAErC3T,SAAS2T,cAAc,WACzB3T,SAAS2T,cAAc,SAAS4f,SAAW,KACzCH,EAAoBF,EAAWD,MAC3BO,EARCxzB,SAAS2T,cAAc,SAAS8f,WASjCC,EAAgBN,EAEhBI,GAAgB,GAClBH,EAAWM,UAAUC,IAAI,UACzBN,EAAYK,UAAUhhB,OAAO,WACpB6gB,EAAeE,GAExBL,EAAWM,UAAUhhB,OAAO,UAC5B2gB,EAAYK,UAAUhhB,OAAO,WACpB6gB,GAAgBE,IACzBL,EAAWM,UAAUhhB,OAAO,UAC5B2gB,EAAYK,UAAUC,IAAI,aAK5BN,IACFA,EAAYO,QAAU,QAChB7zB,SAAS2T,cAAc,SAAU,OAC7BmgB,EAAc9zB,SAAS2T,cAAc,SAAS8f,WAC9CM,EAAYD,EAAcb,EAChCh2B,GAAyB,CACvBtN,SApDa,IAqDbyN,WAAY,EAAGY,SAAAA,MACbgC,SAAS2T,cAAc,SAAS8f,WAC9BK,GAAeC,EAAYD,GAAe91B,QAOlDq1B,IACFA,EAAWQ,QAAU,QACf7zB,SAAS2T,cAAc,SAAU,OAC7BmgB,EAAc9zB,SAAS2T,cAAc,SAAS8f,WAC9CM,EAAYD,EAAcb,EAChCh2B,GAAyB,CACvBtN,SApEa,IAqEbyN,WAAY,EAAGY,SAAAA,MACbgC,SAAS2T,cAAc,SAAS8f,WAC9BK,GAAeC,EAAYD,GAAe91B,SCvO3Cg2B,GAAO,EAAGC,wBAAAA,YACfrhC,EAAUC,IACVH,EAAkBC,IAClB6E,EAAe03B,KACfgF,EAA8BC,KAC9BC,EAA+BC,MAE9BC,EAAwBC,GAC7B3pC,EAAMC,UAAS,IACV2pC,EAAkBC,GAA0B7pC,EAAMC,SAAS,OAC3DokC,EAAiByF,GAAyB9pC,EAAMC,SAAS,MAE1D8pC,GAAwBn9B,GAAgB88B,EAExCh9B,EAAS1E,EAAQE,MAAMwE,GAAWA,EAAOtE,KAAON,IAChDkiC,EAAiChqC,EAAMG,OAAO,aAEpDH,EAAMI,WAAU,KAEZ0pC,EADEF,EACoB,CACpBl9B,OAAAA,EACA3F,MAAO,CACLhF,KAAMioC,EAA+B3pC,QACrC2B,GAAI0K,EAAO3F,OAEb4+B,gBAAiBiE,EAAiB/U,OAClCnpB,eAAgBk+B,EAAiBl+B,gBAGb,QAEvB,CAACk+B,EAAkB9hC,IAEtB9H,EAAMI,WAAU,QACVipC,SACKA,EAAwBS,KAGhC,CAACT,IAEAC,EACKtpC,gBAAC6mC,SAGN2C,EACKxpC,gBAACqnC,IAAmBr/B,QAASA,IAGlC+hC,EAEA/pC,gBAACkkC,IACCC,aAAcuF,EACdtF,gBAAiB,KACfuF,GAA6B,IAE/BtF,gBAAiBA,IAMrBrkC,gBAAC8iC,IACCjS,eAAgB,KACd8Y,GAA6B,IAE/B5G,aAAc,KACZiH,EAA+B3pC,QAAUqM,EAAO3F,MAChD8iC,EAAuB,OAEzB5V,YAAc2V,IACZC,EAAuBD,OAMlBL,GAAiC,IAEY,IADxCthC,IAC6BpB,OAIlC4iC,GAAkC,KACzBQ,KC9FTC,GAAuBzkC,GAAcC,IACzC,IACFA,EACH+I,oBAAoB,MAIX07B,GAAsB1kC,GAAcC,IACxC,IACFA,EACH+I,oBAAoB,MAIX27B,GAAkB3kC,GAAcC,IACpC,IACFA,EACH2kC,eAAe,MAINC,GAAiB7kC,GAAcC,IACnC,IACFA,EACH2kC,eAAe,MAINE,GAAgB9kC,GAAa,IACjC+kC,KCtBHC,GAA8B,WAC3BC,EAA0BC,GAC/B3qC,EAAMC,kBAERD,EAAMI,WAAU,IACPwqC,GAAgBC,0BAAyB,KAC9CF,EAA+BC,GAAgBE,mBAEhD,IAEIJ,GAGHK,GAA2B,IACxB/qC,EAAMO,YAAYqqC,GAAgBI,QCd9BC,GAA8B,IAClCC,KAaIC,GAA8B,IAClCC,GAGIC,GAAiC,IACrCC,GClBIC,GAAoB,EAAGC,qBAAAA,KACDP,KAM1BjrC,gBAACyrC,IAAkBD,qBAAsBA,IAHvC,KAMLC,GAAoB,EAAGC,YAAAA,GAAc,EAAMF,qBAAAA,YACzCJ,EAA2BD,KAC3BQ,EDT8B,YAC7BC,EAAQC,GAAgB7rC,EAAMC,SAAS6rC,aAC9C9rC,EAAMI,WAAU,IACP2rC,IAA0B,KAC/BF,EAAaC,UAEd,IACIF,GCEqBI,UAE5BhsC,EAAMI,WAAU,KACVsrC,GAAeF,GACjBJ,MAED,CAACM,EAAaF,IAGfxrC,4BAAUmS,MAAO,CAAE85B,UAAW,QAC5BjsC,6CACC2rC,EACC3rC,gBAACksC,IAAgBP,oBAAqBA,IAEtC3rC,gBAACmsC,WAMHD,GAAkB,EAAGP,oBAAAA,YACnBS,gCAAEA,EAAFC,oBAAmCA,GACvCV,EACIL,EAA8BD,MAE7BiB,EAAgBC,GAAwBvsC,EAAMC,SAAS,WAY5DD,gCACEA,yBACsB,KAAnBssC,EAAwB,oBAAsB,KAC3B,aAAnBA,GAAoD,eAAnBA,EAC9B,iBACA,KACgB,cAAnBA,GAAkCD,EAC9B,+CACD,KACgB,cAAnBC,IACAD,GACDD,EACK,wDACD,KACgB,cAAnBE,GACAD,GACAD,EAEG,KADC,uBAGPpsC,0BAAQ6zB,SAAUlyB,QAAQ2qC,GAAiB9mC,QA9BhChF,UACb+rC,EAAqB,kBACfjB,EAA4B,CAChCkB,aAAc,IAAMD,EAAqB,cACzCE,YAAa,IAAMF,EAAqB,aACxCG,6BAA8B,IAAMH,EAAqB,QA0BtDF,EAAuB,+BAAiC,mBAM3DF,GAAqB,WACnBf,EAA2BD,MAC1BwB,EAAqBC,GAA6B5sC,EAAMC,SAAS,WAoBtED,gCACEA,yBAC2B,aAAxB2sC,EACG,8BACA,KACqB,aAAxBA,EACG,iCACA,KACqB,WAAxBA,EAAmC,2BAA6B,MAEnE3sC,0BAAQ6zB,SAAkC,aAAxB8Y,EAAoCnnC,QA5B5ChF,UACZosC,EAA0B,sBAEJxB,KAMlBwB,EAA0B,YAE5B,MAAOC,GACPD,EAA0B,UAC1BjsC,QAAQG,MAAM+rC,oBC5EdC,GAAiB,4DAEVC,GAAW,WACfvB,EAAsBwB,EAAoBC,GAC/CjsB,YAGAhhB,gCACEA,gBAACoU,IAAWC,KAAMy4B,KAClB9sC,uBACEoI,GAAG,WACH5C,QAAS,KACPwnC,MAGFhtC,uBACEsF,UAAU,gBACVoc,MAAM,OACNxF,OAAO,OACPoF,QAAQ,aAERthB,wBACEuhB,KAAK,eACLC,EAAE,i2BAIRxhB,gBAACktC,IACC1B,qBAAsBA,EACtByB,oBAAqBA,MAMvBC,GAAiB,EAAG1B,qBAAAA,EAAsByB,oBAAAA,YACxCx+B,EAAqBC,IACrBy+B,EAAoBjD,KACpBkD,EAAmBjD,KAGnBE,EAAgBgD,KAChBC,EAAelD,KACfmD,EAAcjD,KAEdkD,EAAajD,MAEZkD,EAA+BC,GACpC1tC,EAAMC,UAAS,GAQX0tC,EAAoB,KANxBD,GAAoC,WAepC1tC,gBAAC8gB,IACCxb,UAAU,8GACVgY,OAAQkuB,EACR1tB,eAAgBmvB,EAChBzvB,4BAA4B,GAE5Bxd,uBAAKsF,UAAU,2BACbtF,uBAAKsF,UAAU,eAAeE,QAASynC,GACrCjtC,gBAACyhB,UAEHzhB,uBAAKsF,UAAU,mCACftF,uBAAKsF,UAAU,mBACbtF,6BACEA,yBACE+F,KAAK,WACLT,UAAWmJ,EAAqB,UAAY,YAC5Cm/B,QAASn/B,EACTo/B,SAAWhB,IACLA,EAAEn0B,OAAOk1B,QACXT,IAEAC,OAIL3+B,GAAsBzO,gBAAC8tC,uCAI5B9tC,uBAAKsF,UAAU,mBACbtF,6BACEA,yBACE+F,KAAK,WACLT,UAAW+kC,EAAgB,UAAY,YACvCuD,QAASvD,EACTwD,SAAWhB,IACLA,EAAEn0B,OAAOk1B,QACXN,IAEAC,OAILlD,GAAiBrqC,gBAAC8tC,2BAIvB9tC,uBAAKsF,UAAU,mBACbtF,0BACEwF,QAAS,KACPmoC,4BAMN3tC,gBAAC+tC,SACD/tC,gBAACurC,IAAkBC,qBAAsBA,IACzCxrC,gBAACguC,IACCP,8BAA+BA,EAC/BQ,6BAzE6B,KACnCP,GAAoC,IAyE9BQ,kBAnEkB,KACxBV,IACAP,UAwEEc,GAAkB,WACfI,EAAWnD,GH3JX,CAFWP,KACHM,aG8JVoD,EAKHnuC,0BACEwF,QAAS,KACPwlC,+BANG,MAcL8C,GAAY,IAChB9tC,uBAAKsF,UAAU,aAAaoc,MAAM,KAAKxF,OAAO,KAAKoF,QAAQ,eACzDthB,wBACEuhB,KAAK,eACLC,EAAE,8RAKFwsB,GAA0B,EAC9BP,8BAAAA,EACAQ,6BAAAA,EACAC,kBAAAA,KAGEluC,gBAAC8gB,IACCxb,UAAU,yHACVgY,OAAQmwB,EACR3vB,eAAgBmwB,EAChBzwB,4BAA4B,GAE5Bxd,uBAAKsF,UAAU,2BACbtF,uBAAKsF,UAAU,eAAeE,QAASyoC,GACrCjuC,gBAACyhB,UAEHzhB,uBAAKsF,UAAU,mBACbtF,gBAACoC,IACCkD,UAAU,eACV5F,IAAK0uC,GACL1sB,MAAM,KACNxF,OAAO,OAETlc,uBAAKsF,UAAU,8DAIjBtF,uBAAKsF,UAAU,wGAIftF,uBAAKsF,UAAU,kBACbtF,0BACEwF,QAAS,KACP0oC,IACAD,sBCrNRI,GAAY,uDAYZC,aAVctrC,GAEhBhD,uBAAKoI,GAAG,OAAOjG,IAAKosC,MAClBvuC,gBAACoU,IAAWC,KAAMg6B,KAClBruC,gBAAC+sC,SACD/sC,gBAACsuC,GAAYtrC,MAKFA,GACKwrC,KAGXxuC,gBAACopC,GAASpmC,GAGZhD,gBAACkF,GAASlC"
}