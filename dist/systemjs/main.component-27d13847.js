System.register(["./index-357d04e6.js"],(function(e){"use strict";var t,n,r,o,a,c,l,i,u,s,d,m,f,v,p,g,E,h,b,y,N,k,x,w,C,S,O,D,A,M,I,R,P,j,q,F,L,T,_,B,z,G,H,U,X,J,V,Y,K,W,Q,Z,$,ee,te,ne,re,oe,ae,ce;return{setters:[function(e){t=e.r,n=e._,r=e.a,o=e.b,a=e.c,c=e.d,l=e.e,i=e.i,u=e.T,s=e.f,d=e.g,m=e.h,f=e.F,v=e.j,p=e.S,g=e.k,E=e.l,h=e.m,b=e.n,y=e.o,N=e.p,k=e.q,x=e.u,w=e.s,C=e.t,S=e.v,O=e.w,D=e.x,A=e.y,M=e.z,I=e.A,R=e.B,P=e.C,j=e.D,q=e.E,F=e.G,L=e.H,T=e.I,_=e.J,B=e.K,z=e.L,G=e.M,H=e.N,U=e.O,X=e.P,J=e.Q,V=e.R,Y=e.U,K=e.V,W=e.W,Q=e.X,Z=e.Y,$=e.Z,ee=e.$,te=e.a0,ne=e.a1,re=e.a2,oe=e.a3,ae=e.a4,ce=e.a5}],execute:function(){var le=function(e,t,n,r){return e.addEventListener(t,n,r),function(){e.removeEventListener(t,n,r)}},ie=function(e){return e.window===e},ue=function(e){return 9===e.nodeType},se=function(e){if(1!==e.nodeType)return!1;var t=e.nodeName.toLowerCase();return"input"===t?"hidden"!==e.type&&de(e):["button","select","datalist","iframe","textarea"].indexOf(t)>-1||e.hasAttribute("tabindex")||e.hasAttribute("tabIndex")||e.hasAttribute("draggable")?de(e):["a","area"].indexOf(t)>-1?!1!==e.hasAttribute("href")&&de(e):["audio","video"].indexOf(t)>-1&&(!1!==e.hasAttribute("controls")&&de(e))},de=function(e){if(me(e))return!0;if("hidden"===fe(e,"visibility"))return!1;for(var t=e;t&&!me(t);){if("none"===fe(t,"display"))return!1;t=t.parentNode}return!0},me=function(e){return e===e.ownerDocument.documentElement},fe=function(e,t){return function(e){return ve(e).getComputedStyle(e)}(e).getPropertyValue(t)},ve=function(e){return ie(e)?e:ue(e)?e.defaultView:pe(e).defaultView},pe=function(e){return ie(e)?e.document:ue(e)?e:e.ownerDocument},ge=t.createContext,Ee=t.useContext,he=t.useReducer,be=t.useState,ye=ge(),Ne=function(e,t){return t(e)},ke={},xe=function(e){var n=e.children;return t.createElement(ye.Provider,{value:he(Ne,ke)},n)},we=function(){return Ee(ye)[0]},Ce=function(e){return Ee(ye)[0][e]},Se=function(e){var n=Ee(ye)[1];return t.useEffect((function(){n((function(t){return e in t?t:r(r({},t),{},o({},e,{status:"loading"}))}))}),[]),function(){n((function(t){return e in t&&"loaded"===t[e].status?t:r(r({},t),{},o({},e,{status:"loaded"}))}))}},Oe=function(e,t){var n=le(e,"load",(function(){r(),t()})),r=le(e,"error",(function(){n(),t()}));return function(){n(),r()}},De=function(e){var n=e.href,r=Se(n);return a.createPortal(t.createElement("link",{href:n,ref:function(e){return e?Oe(e,r):function(){}},rel:"stylesheet",type:"text/css"}),document.head)},Ae=function(){return t.createElement("div",null,t.createElement(Me,null))},Me=function(){var e=Ie();return t.createElement("button",{onClick:e},"Nouvelle partie")},Ie=c((function(e){return r(r({},e),{},{gameCreated:!0})})),Re=function(e,t){var n=Pe(e,t);return Boolean(n)},Pe=function(e,n){var r=t.useRef(!1);t.useEffect((function(){!1===r.current&&(r.current=!0)}));var o=t.useRef(n);return t.useEffect((function(){o.current=n}),n),r.current&&e.apply(void 0,l(o.current))?{from:o.current,to:n}:null},je=function(e){var t=e.card,n=e.symbolsInChest,r=e.scoreMarked,o=e.markScoreAllowed;return i(t)?r||o?qe(n,{goal:u.numberOfSwords,gamble:u.gambleAmount}):-u.gambleAmount:s(t)?r||o?qe(n,{goal:d.numberOfSwords,gamble:d.gambleAmount}):-d.gambleAmount:m(t)?r||o?qe(n,{goal:f.numberOfSwords,gamble:f.gambleAmount}):-f.gambleAmount:v(t)?Le(n.map((function(e){return e===p?g:e}))):E(t)?2*Le(n):h(t)||b(t)?Le(n,9):Le(n)},qe=function(e,t){var n=t.goal,r=t.gamble;return Fe(e,k)>=n?Le(e)+r:-r},Fe=function(e,t){return e.filter((function(e){return e===t})).length},Le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=0,r=0,o=Te(e);return Object.values(o).forEach((function(e){3===e&&(n+=100),4===e&&(n+=200),5===e&&(n+=500),6===e&&(n+=1e3),7===e&&(n+=2e3),8===e&&(n+=4e3),e>2&&(r+=e)})),e.forEach((function(e){e===y&&(n+=100,o[y]<3&&(r+=1)),e===N&&(n+=100,o[N]<3&&(r+=1))})),r===t&&(n+=500),n},Te=function(e){var t={};return e.forEach((function(e){t.hasOwnProperty(e)?t[e]++:t[e]=1})),t},_e=t.useMemo,Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentPlayerId,n=void 0===t?x():t,r=e.players,o=void 0===r?w():r;return o.find((function(e){return e.id===n}))},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rollCount,n=void 0===t?O():t;return 0===n},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rollCount,n=void 0===t?O():t;return n>0},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rollCount,n=void 0===t?O():t;return n>1},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentCard,n=void 0===t?I():t;return h(n)?[N]:b(n)?[y]:F(n)?[L]:T(n)?[L,L]:[]},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.chestSlots,n=void 0===t?_():t;return Object.keys(n).filter((function(e){return n[e]})).map((function(e){var t=n[e];return"symbol"===t.type?t.value:q(t.value)}))},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.skullCountInCursedArea,n=void 0===t?Qe():t;return 3-n},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dicesToCurse,n=void 0===t?Ye():t;return n.length>0},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dicesRolled,n=void 0===t?D():t,r=e.witchUncursedDiceId,o=void 0===r?A():r,a=e.remainingSpotInCursedArea,c=void 0===a?Je():a;return n.filter((function(e){return C(e)&&e.id!==o})).slice(0,c)},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentCard,n=void 0===t?I():t,r=e.hasNeverRolled,o=void 0===r?ze():r,a=e.dicesRolled,c=void 0===a?D():a,l=e.scoreMarked,i=void 0===l?P():l,u=e.threeSkullsOrMoreInCursedArea,s=void 0===u?We():u,d=e.hasDicesToCurse,m=void 0===d?Ve():d;return!!n&&(!i&&(!!o||!s&&(!m&&!(c.length<2))))},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.skullCountInCursedArea,n=void 0===t?Qe():t;return n>2},Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dicesCursed,n=void 0===t?M():t,r=e.symbolsFromCard,o=void 0===r?Ue():r;return n.length+o.filter((function(e){return S(e)})).length},Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hasRolledMoreThanOnce,n=void 0===t?He():t,r=e.scoreMarked,o=void 0===r?P():r,a=e.currentCard,c=void 0===a?I():a,l=e.threeSkullsOrMoreInCursedArea,i=void 0===l?We():l,u=e.hasDicesToCurse,s=void 0===u?Ve():u;return!o&&(i?!(!j(c)||!n):!s&&!!c)},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentCard,n=void 0===t?I():t,r=e.symbolsInChest,o=void 0===r?Xe():r,a=e.scoreMarked,c=void 0===a?P():a,l=e.markScoreAllowed,i=void 0===l?Ze():l;return _e((function(){return je({card:n,symbolsInChest:o,scoreMarked:c,markScoreAllowed:i})}),[n,o,c,i])},et=c((function(e,t){var n=e.players,o=e.currentPlayerId,a=n.find((function(e){return e.id===o})),c=a.score+t;return a.score=c<0?0:c,r(r({},e),{},{players:l(n),scoreMarked:!0})})),tt=c((function(e){return r(r({},e),{},{isOnSkullIsland:!0})})),nt=c((function(e){return r(r({},e),{},{witchUncursedDiceId:null,rollCount:0,dicesRolled:[],dicesCursed:[],chestSlots:{1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null,9:null},scoreMarked:!1,isOnSkullIsland:!1,roundStarted:!0,currentPlayerGettingReady:!1})})),rt=c((function(e,t){var n=e.dicesRolled,o=e.dicesCursed;return r(r({},e),{},{dicesRolled:n.filter((function(e){return e.id!==t.id})),dicesCursed:[].concat(l(o),[t])})})),ot=c((function(e,t){var n=e.dicesRolled,o=e.dicesCursed;return r(r({},e),{},{witchUncursedDiceId:t.id,dicesRolled:[].concat(l(n),[t]),dicesCursed:o.filter((function(e){return e.id!==t.id}))})})),at=c((function(e,t,n){var a=e.dicesRolled,c=e.chestSlots;return t.rolledAreaPosition=n,r(r({},e),{},{dicesRolled:[].concat(l(a),[t]),chestSlots:r(r({},c),{},o({},t.chestSlot,null))})})),ct=c((function(e,t,n){var a=e.dicesRolled,c=e.chestSlots;return t.chestSlot=n,r(r({},e),{},{dicesRolled:a.filter((function(e){return e.id!==t.id})),chestSlots:r(r({},c),{},o({},n,{type:"dice",value:t}))})})),lt=c((function(e){var t=e.cardDeck,n=e.cardsUsed,o=t[0];return r(r({},e),{},{cardDeck:t.slice(1),cardsUsed:[].concat(l(n),[o]),currentCard:o})})),it=c((function(e){var t=e.chestSlots;return r(r({},e),{},{chestSlots:r(r({},t),{},{1:{type:"symbol",value:N}})})})),ut=c((function(e){var t=e.chestSlots;return r(r({},e),{},{chestSlots:r(r({},t),{},{1:{type:"symbol",value:y}})})})),st=c((function(e){var t=e.cardsUsed;return r(r({},e),{},{cardsUsed:[],cardDeck:B(t)})})),dt=t.useEffect,mt=function(){return ft(),null},ft=function(){vt(),pt(),gt(),Et(),ht()},vt=function(){var e=Ye(),t=rt();dt((function(){if(0===e.length)return function(){};var n=setTimeout((function(){e.forEach((function(e){t(e)}))}),1e3);return function(){clearTimeout(n)}}),[e])},pt=function(){var e=I(),t=P(),n=et(),r=We(),o=Re((function(e){return!e&&r}),[r]),a=$e(),c=G(e);dt((function(){c&&!t&&o&&n(a)}),[c,t,o,a])},gt=function(){var e=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).rollCount;return 1===(void 0===e?O():e)}(),t=I(),n=z(),r=Qe(),o=tt();dt((function(){e&&(n||G(t)||r<4||o())}),[e,n,t,r])},Et=function(){var e=it(),t=I(),n=Re((function(e){return!h(e)&&h(t)}),[t]);dt((function(){n&&e()}),[n])},ht=function(){var e=ut(),t=I(),n=Re((function(e){return!b(e)&&b(t)}),[t]);dt((function(){n&&e()}),[n])},bt=function(e,t,n){var r=Nt(n),o=Math.cos(r),a=Math.sin(r),c=t.x-e.x,l=t.y-e.y;return{x:Math.round(o*c+a*l+e.x),y:Math.round(o*l-a*c+e.y)}},yt=function(e){var t=n(e,4),r=t[0],o=t[1],a=t[2],c=t[3];return{x:(r.x+o.x+a.x+c.x)/4,y:(r.y+o.y+a.y+c.y)/4}},Nt=function(e){return e*Math.PI/180},kt=function(e,t){return!!xt(t,(function(t){return r=t,o=n(e,2),a=o[0],c=o[1],l=n(r,2),i=l[0],u=l[1],s=(u.x-i.x)*(a.y-i.y)-(u.y-i.y)*(a.x-i.x),d=(c.x-a.x)*(a.y-i.y)-(c.y-a.y)*(a.x-i.x),m=(u.y-i.y)*(c.x-a.x)-(u.x-i.x)*(c.y-a.y),(0!==s||0!==d||0!==m)&&0!==m&&(d/=m,(s/=m)>=0&&s<=1&&d>=0&&d<=1);var r,o,a,c,l,i,u,s,d,m}))},xt=function(e,t){var r=n(e,4),o=r[0],a=r[1],c=r[2],l=r[3];return!!t([o,a])||(!!t([a,c])||(!!t([c,l])||!!t([l,o])))},wt=function(e,t){return!(e.right<=t.left)&&(!(e.left>=t.right)&&(!(e.bottom<=t.top)&&!(e.top>=t.bottom)))},Ct=function(e,t){var n=e.left,r=e.right,o=r-n;n<t.left?r=(n=t.left)+o:r>t.right&&(r=(n=t.right-o)+o);var a=e.top,c=e.bottom,l=c-a;return a<t.top?c=(a=t.top)+l:c>t.bottom&&(c=(a=t.bottom-l)+l),{left:n,right:r,top:a,bottom:c}},St=function(e){var t=e.left,n=e.right,r=e.top;return{x:t+(n-t)/2,y:r+(e.bottom-r)/2}},Ot=function(e,t){var n,r,o,a,c=St(e),l=St(t);return r=l,o=(n=c).x-r.x,a=n.y-r.y,Math.sqrt(o*o+a*a)},Dt=function(e){var t,n,r,o=e.getBoundingClientRect(),a=(n=ve(t=e),r=pe(t),{x:n.pageXOffset||r.documentElement.scrollLeft,y:n.pageYOffset||r.documentElement.scrollTop}),c=o.left+a.x,l=o.top+a.y,i=c+o.width,u=l+o.height;return{left:Math.floor(c),top:Math.floor(l),right:Math.floor(i),bottom:Math.floor(u)}},At=50,Mt=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=o.trailing,c=void 0!==a&&a,l=function o(){for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];clearTimeout(t);var u=Date.now();if(n){var s=u-n;if(s<r){if(c){var d=r-s;t=setTimeout((function(){return o.apply(void 0,l)}),d)}}else n=u,e.apply(void 0,l)}else n=u,e.apply(void 0,l)},i=function(){clearTimeout(t)};return l.cancel=i,l},It=function(e,t){var n,o=t.logLevel,a=void 0===o?"warn":o,c=t.onGrip,l=void 0===c?function(){}:c,i=t.onLongGrip,u=void 0===i?function(){}:i,s=t.onRelease,d=void 0===s?function(){}:s,m=t.onDrag,f=void 0===m?function(){}:m,v=t.onCancel,p=void 0===v?function(){}:v,g=H({logLevel:a}),E=function(){},h=function(){};g.debug("enable drag on",e);var b,y,N,k,x=le(e,"mousedown",(function(e){3===e.which?g.debug("ignore right click"):(C(Pt(e),e),E=le(document,"mousemove",Mt((function(e){O(Pt(e),e)}))),h=le(document,"mouseup",(function(e){h(),E(),D(Pt(e),e)})))}),{passive:!0}),w=le(e,"touchstart",(function(e){C(jt(e),e),E=le(document,"touchmove",Mt((function(e){O(jt(e),e)}))),h=le(document,"touchend",(function(e){h(),E(),D(jt(e),e)}))}),{passive:!0}),C=function(t,r){g.debug("gripping node at",t),n=!0,N=t,b=t,y=Rt(e),l({x:y.x,y:y.y,event:r}),k=setTimeout(S,300)},S=function(){u()},O=function(e,t){if(b.x!==e.x||b.y!==e.y){b=e;var n=N.x-y.x,o=N.y-y.y,a={x:e.x-n,y:e.y-o};g.debug("move node at",a),f(r(r({event:t},a),{},{relativeX:e.x-N.x,relativeY:e.y-N.y}))}else g.debug("no real move")},D=function(e,t){g.debug("releasing node"),n=!1;var r=N.x-y.x,o=N.y-y.y;clearTimeout(k),d({event:t,x:b.x-r,y:b.y-o})};return function(e){x(),w(),E(),h(),clearTimeout(k),function(e){n&&(g.debug("cancelling drag",e),n=!1,p({event:e}))}(e)}},Rt=function(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top}},Pt=function(e){return{x:e.pageX,y:e.pageY}},jt=function(e){var t=e.changedTouches[0];return{x:t.pageX,y:t.pageY}},qt=t.useEffect,Ft=t.useState,Lt=function(e){var o=e.dice,a=e.clickAllowed,c=e.disabled,l=e.draggable,i=e.onClickAction,u=e.specificStyle,s=e.diceOnGoing,d=C(o),m=U(),f=X(o.id),v=J(o.id),p=A(),g=Ft(!1),E=n(g,2),h=E[0],b=E[1],y=Ft(null),N=n(y,2),k=N[0],x=N[1],w=V();return qt((function(){if(!l||!f||!m)return function(){};var e,t=new Map,n=It(f,{onGrip:function(){},onLongGrip:function(){b(!0)},onDrag:function(e){var n=e.x,r=e.y,a=e.relativeX,c=e.relativeY;(Math.abs(a)>5||Math.abs(c)>5)&&b(!0);var l={left:n,right:n+At,top:r,bottom:r+At},i=Dt(m),u=Ct(l,i);x({x:u.left,y:u.top}),w({dice:o,diceRectangle:u,setDropHandler:function(e,n){t.set(e,n)}})},onRelease:function(n){var r=n.x,o=n.y;e=setTimeout((function(){return b(!1)})),x(null),w(null);var a={left:r,right:r+At,top:o,bottom:o+At};t.forEach((function(e){return e({diceRectangle:a})}))},onCancel:function(){b(!1),x(null),w(null)}});return function(){n(),clearTimeout(e)}}),[l,f,m]),t.createElement("button",{disabled:c,"data-dice-id":o.id,ref:v,onClick:i&&a&&!h?function(){return i(o)}:void 0,className:d?function(e){return e.id===p?"dice":s?"dice dice-cursed-disapear":"dice dice-cursed-appear"}(o):"dice",style:r(r({width:At,height:At,background:d?"black":"#fcfcfc",color:d?"black":"#fcfcfc",borderColor:d?"black":"#b9b9b9"},u),k?{position:"fixed",zIndex:1e3,transform:"none",left:k.x,top:k.y}:{})},t.createElement("img",{src:"/src/dices/dice_".concat(q(o),".png"),draggable:"false",style:{width:"100%",height:"100%"}}))},Tt=t.useState,_t=t.useEffect,Bt=function(){var e=D(),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scoreMarked,n=void 0===t?P():t,r=e.threeSkullsOrMoreInCursedArea,o=void 0===r?We():r;return!n&&!o}(),a=ct(),c=Y(),l=K(),i=Tt(!1),u=n(i,2),s=u[0],d=u[1];_t((function(){d(zt({dragDiceGesture:l,rolledAreaDomNode:c}))}),[l,c]);var m=_(),f=s&&Object.keys(m).some((function(e){return m[e]&&m[e].value===s})),v=s&&e.includes(s),p=at(),g=Gt();return _t((function(){l&&l.setDropHandler(c,(function(e){var t=e.diceRectangle;if(f||v){var n,r,o,a,l,i=Dt(c),u=(n=Ct(t,i),r=i,o=n.left-r.left,a=o+(n.right-n.left),l=n.top-r.top,{left:o,right:a,top:l,bottom:l+(n.bottom-n.top)});f?p(s,{x:u.left,y:u.top}):g(s,{x:u.left,y:u.top})}}))}),[l,c]),t.createElement("div",{className:"dice-ongoing"},t.createElement("div",{className:"map"}),t.createElement("div",{className:"area",ref:W(),style:r({},f?{outline:"2px dotted"}:{})},e.map((function(e){return t.createElement(Lt,{key:e.id,dice:e,clickAllowed:!C(e)&&o,onClickAction:function(e){var t=Object.keys(m).find((function(e){return!m[e]}));a(e,t)},draggable:!0,diceOnGoing:!0,specificStyle:{left:"".concat(e.rolledAreaPosition.x,"px"),top:"".concat(e.rolledAreaPosition.y,"px"),transform:"rotate(".concat(e.rotation,"deg)"),position:"absolute"}})}))))},zt=function(e){var t=e.dragDiceGesture,n=e.rolledAreaDomNode;if(!t)return null;var r=Dt(n);return wt(t.diceRectangle,r)?t.dice:null},Gt=c((function(e,t,n){var o=e.dicesRolled;return t.rotation=0,t.rolledAreaPosition=n,r(r({},e),{},{dicesRolled:l(o)})}));var Ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ut=function(e,t){if(null===e)return{};var n,r,o=function(e,t){if(null===e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o},Xt=function(e,t){for(var n=Vt(e,e),r=n.next(),o=r.done,a=r.value;!1===o;){if(t(a))return a;var c=n.next();o=c.done,a=c.value}return null},Jt=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!r){var o=t.firstChild;if(o)return o}var a=t.nextSibling;if(a)return a;var c=t.parentNode;return c&&c!==n?e(c,n,!0):null},Vt=function(e,t){var n=e;return{next:function(){var e=Jt(n,t);return n=e,{done:!1===Boolean(e),value:e}}}},Yt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e,o=!1,a=function(){var e=Jt(r,t,n&&!1===o);return o=!0,r=e,{done:!1===Boolean(e),value:e}};return{next:a}},Kt=function(e){for(var t=e.lastChild;t;){var n=t.lastChild;if(!n)break;t=n}return t},Wt=function(e,t){var n=e;return{next:function(){var e=function(e,t){var n=e.previousSibling;if(n){return Kt(n)||n}if(e!==t){var r=e.parentNode;if(r&&r!==t)return r}return null}(n,t);return n=e,{done:!1===Boolean(e),value:e}}}},Qt=function(e){var t=Xt(e,se);return t||(se(e)?e:null)},Zt=function(e){if(3===e.nodeType)return console.warn("cannot trap focus inside a text node"),function(){};if(tn.find((function(t){return t.element===e})))return console.warn("focus already trapped inside this element"),function(){};var t=function(){return Xt(e,$t)},n=function(){return function(e,t){var n=Kt(e);if(n)for(var r=Wt(n,e),o=r.next(),a=o.done,c=o.value;!1===a;){if(t(c))return c;var l=r.next();a=l.done,c=l.value}return null}(e,$t)},r=function(){return function(e){for(var t=e.from,n=e.root,r=void 0===n?null:n,o=e.predicate,a=Wt(t,r),c=a.next(),l=c.done,i=c.value;!1===l;){if(o(i))return i;var u=a.next();l=u.done,i=u.value}return null}({from:document.activeElement,root:e,predicate:$t})||n()},o=function(){return function(e){for(var t=e.from,n=e.root,r=void 0===n?null:n,o=e.predicate,a=e.skipChildren,c=Yt(t,r,void 0!==a&&a),l=c.next(),i=l.done,u=l.value;!1===i;){if(o(u))return u;var s=c.next();i=s.done,u=s.value}return null}({from:document.activeElement,root:e,predicate:$t})||t()},a=nn({element:e,lock:function(){var a=function(t){(function(t){return t.target!==e&&!e.contains(t.target)})(t)&&(t.preventDefault(),t.stopImmediatePropagation())},c=function(e){en(e)&&(e.preventDefault(),function(e){var a=document.activeElement===document.body;if(e.shiftKey){var c=a?n():r();c&&c.focus()}else{var l=a?t():o();l&&l.focus()}}(e))};return document.addEventListener("mousedown",a,{capture:!0,passive:!1}),document.addEventListener("keydown",c,{capture:!0,passive:!1}),function(){document.removeEventListener("mousedown",a,{capture:!0,passive:!1}),document.removeEventListener("keydown",c,{capture:!0,passive:!1})}}});return function(){a()}},$t=function(e){return!function(e){return e.hasAttribute&&e.hasAttribute("tabIndex")&&Number(e.getAttribute("tabindex"))<0}(e)&&se(e)},en=function(e){return"Tab"===e.key||9===e.keyCode},tn=[],nn=function(e){var t,n=e.lock;tn.length>0&&(t=tn[tn.length-1]).unlock();var r={lock:n,unlock:n()};return tn.push(r),function(){if(0!==tn.length){var e=tn[tn.length-1];r===e?(tn.pop(),r.unlock(),t&&(t.unlock=t.lock())):console.warn("you must deactivate trap in the same order they were activated")}else console.warn("cannot deactivate an already deactivated trap")}},rn=function(e){if("object"!==Q(e)||1!==e.nodeType)throw new TypeError("getScrollableParent first argument must be DOM node");var t=e;return"fixed"===fe(t,"position")?on(t.ownerDocument):pn(t)||on(t.ownerDocument)},on=function(e){if("scrollingElement"in e)return e.scrollingElement;if(sn(e))return e.documentElement;var t=e.body,n=t&&!/body/i.test(t.tagName)?an(t):t;return n&&ln(n)?null:n},an=function(e){for(var t=e;t=t.nextSibling;)if(1===t.nodeType&&cn(t))return t;return null},cn=function(e){return e.ownerDocument.body===e},ln=function(e){if(!mn(e))return!1;if(un(e))return!1;var t=e.ownerDocument.documentElement;return!!mn(t)&&!un(t)},un=function(e){var t=fe(e,"display");return"none"!==t&&("table-row"!==t&&"table-group"!==t&&"table-column"!==t||"collapsed"!==fe(e,"visibility"))},sn=function(e){return!!/^CSS1/.test(e.compatMode)&&dn(e)},dn=function(e){var t=e.createElement("iframe");t.style.height="1px",(e.body||e.documentElement||e).appendChild(t);var n=t.contentWindow.document;n.write('<!DOCTYPE html><div style="height:9999em">x</div>'),n.close();var r=n.documentElement.scrollHeight>n.body.scrollHeight;return t.parentNode.removeChild(t),r},mn=function(e){return!fn(e)||!vn(e)},fn=function(e){return"visible"===fe(e,"overflow-x")||"visible"===fe(e,"overflow")},vn=function(e){return"visible"===fe(e,"overflow-y")||"visible"===fe(e,"overflow")},pn=function(e){for(var t=fe(e,"position"),n=e.parentNode;n;){if(me(n))return null;if("absolute"!==t||"static"!==fe(n,"position")){if(mn(n))return n;n=n.parentNode}else n=n.parentNode}return null},gn=t.useEffect,En={position:"absolute",top:"5%",left:"0",right:"0",width:"fit-content",height:"fit-content",margin:"auto",padding:"1em",overscrollBehavior:"contain",outline:"none",background:"white",color:"black",border:"solid"},hn={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.46)"},bn=function(e){var o=e.container,c=void 0===o?document.body:o,l=e.children,i=e.isOpen,u=e.closeMethod,s=void 0===u?"display-none":u,d=e.stealFocus,m=void 0===d||d,f=e.restoreStolenFocus,v=void 0===f||f,p=e.trapFocus,g=void 0===p||p,E=e.requestCloseOnEscape,h=void 0===E||E,b=e.requestCloseOnClickOutside,y=void 0!==b&&b,N=e.onAfterOpen,k=void 0===N?function(){}:N,x=e.onRequestClose,w=void 0===x?function(){}:x,C=e.onFocusIn,S=void 0===C?function(){}:C,O=e.onFocusOut,D=void 0===O?function(){}:O,A=e.backdropProps,M=void 0===A?{}:A,I=Ut(e,["container","children","isOpen","closeMethod","stealFocus","restoreStolenFocus","trapFocus","requestCloseOnEscape","requestCloseOnClickOutside","onAfterOpen","onRequestClose","onFocusIn","onFocusOut","backdropProps"]);if(!c)return null;var R=t.useState(null),P=n(R,2),j=P[0],q=P[1],F=Boolean(j);return Re((function(e){return!e&&i}),[i])&&k(),gn((function(){if(!i||!F)return function(){};var e=kn(j),t=function(t){t.relatedTarget||e&&(e=!1,D(t))},n=function(t){S(t),e=!0},r=function(t){kn(j)?e=!0:(e=!1,D(t))};return j.addEventListener("focus",n,!0),document.addEventListener("focus",r,!0),document.addEventListener("blur",t,!0),function(){j.removeEventListener("focus",n,!0),document.removeEventListener("focus",r,!0),document.removeEventListener("blur",t,!0)}}),[i,F,S,D]),gn((function(){return i&&F?function(e){for(var t=[],n=e.previousSibling;n;)1===n.nodeType&&mn(n)&&t.push(n),n=n.previousSibling;var r=rn(e);t.push(r);var o=t.map((function(e){var t=e.style.overflow;return e.style.overflow="hidden",function(){t?e.style.overflow=t:delete e.style.overflow}}));return function(){o.forEach((function(e){e()}))}}(j):function(){}}),[i,F]),gn((function(){return i&&F&&g?Zt(j):function(){}}),[i,F,g]),gn((function(){if(!i||!F||!m)return function(){};var e=document.activeElement,t=Qt(j);return t&&t.focus(),function(){t&&("function"==typeof v?v(e):!0===v&&e.focus())}}),[i,F,m]),gn((function(){if(!i||!j||!j.parentNode)return function(){};var e=[];return Array.from(j.parentNode.children).forEach((function(t){t!==j&&e.push(t)})),e.forEach((function(e){e.setAttribute("aria-hidden","true")})),function(){e.forEach((function(e){e.removeAttribute("aria-hidden","true")}))}}),[i,j]),"dom-remove"!==s||i?a.createPortal(t.createElement(t.Fragment,null,i?t.createElement(yn,Ht({},M,{style:r(r({},hn),M.style),onMouseDownPassive:function(e){if(e.preventDefault(),!kn(j)){var t=Qt(j);t&&t.focus()}},onClick:function(e){if(y){var t=e.target;t===j||j.contains(t)||w(e)}M.onClick&&M.onClick(e)}})):null,t.createElement("div",Ht({},I,{style:r(r(r({},En),I.style),i?{}:Nn(s)),ref:function(e){q(e),I.ref&&I.ref(e)},onKeyDown:function(e){h&&e.keyCode===xn&&w(e),I.onKeyDown&&I.onKeyDown(e)},hidden:"hidden-attribute"===s?i:void 0,tabIndex:"-1"}),l)),c):null},yn=function(e){var r=e.onMouseDownPassive,o=Ut(e,["onMouseDownPassive"]),a=t.useState(null),c=n(a,2),l=c[0],i=c[1];return gn((function(){return l?(l.addEventListener("mousedown",r,{passive:!1}),function(){l.removeEventListener("mousedown",r,{passive:!1})}):function(){}}),[l]),t.createElement("div",Ht({ref:function(e){i(e),o.ref&&o.ref(e)}},o))},Nn=function(e){return"display-none"===e?{display:"none"}:"visibility-hidden"===e?{visibility:"hidden"}:{}},kn=function(e){var t=document.activeElement;return e===t||e.contains(t)},xn=27,wn=function(e){return t.createElement(t.Fragment,null,t.createElement(De,{href:"/src/dialog/dialog.css"}),t.createElement(bn,Ht({container:U(),backdropProps:{className:"dialog--backdrop"},style:{top:"10%",left:"6%",right:"6%",bottom:"8%",height:"auto",width:"auto",padding:"0",border:"none",background:"none",maxWidth:"620px",margin:"0 auto"},className:"dialog"},e)))},Cn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentCard,n=void 0===t?I():t;return i(n)?u.numberOfSwords:s(n)?d.numberOfSwords:m(n)?f.numberOfSwords:null},Sn=function(){var e=I(),n=Xe(),r=Cn();if(!e||!G(e))return null;var o=Fe(n,k),a=new Array(r).fill("");return t.createElement("div",{className:"sword-challenge-indicators"},a.map((function(e,n){return o>=n+1?t.createElement(On,{key:n}):t.createElement(Dn,{key:n})})))},On=function(){return t.createElement("div",{className:"sword-icon"},t.createElement("img",{src:"/src/dices/dice_sword.png"}))},Dn=function(){return t.createElement("div",{className:"sword-icon disabled"},t.createElement("img",{src:"/src/header/swords-disabled.png"}))},An=function(){return t.createElement("div",{className:"star-rain-container"},t.createElement("div",{className:"star",id:"star-01"},t.createElement(Mn,null)),t.createElement("div",{className:"star",id:"star-02"},t.createElement(Mn,null)),t.createElement("div",{className:"star",id:"star-03"},t.createElement(Mn,null)),t.createElement("div",{className:"star",id:"star-04"},t.createElement(Mn,null)),t.createElement("div",{className:"star",id:"star-05"},t.createElement(Mn,null)),t.createElement("div",{className:"star",id:"star-06"},t.createElement(Mn,null)))},Mn=function(){return t.createElement("svg",{viewBox:"0 0 217.791 210.633"},t.createElement("path",{fill:"#FFFFE6",d:"M94.15,77.97c0,0-2-54,10-73.5s23,28.5,25.5,72.5c0,0,69.197,4.589,86.5,21c13.637,12.934-61.5,31-87,33.5 c-2,14.5-1.831,60.464-16.5,75.5c-20,20.5-25.5-50.5-23-78c-19-1.5-81.5-3.5-89-17.5S52.15,85.97,94.15,77.97z"}))},In=t.useState,Rn=t.useEffect,Pn=function(){var e=I(),t=Xe(),n=Fe(t,k),r=Cn();return!!G(e)&&!(n>=r)},jn=function(){var e=I();return t.createElement("div",{className:"score-area ".concat(Pn()?"animated":"")},e?t.createElement(qn,null):null)},qn=function(){var e=$e(),r=I(),o=P(),a=In(!1),c=n(a,2),l=c[0],i=c[1];return t.createElement(t.Fragment,null,E(r)?t.createElement(Fn,null):null,o&&t.createElement(An,null),t.createElement("div",{className:"round-score ".concat(Pn()?"hidden":""),onClick:function(){i(!0)}},e),G(r)?t.createElement(Ln,null):null,t.createElement(Tn,{dialogIsOpen:l,closeDialog:function(){i(!1)}}))},Fn=function(){return Z()?t.createElement("div",{className:"pirate-hook"}):t.createElement("div",{style:{display:"none"},className:"pirate-hook"})},Ln=function(){var e=$e(),r=Xe(),o=Fe(r,k),a=Cn(),c=new Array(a).fill(""),l=o>=a,i=Re((function(e){return e<o}),[o]),u=In(!1),s=n(u,2),d=s[0],m=s[1];return Rn((function(){i&&m(!0)}),[i]),Rn((function(){if(d){var e=setTimeout((function(){m(!1)}),300);return function(){clearTimeout(e)}}return function(){}}),[d]),t.createElement(t.Fragment,null,t.createElement("div",{className:"ropes ".concat(l?"challenge-won":"")},c.map((function(e,n){return o>=n+1?t.createElement("div",{key:n,className:"rope rope-".concat(n+1," cut-rope")}):t.createElement("div",{key:n,className:"rope rope-".concat(n+1)})}))),d&&o<=a?t.createElement("div",{className:"sword-slice"},t.createElement("div",{className:"triangle-left"}),t.createElement("div",{className:"triangle-right"})):null,t.createElement("div",{className:"negative-round-score rotate-".concat(o," ").concat(l?"removed":"")},e))},Tn=function(e){var n=e.dialogIsOpen,r=e.closeDialog;return t.createElement(wn,{isOpen:n,onRequestClose:r,requestCloseOnClickOutside:!0},t.createElement("div",{className:"border border-right"}),t.createElement("div",{className:"border border-left"}),t.createElement("div",{className:"border border-top"}),t.createElement("div",{className:"border border-bottom"}),t.createElement("div",{className:"dialog-title"},"Score"),t.createElement("div",{className:"dialog-content score-rules-dialog"},t.createElement("div",{className:"dialog-body"},t.createElement("div",{className:"dialog-box"},t.createElement("div",{className:"dialog-label"},"Combinaisons de dés"),t.createElement("div",{className:"columns"},t.createElement("div",{className:"column"},t.createElement("div",{className:"column-title"},"Symbols identiques"),t.createElement("span",{className:"symbol-number"},"3"),t.createElement("span",{className:"symbol-number"},"4"),t.createElement("span",{className:"symbol-number"},"5"),t.createElement("span",{className:"symbol-number"},"6"),t.createElement("span",{className:"symbol-number"},"7"),t.createElement("span",{className:"symbol-number"},"8")),t.createElement("div",{className:"column"},t.createElement("div",{className:"column-title"},"Points"),t.createElement("span",{className:"points"},"+100"),t.createElement("span",{className:"points"},"+200"),t.createElement("span",{className:"points"},"+500"),t.createElement("span",{className:"points"},"+1000"),t.createElement("span",{className:"points"},"+2000"),t.createElement("span",{className:"points"},"+4000")))),t.createElement("div",{className:"dialog-box"},t.createElement("div",{className:"dialog-label"},"Dés spéciaux"),t.createElement("div",{className:"columns"},t.createElement("div",{className:"column"},t.createElement("div",{className:"column-title"},"Symbol"),t.createElement("img",{src:"/src/dices/dice_coin.png"}),t.createElement("img",{src:"/src/dices/dice_diamond.png"})),t.createElement("div",{className:"column"},t.createElement("div",{className:"column-title"},"Points"),t.createElement("span",{className:"points"},"+100"),t.createElement("span",{className:"points"},"+100")))),t.createElement("div",{className:"dialog-box last"},t.createElement("div",{className:"dialog-label"},"Bonus coffre plein"),t.createElement("div",{className:"columns"},t.createElement("div",{className:"column"},t.createElement("div",{className:"column-title"},"Dés utilisés"),t.createElement("span",{className:"symbol-number"},"8")),t.createElement("div",{className:"column"},t.createElement("div",{className:"column-title"},"Points"),t.createElement("span",{className:"points"},"+500")))))))},_n=t.useState,Bn=t.useEffect,zn=function(){var e=_(),o=_n(null),a=n(o,2),c=a[0],l=a[1],i=K(),u=_n(!1),s=n(u,2),d=s[0],m=s[1];Bn((function(){m(Hn({dragDiceGesture:i,chestDropAreaDomNode:c}))}),[i,c]);var f=D(),v=d&&f.includes(d),p=d&&Object.keys(e).some((function(t){return e[t]&&e[t].value===d})),g=ct(),E=Xn();Bn((function(){i&&i.setDropHandler(c,(function(t){var n=t.diceRectangle;if(!h&&(v||p)){var r=new Map,o=[];Object.keys(e).forEach((function(t){var n=e[t];if(!n||n.value===d){var a=c.querySelector('[data-chest-slot="'.concat(t,'"]')),l=Dt(a);r.set(l,t),o.push(l)}}));var a=function(e,t){var n=Ot(e,t[0]);return t.reduce((function(t,r){var o=Ot(e,r);return o<n?(n=o,r):t}))}(n,o),l=r.get(a);v?g(d,l):E(d,l)}}))}),[i,c]);var h=We();return t.createElement("div",{className:"chest"},t.createElement("div",{className:"dice-area",ref:l,style:r({},v&&!h?{outline:"2px dotted"}:{})},t.createElement("div",{className:"box"},Object.keys(e).map((function(n){return t.createElement("div",{className:"slot",key:n,"data-chest-slot":n},t.createElement(Gn,{chestSlotContent:e[n]}))}))),t.createElement("div",{className:"top-left-corner"}),t.createElement("div",{className:"top-right-corner"}),t.createElement("div",{className:"bottom-left-corner"}),t.createElement("div",{className:"bottom-right-corner"}),h?t.createElement(Un,null):null),t.createElement(jn,null))},Gn=function(e){var n=e.chestSlotContent,r=I(),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scoreMarked,n=void 0===t?P():t,r=e.threeSkullsOrMoreInCursedArea,o=void 0===r?We():r;return!n&&!o}(),a=at();if(!n)return null;if("symbol"===n.type){var c=n.value;return t.createElement("button",{className:"dice",style:{width:At,height:At,color:"#fcfcfc",margin:"5px",backgroundColor:$[r].color1,borderColor:$[r].color2,borderWidth:"2px",borderStyle:"solid"}},t.createElement("img",{src:"/src/dices/dice_".concat(c,".png"),draggable:"false",style:{width:"100%",height:"100%"}}))}var l=n.value;return t.createElement(Lt,{dice:l,draggable:!0,clickAllowed:o,onClickAction:function(e){a(e,e.rolledAreaPosition)}})},Hn=function(e){var t=e.dragDiceGesture,n=e.chestDropAreaDomNode;if(!t)return null;var r=Dt(n);return wt(t.diceRectangle,r)?t.dice:null},Un=function(){return t.createElement("div",{className:"cursed-cover"},t.createElement("img",{src:"/src/chest/cursed-grid.png",alt:"cursed-cover"}))},Xn=c((function(e,t,n){var a,c=e.chestSlots,l=t.chestSlot;return t.chestSlot=n,r(r({},e),{},{chestSlots:r(r({},c),{},(a={},o(a,l,null),o(a,n,{type:"dice",value:t}),a))})})),Jn={animals:{name:"Animaux",rule:"Les singes et les perroquest obtenus sur les dés comptent comme un même symbol dans une combinaison.",more:"Par exemple 2 perroquets et 3 singes forment une conbinaison de 5 dés identiques, soit 500 points."},chest:{name:"Coffre au trésor",rule:'Lorsque le joueur sauvegarde ses dés, grâce à la carte "Coffre au trésor" les dés sont protégés du mauvais sort.',more:"Ainsi même lorsque le joueur obtient 3 têtes de morts, son tour prends fin, mais il peut marquer les points totalisés grâce aux dés sauvegardés!"},coin:{name:"Pièce d'or",rule:"Le joueur commence son tour avec un symbol pièce d'or. Il rapporte des points aussi bien dans une combinaison de dés que comme simple pièce (+100)."},diamond:{name:"Diamant",rule:"Le joueur commence son tour avec un symbol diamant. Il rapporte des points aussi bien dans une combinaison de dés que comme simple diamant (+100)."},pirate:{name:"Capitaine des pirates",rule:"Grâce à l'aide du capitaine, tous les points comptabilisés pendant ce tour sont doublés !"},witch:{name:"Sorcière",rule:"Avec ses potions magiques, la sorcière permet exceptionnellement au joueur de relancer, une fois, un dé avec une tête de mort."},"1skull":{name:"Tête de mort",rule:"Le tour du joueur débute avec un symbole tête de mort."},"2skulls":{name:"2 têtes de mort",rule:"Le tour du joueur débute avec 2 symboles tête de mort."},"2sword-challenge":{name:"Bateau pirate",rule:"Le joueur doit obtenir au minimum 2 symbols sabres. Si il y parvient, il gagne +300 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -300 points pour ce tour, quelque soit son résultat aux dés.",more:"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points."},"3sword-challenge":{name:"Bateau pirate",rule:"Le joueur doit obtenir au minimum 3 symbols sabres. Si il y parvient, il gagne +500 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -500 points pour ce tour, quelque soit son résultat aux dés.",more:"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points."},"4sword-challenge":{name:"Bateau pirate",rule:"Le joueur doit obtenir au minimum 4 symbols sabres. Si il y parvient, il gagne +1000 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -1000 points pour ce tour, quelque soit son résultat aux dés.",more:"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points."}},Vn=function(e){var n=e.dialogIsOpen,r=e.closeDialog,o=I();return t.createElement(wn,{isOpen:n,onRequestClose:r,requestCloseOnClickOutside:!0},t.createElement("div",{className:"border border-right"}),t.createElement("div",{className:"border border-left"}),t.createElement("div",{className:"border border-top"}),t.createElement("div",{className:"border border-bottom"}),t.createElement("div",{className:"dialog-title"},"Carte"),t.createElement("div",{className:"dialog-content card-rules-dialog"},t.createElement("div",{className:"dialog-body"},Jn[o]&&t.createElement(t.Fragment,null,t.createElement("div",{className:"dialog-label"},Jn[o].name),t.createElement("img",{className:"current-card",src:"/src/cards/card_".concat(o,".png"),alt:o}),t.createElement("div",{className:"text-rule"},Jn[o].rule),Jn[o].more?t.createElement("div",{className:"text-rule"},Jn[o].more):null))))},Yn=function(e){var t=e.duration,n=void 0===t?300:t,r=e.timingFunction,o=void 0===r?function(e){return e}:r,a=e.onProgress,c=void 0===a?function(){}:a,l=e.onCancel,i=void 0===l?function(){}:l,u=e.onComplete,s=void 0===u?function(){}:u;if(isNaN(n))return console.warn("duration must be a number, received ".concat(n)),function(){};n=parseInt(n,10);var d,m=performance.now(),f=!1,v=0,p=0;!function e(){d=null;var t=performance.now();v=Math.min((t-m)/n,1),p=o(v),c({done:f=1===v,rawProgress:v,progress:p}),f?s():d=window.requestAnimationFrame(e)}();return function(){d&&(window.cancelAnimationFrame(d),d=null),f||(f=!0,i({rawProgress:v,progress:p}))}},Kn=function(e,r){var o=t.useState(null),a=n(o,2),c=a[0],l=a[1],i=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),n.current}(e);t.useEffect((function(){i!==e&&l({from:i,to:e})}),[i,e]),t.useEffect((function(){return c?r(c.from,c.to):function(){}}),[c])},Wn=function(){var e=t.useState(!1),r=n(e,2),o=r[0],a=r[1],c=I();return t.createElement("div",{className:"header"},t.createElement("div",{className:"card-container",onClick:function(){c&&a(!0)}},t.createElement("div",{className:"small-card"},t.createElement(Qn,null)),t.createElement(Sn,null)),t.createElement(er,null),t.createElement(tr,null),t.createElement(Vn,{dialogIsOpen:o,closeDialog:function(){a(!1)}}))},Qn=function(){var e=I();return e?t.createElement($n,{card:e}):t.createElement(Zn,null)},Zn=function(){return t.createElement("div",{className:"card default-card",style:{backgroundImage:"url('/src/cards/card_default.png')",backgroundSize:"217px"}})},$n=function(e){var n=e.card;return t.createElement("div",{className:"card current-card",style:{backgroundColor:$[n].color1,borderColor:$[n].color2}},t.createElement("img",{src:"/src/cards/card_small-".concat(G(n)?"sword-challenge":n,".png"),alt:n}))},er=function(){var e=Be(),n=Jr();return t.createElement("img",{onClick:n,className:"avatar",src:"src/score-board/".concat(e&&e.character.img),alt:"player",style:{borderColor:e&&e.character.color||"white"}})},tr=function(){var e=Be(),r=Jr(),o=e.score,a=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.duration,a=void 0===o?300:o,c=r.timingFunction,l=t.useState(null),i=n(l,2),u=i[0],s=i[1];return Kn(e,(function(e,t){return s({value:e}),Yn({duration:a,timingFunction:c,onProgress:function(n){var r=n.progress,o=Math.round(e+(t-e)*r);s({value:o})},onComplete:function(){s(null)}})})),u}(o,{duration:2e3,timingFunction:function(e){return 1-Math.pow(1-e,5)}});return t.createElement("div",{className:"total-score",onClick:r},t.createElement("span",{className:"score",style:{backgroundColor:e&&e.character.color||"white"}},a?a.value:o))},nr=function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rollDiceAllowed,n=void 0===t?Ke():t,r=e.markScoreAllowed,o=void 0===r?Ze():r,a=e.hasDicesToCurse,c=void 0===a?Ve():a;return!n&&!o&&!c}(),n=Jr(),r=rr();return e?t.createElement("div",{className:"next-round-action"},t.createElement("button",{onClick:function(){n(),r()}},"Terminer mon tour")):null},rr=c((function(e){return r(r({},e),{},{roundStarted:!1,currentCard:null})})),or=6.25,ar=function(e,t){var n=t.rolledAreaDomNode,r=Dt(n),o=r.right-r.left,a=r.bottom-r.top,c={left:or,right:o-56.25,top:or,bottom:a-56.25},l=[],i=function(e){var t=0;return function n(){var r=cr(e,c),o=lr(),a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yt(e);return e.map((function(e){return bt(n,e,t)}))}(r,o);return!l.some((function(e){return t=e,xt(a,(function(e){return kt(e,t)}));var t}))||t>50?{rectangle:r,rotation:o,rotatedRectangle:a}:(t++,n())}()};return e.forEach((function(e){e.visibleFaceIndex=ir(e);var t=i(e),n=t.rectangle,r=t.rotation,o=t.rotatedRectangle;l.push(o),e.rotation=r,e.rolledAreaPosition=n[0]})),e},cr=function(e,t){var n={x:ur(t.left,t.right),y:ur(t.top,t.bottom)};return[{x:n.x,y:n.y},{x:n.x+At,y:n.y},{x:n.x+At,y:n.y+At},{x:n.x,y:n.y+At}]},lr=function(){return ur(-35,35)},ir=function(e){return ur(0,e.faces.length-1)},ur=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},sr=function(){var e=Ke(),n=Y(),r=dr();return e?t.createElement("div",{className:"roll-action"},t.createElement("button",{onClick:function(){r(n)}},"Lancer")):null},dr=c((function(e,t){var n=e.rollCount,o=e.dices,a=e.dicesRolled;return r(r({},e),{},{rollCount:n+1,dicesRolled:l(ar(0===n?o:a,{rolledAreaDomNode:t}))})})),mr=function(){var e=et(),n=$e();return t.createElement("div",{className:"actions"},t.createElement(sr,null),t.createElement(nr,null),t.createElement(fr,{onClick:function(){e(n)}}))},fr=function(e){var n=e.onClick,r=Ze(),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hasRolledOnce,n=void 0===t?Ge():t,r=e.scoreMarked,o=void 0===r?P():r,a=e.currentCard,c=void 0===a?I():a,l=e.hasDicesToCurse,i=void 0===l?Ve():l;return!(o||i||!c||!n)}(),a=$e(),c=a<0?"-":"+";return o?t.createElement("div",{className:"collect-action"},t.createElement("button",{onClick:n,disabled:!r},t.createElement("span",null,"Collecter"),t.createElement("span",{className:"score"},c," ",Math.abs(a))),!r&&t.createElement("img",{src:"/src/dices/dice_skull.png",className:"skull-symbol"})):null},vr=function(){var e=I(),n=M(),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.witchUncursedDiceId,n=void 0===t?A():t,r=e.currentCard,o=void 0===r?I():r,a=e.threeSkullsOrMoreInCursedArea,c=void 0===a?We():a;return!!R(o)&&!c&&!n}(),o=ot();return t.createElement("div",{className:"skull-island"},R(e)?t.createElement(gr,null):null,t.createElement("div",{className:"bottle"},t.createElement("div",{className:"area"},F(e)?t.createElement(pr,{card:e}):null,T(e)?t.createElement(t.Fragment,null,t.createElement(pr,{card:e}),t.createElement(pr,{card:e})):null,n.map((function(e){return t.createElement(Lt,{key:e.id,dice:e,clickAllowed:r,onClickAction:function(e){o(e)},specificStyle:{margin:"1px 5px"}})})))))},pr=function(e){var n=e.card;return t.createElement("button",{className:"dice",style:{width:At,height:At,color:"#fcfcfc",margin:"1px 5px",backgroundColor:$[n].color1,borderColor:$[n].color2,borderWidth:"2px"}},t.createElement("img",{src:"/src/dices/dice_skull.png",style:{width:"100%",height:"100%"}}))},gr=function(){return Z()?t.createElement("div",{className:"witch-label"},t.createElement("img",{src:"/src/skull-island/witch-label.png"}),t.createElement("svg",{x:"0px",y:"0px",width:"156.083px",height:"208.667px",viewBox:"0 0 156.083 208.667"},t.createElement("path",{id:"path_01",fill:"none",stroke:"#E4AD30",d:"M8.406,107.82 c2.541,2.178,2.375,2.875,14.25,3.5c14.782,0.778,19.26-11.965,19.26-11.965S47.918,88,40.251,72.917s-18.916,4.583-9.083,8.167 s27.759-1.338,35.142-12.417C74.75,56,77.583,45.333,79.25,37S78.477,15.833,66.31,3.833"}),t.createElement("path",{id:"path_02",fill:"none",stroke:"#E4AD30",d:"M44.031,110.094 c0,0,1,1.313-4.438,3.344s-14.244,7.281-32.125-2"}),t.createElement("path",{id:"path_03",fill:"none",stroke:"#E4AD30",d:"M42.125,103.688 c0,0,1.313,6.594-9.313,8.625S10.281,108.719,9.406,101"}),t.createElement("path",{id:"path_04",fill:"none",stroke:"#E4AD30",d:"M33.114,112.253c0,0,39.886-19.253,43.011,24.747 c0.372,0.447-0.959,1.208-2.542,1.625"}))):t.createElement("img",{style:{display:"none"},src:"/src/skull-island/witch-label.png"})},Er=t.useMemo,hr=function(){return Er((function(){return t.createElement("div",{className:"round-container"},t.createElement(mt,null),t.createElement(Wn,null),t.createElement("div",{className:"chest-and-skulls"},t.createElement(zn,null),t.createElement(vr,null)),t.createElement(Bt,null),t.createElement(mr,null))}))},br=function(e){var n=e.dialogIsOpen,r=e.closeDialog,o=ee(),a=I();return t.createElement(wn,{isOpen:n,onRequestClose:r,requestCloseOnClickOutside:!1},t.createElement("div",{className:"border border-right"}),t.createElement("div",{className:"border border-left"}),t.createElement("div",{className:"border border-top"}),t.createElement("div",{className:"border border-bottom"}),t.createElement("div",{className:"dialog-title"},"Suivant"),t.createElement("div",{className:"dialog-content draw-card-dialog"},t.createElement("div",{className:"dialog-body"},t.createElement("div",{className:"dialog-label"},0!==o.length||a?"Piochez une carte pour le tour suivant.":"Paquet de cartes épuisé. Mélangez-le pour pouvoir piocher à nouveau."),t.createElement("div",{className:"card-area"},t.createElement(Cr,null),t.createElement(yr,null)),t.createElement(Nr,null)),t.createElement("div",{className:"dialog-actions"},t.createElement(Sr,null),t.createElement(Ar,{closeDialog:r}))))},yr=function(){var e=I();return e?t.createElement("div",{className:"card current-card"},t.createElement("div",{className:"flip-card"},t.createElement("div",{className:"flip-card-inner"},t.createElement("div",{className:"flip-card-front"},t.createElement("div",{className:"card default-card",style:{backgroundImage:"url('/src/cards/card_default.png')"}})),t.createElement("div",{className:"flip-card-back"},t.createElement("img",{src:"/src/cards/card_".concat(e,".png"),alt:e}))))):null},Nr=function(){var e=I(),r=t.useState(!1),o=n(r,2),a=o[0],c=o[1];return e?t.createElement("div",{className:"card-description"},t.createElement("span",{className:"subtitle"},Jn[e].name),t.createElement("button",{className:"moreInfoIcon",onClick:function(){c(!a)}},a?t.createElement(wr,null):t.createElement(xr,null)),t.createElement(kr,{moreInfoVisible:a})):null},kr=function(e){var n=e.moreInfoVisible,r=I();return n?Jn[r].more?t.createElement(t.Fragment,null,t.createElement("div",{className:"text-rule"},Jn[r].rule),t.createElement("div",{className:"text-rule"},Jn[r].more)):t.createElement("div",{className:"text-rule"},Jn[r].rule):null},xr=function(){return t.createElement("svg",{viewBox:"0 0 24 24",height:"24px",width:"24px"},t.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),t.createElement("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}))},wr=function(){return t.createElement("svg",{viewBox:"0 0 24 24",width:"24px",height:"24px"},t.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),t.createElement("path",{d:"M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}))},Cr=function(){var e=ee();return t.createElement("div",{className:"card default-card",id:"back-deck-card",style:{backgroundImage:"url('/src/cards/card_default.png')"}},t.createElement("div",{className:"remaining-cards-number"},e.length))},Sr=function(){var e=I(),n=ee();return e?null:0===n.length?t.createElement(Dr,null):t.createElement(Or,null)},Or=function(){var e=lt();return t.createElement("button",{className:"draw-card-btn",onClick:e},"Piocher")},Dr=function(){var e=st();return t.createElement("button",{className:"draw-card-btn",onClick:function(){document.getElementById("back-deck-card").setAttribute("shaking-deck",""),setTimeout((function(){document.getElementById("back-deck-card").removeAttribute("shaking-deck",""),e()}),1e3)}},"Mélanger le paquet")},Ar=function(e){var n=e.closeDialog,r=I(),o=nt(),a=Vr();return r?t.createElement("button",{className:"draw-card-btn",onClick:function(){o(),n(),a()}},"Commencer"):null},Mr=function(e){var n=e.openDrawCardDialog,r=e.closeDialog,o=e.dialogIsOpen,a=e.player,c=Xr(),l=Ir();return t.createElement(wn,{isOpen:o,onRequestClose:r,requestCloseOnClickOutside:!0},t.createElement("div",{className:"dialog-content score-board-dialog"},t.createElement("div",{className:"cross",onClick:r},"X"),t.createElement("div",{className:"dialog-body"},t.createElement("div",null,"Au tour de",t.createElement("div",{className:"dialog-label"},a.character.name),t.createElement("img",{className:"player-img",src:"src/score-board/".concat(a&&a.character.img),alt:"player",style:{boxShadow:"inset 0px 0px 0px 4px ".concat(a&&a.character.color||"black")}})),t.createElement("div",{className:"dialog-actions"},t.createElement("button",{onClick:function(){r(),l(),c(a),n()}},"Jouer")))))},Ir=c((function(e){return r(r({},e),{},{currentPlayerGettingReady:!0})})),Rr={path1:"M39.582,739.564c0-91.824,39.191-96.32,38.045-166.691s-30.042-70.37-47.326-161.729s38.128-86.388,31.276-186.42C55.405,134.602-3.014,89.176,8.812,129.825c5.333,18.333,30.77-21,30.77-129.825",path2:"M39.582,739.564c0-113.074-5.437-166.074-8.437-198.074s36-20.667,33.019-2c-1.796,11.248-24.583,13.333-23.699-22c1.229-49.158,22.68-111,23.68-169s-38-95-46-181S39.582,0,39.582,0",path3:"M39.582,739.564c0-71.926-15.437-155.074-17.437-253.074s30-185,31.087-217s-31.087-46-31.087-26s33,10,31-32s-31-110-31-144S39.582,0,39.582,0",path4:"M39.582,739.564c0-113.074-5.437-166.074-8.437-198.074s36-20.667,33.019-2c-1.796,11.248-24.583,13.333-23.699-22c1.229-49.158,22.68-111,23.68-169s-38-95-46-181S39.582,0,39.582,0"},Pr=function(){var e,r=w(),o=Be(),a=Z(),c=te(),l=Vr(),i=t.useState(!1),u=n(i,2),s=u[0],d=u[1],m=o&&c,f=t.useState(m),v=n(f,2),p=v[0],g=v[1];if(o){var E=r.findIndex((function(e){return e.id===o.id}));e=E===r.length-1?r[0]:r[E+1]}else e=r[0];return t.createElement("div",{className:"score-board-container"},a&&t.createElement("div",{className:"cross",onClick:l},"X"),!a&&t.createElement("button",{className:"score-board-action",onClick:function(){d(!0)}},o?"Joueur suivant":"Commencer à jouer"),t.createElement("img",{className:"win-treasure-img",src:"src/score-board/win-treasure.png",alt:"win-treasure"}),t.createElement("div",{className:"users-path"},r.map((function(e){return t.createElement(jr,{key:e.id,player:e,previousScore:e.score,newScore:e.score})}))),t.createElement(Mr,{dialogIsOpen:s,closeDialog:function(){d(!1)},openDrawCardDialog:function(){g(!0)},player:e}),t.createElement(br,{dialogIsOpen:p,closeDialog:function(){g(!1)}}))},jr=function(e){var n=e.previousScore,r=e.newScore,o=e.player,a=o.id,c="path-".concat(a),l=Rr["path".concat(a)]||null,i=document.getElementById(c);if(i){var u=i.getTotalLength();i.style.strokeDashoffset="".concat(u-n*(u/2)/3e3),i.style.strokeDasharray=u,i.animate([{strokeDashoffset:"".concat(u-n*(u/2)/3e3)},{strokeDashoffset:"".concat(u-r*(u/2)/3e3)}],{duration:1e3,fill:"forwards"})}var s="score-indicator-".concat(a),d=document.getElementById(s);return d&&(d.style.offsetDistance="".concat(50*n/3e3,"%"),d.style.offsetPath="path('".concat(l,"')"),d.animate([{offsetDistance:"".concat(50*n/3e3,"%")},{offsetDistance:"".concat(50*r/3e3,"%")}],{duration:1e3,fill:"forwards"})),t.createElement("div",{className:"user-path"},t.createElement("div",{className:"path path-background"},t.createElement(Fr,{coordinates:l})),t.createElement("div",{className:"path path-foreground"},t.createElement(Fr,{coordinates:l,pathId:c,player:o,ScoreIndicatorId:s})),t.createElement("div",{className:"speech-bubble"},r),t.createElement("div",{className:"user-avatar"},t.createElement(qr,{player:o})))},qr=function(e){var n=e.player;return t.createElement("img",{className:"player-img",src:"src/score-board/".concat(n&&n.character.img),alt:"player",style:{boxShadow:"inset 0px 0px 0px 4px ".concat(n&&n.character.color||"black")}})},Fr=function(e){var n=e.coordinates,r=e.pathId,o=e.player,a=e.ScoreIndicatorId;return t.createElement("svg",{viewBox:"0 0 79.164 739.564"},t.createElement("path",{fill:"#FFFFFF",d:n,id:r||"path"}),o&&t.createElement("circle",{className:"score-indicator",id:a,r:"13",fill:o.character.color||"white"}))},Lr=[{id:1,name:"Luffy",color:"#ef9620",img:"Luffy.png"},{id:2,name:"Miss Fortune",color:"#d90f1b",img:"MissFortune.png"},{id:3,name:"Jack Sparrow",color:"#007033",img:"JackSparrow.png"},{id:4,name:"Barbe Rouge",color:"#f09700",img:"BarbeRouge.png"}],Tr=function(e){var n=e.player,r=e.players,o=Br();return t.createElement("div",{className:"character-selection-page"},t.createElement("p",null,"Joueur ",n.number," : quel pirate êtes vous ?"),t.createElement("div",{className:"characters"},Lr.map((function(e){return t.createElement("div",{className:"character ".concat(_r(e,r)?"":"disabled"),key:e.id,disabled:!_r(e,r),onClick:function(){o(n,e)}},t.createElement("img",{className:"player-img",src:"src/score-board/".concat(e&&e.img),alt:"player",style:{border:"4px solid ".concat(e&&e.color||"black")}}),t.createElement("span",null,e.name))}))))},_r=function(e,t){return!t.some((function(t){return t.character===e}))},Br=c((function(e,t,n){var o=e.players;return t.character=n,r(r({},e),{},{players:l(o)})})),zr=function(){var e=w(),n=ne(),r=re();if(0===e.length)return t.createElement(Gr,null);var o=e.find((function(e){return!e.character}));return o?t.createElement(Tr,{player:o,players:e}):r?n?t.createElement(Pr,null):t.createElement(hr,null):t.createElement(Ur,null)},Gr=function(){var e=Hr();return t.createElement("div",null,t.createElement("p",null,"Combien de joueur?"),[1,2,3,4,5].map((function(n){return t.createElement("button",{key:n,onClick:function(){e(n)}},1===n?"1 joueur":"".concat(n," joueurs"))})))},Hr=c((function(e,t){return r(r({},e),{},{players:new Array(t).fill("").map((function(e,t){return{id:t+1,number:t+1,score:0}}))})})),Ur=function(){var e=w(),n=Jr(),r=Yr();return t.createElement("div",null,t.createElement("p",null,"L'équipage est au complet"),t.createElement("ul",null,e.map((function(e){return t.createElement("li",{key:e.id},e.character.name," (Joueur ",e.number,")")}))),t.createElement("button",{onClick:function(){n(),r()}},"Démarrer la partie"))},Xr=c((function(e,t){return r(r({},e),{},{currentPlayerId:t.id})})),Jr=c((function(e){return r(r({},e),{},{scoreBoardOpened:!0})})),Vr=c((function(e){return r(r({},e),{},{scoreBoardOpened:!1})})),Yr=c((function(e){return r(r({},e),{},{gameStarted:!0})}));function Kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Qr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};var Zr=function(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t};function $r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qr(e);if(t){var o=Qr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zr(this,n)}}var eo,to,no=function(e){var n=e.ref,r=e.src,o=Ut(e,["ref","src"]),a=Se(r),c=function(e){return e?e.complete?(a(),function(){}):Oe(e,a):function(){}};if(n){var l=n;n=function(e){l(e),c(e)}}else n=c;return t.createElement("img",Ht({},o,{src:r,ref:n}))},ro=function(){var e=["/src/wood.jpg","/src/chest/pirate-hook.png","/src/chest/pirate-hook-02.png","/src/chest/wood-box.jpg","/src/dice-ongoing/treasure-map.png","/src/skull-island/witch-label.png","/src/skull-island/skull-bottle.png","/src/cards/card_default.png"].concat(l(oe.map((function(e){return"/src/cards/card_".concat(e,".png")}))));return t.createElement("div",{style:{display:"none"}},e.map((function(e){return t.createElement(no,{key:e,src:e})})))},oo=function(){return ce()?t.createElement(zr,null):t.createElement(Ae,null)};e("Main",function(e,n){return function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wr(e,t)}(i,r);var o,a,c,l=$r(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l.call(this,e)).state={hasError:!1,error:null},t}return o=i,c=[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}],(a=[{key:"render",value:function(){return this.state.hasError?t.createElement(n,{error:this.state.error}):t.createElement(e,this.props)}}])&&Kr(o.prototype,a),c&&Kr(o,c),i}(t.Component)}((eo=function(e){var n=e.booted;return t.useEffect((function(){n&&window.removeSplashscreen()}),[n]),t.createElement("div",{id:"main-container"},t.createElement("div",{id:"main",ref:ae()},t.createElement(De,{href:"/mille-sabord.css"}),t.createElement(oo,null),n?t.createElement(ro,null):null))},to=function(e){var n=Se("");t.useEffect((function(){n()}),[]);var r=Ce(""),o=we();return t.useEffect((function(){if(!r)return function(){};if(Object.keys(o).every((function(e){return"loaded"===o[e].status}))){var t=window.requestIdleCallback((function(){e.bootedSetter(!0)}),{timeout:400});return function(){window.cancelIdleCallback(t)}}return function(){}}),[r,o]),t.createElement(eo,e)},function(){var e=be(!1),r=n(e,2),o=r[0],a=r[1];return t.createElement(xe,null,t.createElement(to,{booted:o,bootedSetter:a}))}),(function(e){var n=e.error;return window.removeSplashscreen(),t.createElement("div",null,"An error occured",t.createElement("pre",null,"object"===Q(n)?n.stack:n))})))}}}));
//# sourceMappingURL=main.component-27d13847.js.map
