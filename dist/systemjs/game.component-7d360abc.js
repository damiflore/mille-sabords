System.register(["./main.js"],(function(e){"use strict";var t,n,r,o,a,c,l,i,u,s,d,m,f,v,p,g,h,E,b,y,N,k,x,w,C,S,O,D,A,M,I,R,j,P,q,T,L,_,F,B,z,G,H,U,Y,K,W,X,V,J,Q,Z,$,ee,te,ne,re,oe,ae,ce,le,ie,ue;return{setters:[function(e){t=e._,n=e.r,r=e.a,o=e.i,a=e.T,c=e.b,l=e.c,i=e.d,u=e.F,s=e.e,d=e.S,m=e.f,f=e.g,v=e.h,p=e.j,g=e.k,h=e.l,E=e.m,b=e.n,y=e.s,N=e.u,k=e.o,x=e.p,w=e.q,C=e.t,S=e.v,O=e.w,D=e.x,A=e.y,M=e.z,I=e.A,R=e.B,j=e.C,P=e.D,q=e.E,T=e.G,L=e.H,_=e.I,F=e.J,B=e.K,z=e.L,G=e.M,H=e.N,U=e.O,Y=e.P,K=e.Q,W=e.R,X=e.U,V=e.V,J=e.W,Q=e.X,Z=e.Y,$=e.Z,ee=e.$,te=e.a0,ne=e.a1,re=e.a2,oe=e.a3,ae=e.a4,ce=e.a5,le=e.a6,ie=e.a7,ue=e.a8}],execute:function(){function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};var fe=function(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n};function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=me(e);if(t){var o=me(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fe(this,n)}}var pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(c,e);var t,r,o,a=ve(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).state={hasError:!1,error:null},t}return t=c,o=[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}],(r=[{key:"componentDidCatch",value:function(e,t){this.props.onError(e,t)}},{key:"render",value:function(){return this.state.hasError?n.createElement(this.props.componentDisplayedOnError,{error:this.state.error}):n.createElement(n.Fragment,null,this.props.children)}}])&&se(t.prototype,r),o&&se(t,o),c}(n.Component),ge=(n.useState,n.useEffect),he=n.useRef,Ee=function(e,t){var n=he(!1);ge((function(){!1===n.current&&(n.current=!0)}));var o=he(t);return ge((function(){o.current=t}),t),!!n.current&&Boolean(e.apply(void 0,r(o.current)))},be=function(e){var t=e.card,n=e.symbolsInChest,r=e.scoreMarked,g=e.markScoreAllowed;return o(t)?r||g?ye(n,{goal:a.numberOfSwords,gamble:a.gambleAmount}):-a.gambleAmount:c(t)?r||g?ye(n,{goal:l.numberOfSwords,gamble:l.gambleAmount}):-l.gambleAmount:i(t)?r||g?ye(n,{goal:u.numberOfSwords,gamble:u.gambleAmount}):-u.gambleAmount:s(t)?ke(n.map((function(e){return e===d?m:e}))):f(t)?2*ke(n):v(t)||p(t)?ke(n,9):ke(n)},ye=function(e,t){var n=t.goal,r=t.gamble;return Ne(e,E)>=n?ke(e)+r:-r},Ne=function(e,t){return e.filter((function(e){return e===t})).length},ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=0,r=0,o=xe(e);return Object.values(o).forEach((function(e){3===e&&(n+=100),4===e&&(n+=200),5===e&&(n+=500),6===e&&(n+=1e3),7===e&&(n+=2e3),8===e&&(n+=4e3),e>2&&(r+=e)})),e.forEach((function(e){e===g&&(n+=100,o[g]<3&&(r+=1)),e===h&&(n+=100,o[h]<3&&(r+=1))})),r===t&&(n+=500),n},xe=function(e){var t={};return e.forEach((function(e){t.hasOwnProperty(e)?t[e]++:t[e]=1})),t},we=n.useMemo,Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rollCount,n=void 0===t?N():t;return 0===n},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rollCount,n=void 0===t?N():t;return n>0},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rollCount,n=void 0===t?N():t;return n>1},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentCard,n=void 0===t?C():t;return v(n)?[h]:p(n)?[g]:M(n)?[I]:R(n)?[I,I]:[]},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.chestSlots,n=void 0===t?j():t;return Object.keys(n).filter((function(e){return n[e]})).map((function(e){var t=n[e];return"symbol"===t.type?t.value:A(t.value)}))},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.skullCountInCursedArea,n=void 0===t?qe():t;return 3-n},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dicesToCurse,n=void 0===t?Re():t;return n.length>0},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dicesRolled,n=void 0===t?k():t,r=e.witchUncursedDiceId,o=void 0===r?x():r,a=e.remainingSpotInCursedArea,c=void 0===a?Me():a;return n.filter((function(e){return b(e)&&e.id!==o})).slice(0,c)},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentCard,n=void 0===t?C():t,r=e.hasNeverRolled,o=void 0===r?Ce():r,a=e.dicesRolled,c=void 0===a?k():a,l=e.scoreMarked,i=void 0===l?O():l,u=e.threeSkullsOrMoreInCursedArea,s=void 0===u?Pe():u,d=e.hasDicesToCurse,m=void 0===d?Ie():d;return!!n&&(!i&&(!!o||!s&&(!m&&!(c.length<2))))},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.skullCountInCursedArea,n=void 0===t?qe():t;return n>2},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dicesCursed,n=void 0===t?w():t,r=e.symbolsFromCard,o=void 0===r?De():r;return n.length+o.filter((function(e){return y(e)})).length},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hasRolledMoreThanOnce,n=void 0===t?Oe():t,r=e.scoreMarked,o=void 0===r?O():r,a=e.currentCard,c=void 0===a?C():a,l=e.threeSkullsOrMoreInCursedArea,i=void 0===l?Pe():l,u=e.hasDicesToCurse,s=void 0===u?Ie():u;return!o&&(i?!(!D(c)||!n):!s&&!!c)},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentCard,n=void 0===t?C():t,r=e.symbolsInChest,o=void 0===r?Ae():r,a=e.scoreMarked,c=void 0===a?O():a,l=e.markScoreAllowed,i=void 0===l?Te():l;return we((function(){return be({card:n,symbolsInChest:o,scoreMarked:c,markScoreAllowed:i})}),[n,o,c,i])},_e=P((function(e,t){var n=e.totalScore;return q(q({},e),{},{totalScore:Math.max(n+t,0),scoreMarked:!0})})),Fe=P((function(e){return q(q({},e),{},{isOnSkullIsland:!0})})),Be=P((function(e){return q(q({},e),{},{roundStarted:!0})})),ze=P((function(e,t){var n=e.dicesRolled,o=e.dicesCursed;return q(q({},e),{},{dicesRolled:n.filter((function(e){return e.id!==t.id})),dicesCursed:[].concat(r(o),[t])})})),Ge=P((function(e,t){var n=e.dicesRolled,o=e.dicesCursed;return q(q({},e),{},{witchUncursedDiceId:t.id,dicesRolled:[].concat(r(n),[t]),dicesCursed:o.filter((function(e){return e.id!==t.id}))})})),He=P((function(e,t,n){var o=e.dicesRolled,a=e.chestSlots;return t.rolledAreaPosition=n,q(q({},e),{},{dicesRolled:[].concat(r(o),[t]),chestSlots:q(q({},a),{},T({},t.chestSlot,null))})})),Ue=P((function(e,t,n){var r=e.dicesRolled,o=e.chestSlots;return t.chestSlot=n,q(q({},e),{},{dicesRolled:r.filter((function(e){return e.id!==t.id})),chestSlots:q(q({},o),{},T({},n,{type:"dice",value:t}))})})),Ye=P((function(e){var t=e.cardDeck,n=e.cardsUsed,o=t[0];return q(q({},e),{},{cardDeck:t.slice(1),cardsUsed:[].concat(r(n),[o]),currentCard:o})})),Ke=P((function(e){var t=e.chestSlots;return q(q({},e),{},{chestSlots:q(q({},t),{},{1:{type:"symbol",value:h}})})})),We=P((function(e){var t=e.chestSlots;return q(q({},e),{},{chestSlots:q(q({},t),{},{1:{type:"symbol",value:g}})})})),Xe=P((function(e){var t=e.cardsUsed;return q(q({},e),{},{cardsUsed:[],cardDeck:L(t)})})),Ve=n.useEffect,Je=function(){return Qe(),null},Qe=function(){Ze(),$e(),et(),tt(),nt()},Ze=function(){var e=Re(),t=ze();Ve((function(){if(0===e.length)return function(){};var n=setTimeout((function(){e.forEach((function(e){t(e)}))}),1e3);return function(){clearTimeout(n)}}),[e])},$e=function(){var e=C(),t=O(),n=_e(),r=Pe(),o=Ee((function(e){return!e&&r}),[r]),a=Le(),c=F(e);Ve((function(){c&&!t&&o&&n(a)}),[c,t,o,a])},et=function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rollCount,n=void 0===t?N():t;return 1===n}(),t=C(),n=_(),r=qe(),o=Fe();Ve((function(){e&&(n||F(t)||r<4||o())}),[e,n,t,r])},tt=function(){var e=Ke(),t=C(),n=Ee((function(e){return!v(e)&&v(t)}),[t]);Ve((function(){n&&e()}),[n])},nt=function(){var e=We(),t=C(),n=Ee((function(e){return!p(e)&&p(t)}),[t]);Ve((function(){n&&e()}),[n])},rt=function(e){var t=e.href,r=B(t);return z.createPortal(n.createElement("link",{href:t,ref:function(e){return e?G(e,r):function(){}},rel:"stylesheet",type:"text/css"}),document.head)};var ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},at=function(e,t){if(null===e)return{};var n,r,o=function(e,t){if(null===e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o},ct=function(e){var t=e.ref,r=e.src,o=at(e,["ref","src"]),a=B(r),c=function(e){return e?e.complete?(a(),function(){}):G(e,a):function(){}};if(t){var l=t;t=function(e){l(e),c(e)}}else t=c;return n.createElement("img",ot({},o,{src:r,ref:t}))},lt=function(){var e=["src/wood.jpg","src/chest/pirate-hook.png","src/chest/pirate-hook-02.png","src/chest/wood-box.jpg","src/dice-ongoing/treasure-map.png","src/skull-island/witch-label.png","src/skull-island/skull-bottle.png","src/cards/card_default.png"].concat(r(H.map((function(e){return"src/cards/card_".concat(e,".png")}))));return n.createElement("div",{style:{display:"none"}},e.map((function(e){return n.createElement(ct,{key:e,src:e})})))},it=function(e,t,n){var r=st(n),o=Math.cos(r),a=Math.sin(r),c=t.x-e.x,l=t.y-e.y;return{x:Math.round(o*c+a*l+e.x),y:Math.round(o*l-a*c+e.y)}},ut=function(e){var t=U(e,4),n=t[0],r=t[1],o=t[2],a=t[3];return{x:(n.x+r.x+o.x+a.x)/4,y:(n.y+r.y+o.y+a.y)/4}},st=function(e){return e*Math.PI/180},dt=function(e,t){return!!mt(t,(function(t){return n=t,r=U(e,2),o=r[0],a=r[1],c=U(n,2),l=c[0],i=c[1],u=(i.x-l.x)*(o.y-l.y)-(i.y-l.y)*(o.x-l.x),s=(a.x-o.x)*(o.y-l.y)-(a.y-o.y)*(o.x-l.x),d=(i.y-l.y)*(a.x-o.x)-(i.x-l.x)*(a.y-o.y),(0!==u||0!==s||0!==d)&&0!==d&&(s/=d,(u/=d)>=0&&u<=1&&s>=0&&s<=1);var n,r,o,a,c,l,i,u,s,d}))},mt=function(e,t){var n=U(e,4),r=n[0],o=n[1],a=n[2],c=n[3];return!!t([r,o])||(!!t([o,a])||(!!t([a,c])||!!t([c,r])))},ft=function(e,t){return!(e.right<=t.left)&&(!(e.left>=t.right)&&(!(e.bottom<=t.top)&&!(e.top>=t.bottom)))},vt=function(e,t){var n=e.left,r=e.right,o=r-n;n<t.left?r=(n=t.left)+o:r>t.right&&(r=(n=t.right-o)+o);var a=e.top,c=e.bottom,l=c-a;return a<t.top?c=(a=t.top)+l:c>t.bottom&&(c=(a=t.bottom-l)+l),{left:n,right:r,top:a,bottom:c}},pt=function(e){var t=e.left,n=e.right,r=e.top;return{x:t+(n-t)/2,y:r+(e.bottom-r)/2}},gt=function(e,t){var n,r,o,a,c=pt(e),l=pt(t);return r=l,o=(n=c).x-r.x,a=n.y-r.y,Math.sqrt(o*o+a*a)},ht=function(e){var t=e.getBoundingClientRect(),n=Y(e),r=t.left+n.x,o=t.top+n.y,a=r+t.width,c=o+t.height;return{left:Math.floor(r),top:Math.floor(o),right:Math.floor(a),bottom:Math.floor(c)}},Et=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=o.trailing,c=void 0!==a&&a,l=function o(){for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];clearTimeout(t);var u=Date.now();if(n){var s=u-n;if(s<r){if(c){var d=r-s;t=setTimeout((function(){return o.apply(void 0,l)}),d)}}else n=u,e.apply(void 0,l)}else n=u,e.apply(void 0,l)},i=function(){clearTimeout(t)};return l.cancel=i,l},bt=function(e,t){var n,r=t.logLevel,o=void 0===r?"warn":r,a=t.onGrip,c=void 0===a?function(){}:a,l=t.onLongGrip,i=void 0===l?function(){}:l,u=t.onRelease,s=void 0===u?function(){}:u,d=t.onDrag,m=void 0===d?function(){}:d,f=t.onCancel,v=void 0===f?function(){}:f,p=K({logLevel:o}),g=function(){},h=function(){};p.debug("enable drag on",e);var E,b,y,N,k=W(e,"mousedown",(function(e){3===e.which?p.debug("ignore right click"):(w(Nt(e),e),g=W(document,"mousemove",Et((function(e){S(Nt(e),e)}))),h=W(document,"mouseup",(function(e){h(),g(),O(Nt(e),e)})))}),{passive:!0}),x=W(e,"touchstart",(function(e){w(kt(e),e),g=W(document,"touchmove",Et((function(e){S(kt(e),e)}))),h=W(document,"touchend",(function(e){h(),g(),O(kt(e),e)}))}),{passive:!0}),w=function(t,r){p.debug("gripping node at",t),n=!0,y=t,E=t,b=yt(e),c({x:b.x,y:b.y,event:r}),N=setTimeout(C,300)},C=function(){i()},S=function(e,t){if(E.x!==e.x||E.y!==e.y){E=e;var n=y.x-b.x,r=y.y-b.y,o={x:e.x-n,y:e.y-r};p.debug("move node at",o),m(q(q({event:t},o),{},{relativeX:e.x-y.x,relativeY:e.y-y.y}))}else p.debug("no real move")},O=function(e,t){p.debug("releasing node"),n=!1;var r=y.x-b.x,o=y.y-b.y;clearTimeout(N),s({event:t,x:E.x-r,y:E.y-o})};return function(e){k(),x(),g(),h(),clearTimeout(N),function(e){n&&(p.debug("cancelling drag",e),n=!1,v({event:e}))}(e)}},yt=function(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top}},Nt=function(e){return{x:e.pageX,y:e.pageY}},kt=function(e){var t=e.changedTouches[0];return{x:t.pageX,y:t.pageY}},xt=n.useEffect,wt=n.useState,Ct=function(e){var t=e.dice,r=e.clickAllowed,o=e.disabled,a=e.draggable,c=e.onClickAction,l=e.specificStyle,i=e.diceOnGoing,u=b(t),s=X(),d=V(t.id),m=J(t.id),f=x(),v=wt(!1),p=U(v,2),g=p[0],h=p[1],E=wt(null),y=U(E,2),N=y[0],k=y[1],w=Q();return xt((function(){if(!a||!d||!s)return function(){};var e,n=new Map,r=bt(d,{onGrip:function(){},onLongGrip:function(){h(!0)},onDrag:function(e){var r=e.x,o=e.y,a=e.relativeX,c=e.relativeY;(Math.abs(a)>5||Math.abs(c)>5)&&h(!0);var l={left:r,right:r+50,top:o,bottom:o+50},i=ht(s),u=vt(l,i);k({x:u.left,y:u.top}),w({dice:t,diceRectangle:u,setDropHandler:function(e,t){n.set(e,t)}})},onRelease:function(t){var r=t.x,o=t.y;e=setTimeout((function(){return h(!1)})),k(null),w(null);var a={left:r,right:r+50,top:o,bottom:o+50};n.forEach((function(e){return e({diceRectangle:a})}))},onCancel:function(){h(!1),k(null),w(null)}});return function(){r(),clearTimeout(e)}}),[a,d,s]),n.createElement("button",{disabled:o,"data-dice-id":t.id,ref:m,onClick:c&&r&&!g?function(){return c(t)}:void 0,className:u?function(e){return e.id===f?"dice":i?"dice dice-cursed-disapear":"dice dice-cursed-appear"}(t):"dice",style:q(q({width:50,height:50,background:u?"black":"#fcfcfc",color:u?"black":"#fcfcfc",borderColor:u?"black":"#b9b9b9"},l),N?{position:"fixed",zIndex:1e3,transform:"none",left:N.x,top:N.y}:{})},n.createElement("img",{src:"src/dices/dice_".concat(A(t),".png"),draggable:"false",style:{width:"100%",height:"100%"}}))},St=n.useState,Ot=n.useEffect,Dt=function(){var e=k(),t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scoreMarked,n=void 0===t?O():t,r=e.threeSkullsOrMoreInCursedArea,o=void 0===r?Pe():r;return!n&&!o}(),r=Ue(),o=Z(),a=$(),c=St(!1),l=U(c,2),i=l[0],u=l[1];Ot((function(){u(At({dragDiceGesture:a,rolledAreaDomNode:o}))}),[a,o]);var s=j(),d=i&&Object.keys(s).some((function(e){return s[e]&&s[e].value===i})),m=i&&e.includes(i),f=He(),v=Mt();return Ot((function(){a&&a.setDropHandler(o,(function(e){var t=e.diceRectangle;if(d||m){var n,r,a,c,l,u=ht(o),s=(n=vt(t,u),r=u,a=n.left-r.left,c=a+(n.right-n.left),l=n.top-r.top,{left:a,right:c,top:l,bottom:l+(n.bottom-n.top)});d?f(i,{x:s.left,y:s.top}):v(i,{x:s.left,y:s.top})}}))}),[a,o]),n.createElement("div",{className:"dice-ongoing"},n.createElement("div",{className:"map"}),n.createElement("div",{className:"area",ref:ee(),style:q({},d?{outline:"2px dotted"}:{})},e.map((function(e){return n.createElement(Ct,{key:e.id,dice:e,clickAllowed:!b(e)&&t,onClickAction:function(e){var t=Object.keys(s).find((function(e){return!s[e]}));r(e,t)},draggable:!0,diceOnGoing:!0,specificStyle:{left:"".concat(e.rolledAreaPosition.x,"px"),top:"".concat(e.rolledAreaPosition.y,"px"),transform:"rotate(".concat(e.rotation,"deg)"),position:"absolute"}})}))))},At=function(e){var t=e.dragDiceGesture,n=e.rolledAreaDomNode;if(!t)return null;var r=ht(n);return ft(t.diceRectangle,r)?t.dice:null},Mt=P((function(e,t,n){var o=e.dicesRolled;return t.rotation=0,t.rolledAreaPosition=n,q(q({},e),{},{dicesRolled:r(o)})})),It=function(e,t){for(var n=jt(e,e),r=n.next(),o=r.done,a=r.value;!1===o;){if(t(a))return a;var c=n.next();o=c.done,a=c.value}return null},Rt=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!r){var o=t.firstChild;if(o)return o}var a=t.nextSibling;if(a)return a;var c=t.parentNode;return c&&c!==n?e(c,n,!0):null},jt=function(e,t){var n=e;return{next:function(){var e=Rt(n,t);return n=e,{done:!1===Boolean(e),value:e}}}},Pt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e,o=!1,a=function(){var e=Rt(r,t,n&&!1===o);return o=!0,r=e,{done:!1===Boolean(e),value:e}};return{next:a}},qt=function(e){for(var t=e.lastChild;t;){var n=t.lastChild;if(!n)break;t=n}return t},Tt=function(e,t){var n=e;return{next:function(){var e=function(e,t){var n=e.previousSibling;if(n){var r=qt(n);return r||n}if(e!==t){var o=e.parentNode;if(o&&o!==t)return o}return null}(n,t);return n=e,{done:!1===Boolean(e),value:e}}}},Lt=function(e){var t=It(e,te);return t||(te(e)?e:null)},_t=function(e){if(3===e.nodeType)return console.warn("cannot trap focus inside a text node"),function(){};if(zt.find((function(t){return t.element===e})))return console.warn("focus already trapped inside this element"),function(){};var t=function(){return It(e,Ft)},n=function(){return function(e,t){var n=qt(e);if(n)for(var r=Tt(n,e),o=r.next(),a=o.done,c=o.value;!1===a;){if(t(c))return c;var l=r.next();a=l.done,c=l.value}return null}(e,Ft)},r=function(){return function(e){for(var t=e.from,n=e.root,r=void 0===n?null:n,o=e.predicate,a=Tt(t,r),c=a.next(),l=c.done,i=c.value;!1===l;){if(o(i))return i;var u=a.next();l=u.done,i=u.value}return null}({from:document.activeElement,root:e,predicate:Ft})||n()},o=function(){return function(e){for(var t=e.from,n=e.root,r=void 0===n?null:n,o=e.predicate,a=e.skipChildren,c=Pt(t,r,void 0!==a&&a),l=c.next(),i=l.done,u=l.value;!1===i;){if(o(u))return u;var s=c.next();i=s.done,u=s.value}return null}({from:document.activeElement,root:e,predicate:Ft})||t()},a=Gt({element:e,lock:function(){var a=function(t){(function(t){return t.target!==e&&!e.contains(t.target)})(t)&&(t.preventDefault(),t.stopImmediatePropagation())},c=function(e){Bt(e)&&(e.preventDefault(),function(e){var a=document.activeElement===document.body;if(e.shiftKey){var c=a?n():r();c&&c.focus()}else{var l=a?t():o();l&&l.focus()}}(e))};return document.addEventListener("mousedown",a,{capture:!0,passive:!1}),document.addEventListener("keydown",c,{capture:!0,passive:!1}),function(){document.removeEventListener("mousedown",a,{capture:!0,passive:!1}),document.removeEventListener("keydown",c,{capture:!0,passive:!1})}}});return function(){a()}},Ft=function(e){return!function(e){return e.hasAttribute&&e.hasAttribute("tabIndex")&&Number(e.getAttribute("tabindex"))<0}(e)&&te(e)},Bt=function(e){return"Tab"===e.key||9===e.keyCode},zt=[],Gt=function(e){var t,n=e.lock;zt.length>0&&(t=zt[zt.length-1]).unlock();var r={lock:n,unlock:n()};return zt.push(r),function(){if(0!==zt.length){var e=zt[zt.length-1];r===e?(zt.pop(),r.unlock(),t&&(t.unlock=t.lock())):console.warn("you must deactivate trap in the same order they were activated")}else console.warn("cannot deactivate an already deactivated trap")}},Ht=function(e){if("object"!==t(e)||1!==e.nodeType)throw new TypeError("getScrollableParent first argument must be DOM node");var n=e;return"fixed"===ne(n,"position")?Ut(n.ownerDocument):en(n)||Ut(n.ownerDocument)},Ut=function(e){if("scrollingElement"in e)return e.scrollingElement;if(Vt(e))return e.documentElement;var t=e.body,n=t&&!/body/i.test(t.tagName)?Yt(t):t;return n&&Wt(n)?null:n},Yt=function(e){for(var t=e;t=t.nextSibling;)if(1===t.nodeType&&Kt(t))return t;return null},Kt=function(e){return e.ownerDocument.body===e},Wt=function(e){if(!Qt(e))return!1;if(Xt(e))return!1;var t=e.ownerDocument.documentElement;return!!Qt(t)&&!Xt(t)},Xt=function(e){var t=ne(e,"display");return"none"!==t&&("table-row"!==t&&"table-group"!==t&&"table-column"!==t||"collapsed"!==ne(e,"visibility"))},Vt=function(e){return!!/^CSS1/.test(e.compatMode)&&Jt(e)},Jt=function(e){var t=e.createElement("iframe");t.style.height="1px",(e.body||e.documentElement||e).appendChild(t);var n=t.contentWindow.document;n.write('<!DOCTYPE html><div style="height:9999em">x</div>'),n.close();var r=n.documentElement.scrollHeight>n.body.scrollHeight;return t.parentNode.removeChild(t),r},Qt=function(e){return!Zt(e)||!$t(e)},Zt=function(e){return"visible"===ne(e,"overflow-x")||"visible"===ne(e,"overflow")},$t=function(e){return"visible"===ne(e,"overflow-y")||"visible"===ne(e,"overflow")},en=function(e){for(var t=ne(e,"position"),n=e.parentNode;n;){if(re(n))return null;if("absolute"!==t||"static"!==ne(n,"position")){if(Qt(n))return n;n=n.parentNode}else n=n.parentNode}return null},tn=n.useEffect,nn={position:"absolute",top:"5%",left:"0",right:"0",width:"fit-content",height:"fit-content",margin:"auto",padding:"1em",overscrollBehavior:"contain",outline:"none",background:"white",color:"black",border:"solid"},rn={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.46)"},on=function(e){var t=e.container,r=void 0===t?document.body:t,o=e.children,a=e.isOpen,c=e.closeMethod,l=void 0===c?"display-none":c,i=e.stealFocus,u=void 0===i||i,s=e.restoreStolenFocus,d=void 0===s||s,m=e.trapFocus,f=void 0===m||m,v=e.requestCloseOnEscape,p=void 0===v||v,g=e.requestCloseOnClickOutside,h=void 0!==g&&g,E=e.onAfterOpen,b=void 0===E?function(){}:E,y=e.onRequestClose,N=void 0===y?function(){}:y,k=e.onFocusIn,x=void 0===k?function(){}:k,w=e.onFocusOut,C=void 0===w?function(){}:w,S=e.backdropProps,O=void 0===S?{}:S,D=at(e,["container","children","isOpen","closeMethod","stealFocus","restoreStolenFocus","trapFocus","requestCloseOnEscape","requestCloseOnClickOutside","onAfterOpen","onRequestClose","onFocusIn","onFocusOut","backdropProps"]);if(!r)return null;var A=n.useState(null),M=U(A,2),I=M[0],R=M[1],j=Boolean(I);return Ee((function(e){return!e&&a}),[a])&&b(),tn((function(){if(!a||!j)return function(){};var e=ln(I),t=function(t){t.relatedTarget||e&&(e=!1,C(t))},n=function(t){x(t),e=!0},r=function(t){ln(I)?e=!0:(e=!1,C(t))};return I.addEventListener("focus",n,!0),document.addEventListener("focus",r,!0),document.addEventListener("blur",t,!0),function(){I.removeEventListener("focus",n,!0),document.removeEventListener("focus",r,!0),document.removeEventListener("blur",t,!0)}}),[a,j,x,C]),tn((function(){return a&&j?function(e){for(var t=[],n=e.previousSibling;n;)1===n.nodeType&&Qt(n)&&t.push(n),n=n.previousSibling;var r=Ht(e);t.push(r);var o=t.map((function(e){var t=e.style.overflow;return e.style.overflow="hidden",function(){t?e.style.overflow=t:delete e.style.overflow}}));return function(){o.forEach((function(e){e()}))}}(I):function(){}}),[a,j]),tn((function(){return a&&j&&f?_t(I):function(){}}),[a,j,f]),tn((function(){if(!a||!j||!u)return function(){};var e=document.activeElement,t=Lt(I);return t&&t.focus(),function(){t&&("function"==typeof d?d(e):!0===d&&e.focus())}}),[a,j,u]),tn((function(){if(!a||!j)return function(){};var e=[];return Array.from(I.parentNode.children).forEach((function(t){t!==I&&e.push(t)})),e.forEach((function(e){e.setAttribute("aria-hidden","true")})),function(){e.forEach((function(e){e.removeAttribute("aria-hidden","true")}))}}),[a,j]),"dom-remove"!==l||a?z.createPortal(n.createElement(n.Fragment,null,a?n.createElement(an,ot({},O,{style:q(q({},rn),O.style),onMouseDownPassive:function(e){if(e.preventDefault(),!ln(I)){var t=Lt(I);t&&t.focus()}},onClick:function(e){if(h){var t=e.target;t===I||I.contains(t)||N(e)}O.onClick&&O.onClick(e)}})):null,n.createElement("div",ot({},D,{style:q(q(q({},nn),D.style),a?{}:cn(l)),ref:function(e){R(e),D.ref&&D.ref(e)},onKeyDown:function(e){p&&e.keyCode===un&&N(e),D.onKeyDown&&D.onKeyDown(e)},hidden:"hidden-attribute"===l?a:void 0,tabIndex:"-1"}),o)),r):null},an=function(e){var t=e.onMouseDownPassive,r=at(e,["onMouseDownPassive"]),o=n.useState(null),a=U(o,2),c=a[0],l=a[1];return tn((function(){return c?(c.addEventListener("mousedown",t,{passive:!1}),function(){c.removeEventListener("mousedown",t,{passive:!1})}):function(){}}),[c]),n.createElement("div",ot({ref:function(e){l(e),r.ref&&r.ref(e)}},r))},cn=function(e){return"display-none"===e?{display:"none"}:"visibility-hidden"===e?{visibility:"hidden"}:{}},ln=function(e){var t=document.activeElement;return e===t||e.contains(t)},un=27,sn=function(e){return n.createElement(n.Fragment,null,n.createElement(rt,{href:"/src/dialog/dialog.css"}),n.createElement(on,ot({container:X(),backdropProps:{className:"dialog--backdrop"},style:{top:"10%",left:"6%",right:"6%",bottom:"8%",height:"auto",width:"auto",padding:"0",border:"none",background:"none",maxWidth:"620px",margin:"0 auto"},className:"dialog"},e)))},dn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentCard,n=void 0===t?C():t;return o(n)?a.numberOfSwords:c(n)?l.numberOfSwords:i(n)?u.numberOfSwords:null},mn=function(){var e=C(),t=Ae(),r=dn();if(!e||!F(e))return null;var o=Ne(t,E),a=new Array(r).fill("");return n.createElement("div",{className:"sword-challenge-indicators"},a.map((function(e,t){return o>=t+1?n.createElement(fn,{key:t}):n.createElement(vn,{key:t})})))},fn=function(){return n.createElement("div",{className:"sword-icon"},n.createElement("img",{src:"src/dices/dice_sword.png"}))},vn=function(){return n.createElement("div",{className:"sword-icon disabled"},n.createElement("img",{src:"src/header/swords-disabled.png"}))},pn=n.useState,gn=n.useEffect,hn=function(){var e=C(),t=Ae(),n=Ne(t,E),r=dn();return!!F(e)&&!(n>=r)},En=function(){var e=C();return n.createElement("div",{className:"score-area ".concat(hn()?"animated":"")},e?n.createElement(bn,null):null)},bn=function(){var e=Le(),t=C(),r=pn(!1),o=U(r,2),a=o[0],c=o[1];return n.createElement(n.Fragment,null,f(t)?n.createElement(yn,null):null,n.createElement("div",{className:"round-score ".concat(hn()?"hidden":""),onClick:function(){c(!0)}},e),F(t)?n.createElement(Nn,null):null,n.createElement(kn,{dialogIsOpen:a,closeDialog:function(){c(!1)}}))},yn=function(){return oe()?n.createElement("div",{className:"pirate-hook"}):n.createElement("div",{style:{display:"none"},className:"pirate-hook"})},Nn=function(){var e=Le(),t=Ae(),r=Ne(t,E),o=dn(),a=new Array(o).fill(""),c=r>=o,l=Ee((function(e){return e<r}),[r]),i=pn(!1),u=U(i,2),s=u[0],d=u[1];return gn((function(){l&&d(!0)}),[l]),gn((function(){if(s){var e=setTimeout((function(){d(!1)}),300);return function(){clearTimeout(e)}}return function(){}}),[s]),n.createElement(n.Fragment,null,n.createElement("div",{className:"ropes ".concat(c?"challenge-won":"")},a.map((function(e,t){return r>=t+1?n.createElement("div",{key:t,className:"rope rope-".concat(t+1," cut-rope")}):n.createElement("div",{key:t,className:"rope rope-".concat(t+1)})}))),s&&r<=o?n.createElement("div",{className:"sword-slice"},n.createElement("div",{className:"triangle-left"}),n.createElement("div",{className:"triangle-right"})):null,n.createElement("div",{className:"negative-round-score rotate-".concat(r," ").concat(c?"removed":"")},e))},kn=function(e){var t=e.dialogIsOpen,r=e.closeDialog;return n.createElement(sn,{isOpen:t,onRequestClose:r,requestCloseOnClickOutside:!0},n.createElement("div",{className:"border border-right"}),n.createElement("div",{className:"border border-left"}),n.createElement("div",{className:"border border-top"}),n.createElement("div",{className:"border border-bottom"}),n.createElement("div",{className:"dialog-title"},"Score"),n.createElement("div",{className:"dialog-content score-rules-dialog"},n.createElement("div",{className:"dialog-body"},n.createElement("div",{className:"dialog-box"},n.createElement("div",{className:"dialog-label"},"Combinaisons de dés"),n.createElement("div",{className:"columns"},n.createElement("div",{className:"column"},n.createElement("div",{className:"column-title"},"Symbols identiques"),n.createElement("span",{className:"symbol-number"},"3"),n.createElement("span",{className:"symbol-number"},"4"),n.createElement("span",{className:"symbol-number"},"5"),n.createElement("span",{className:"symbol-number"},"6"),n.createElement("span",{className:"symbol-number"},"7"),n.createElement("span",{className:"symbol-number"},"8")),n.createElement("div",{className:"column"},n.createElement("div",{className:"column-title"},"Points"),n.createElement("span",{className:"points"},"+100"),n.createElement("span",{className:"points"},"+200"),n.createElement("span",{className:"points"},"+500"),n.createElement("span",{className:"points"},"+1000"),n.createElement("span",{className:"points"},"+2000"),n.createElement("span",{className:"points"},"+4000")))),n.createElement("div",{className:"dialog-box"},n.createElement("div",{className:"dialog-label"},"Dés spéciaux"),n.createElement("div",{className:"columns"},n.createElement("div",{className:"column"},n.createElement("div",{className:"column-title"},"Symbol"),n.createElement("img",{src:"src/dices/dice_coin.png"}),n.createElement("img",{src:"src/dices/dice_diamond.png"})),n.createElement("div",{className:"column"},n.createElement("div",{className:"column-title"},"Points"),n.createElement("span",{className:"points"},"+100"),n.createElement("span",{className:"points"},"+100")))),n.createElement("div",{className:"dialog-box last"},n.createElement("div",{className:"dialog-label"},"Bonus coffre plein"),n.createElement("div",{className:"columns"},n.createElement("div",{className:"column"},n.createElement("div",{className:"column-title"},"Dés utilisés"),n.createElement("span",{className:"symbol-number"},"8")),n.createElement("div",{className:"column"},n.createElement("div",{className:"column-title"},"Points"),n.createElement("span",{className:"points"},"+500")))))))},xn=n.useState,wn=n.useEffect,Cn=function(){var e=j(),t=xn(null),r=U(t,2),o=r[0],a=r[1],c=$(),l=xn(!1),i=U(l,2),u=i[0],s=i[1];wn((function(){s(On({dragDiceGesture:c,chestDropAreaDomNode:o}))}),[c,o]);var d=k(),m=u&&d.includes(u),f=u&&Object.keys(e).some((function(t){return e[t]&&e[t].value===u})),v=Ue(),p=An();wn((function(){c&&c.setDropHandler(o,(function(t){var n=t.diceRectangle;if(!g&&(m||f)){var r=new Map,a=[];Object.keys(e).forEach((function(t){var n=e[t];if(!n||n.value===u){var c=o.querySelector('[data-chest-slot="'.concat(t,'"]')),l=ht(c);r.set(l,t),a.push(l)}}));var c=function(e,t){var n=gt(e,t[0]);return t.reduce((function(t,r){var o=gt(e,r);return o<n?(n=o,r):t}))}(n,a),l=r.get(c);m?v(u,l):p(u,l)}}))}),[c,o]);var g=Pe();return n.createElement("div",{className:"chest"},n.createElement("div",{className:"dice-area",ref:a,style:q({},m&&!g?{outline:"2px dotted"}:{})},n.createElement("div",{className:"box"},Object.keys(e).map((function(t){return n.createElement("div",{className:"slot",key:t,"data-chest-slot":t},n.createElement(Sn,{chestSlotContent:e[t]}))}))),n.createElement("div",{className:"top-left-corner"}),n.createElement("div",{className:"top-right-corner"}),n.createElement("div",{className:"bottom-left-corner"}),n.createElement("div",{className:"bottom-right-corner"}),g?n.createElement(Dn,null):null),n.createElement(En,null))},Sn=function(e){var t=e.chestSlotContent,r=C(),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scoreMarked,n=void 0===t?O():t,r=e.threeSkullsOrMoreInCursedArea,o=void 0===r?Pe():r;return!n&&!o}(),a=He();if(!t)return null;if("symbol"===t.type){var c=t.value;return n.createElement("button",{className:"dice",style:{width:50,height:50,color:"#fcfcfc",margin:"5px",backgroundColor:ae[r].color1,borderColor:ae[r].color2,borderWidth:"2px",borderStyle:"solid"}},n.createElement("img",{src:"src/dices/dice_".concat(c,".png"),draggable:"false",style:{width:"100%",height:"100%"}}))}var l=t.value;return n.createElement(Ct,{dice:l,draggable:!0,clickAllowed:o,onClickAction:function(e){a(e,e.rolledAreaPosition)}})},On=function(e){var t=e.dragDiceGesture,n=e.chestDropAreaDomNode;if(!t)return null;var r=ht(n);return ft(t.diceRectangle,r)?t.dice:null},Dn=function(){return n.createElement("div",{className:"cursed-cover"},n.createElement("img",{src:"src/chest/cursed-grid.png",alt:"cursed-cover"}))},An=P((function(e,t,n){var r,o=e.chestSlots,a=t.chestSlot;return t.chestSlot=n,q(q({},e),{},{chestSlots:q(q({},o),{},(r={},T(r,a,null),T(r,n,{type:"dice",value:t}),r))})})),Mn={animals:{name:"Animaux",rule:"Les singes et les perroquest obtenus sur les dés comptent comme un même symbol dans une combinaison.",more:"Par exemple 2 perroquets et 3 singes forment une conbinaison de 5 dés identiques, soit 500 points."},chest:{name:"Coffre au trésor",rule:'Lorsque le joueur sauvegarde ses dés, grâce à la carte "Coffre au trésor" les dés sont protégés du mauvais sort.',more:"Ainsi même lorsque le joueur obtient 3 têtes de morts, son tour prends fin, mais il peut marquer les points totalisés grâce aux dés sauvegardés!"},coin:{name:"Pièce d'or",rule:"Le joueur commence son tour avec un symbol pièce d'or. Il rapporte des points aussi bien dans une combinaison de dés que comme simple pièce (+100)."},diamond:{name:"Diamant",rule:"Le joueur commence son tour avec un symbol diamant. Il rapporte des points aussi bien dans une combinaison de dés que comme simple diamant (+100)."},pirate:{name:"Capitaine des pirates",rule:"Grâce à l'aide du capitaine, tous les points comptabilisés pendant ce tour sont doublés !"},witch:{name:"Sorcière",rule:"Avec ses potions magiques, la sorcière permet exceptionnellement au joueur de relancer, une fois, un dé avec une tête de mort."},"1skull":{name:"Tête de mort",rule:"Le tour du joueur débute avec un symbole tête de mort."},"2skulls":{name:"2 têtes de mort",rule:"Le tour du joueur débute avec 2 symboles tête de mort."},"2sword-challenge":{name:"Bateau pirate",rule:"Le joueur doit obtenir au minimum 2 symbols sabres. Si il y parvient, il gagne +300 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -300 points pour ce tour, quelque soit son résultat aux dés.",more:"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points."},"3sword-challenge":{name:"Bateau pirate",rule:"Le joueur doit obtenir au minimum 3 symbols sabres. Si il y parvient, il gagne +500 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -500 points pour ce tour, quelque soit son résultat aux dés.",more:"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points."},"4sword-challenge":{name:"Bateau pirate",rule:"Le joueur doit obtenir au minimum 4 symbols sabres. Si il y parvient, il gagne +1000 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -1000 points pour ce tour, quelque soit son résultat aux dés.",more:"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points."}},In=function(e){var t=e.dialogIsOpen,r=e.closeDialog,o=C();return n.createElement(sn,{isOpen:t,onRequestClose:r,requestCloseOnClickOutside:!0},n.createElement("div",{className:"border border-right"}),n.createElement("div",{className:"border border-left"}),n.createElement("div",{className:"border border-top"}),n.createElement("div",{className:"border border-bottom"}),n.createElement("div",{className:"dialog-title"},"Carte"),n.createElement("div",{className:"dialog-content card-rules-dialog"},n.createElement("div",{className:"dialog-body"},Mn[o]&&n.createElement(n.Fragment,null,n.createElement("div",{className:"dialog-label"},Mn[o].name),n.createElement("img",{className:"current-card",src:"src/cards/card_".concat(o,".png"),alt:o}),n.createElement("div",{className:"text-rule"},Mn[o].rule),Mn[o].more?n.createElement("div",{className:"text-rule"},Mn[o].more):null))))},Rn=function(){var e=n.useState(!1),t=U(e,2),r=t[0],o=t[1],a=C();return n.createElement("div",{className:"header"},n.createElement("div",{className:"card-container",onClick:function(){a&&o(!0)}},n.createElement("div",{className:"small-card"},n.createElement(jn,null)),n.createElement(mn,null)),n.createElement(Tn,null),n.createElement(In,{dialogIsOpen:r,closeDialog:function(){o(!1)}}))},jn=function(){var e=C();return e?n.createElement(qn,{card:e}):n.createElement(Pn,null)},Pn=function(){return n.createElement("div",{className:"card default-card",style:{backgroundImage:"url('src/cards/card_default.png')",backgroundSize:"217px"}})},qn=function(e){var t=e.card;return n.createElement("div",{className:"card current-card",style:{backgroundColor:ae[t].color1,borderColor:ae[t].color2}},n.createElement("img",{src:"src/cards/card_small-".concat(F(t)?"sword-challenge":t,".png"),alt:t}))},Tn=function(){var e=ce();return n.createElement("div",{className:"total-score"},n.createElement("span",{className:"score"},e))},Ln=function(e){var t=e.openDialog,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rollDiceAllowed,n=void 0===t?je():t,r=e.markScoreAllowed,o=void 0===r?Te():r,a=e.hasDicesToCurse,c=void 0===a?Ie():a;return!n&&(!o&&!c)}(),o=_n();return r?n.createElement("div",{className:"next-round-action"},n.createElement("button",{onClick:function(){t(!0),o()}},"Tour suivant")):null},_n=P((function(e){return q(q({},e),{},{witchUncursedDiceId:null,roundStarted:!1,rollCount:0,dicesRolled:[],dicesCursed:[],chestSlots:{1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null,9:null},scoreMarked:!1,currentCard:null,isOnSkullIsland:!1})})),Fn=function(e){var t=e.dialogIsOpen,r=e.closeDialog,o=le(),a=C();return n.createElement(sn,{isOpen:t,onRequestClose:r,requestCloseOnClickOutside:!1},n.createElement("div",{className:"border border-right"}),n.createElement("div",{className:"border border-left"}),n.createElement("div",{className:"border border-top"}),n.createElement("div",{className:"border border-bottom"}),n.createElement("div",{className:"dialog-title"},"Suivant"),n.createElement("div",{className:"dialog-content draw-card-dialog"},n.createElement("div",{className:"dialog-body"},n.createElement("div",{className:"dialog-label"},0!==o.length||a?"Piochez une carte pour le tour suivant.":"Paquet de cartes épuisé. Mélangez-le pour pouvoir piocher à nouveau."),n.createElement("div",{className:"card-area"},n.createElement(Yn,null),n.createElement(Bn,null)),n.createElement(zn,null)),n.createElement("div",{className:"dialog-actions"},n.createElement(Kn,null),n.createElement(Vn,{closeDialog:r}))))},Bn=function(){var e=C();return e?n.createElement("div",{className:"card current-card"},n.createElement("div",{className:"flip-card"},n.createElement("div",{className:"flip-card-inner"},n.createElement("div",{className:"flip-card-front"},n.createElement("div",{className:"card default-card",style:{backgroundImage:"url('src/cards/card_default.png')"}})),n.createElement("div",{className:"flip-card-back"},n.createElement("img",{src:"src/cards/card_".concat(e,".png"),alt:e}))))):null},zn=function(){var e=C(),t=n.useState(!1),r=U(t,2),o=r[0],a=r[1];return e?n.createElement("div",{className:"card-description"},n.createElement("span",{className:"subtitle"},Mn[e].name),n.createElement("button",{className:"moreInfoIcon",onClick:function(){a(!o)}},o?n.createElement(Un,null):n.createElement(Hn,null)),n.createElement(Gn,{moreInfoVisible:o})):null},Gn=function(e){var t=e.moreInfoVisible,r=C();return t?Mn[r].more?n.createElement(n.Fragment,null,n.createElement("div",{className:"text-rule"},Mn[r].rule),n.createElement("div",{className:"text-rule"},Mn[r].more)):n.createElement("div",{className:"text-rule"},Mn[r].rule):null},Hn=function(){return n.createElement("svg",{viewBox:"0 0 24 24",height:"24px",width:"24px"},n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),n.createElement("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}))},Un=function(){return n.createElement("svg",{viewBox:"0 0 24 24",width:"24px",height:"24px"},n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),n.createElement("path",{d:"M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}))},Yn=function(){var e=le();return n.createElement("div",{className:"card default-card",id:"back-deck-card",style:{backgroundImage:"url('src/cards/card_default.png')"}},n.createElement("div",{className:"remaining-cards-number"},e.length))},Kn=function(){var e=C(),t=le();return e?null:0===t.length?n.createElement(Xn,null):n.createElement(Wn,null)},Wn=function(){var e=Ye();return n.createElement("button",{className:"draw-card-btn",onClick:e},"Piocher")},Xn=function(){var e=Xe();return n.createElement("button",{className:"draw-card-btn",onClick:function(){document.getElementById("back-deck-card").setAttribute("shaking-deck",""),setTimeout((function(){document.getElementById("back-deck-card").removeAttribute("shaking-deck",""),e()}),1e3)}},"Mélanger le paquet")},Vn=function(e){var t=e.closeDialog,r=C(),o=Be();return r?n.createElement("button",{className:"draw-card-btn",onClick:function(){o(),t()}},"Commencer"):null},Jn=function(e,t){var n=t.rolledAreaDomNode,r=ht(n),o={left:6.25,right:r.right-r.left-56.25,top:6.25,bottom:r.bottom-r.top-56.25},a=[],c=function(e){var t=0;return function n(){var r=Qn(e,o),c=Zn(),l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ut(e);return e.map((function(e){return it(n,e,t)}))}(r,c);return!a.some((function(e){return t=e,mt(l,(function(e){return dt(e,t)}));var t}))||t>50?{rectangle:r,rotation:c,rotatedRectangle:l}:(t++,n())}()};return e.forEach((function(e){e.visibleFaceIndex=$n(e);var t=c(e),n=t.rectangle,r=t.rotation,o=t.rotatedRectangle;a.push(o),e.rotation=r,e.rolledAreaPosition=n[0]})),e},Qn=function(e,t){var n={x:er(t.left,t.right),y:er(t.top,t.bottom)};return[{x:n.x,y:n.y},{x:n.x+50,y:n.y},{x:n.x+50,y:n.y+50},{x:n.x,y:n.y+50}]},Zn=function(){return er(-35,35)},$n=function(e){return er(0,e.faces.length-1)},er=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},tr=function(){var e=je(),t=Z(),r=nr();return e?n.createElement("div",{className:"roll-action"},n.createElement("button",{onClick:function(){r(t)}},"Lancer")):null},nr=P((function(e,t){var n=e.rollCount,o=e.dices,a=e.dicesRolled;return q(q({},e),{},{rollCount:n+1,dicesRolled:r(Jn(0===n?o:a,{rolledAreaDomNode:t}))})})),rr=function(){var e=_e(),t=Le(),r=n.useState(!1),o=U(r,2),a=o[0],c=o[1];return n.createElement("div",{className:"actions"},n.createElement(tr,null),n.createElement(Ln,{openDialog:function(){c(!0)}}),n.createElement(or,{onClick:function(){e(t)}}),n.createElement(Fn,{dialogIsOpen:a,closeDialog:function(){c(!1)}}))},or=function(e){var t=e.onClick,r=Te(),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hasRolledOnce,n=void 0===t?Se():t,r=e.scoreMarked,o=void 0===r?O():r,a=e.currentCard,c=void 0===a?C():a,l=e.hasDicesToCurse,i=void 0===l?Ie():l;return!o&&(!i&&(!!c&&!!n))}(),a=Le(),c=a<0?"-":"+";return o?n.createElement("div",{className:"collect-action"},n.createElement("button",{onClick:t,disabled:!r},n.createElement("span",null,"Collecter"),n.createElement("span",{className:"score"},c," ",Math.abs(a))),!r&&n.createElement("img",{src:"src/dices/dice_skull.png",className:"skull-symbol"})):null},ar=function(){var e=C(),t=w(),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.witchUncursedDiceId,n=void 0===t?x():t,r=e.currentCard,o=void 0===r?C():r,a=e.threeSkullsOrMoreInCursedArea,c=void 0===a?Pe():a;return!!S(o)&&(!c&&!n)}(),o=Ge();return n.createElement("div",{className:"skull-island"},S(e)?n.createElement(lr,null):null,n.createElement("div",{className:"bottle"},n.createElement("div",{className:"area"},M(e)?n.createElement(cr,{card:e}):null,R(e)?n.createElement(n.Fragment,null,n.createElement(cr,{card:e}),n.createElement(cr,{card:e})):null,t.map((function(e){return n.createElement(Ct,{key:e.id,dice:e,clickAllowed:r,onClickAction:function(e){o(e)},specificStyle:{margin:"1px 5px"}})})))))},cr=function(e){var t=e.card;return n.createElement("button",{className:"dice",style:{width:50,height:50,color:"#fcfcfc",margin:"1px 5px",backgroundColor:ae[t].color1,borderColor:ae[t].color2,borderWidth:"2px"}},n.createElement("img",{src:"src/dices/dice_skull.png",style:{width:"100%",height:"100%"}}))},lr=function(){return oe()?n.createElement("div",{className:"witch-label"},n.createElement("img",{src:"src/skull-island/witch-label.png"}),n.createElement("svg",{x:"0px",y:"0px",width:"156.083px",height:"208.667px",viewBox:"0 0 156.083 208.667"},n.createElement("path",{id:"path_01",fill:"none",stroke:"#E4AD30",d:"M8.406,107.82 c2.541,2.178,2.375,2.875,14.25,3.5c14.782,0.778,19.26-11.965,19.26-11.965S47.918,88,40.251,72.917s-18.916,4.583-9.083,8.167 s27.759-1.338,35.142-12.417C74.75,56,77.583,45.333,79.25,37S78.477,15.833,66.31,3.833"}),n.createElement("path",{id:"path_02",fill:"none",stroke:"#E4AD30",d:"M44.031,110.094 c0,0,1,1.313-4.438,3.344s-14.244,7.281-32.125-2"}),n.createElement("path",{id:"path_03",fill:"none",stroke:"#E4AD30",d:"M42.125,103.688 c0,0,1.313,6.594-9.313,8.625S10.281,108.719,9.406,101"}),n.createElement("path",{id:"path_04",fill:"none",stroke:"#E4AD30",d:"M33.114,112.253c0,0,39.886-19.253,43.011,24.747 c0.372,0.447-0.959,1.208-2.542,1.625"}))):n.createElement("img",{style:{display:"none"},src:"src/skull-island/witch-label.png"})},ir=n.useMemo;e("Game",(function(){var e=ie();return ir(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return function(o){return n.createElement(pe,{componentDisplayedOnError:t,onError:r},n.createElement(e,o))}}((function(){return n.createElement("div",{id:"game-container"},n.createElement("div",{id:"game",ref:e},n.createElement(ue,{onBoot:function(){window.removeSplashscreen()}},n.createElement(rt,{href:"/mille-sabord.css"}),n.createElement(Je,null),n.createElement(lt,null),n.createElement(Rn,null),n.createElement("div",{className:"chest-and-skulls"},n.createElement(Cn,null),n.createElement(ar,null)),n.createElement(Dt,null),n.createElement(rr,null))))}),(function(e){var t=e.error;return n.createElement("div",null,"An error occured",n.createElement("pre",null,t.stack))}),(function(){window.removeSplashscreen()})))}))}}}));
//# sourceMappingURL=game.component-7d360abc.js.map
