System.register(["./app.js"],(function(e,t){"use strict";var r,n,a,l,o,s,c,i,d,u,m,f,p,h,g,E,v,y,b,C,N,k,x,S,w,R,D,A,I,O,M,L,P,q,j,T,$,B,U,F,z,G,W,Y,Z,K,X,H,J,V,_,Q,ee,te,re,ne,ae,le,oe,se,ce,ie,de,ue,me,fe,pe,he,ge,Ee,ve,ye,be,Ce,Ne,ke,xe,Se;return{setters:[e=>{r=e._,n=e.l,a=e.a,l=e.u,o=e.s,s=e.c,c=e.d,i=e.i,d=e.b,u=e.S,m=e.e,f=e.f,p=e.g,h=e.h,g=e.j,E=e.k,v=e.m,y=e.n,b=e.o,C=e.p,N=e.q,k=e.r,x=e.t,S=e.v,w=e.w,R=e.x,D=e.y,A=e.z,I=e.A,O=e.B,M=e.C,L=e.D,P=e.E,q=e.F,j=e.G,T=e.H,$=e.I,B=e.J,U=e.K,F=e.L,z=e.M,G=e.N,W=e.O,Y=e.P,Z=e.Q,K=e.R,X=e.T,H=e.U,J=e.V,V=e.W,_=e.X,Q=e.Y,ee=e.Z,te=e.$,re=e.a0,ne=e.a1,ae=e.a2,le=e.a3,oe=e.a4,se=e.a5,ce=e.a6,ie=e.a7,de=e.a8,ue=e.a9,me=e.aa,fe=e.ab,pe=e.ac,he=e.ad,ge=e.ae,Ee=e.af,ve=e.ag,ye=e.ah,be=e.ai,Ce=e.aj,Ne=e.ak,ke=e.al,xe=e.am,Se=e.an}],execute:function(){const we=new Map,Re="loading",De="loaded",Ae="failed",Ie=(e,{lazy:t=!1}={})=>{const a=we.get(e)?De:Re,[l,o]=r.useState(a),s=r.useRef(!1);r.useEffect((()=>(s.current=!0,()=>{s.current=!1})),[]);const c=r.useCallback((async()=>{if(l!==De)try{const t=await n(e);if(!s.current)return void console.log("image unmounted");we.set(e,t),o(De)}catch(t){if(!s.current)return;we.delete(e),o(Ae)}}),[o,e]);return r.useEffect((()=>{t||c()}),[t]),[l,c]},Oe=(e,t=[],{layout:n=!1}={})=>{const a=r.useRef(!0);(n?r.useLayoutEffect:r.useEffect)((()=>{if(!a.current)return e();a.current=!1}),t)},Me=(e,t)=>{const r=Le(e,t);return Boolean(r)},Le=(e,t)=>{const n=r.useRef(!1);r.useEffect((()=>{!1===n.current&&(n.current=!0)}));const a=r.useRef(t);return r.useEffect((()=>{a.current=t}),t),n.current&&e(...a.current)?{from:a.current,to:t}:null},Pe=e=>{const t=r.useRef(e);return r.useEffect((()=>{t.current=e}),[e]),t.current},qe=({loadWhenIntersecting:e=!0,usePlaceholderWhileLoading:t=!0,animateLoaded:n=!0,intersectionRoot:o,intersectionRootMargin:s,intersectionThreshold:c,FallbackWhileNotIntersecting:i=$e,FallbackWhileLoading:d=Te,useImageStatusHook:u=Ie,src:m,...f})=>{const[p,h]=u(m,{lazy:e}),g=Pe(p),[E,v]=l(m);r.useEffect((()=>{"loading"!==g&&"loading"===p&&E(),"loaded"!==g&&"loaded"===p&&v()}),[g,p]);const[y,b]=(({root:e,rootMargin:t,threshold:n=0})=>{const[a,l]=r.useState(!1),o=r.useRef();return r.useEffect((()=>{const r=o.current;if(!r)return null;if(a)return null;const s=new window.IntersectionObserver((([e])=>{e.isIntersecting?(s.unobserve(r),l(!0)):l(!1)}),{root:e,rootMargin:t,threshold:n});return s.observe(r),()=>{s.disconnect()}}),[a]),[o,a]})({root:o,rootMargin:s,threshold:c}),C=Pe(b);r.useEffect((()=>{e&&!C&&b&&h()}),[e,C,b]);const[N,k]=je();return r.useLayoutEffect((()=>{n&&"loaded"!==g&&"loaded"===p&&k()}),[n,g,p]),e&&"loaded"!==p&&!b?r.createElement(i,{ref:y}):t&&"loaded"!==p?r.createElement(d,null):r.createElement("img",a({src:m,ref:N},f))},je=()=>{const e=r.useRef(),t=r.useCallback((()=>{const t=e.current,r=window.getComputedStyle(t).getPropertyValue("opacity");t.animate([{opacity:0},{opacity:r}],{duration:300})}));return[e,t]},Te=r.forwardRef(((e,t)=>r.createElement("img",a({src:Be,ref:t},e)))),$e=r.forwardRef(((e,t)=>r.createElement("img",a({src:Be,ref:t},e)))),Be="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",Ue=()=>r.createElement(Fe,null),Fe=()=>{const e=ze();return r.createElement("div",{className:"new-game"},r.createElement(qe,{src:o}),r.createElement("button",{onClick:e},"Nouvelle partie"))},ze=s((e=>({...e,gameCreated:!0}))),Ge=(e,t)=>{if(e&&"symbol"===e.type)return e.value;if(e&&"dice"===e.type){const r=t[e.value];return c(r)}return null},We=(e,{goal:t,gamble:r})=>Ye(e,v)>=t?Ze(e)+r:-r,Ye=(e,t)=>e.filter((e=>e===t)).length,Ze=(e,t)=>{const{score:r,perfectBonus:n}=Ke(e,t);return r+n},Ke=(e,t=8)=>{let r=0,n=0;const a=Xe(e);return Object.values(a).forEach((e=>{3===e&&(r+=100),4===e&&(r+=200),5===e&&(r+=500),6===e&&(r+=1e3),7===e&&(r+=2e3),8===e&&(r+=4e3),e>2&&(n+=e)})),e.forEach((e=>{e===g&&(r+=100,a[g]<3&&(n+=1)),e===E&&(r+=100,a[E]<3&&(n+=1))})),{score:r,perfectBonus:n===t?500:0}},Xe=e=>{const t={};return e.forEach((e=>{t.hasOwnProperty(e)?t[e]++:t[e]=1})),t},{useMemo:He}=r,Je=({currentPlayerId:e=y(),players:t=b()}={})=>t.find((t=>t.id===e)),Ve=({rollCount:e=x()}={})=>0===e,_e=({rollCount:e=x()}={})=>e>0,Qe=({dices:e=S(),chestSlots:t=w()}={})=>Object.keys(t).reduce(((r,n)=>{const a=Ge(t[n],e);return a?[...r,a]:r}),[]),et=({skullCountInCursedArea:e=ot()}={})=>3-e,tt=({dicesToCurse:e=rt()}={})=>e.length>0,rt=({dices:e=S(),diceRolledIds:t=R(),witchUncursedDiceId:r=D(),remainingSpotInCursedArea:n=et()}={})=>t.map((t=>e[t])).filter((e=>!!A(e)&&e.id!==r)).slice(0,n),nt=({currentCardId:e=O(),hasNeverRolled:t=Ve(),scoreMarked:r=q(),threeSkullsOrMoreInCursedArea:n=lt(),hasDicesToCurse:a=tt()}={})=>!!e&&(!r&&(!!t||(n?!!j(C(e)):!a))),at=({dicesToCurse:e=rt(),skullCountInCursedArea:t=ot()}={})=>e.length+t,lt=({skullCountInCursedArea:e=ot()}={})=>e>2,ot=({diceCursedIds:e=I(),symbolsFromCard:t=st()}={})=>e.length+t.filter((e=>N(e))).length,st=({currentCardId:e=O()}={})=>{if(!e)return[];const t=C(e);return p(t)?[E]:h(t)?[g]:M(t)?[L]:P(t)?[L,L]:[]},ct=({scoreMarked:e=q(),currentCardId:t=O(),threeSkullsOrMoreInCursedArea:r=lt(),hasDicesToCurse:n=tt()}={})=>!e&&(r?!!j(C(t)):!n&&!!t),it=({currentCardId:e=O(),symbolsInChest:t=Qe(),scoreMarked:r=q(),markScoreAllowed:n=ct()}={})=>He((()=>(({card:e,symbolsInChest:t,scoreMarked:r,markScoreAllowed:n})=>i(e)?r||n?We(t,{goal:e.numberOfSwords,gamble:e.gambleAmount}):-e.gambleAmount:d(e)?Ze(t.map((e=>e===u?m:e))):f(e)?2*Ze(t):p(e)||h(e)?Ze(t,9):Ze(t))({card:C(e),symbolsInChest:t,scoreMarked:r,markScoreAllowed:n})),[e,t,r,n]),dt=()=>{const e=O(),t=C(e),r=Qe(),n=Ye(r,v),a=ut();return!!i(t)&&n<a},ut=({currentCardId:e=O()}={})=>{const t=C(e);return i(t)?t.numberOfSwords:null},mt=s(((e,t)=>({...e,currentPlayerId:t.id,currentCardId:null,currentCardActivated:!1,roundStarted:!0,...Et}))),ft=s((e=>({...e,currentCardId:null,currentCardActivated:!1,roundStarted:!1}))),pt=s((e=>({...e,currentCardActivated:!0}))),ht=s((e=>({...e,isOnSkullIsland:!0}))),gt=s(((e,t)=>{const{players:r,currentPlayerId:n}=e,a=r.find((({id:e})=>e===n)),l=a.score+t;return a.score=l<0?0:l,{...e,players:[...r],scoreMarked:!0}})),Et={witchUncursedDiceId:null,witchCardEffectUsed:!1,rollCount:0,diceRolledIds:[],diceCursedIds:[],chestSlots:{1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null,9:null},scoreMarked:!1,isOnSkullIsland:!1},vt=s(((e,t,{x:r,y:n},a)=>{const{dices:l}=e;return t.rolledAreaPosition={x:r,y:n},t.rolledAreaZIndex=a,{...e,dices:{...l}}})),yt=s(((e,t,r)=>{const{chestSlots:n}=e,a=Object.keys(n).find((e=>{const r=n[e];return r&&"dice"===r.type&&r.value===t.id}));return{...e,chestSlots:{...n,...a?{[a]:null}:{},[r]:{type:"dice",value:t.id}}}})),bt=s(((e,t)=>{const{diceRolledIds:r,diceCursedIds:n}=e;return{...e,diceRolledIds:r.filter((e=>e!==t.id)),diceCursedIds:[...n,t.id]}})),Ct=s(((e,t,r=!1)=>{const{diceRolledIds:n,diceCursedIds:a}=e;return{...e,...r?{}:{witchUncursedDiceId:t.id,witchCardEffectUsed:!0},diceRolledIds:[...n,t.id],diceCursedIds:a.filter((e=>e!==t.id))}})),Nt=s(((e,t)=>{const{diceRolledIds:r,chestSlots:n}=e,a=Object.keys(n).find((e=>{const r=n[e];return r&&"dice"===r.type&&r.value===t.id}));return{...e,diceRolledIds:[...r,t.id],chestSlots:{...n,[a]:null}}})),kt=s(((e,t,r)=>{const{diceRolledIds:n,chestSlots:a}=e;return{...e,diceRolledIds:n.filter((e=>e!==t.id)),chestSlots:{...a,[r]:{type:"dice",value:t.id}}}})),{useEffect:xt}=r,St=()=>(wt(),null),wt=()=>{Rt(),Dt(),At()},Rt=()=>{const e=T(),t=rt(),r=bt();xt((()=>{if(0===t.length)return()=>{};if(e)return t.forEach((e=>{r(e)})),()=>{};const n=setTimeout((()=>{t.forEach((e=>{r(e)}))}),1e3);return()=>{clearTimeout(n)}}),[t])},Dt=()=>{const e=C(O()),t=q(),r=gt(),n=lt(),a=Me((e=>!e&&n),[n]),l=it(),o=i(e);xt((()=>{o&&!t&&a&&r(l)}),[o,t,a,l])},At=()=>{const e=(({rollCount:e=x()}={})=>1===e)(),t=C(O()),r=$(),n=ot(),a=ht();xt((()=>{e&&(r||i(t)||n<4||a())}),[e,r,t,n])},It=s((e=>{const{cardIds:t,cardUsedIds:r}=e,n=t[0];return{...e,cardIds:t.slice(1),cardUsedIds:[...r,n],currentCardId:n}})),Ot=s((e=>{const{chestSlots:t}=e;return{...e,chestSlots:{...t,1:{type:"symbol",value:E}}}})),Mt=s((e=>{const{chestSlots:t}=e;return{...e,chestSlots:{...t,1:{type:"symbol",value:g}}}})),Lt=s((e=>{const{cardIds:t,cardUsedIds:r}=e;return{...e,cardIds:B([...t,...r]),cardUsedIds:[]}})),Pt=()=>(qt(),jt(),null),qt=()=>{const e=Ot(),t=O(),n=U(),a=Me((e=>!e===n),[n]),l=t&&p(C(t));r.useEffect((()=>{l&&e()}),[]),r.useEffect((()=>{a&&l&&e()}),[a,l])},jt=()=>{const e=Mt(),t=O(),n=U(),a=Me((e=>!e===n),[n]),l=t&&h(C(t));r.useEffect((()=>{l&&e()}),[]),r.useEffect((()=>{a&&l&&e()}),[a,l])},Tt=()=>{const[e]=r.useState((()=>(()=>{let e=[];return{listen:(t,{once:r=!1}={})=>{if(r){const e=t;t=(...t)=>{a(),e(...t)}}e=[...e,t];let n=!1;const a=()=>{if(n)return;n=!0;const r=[];let a=e.length,l=!0;for(;a--;){const n=e[a];l&&n===t?l=!1:r.push(n)}e=r};return a},emit:(...t)=>{e.forEach((e=>{e(...t)}))}}})()));return[e.listen,e.emit]},$t=e=>{const[t,n]=r.useState();return r.useEffect((()=>e(n)),[]),t},Bt=({rolledAreaRef:e,offscreenRef:t,diceOverRolledAreaListener:n})=>{const a=$t(n);return r.createElement("div",{className:"dice-ongoing"},r.createElement("div",{className:"map"}),r.createElement("div",{className:"area",ref:e,style:{...a?{outline:"2px dotted"}:{}}}),r.createElement("div",{className:"offscreen-area",ref:t}))},Ut=({duration:e=300,timingFunction:t=(e=>e),onProgress:r=(()=>{}),onCancel:n=(()=>{}),onComplete:a=(()=>{})})=>{if(isNaN(e))return console.warn(`duration must be a number, received ${e}`),()=>{};e=parseInt(e,10);const l=performance.now();let o,s=!1,c=0,i=0;const d=()=>{o=null;const n=performance.now();c=Math.min((n-l)/e,1),i=t(c),s=1===c,r({done:s,rawProgress:c,progress:i}),s?a():o=window.requestAnimationFrame(d)};d();return()=>{o&&(window.cancelAnimationFrame(o),o=null),s||(s=!0,n({rawProgress:c,progress:i}))}},Ft=(e,{duration:t=300,timingFunction:n,condition:a}={})=>{const[l,o]=r.useState(null);return zt(e,((e,r)=>(o({value:e}),Ut({duration:t,timingFunction:n,onProgress:({progress:t})=>{const n=Math.round(e+(r-e)*t);o({value:n})},onComplete:()=>{o(null)}}))),{condition:a}),l},zt=(e,t,{condition:n=(()=>!0)}={})=>{const[a,l]=r.useState(null),o=Pe(e);r.useEffect((()=>{o!==e&&n(e,o)&&l({from:o,to:e})}),[o,e]),r.useEffect((()=>a?t(a.from,a.to):()=>{}),[a])},Gt=({value:e,duration:t,condition:r})=>{const n=Ft(e,{duration:t,condition:r});return n?n.value:e},Wt=({href:e,onLoad:t=(()=>{})})=>{const[n,a]=l(e);return r.useEffect((()=>(n(),Yt(e,{onload:()=>{a(),t()}}))),[e]),null},Yt=(e=>{const t=new Map,r=e=>{if(!t.has(e))return;const{useCount:r,...n}=t.get(e);r>1?t.set(e,{useCount:r-1,...n}):(t.delete(e),n.linkCleanup())};return(n,...a)=>{if(t.has(n)){const{useCount:e,...a}=t.get(n);return t.set(n,{useCount:e+1,...a}),r}const l=e(n,...a);return t.set(n,{useCount:1,linkCleanup:l}),r}})(((e,{onload:t=(()=>{})}={})=>{const r=document.createElement("link");r.rel="stylesheet",r.type="text/css";const n=F(r,t);return r.href=e,document.head.appendChild(r),()=>{n(),document.head.removeChild(r)}})),Zt=(e,t)=>{const r=Xt(e,e);let{done:n,value:a}=r.next();for(;!1===n;){if(t(a))return a;({done:n,value:a}=r.next())}return null},Kt=(e,t,r=!1)=>{if(!r){const t=e.firstChild;if(t)return t}const n=e.nextSibling;if(n)return n;const a=e.parentNode;return a&&a!==t?Kt(a,t,!0):null},Xt=(e,t)=>{let r=e;return{next:()=>{const e=Kt(r,t);return r=e,{done:!1===Boolean(e),value:e}}}},Ht=(e,t,r=!1)=>{let n=e,a=!1;return{next:()=>{const e=Kt(n,t,r&&!1===a);return a=!0,n=e,{done:!1===Boolean(e),value:e}}}},Jt=e=>{let t=e.lastChild;for(;t;){const e=t.lastChild;if(!e)break;t=e}return t},Vt=(e,t)=>{let r=e;return{next:()=>{const e=((e,t)=>{const r=e.previousSibling;if(r){return Jt(r)||r}if(e!==t){const r=e.parentNode;if(r&&r!==t)return r}return null})(r,t);return r=e,{done:!1===Boolean(e),value:e}}}},_t=e=>{const t=Zt(e,z);return t||(z(e)?e:null)},Qt=e=>{if(3===e.nodeType)return console.warn("cannot trap focus inside a text node"),()=>{};if(rr.find((t=>t.element===e)))return console.warn("focus already trapped inside this element"),()=>{};const t=()=>Zt(e,er),r=()=>((e,t)=>{const r=Jt(e);if(r){const n=Vt(r,e);let{done:a,value:l}=n.next();for(;!1===a;){if(t(l))return l;({done:a,value:l}=n.next())}}return null})(e,er),n=()=>(({from:e,root:t=null,predicate:r})=>{const n=Vt(e,t);let{done:a,value:l}=n.next();for(;!1===a;){if(r(l))return l;({done:a,value:l}=n.next())}return null})({from:document.activeElement,root:e,predicate:er})||r(),a=()=>(({from:e,root:t=null,predicate:r,skipChildren:n=!1})=>{const a=Ht(e,t,n);let{done:l,value:o}=a.next();for(;!1===l;){if(r(o))return o;({done:l,value:o}=a.next())}return null})({from:document.activeElement,root:e,predicate:er})||t(),l=nr({element:e,lock:()=>{const l=t=>{(t=>t.target!==e&&!e.contains(t.target))(t)&&(t.preventDefault(),t.stopImmediatePropagation())},o=e=>{tr(e)&&(e.preventDefault(),(e=>{const l=document.activeElement===document.body;if(e.shiftKey){const e=l?r():n();e&&e.focus()}else{const e=l?t():a();e&&e.focus()}})(e))};return document.addEventListener("mousedown",l,{capture:!0,passive:!1}),document.addEventListener("keydown",o,{capture:!0,passive:!1}),()=>{document.removeEventListener("mousedown",l,{capture:!0,passive:!1}),document.removeEventListener("keydown",o,{capture:!0,passive:!1})}}});return()=>{l()}},er=e=>!(e=>e.hasAttribute&&e.hasAttribute("tabIndex")&&Number(e.getAttribute("tabindex"))<0)(e)&&z(e),tr=e=>"Tab"===e.key||9===e.keyCode,rr=[],nr=({lock:e})=>{let t;rr.length>0&&(t=rr[rr.length-1],t.unlock());const r={lock:e,unlock:e()};return rr.push(r),()=>{if(0===rr.length)return void console.warn("cannot deactivate an already deactivated trap");const e=rr[rr.length-1];r===e?(rr.pop(),r.unlock(),t&&(t.unlock=t.lock())):console.warn("you must deactivate trap in the same order they were activated")}},ar=e=>{const t=[],r=e=>{const n=lr(e);if(n){if(t.push(n),n===document)return;r(n)}};return r(e),t},lr=e=>{if("object"!=typeof e||1!==e.nodeType)throw new TypeError("getScrollableParent first argument must be DOM node");const t=e;if(t===document.documentElement)return null;return"fixed"===G(t,"position")?or(t.ownerDocument):gr(t)||or(t.ownerDocument)},or=e=>{if("scrollingElement"in e)return e.scrollingElement;if(ur(e))return e.documentElement;const t=e.body,r=t&&!/body/i.test(t.tagName)?sr(t):t;return r&&ir(r)?null:r},sr=e=>{let t=e;for(;t=t.nextSibling;)if(1===t.nodeType&&cr(t))return t;return null},cr=e=>e.ownerDocument.body===e,ir=e=>{if(!fr(e))return!1;if(dr(e))return!1;const t=e.ownerDocument.documentElement;return!!fr(t)&&!dr(t)},dr=e=>{const t=G(e,"display");return"none"!==t&&("table-row"!==t&&"table-group"!==t&&"table-column"!==t||"collapsed"!==G(e,"visibility"))},ur=e=>!!/^CSS1/.test(e.compatMode)&&mr(e),mr=e=>{const t=e.createElement("iframe");t.style.height="1px";(e.body||e.documentElement||e).appendChild(t);const r=t.contentWindow.document;r.write('<!DOCTYPE html><div style="height:9999em">x</div>'),r.close();const n=r.documentElement.scrollHeight>r.body.scrollHeight;return t.parentNode.removeChild(t),n},fr=e=>!pr(e)||!hr(e),pr=e=>{if("visible"===G(e,"overflow-x"))return!0;return"visible"===G(e,"overflow")},hr=e=>{if("visible"===G(e,"overflow-y"))return!0;return"visible"===G(e,"overflow")},gr=e=>{if(e===document.documentElement)return null;const t=G(e,"position");let r=e.parentNode;for(;r;){if(W(r))return null;if("absolute"!==t||"static"!==G(r,"position")){if(fr(r))return r;r=r.parentNode}else r=r.parentNode}return null},Er=new URL(System.resolve("./assets/dialog.base.css",t.meta.url)),{useEffect:vr}=r,yr=({container:e=document.body,insertTop:t,insertLeft:n,insertRight:l,insertBottom:o,children:s,isOpen:c,requestCloseOnEscape:i=!0,requestCloseOnClickOutside:d=!1,closeMethod:u="display-none",stealFocus:m=!0,restoreStolenFocus:f=!0,trapFocus:p=!0,onAfterOpen:h=(()=>{}),onRequestClose:g=(()=>{}),onFocusIn:E=(()=>{}),onFocusOut:v=(()=>{}),backdropProps:y={},...b})=>{if(!e)return null;const[C,N]=r.useState(null),k=Boolean(C);return Me((e=>!e&&c),[c])&&h(),vr((()=>{if(!c||!k)return()=>{};let e=Cr(C);const t=t=>{t.relatedTarget||e&&(e=!1,v(t))},r=t=>{E(t),e=!0},n=t=>{Cr(C)?e=!0:(e=!1,v(t))};return C.addEventListener("focus",r,!0),document.addEventListener("focus",n,!0),document.addEventListener("blur",t,!0),()=>{C.removeEventListener("focus",r,!0),document.removeEventListener("focus",n,!0),document.removeEventListener("blur",t,!0)}}),[c,k,E,v]),vr((()=>c&&k?(e=>{const t=[];let r=e.previousSibling;for(;r;)1===r.nodeType&&fr(r)&&t.push(r),r=r.previousSibling;const n=ar(e);t.push(...n);const a=t.map((e=>{const t=e.style.overflow;return e.style.overflow="hidden",()=>{t?e.style.overflow=t:e.style.removeProperty("overflow")}}));return()=>{a.forEach((e=>{e()}))}})(C):()=>{}),[c,k]),vr((()=>c&&k&&p?Qt(C):()=>{}),[c,k,p]),vr((()=>{if(!c||!k||!m)return()=>{};const e=document.activeElement,t=_t(C);return t&&t.focus({preventScroll:!0}),()=>{t&&("function"==typeof f?f(e):!0===f&&e.focus({preventScroll:!0}))}}),[c,k,m]),vr((()=>{if(!c||!C||!C.parentNode)return()=>{};const e=[];return Array.from(C.parentNode.children).forEach((t=>{t!==C&&e.push(t)})),e.forEach((e=>{e.setAttribute("aria-hidden","true")})),()=>{e.forEach((e=>{e.removeAttribute("aria-hidden","true")}))}}),[c,C]),"dom-remove"!==u||c?Y.createPortal(r.createElement("div",a({},b,{role:"dialog",className:"dialog--root"+(b.className?` ${b.className}`:""),ref:e=>{N(e),b.ref&&b.ref(e)},onKeyDown:e=>{i&&e.keyCode===Nr&&g(e),b.onKeyDown&&b.onKeyDown(e)},tabIndex:"-1",style:{..."display-none"!==u||c?{}:{display:"none"},..."visibility-hidden"!==u||c?{}:{visibility:"hidden"}},hidden:"hidden-attribute"===u&&!c||void 0}),r.createElement(Wt,{href:Er}),c?r.createElement(br,a({},y,{className:"dialog--backdrop",onMouseDownActive:e=>{if(e.preventDefault(),!Cr(C)){const e=_t(C);e&&e.focus({preventScroll:!0})}},onClick:e=>{d&&g(e),y.onClick&&y.onClick(e)}})):null,r.createElement("div",{className:"dialog--document"},r.createElement("div",{className:"dialog--insert-top"},t),r.createElement("div",{className:"dialog--main"},r.createElement("div",{className:"dialog--insert-left"},n),r.createElement("div",{className:"dialog--scrollable-content"},s),r.createElement("div",{className:"dialog--insert-right"},l)),r.createElement("div",{className:"dialog--insert-bottom"},o))),e):null},br=({onMouseDownActive:e,...t})=>{const[n,l]=r.useState(null);return vr((()=>n?(n.addEventListener("mousedown",e,{passive:!1}),()=>{n.removeEventListener("mousedown",e,{passive:!1})}):()=>{}),[n]),r.createElement("div",a({ref:e=>{l(e),t.ref&&t.ref(e)}},t))},Cr=e=>{const{activeElement:t}=document;return e===t||e.contains(t)},Nr=27,kr=new URL(System.resolve("./assets/dialog.css",t.meta.url)),xr=e=>r.createElement(r.Fragment,null,r.createElement(Wt,{href:kr}),r.createElement(yr,a({container:Z()},e))),Sr=(e=!1)=>{const[t,n]=r.useState(e);return[t,()=>{n(!0)},()=>{n(!1)}]},wr=()=>r.createElement("div",{className:"star-rain-container"},r.createElement("div",{className:"star",id:"star-01"},r.createElement(Rr,null)),r.createElement("div",{className:"star",id:"star-02"},r.createElement(Rr,null)),r.createElement("div",{className:"star",id:"star-03"},r.createElement(Rr,null)),r.createElement("div",{className:"star",id:"star-04"},r.createElement(Rr,null)),r.createElement("div",{className:"star",id:"star-05"},r.createElement(Rr,null)),r.createElement("div",{className:"star",id:"star-06"},r.createElement(Rr,null))),Rr=()=>r.createElement("svg",{viewBox:"0 0 217.791 210.633"},r.createElement("path",{fill:"#FFFFE6",d:"M94.15,77.97c0,0-2-54,10-73.5s23,28.5,25.5,72.5c0,0,69.197,4.589,86.5,21c13.637,12.934-61.5,31-87,33.5 c-2,14.5-1.831,60.464-16.5,75.5c-20,20.5-25.5-50.5-23-78c-19-1.5-81.5-3.5-89-17.5S52.15,85.97,94.15,77.97z"})),Dr=()=>r.createElement("svg",{viewBox:"0 0 320 512",width:"32",heiht:"32"},r.createElement("path",{fill:"currentColor",d:"M207.6 256l107.72-107.72c6.23-6.23 6.23-16.34 0-22.58l-25.03-25.03c-6.23-6.23-16.34-6.23-22.58 0L160 208.4 52.28 100.68c-6.23-6.23-16.34-6.23-22.58 0L4.68 125.7c-6.23 6.23-6.23 16.34 0 22.58L112.4 256 4.68 363.72c-6.23 6.23-6.23 16.34 0 22.58l25.03 25.03c6.23 6.23 16.34 6.23 22.58 0L160 303.6l107.72 107.72c6.23 6.23 16.34 6.23 22.58 0l25.03-25.03c6.23-6.23 6.23-16.34 0-22.58L207.6 256z"})),Ar=({title:e,spacingClasses:t,children:n,...l})=>r.createElement(xr,a({requestCloseOnClickOutside:!0,insertTop:r.createElement(r.Fragment,null,r.createElement("div",{className:"dialog-border-top"}),r.createElement("div",{className:"dialog-title"},r.createElement("div",{className:"dialog-title-text"},e)),r.createElement("div",{className:"dialog-close",onClick:l.onRequestClose},r.createElement(Dr,null))),insertBottom:r.createElement("div",{className:"dialog-border-bottom"}),insertLeft:r.createElement("div",{className:"dialog-border-left"}),insertRight:r.createElement("div",{className:"dialog-border-right"})},l,{className:`dialog-theme-wood ${t||"dialog-spacing-10 dialog-spacing-fluid dialog-spacing-top-fixed"} ${l.className}`}),n),Ir=({dialogIsOpen:e,closeDialog:t})=>r.createElement(Ar,{className:"score-rules-dialog",isOpen:e,onRequestClose:t,requestCloseOnClickOutside:!0,title:"Score",spacingClasses:"dialog-spacing-10 dialog-spacing-fixed"},r.createElement(r.Fragment,null,r.createElement("div",{className:"dialog-box"},r.createElement("div",{className:"dialog-label"},"Combinaisons de dés"),r.createElement("div",{className:"columns"},r.createElement("div",{className:"column"},r.createElement("div",{className:"column-title"},"Symbols identiques"),r.createElement("span",{className:"symbol-number"},"Combo 3"),r.createElement("span",{className:"symbol-number"},"Combo 4"),r.createElement("span",{className:"symbol-number"},"Combo 5"),r.createElement("span",{className:"symbol-number"},"Combo 6"),r.createElement("span",{className:"symbol-number"},"Combo 7"),r.createElement("span",{className:"symbol-number"},"Combo 8")),r.createElement("div",{className:"column"},r.createElement("div",{className:"column-title"},"Points"),r.createElement("span",{className:"points"},"100"),r.createElement("span",{className:"points"},"200"),r.createElement("span",{className:"points"},"500"),r.createElement("span",{className:"points"},"1000"),r.createElement("span",{className:"points"},"2000"),r.createElement("span",{className:"points"},"4000")))),r.createElement("div",{className:"dialog-box"},r.createElement("div",{className:"dialog-label"},"Dés spéciaux"),r.createElement("div",{className:"columns"},r.createElement("div",{className:"column"},r.createElement("div",{className:"column-title"},"Symbol"),r.createElement(qe,{src:K}),r.createElement(qe,{src:X})),r.createElement("div",{className:"column"},r.createElement("div",{className:"column-title"},"Points"),r.createElement("span",{className:"points"},"100"),r.createElement("span",{className:"points"},"100")))),r.createElement("div",{className:"dialog-box last"},r.createElement("div",{className:"dialog-label"},"Bonus coffre parfait"),r.createElement("div",{className:"columns"},r.createElement("div",{className:"column"},r.createElement("div",{className:"column-title"},"Dés utilisés"),r.createElement("span",{className:"symbol-number"},"8")),r.createElement("div",{className:"column"},r.createElement("div",{className:"column-title"},"Points"),r.createElement("span",{className:"points"},"500")))))),Or=({totalScore:e=0,onScoreParticleAdded:t=(()=>{}),onScoreParticleRemoved:n=(()=>{}),onScoreParticleMerged:a=(()=>{})}={})=>{const[l,o]=r.useState(e),[s,c]=r.useState([]);r.useEffect((()=>{o(e)}),[e]);const i=s.reduce(((e,t)=>e+t.value),0);return[s,({id:e,value:r,...l})=>{const s={id:e,value:r,...l,oncancel:()=>{i()},onfinish:()=>{i(),a(s),o((e=>e+r))}},i=(e=>{c((t=>[...t,e])),t(e);let r=!1;return()=>{r||(r=!0,c((t=>t.filter((t=>t!==e)))),o((t=>t-e.value)),n(e))}})(s);return i},l-i]},Mr=(e,t,r=(([e,t,r,n])=>({x:(e.x+t.x+r.x+n.x)/4,y:(e.y+t.y+r.y+n.y)/4}))(e))=>e.map((e=>((e,t,r)=>{const n=Lr(r),a=Math.cos(n),l=Math.sin(n),o=t.x-e.x,s=t.y-e.y;return{x:Math.round(a*o+l*s+e.x),y:Math.round(a*s-l*o+e.y)}})(r,e,t))),Lr=e=>e*Math.PI/180,Pr=(e,t)=>!!qr(t,(t=>(([e,t],[r,n])=>{let a=(n.x-r.x)*(e.y-r.y)-(n.y-r.y)*(e.x-r.x),l=(t.x-e.x)*(e.y-r.y)-(t.y-e.y)*(e.x-r.x);const o=(n.y-r.y)*(t.x-e.x)-(n.x-r.x)*(t.y-e.y);return(0!==a||0!==l||0!==o)&&(0!==o&&(a/=o,l/=o,a>=0&&a<=1&&l>=0&&l<=1))})(e,t))),qr=([e,t,r,n],a)=>{if(a([e,t]))return!0;if(a([t,r]))return!0;if(a([r,n]))return!0;return!!a([n,e])},jr=(e,t)=>{let r=e.left,n=e.right;const a=n-r;r<t.left?(r=t.left,n=r+a):n>t.right&&(r=t.right-a,n=r+a);let l=e.top,o=e.bottom;const s=o-l;return l<t.top?(l=t.top,o=l+s):o>t.bottom&&(l=t.bottom-s,o=l+s),{left:r,right:n,top:l,bottom:o}},Tr=({left:e,right:t,top:r,bottom:n})=>({x:e+(t-e)/2,y:r+(n-r)/2}),$r=(e,t)=>((e,t)=>{const r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)})(Tr(e),Tr(t)),Br=e=>{const t=e.getBoundingClientRect(),r=H(e),n=t.left+r.x,a=t.top+r.y,l=n+t.width,o=a+t.height;return{left:Math.floor(n),top:Math.floor(a),right:Math.floor(l),bottom:Math.floor(o)}},Ur=(e,t)=>{const r=Br(e);return a=t,!((n=r).right<=a.left||n.left>=a.right||n.bottom<=a.top||n.top>=a.bottom);var n,a},Fr=(e,t)=>{const r=e.map((e=>Br(e))),n=((e,t)=>{let r=$r(t,e[0]);return e.reduce(((e,n)=>{const a=$r(t,n);return a<r?(r=a,n):e}))})(r,t);return e[r.indexOf(n)]},zr=({x:e,y:t},{color:r="yellow",autoRemove:n=!0,autoRemoveAfter:a=2e3}={})=>{const l=document.createElement("div");l.style.position="absolute",l.style.zIndex="1000",l.style.left=`${e}px`,l.style.top=`${t}px`,l.style.width="5px",l.style.height="5px",l.style.background=r,l.style.border="1px solid red",document.body.appendChild(l);const o=()=>{document.body.removeChild(l)};let s;return n&&(s=setTimeout(o,a)),()=>{o(),clearTimeout(s)}},Gr=({totalScoreDomNodeRef:e,scoreParticle:t,animationDelayGetter:n=(()=>0)})=>"bonus"===t.type?r.createElement(Wr,{totalScoreDomNodeRef:e,scoreParticle:t,animationDelayGetter:n}):"combo"===t.type?r.createElement(Yr,{scoreParticle:t,animationDelayGetter:n}):r.createElement(Zr,{scoreParticle:t,animationDelayGetter:n}),Wr=({totalScoreDomNodeRef:e,scoreParticle:t,animationDuration:n=800,animationDelayGetter:a})=>{const l=J(t.symbol),o=r.useRef();return r.useEffect((()=>{const r=o.current,l=e.current,s=Jr(document.querySelector(`[data-chest-slot="${t.chestSlot}"]`));return Kr({particleDomNode:r,totalScoreDomNode:l,x:s.x,y:s.y,duration:n,delay:a(),onfinish:t.onfinish,oncancel:t.oncancel})}),[]),r.createElement("svg",{ref:o,width:"32",height:"32",className:"score-particle--symbol"},r.createElement("image",{href:l,width:"32",height:"32"}),",")},Yr=({scoreParticle:e,animationDuration:t=800,animationDelayGetter:n})=>{const[a,l]=Hr();return r.useEffect((()=>{const r=a.current,l=Jr(document.querySelector(".chest .box"));return Xr({particleDomNode:r,x:l.x,y:l.y,duration:t,delay:n(),onfinish:e.onfinish,oncancel:e.oncancel})}),[]),r.createElement("svg",{ref:a,className:"score-particle--perfect"},r.createElement("g",{ref:l},r.createElement("text",{x:"0",y:"0",dominantBaseline:"text-before-edge"},"Combo ",e.symbolCount)))},Zr=({scoreParticle:e,animationDuration:t=800,animationDelayGetter:n})=>{const[a,l]=Hr();return r.useEffect((()=>{const r=a.current,l=Jr(document.querySelector(".chest .box"));return Xr({particleDomNode:r,x:l.x,y:l.y,duration:t,delay:n(),onfinish:e.onfinish,oncancel:e.oncancel})}),[]),r.createElement("svg",{ref:a,className:"score-particle--combo"},r.createElement("g",{ref:l},r.createElement("text",{x:"0",y:"0",dominantBaseline:"text-before-edge"},"Coffre parfait")))},Kr=({particleDomNode:e,totalScoreDomNode:t,x:r,y:n,duration:a,delay:l,onfinish:o=(()=>{}),oncancel:s=(()=>{})})=>{const c=Br(e),i=Br(t),d=c.right-c.left,u=c.bottom-c.top,m=r-d/2,f=n-u/2,p=m,h=f-1.1*u,g=i.left,E=i.top;e.style.left=`${m}px`,e.style.top=`${f}px`;const v=e.animate([{opacity:0,visibility:"visible",transform:"translate(0px, 0px)"},{offset:.1,opacity:1},{offset:.6,opacity:1,transform:`translate(${p-m}px, ${h-f}px)`},{transform:`translate(${g-m}px, ${E-f}px)`}],{duration:a,delay:l,fill:"forwards"});return v.onfinish=()=>{o()},()=>{s(),v.cancel()}},Xr=({particleDomNode:e,x:t,y:r,duration:n,delay:a,onfinish:l=(()=>{}),oncancel:o=(()=>{})})=>{const s=Br(e),c=t-(s.right-s.left)/2,i=r-(s.bottom-s.top)/2;e.style.left=`${c}px`,e.style.top=`${i}px`;const d=e.animate([{opacity:0,visibility:"visible",transform:"translate(0px, 0px)"},{offset:.1,opacity:1},{offset:.4,opacity:1,transform:"scale(1.2)"},{}],{duration:n,delay:a,fill:"forwards"});return d.onfinish=()=>{l()},()=>{o(),d.cancel()}},Hr=()=>{const e=r.useRef(),t=r.useRef();return r.useLayoutEffect((()=>{const r=e.current,n=t.current.getBBox();r.setAttribute("width",Math.ceil(n.width)),r.setAttribute("height",Math.ceil(n.height))}),[]),[e,t]},Jr=e=>{const t=Br(e);return Tr(t)},Vr=({addScoreParticle:e})=>{const t=w(),r=S(),n=dt();Object.keys(t).forEach((a=>{const l=t[a],o=Ge(l,r),s=o&&ee(o);Oe((()=>{if(!n&&s)return e({id:`chest-slot-${a}-coin`,type:"bonus",value:100,symbol:E,chestSlot:a})}),[n,s])}))},_r=({addScoreParticle:e})=>{const t=w(),r=S(),n=dt();Object.keys(t).forEach((a=>{const l=t[a],o=Ge(l,r),s=o&&te(o);Oe((()=>{if(!n&&s)return e({id:`chest-slot-${a}-diamond`,type:"bonus",value:100,symbol:g,chestSlot:a})}),[n,s])}))},Qr=({addScoreParticle:e})=>{const t=w(),n=S(),a=dt(),l=r.useMemo((()=>{const e=[];Object.keys(t).forEach((r=>{const a=t[r];if(!a)return;"dice"===a.type&&e.push(Ge(a,n))}));const{perfectBonus:r}=Ke(e);return Boolean(r)}),[t,n]);Oe((()=>{if(!a&&l)return e({id:"perfect",type:"perfect",value:500})}),[a,l])},en=({addScoreParticle:e})=>{const t=w(),n=S(),a=O(),l=C(a),o=dt();V.forEach((a=>{const s=[];Object.keys(t).forEach((e=>{const r=t[e],o=Ge(r,n);o&&tn(o,a,l)&&s.push(e)}));const c=s.length,i=rn[c]||0,u=r.useRef(i),m=r.useRef((()=>{}));Oe((()=>{const t=u.current,r=Boolean(t&&i&&t<i),n=Boolean(t&&i&&t>i);if(u.current=i,d(l)&&Q(a))return;if(o)return;if(!i)return;if(n)return void m.current();r&&m.current();const f=e({id:`${c}-${a}-combo`,type:"combo",value:i-t,symbol:a,symbolCount:c});m.current=f;const p=s.map((e=>{const t=(document.querySelector(`[data-chest-slot="${e}"] image`)||document.querySelector(`[data-chest-slot="${e}"] img`)).animate([{transform:"scale(1)",transformOrigin:"center center"},{transform:"scale(1.2)",transformOrigin:"center center"},{transform:"scale(1)",transformOrigin:"center center"}],{duration:400});return()=>{t.cancel()}}));return()=>{f(),p.forEach((e=>{e()}))}}),[o,l,i])}))},tn=(e,t,r)=>{if(e===t)return!0;if(d(r)){if(_(e)&&Q(t))return!0;if(Q(e)&&_(t))return!0}return!1},rn={3:100,4:200,5:500,6:1e3,7:2e3,8:4e3},{useState:nn,useEffect:an}=r,ln=()=>{const e=C(O()),t=on();return r.createElement("div",{className:"score-area "+(t?"animated":"")},e?r.createElement(sn,null):null)},on=()=>{const e=C(O()),t=Qe(),r=Ye(t,v),n=ut();if(!i(e))return!1;return!(r>=n)},sn=()=>{const e=C(O()),t=q(),n=on(),[a,l,o]=Sr(),s=T();return r.createElement(r.Fragment,null,f(e)?r.createElement(pn,null):null,t?r.createElement(wr,null):null,r.createElement("button",{className:"round-score "+(n?"hidden":""),onClick:l},s?r.createElement(un,null):r.createElement(cn,null)),i(e)?r.createElement(hn,null):null,r.createElement(Ir,{dialogIsOpen:a,closeDialog:o}))},cn=()=>{const e=it(),t=r.useRef(),[n,a]=Tt(),[l,o,s]=Or({totalScore:e,onScoreParticleMerged:a});(({addScoreParticle:e})=>{Vr({addScoreParticle:e}),_r({addScoreParticle:e}),en({addScoreParticle:e}),Qr({addScoreParticle:e})})({addScoreParticle:o}),mn({roundScoreDomNodeRef:t,scoreParticleMergedListener:n});const c=r.useRef(null),i=()=>{const e=c.current,t=dn(e,600);return c.current=Date.now()+t,t};return r.createElement(r.Fragment,null,r.createElement("span",{ref:t,className:"round-score--value"},r.createElement(Gt,{value:s,condition:(e,t)=>e>t,duration:600})),l.map((e=>r.createElement(Gr,{key:e.id,totalScoreDomNodeRef:t,scoreParticle:e,animationDelayGetter:i}))))},dn=(e,t)=>{if(!e)return 0;const r=t-(Date.now()-e);return r<=0?0:r},un=()=>{const e=it();return r.createElement("span",{className:"round-score--value"},e)},mn=({roundScoreDomNodeRef:e,scoreParticleMergedListener:t})=>{const n=$t(t);r.useEffect((()=>{if(!n)return;const t=e.current;return fn({roundScoreDomNode:t})}),[n])},fn=({roundScoreDomNode:e,duration:t=500,easing:r="ease-in-out"})=>{const n=e.animate([{transform:"scale(1.8)"}],{duration:t,easing:r});return()=>{n.cancel()}},pn=()=>U()?r.createElement("div",{className:"pirate-hook"}):r.createElement("div",{style:{display:"none"},className:"pirate-hook"}),hn=()=>{const e=it(),t=Qe(),n=Ye(t,v),a=ut(),l=new Array(a).fill(""),o=n>=a,s=Me((e=>e<n),[n]),[c,i]=nn(!1);return an((()=>{s&&i(!0)}),[s]),an((()=>{if(c){const e=setTimeout((()=>{i(!1)}),300);return()=>{clearTimeout(e)}}return()=>{}}),[c]),r.createElement(r.Fragment,null,r.createElement("div",{className:"ropes "+(o?"challenge-won":"")},l.map(((e,t)=>n>=t+1?r.createElement("div",{key:t,className:`rope rope-${t+1} cut-rope`}):r.createElement("div",{key:t,className:`rope rope-${t+1}`})))),c&&n<=a?r.createElement("div",{className:"sword-slice"},r.createElement("div",{className:"triangle-left"}),r.createElement("div",{className:"triangle-right"})):null,r.createElement("div",{className:`negative-round-score rotate-${n} ${o?"removed":""}`},e))},gn=50,En=new URL(System.resolve("./assets/cursed-grid.png",t.meta.url)),vn=({chestRef:e,diceOverChestListener:t})=>{const n=w(),a=lt(),l=$t(t),o=C(O()),s=a&&j(o);return r.createElement("div",{className:"chest"},r.createElement("div",{ref:e,className:"dice-area "+(j(o)?"glow":""),style:{...l?{outline:"2px dotted"}:{}}},r.createElement("div",{className:"box"},Object.keys(n).map((e=>r.createElement("div",{className:"slot",key:e,"data-chest-slot":e},r.createElement(yn,{chestSlotContent:n[e]}))))),r.createElement("div",{className:"top-left-corner"}),r.createElement("div",{className:"top-right-corner"}),r.createElement("div",{className:"bottom-left-corner"}),r.createElement("div",{className:"bottom-right-corner"}),a&&!s?r.createElement(bn,null):null),r.createElement(ln,null))},yn=({chestSlotContent:e})=>{const t=C(O());if(!e)return null;if("symbol"===e.type){const n=e.value;return r.createElement("button",{className:"dice",style:{width:gn,height:gn,color:"#eaeaea",margin:"5px",backgroundColor:t.color1,borderColor:t.color2,borderWidth:"2px",borderStyle:"solid"}},r.createElement(qe,{src:J(n),draggable:"false",style:{width:"100%",height:"100%"}}))}return null},bn=()=>r.createElement("div",{className:"cursed-cover"},r.createElement(qe,{draggable:"false",src:En,alt:"cursed-cover"})),Cn={animals:{name:"Animaux",rule:"Les singes et les perroquest obtenus sur les dés comptent comme un même symbol dans une combinaison.",more:"Par exemple 2 perroquets et 3 singes forment une conbinaison de 5 dés identiques, soit 500 points."},chest:{name:"Coffre au trésor",rule:'Lorsque le joueur sauvegarde ses dés, grâce à la carte "Coffre au trésor" les dés sont protégés du mauvais sort.',more:"Ainsi même lorsque le joueur obtient 3 têtes de morts, son tour prends fin, mais il peut marquer les points totalisés grâce aux dés sauvegardés!"},coin:{name:"Pièce d'or",rule:"Le joueur commence son tour avec un symbol pièce d'or. Il rapporte des points aussi bien dans une combinaison de dés que comme simple pièce (+100)."},diamond:{name:"Diamant",rule:"Le joueur commence son tour avec un symbol diamant. Il rapporte des points aussi bien dans une combinaison de dés que comme simple diamant (+100)."},pirate:{name:"Capitaine des pirates",rule:"Grâce à l'aide du capitaine, tous les points comptabilisés pendant ce tour sont doublés !"},witch:{name:"Sorcière",rule:"Avec ses potions magiques, la sorcière permet exceptionnellement au joueur de relancer, une fois, un dé avec une tête de mort."},"1skull":{name:"Tête de mort",rule:"Le tour du joueur débute avec un symbole tête de mort."},"2skulls":{name:"2 têtes de mort",rule:"Le tour du joueur débute avec 2 symboles tête de mort."},"2sword-challenge":{name:"Bateau pirate",rule:"Le joueur doit obtenir au minimum 2 symbols sabres. Si il y parvient, il gagne +300 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -300 points pour ce tour, quelque soit son résultat aux dés.",more:"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points."},"3sword-challenge":{name:"Bateau pirate",rule:"Le joueur doit obtenir au minimum 3 symbols sabres. Si il y parvient, il gagne +500 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -500 points pour ce tour, quelque soit son résultat aux dés.",more:"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points."},"4sword-challenge":{name:"Bateau pirate",rule:"Le joueur doit obtenir au minimum 4 symbols sabres. Si il y parvient, il gagne +1000 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -1000 points pour ce tour, quelque soit son résultat aux dés.",more:"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points."}},Nn=({dialogIsOpen:e,closeDialog:t,card:n})=>{const a=Cn[n.type];return r.createElement(Ar,{className:"card-rules-dialog",isOpen:e,onRequestClose:t,requestCloseOnClickOutside:!0,title:"Carte"},a?r.createElement(r.Fragment,null,r.createElement("div",{className:"dialog-label"},a.name),r.createElement("div",{style:{textAlign:"center"}},r.createElement(qe,{className:"current-card",src:re(n),width:"150",alt:n.type})),r.createElement("div",{className:"text-rule"},a.rule),a.more?r.createElement("div",{className:"text-rule"},a.more):null):"No rule")},kn=r.forwardRef((({card:e,...t},n)=>r.createElement("div",a({className:"card current-card",ref:n,width:"55",height:"55",style:{backgroundColor:e.color1,borderColor:e.color2}},t),r.createElement(qe,{src:ne(e),alt:e.type,width:"55",height:"55"})))),xn=new URL(System.resolve("./assets/swords-disabled.png",t.meta.url)),Sn=()=>{const e=O(),t=Qe(),n=ut();if(!e)return null;const a=C(e);if(!i(a))return null;const l=Ye(t,v),o=new Array(n).fill("");return r.createElement("div",{className:"sword-challenge-indicators"},o.map(((e,t)=>l>=t+1?r.createElement(wn,{key:t}):r.createElement(Rn,{key:t}))))},wn=()=>r.createElement("div",{className:"sword-icon"},r.createElement(qe,{src:o})),Rn=()=>r.createElement("div",{className:"sword-icon disabled"},r.createElement(qe,{src:xn})),Dn=({openScoreboard:e,headerSmallCardRef:t})=>{const n=C(O()),a=U();return r.createElement("div",{className:"header"},r.createElement("div",{className:"card-container",style:{opacity:a?"1":"0"}},r.createElement("div",{className:"small-card"},n?r.createElement(An,{headerSmallCardRef:t,currentCard:n}):r.createElement(In,null)),a&&r.createElement(Sn,null)),r.createElement(On,{openScoreboard:e}),r.createElement(Mn,null))},An=({headerSmallCardRef:e,currentCard:t})=>{const[n,a]=r.useState(!1);return r.createElement(r.Fragment,null,r.createElement(kn,{onClick:()=>{a(!0)},card:t,ref:e}),r.createElement(Nn,{card:t,dialogIsOpen:n,closeDialog:()=>{a(!1)}}))},In=()=>r.createElement("div",{className:"card default-card",style:{backgroundImage:`url(${ae})`,backgroundSize:"217px"}}),On=({openScoreboard:e})=>{const t=Je();return r.createElement(qe,{onClick:e,className:"avatar",src:t&&t.character.img,alt:"player",style:{borderColor:t&&t.character.color||"white"},width:"55",height:"55"})},Mn=()=>{const e=Je(),t=e.score,n=Ft(t,{duration:1200,timingFunction:e=>1-Math.pow(1-e,5)});return r.createElement("div",{className:"total-score"},r.createElement("span",{className:"score",style:{backgroundColor:e&&e.character.color||"white"}},n?n.value:t))},Ln=6.25,Pn=(e,{rolledAreaDomNode:t})=>{const r=Br(t),n=r.right-r.left,a=r.bottom-r.top,l={left:Ln,right:n-56.25,top:Ln,bottom:a-56.25},o=[],s=e=>{let t=0;const r=()=>{const n=qn(e,l),a=jn(),s=Mr(n,a);return!o.some((e=>{return t=e,qr(s,(e=>Pr(e,t)));var t}))||t>50?{rectangle:n,rotation:a,rotatedRectangle:s}:(t++,r())};return r()};return e.forEach(((e,t)=>{e.visibleFaceIndex=Tn(e);const{rectangle:r,rotation:n,rotatedRectangle:a}=s(e);o.push(a),e.rolledAreaZIndex=t+1,e.rolledAreaPosition=r[0],e.rotation=n})),e},qn=(e,t)=>{const r={x:$n(t.left,t.right),y:$n(t.top,t.bottom)};return[{x:r.x,y:r.y},{x:r.x+gn,y:r.y},{x:r.x+gn,y:r.y+gn},{x:r.x,y:r.y+gn}]},jn=()=>$n(-35,35),Tn=e=>$n(0,e.faces.length-1),$n=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),Bn=({rolledAreaRef:e})=>{const t=nt(),n=R(),a=Ve(),l=Un(),o=C(O()),s=lt(),c=n.length<2&&!a,i=s&&j(o),d=c||i;return t?r.createElement("div",{className:"roll-action"},r.createElement("button",{onClick:()=>{l(e.current)},disabled:d},"Lancer",c&&!i&&r.createElement("span",{className:"button-subtitle"},"(au moins 2 dés !)")),i&&r.createElement(qe,{src:le,className:"skull-symbol"})):null},Un=s(((e,t)=>{const{dices:r,rollCount:n,diceRolledIds:a}=e,l=(0===n?Object.keys(r):a).map((e=>r[e]));return Pn(l,{rolledAreaDomNode:t}),{...e,rollCount:n+1,witchUncursedDiceId:null,diceRolledIds:l.map((e=>e.id)),dices:{...r}}})),Fn=({onRoundOver:e,rolledAreaRef:t})=>r.createElement("div",{className:"footer actions"},r.createElement(Bn,{rolledAreaRef:t}),r.createElement(zn,null),r.createElement(Gn,{onRoundOver:e})),zn=()=>{const e=it(),t=gt(),n=ct(),a=(({hasRolledOnce:e=_e(),scoreMarked:t=q(),currentCardId:r=O(),hasDicesToCurse:n=tt()}={})=>!(t||n||!r||!e))(),l=e<0?"-":"+";return a?r.createElement("div",{className:"collect-action"},r.createElement("button",{onClick:()=>{t(e)},disabled:!n},r.createElement("span",null,"Collecter"),r.createElement("span",{className:"score"},l," ",Math.abs(e))),!n&&r.createElement(qe,{src:le,className:"skull-symbol"})):null},Gn=({onRoundOver:e})=>{const t=(({rollDiceAllowed:e=nt(),markScoreAllowed:t=ct(),hasDicesToCurse:r=tt()}={})=>!e&&!t&&!r)(),n=ft(),a=it(),l=lt(),o=dt(),s=Qe();return t?r.createElement("div",{className:"next-round-action"},r.createElement("button",{onClick:()=>{n(),e({reason:l?"3-skulls":o?"chalenge-failed":"user-collect",value:a,symbolsInChest:s})}},"Terminer mon tour")):null},Wn=new URL(System.resolve("./assets/witch-label.png",t.meta.url)),Yn=({cursedAreaRef:e})=>{const t=C(O());return r.createElement("div",{className:"skull-island"},oe(t)?r.createElement(Kn,null):null,r.createElement("div",{className:"bottle"},r.createElement("div",{className:"area",ref:e},M(t)?r.createElement(Zn,{card:t}):null,P(t)?r.createElement(r.Fragment,null,r.createElement(Zn,{card:t}),r.createElement(Zn,{card:t})):null)))},Zn=({card:e})=>r.createElement("button",{className:"dice",style:{width:gn,height:gn,color:"#eaeaea",margin:"1px 5px",backgroundColor:e.color1,borderColor:e.color2,borderWidth:"2px"}},r.createElement(qe,{src:le,style:{width:"100%",height:"100%"}})),Kn=()=>U()?r.createElement("div",{className:"witch-label"},r.createElement(qe,{src:Wn}),r.createElement("svg",{x:"0px",y:"0px",width:"156.083px",height:"208.667px",viewBox:"0 0 156.083 208.667"},r.createElement("path",{id:"path_01",fill:"none",stroke:"#E4AD30",d:"M8.406,107.82 c2.541,2.178,2.375,2.875,14.25,3.5c14.782,0.778,19.26-11.965,19.26-11.965S47.918,88,40.251,72.917s-18.916,4.583-9.083,8.167 s27.759-1.338,35.142-12.417C74.75,56,77.583,45.333,79.25,37S78.477,15.833,66.31,3.833"}),r.createElement("path",{id:"path_02",fill:"none",stroke:"#E4AD30",d:"M44.031,110.094 c0,0,1,1.313-4.438,3.344s-14.244,7.281-32.125-2"}),r.createElement("path",{id:"path_03",fill:"none",stroke:"#E4AD30",d:"M42.125,103.688 c0,0,1.313,6.594-9.313,8.625S10.281,108.719,9.406,101"}),r.createElement("path",{id:"path_04",fill:"none",stroke:"#E4AD30",d:"M33.114,112.253c0,0,39.886-19.253,43.011,24.747 c0.372,0.447-0.959,1.208-2.542,1.625"}))):r.createElement(qe,{style:{display:"none"},src:Wn}),Xn=({parent:e,children:t})=>e?Y.createPortal(r.createElement(r.Fragment,null,t),e):null,Hn=({rotate:e,scale:t,translate:r})=>[...e?[`rotate(${e}deg)`]:[],...t&&1!==t?[`scale(${t})`]:[],...r?[`translate(${r})`]:[]].join(""),Jn=(e,t=60,{trailing:r=!1}={})=>{let n,a;const l=(...o)=>{clearTimeout(n);const s=Date.now();if(a){const c=s-a;if(c<t){if(r){n=setTimeout((()=>l(...o)),t-c)}}else a=s,e(...o)}else a=s,e(...o)};return l.cancel=()=>{clearTimeout(n)},l},Vn=(e,{logLevel:t="warn",onGrip:r=(()=>{}),onLongGrip:n=(()=>{}),onClick:a=(()=>{}),onDrag:l=(()=>{}),onRelease:o=(()=>{}),onCancel:s=(()=>{}),longGripMs:c=300})=>{const i=se({logLevel:t});let d,u,m=!1,f=()=>{},p=()=>{},h=()=>{};i.debug("enable drag on",e);const g=ce(e,"dragstart",(e=>{e.preventDefault()})),E=ce(e,"mousedown",(e=>{if(3===e.which)return void i.debug("ignore right click");S(Qn(e),e);const t=Jn((e=>{R(Qn(e),e)}));h=()=>t.cancel(),f=ce(document,"mousemove",t),p=ce(document,"mouseup",(e=>{p(),f(),D(Qn(e),e)}))}),{passive:!0}),v=ce(e,"touchstart",(e=>{S(ea(e),e);const t=Jn((e=>{R(ea(e),e)}));h=()=>t.cancel(),f=ce(document,"touchmove",t),p=ce(document,"touchend",(e=>{p(),f(),D(ea(e),e)}))}),{passive:!0}),y=ce(e,"click",(e=>{m||"none"!==x||a(e)}));let b,C,N,k,x;const S=(t,n)=>{i.debug("gripping node at",t),u=!0,x="none",N=t,b=t,C=_n(e),r({x:C.x,y:C.y,event:n}),k=setTimeout(w,c)},w=()=>{m=!0,n()},R=(e,t)=>{if(b.x===e.x&&b.y===e.y)return void i.debug("no real move");b=e;const r=N.x-C.x,n=N.y-C.y,a={x:e.x-r,y:e.y-n},o=e.x-N.x,s=e.y-N.y;i.debug("move node at",a),l({event:t,...a,relativeX:o,relativeY:s,setDropEffect:e=>{x=e}})},D=(e,t)=>{i.debug("releasing node"),u=!1,clearTimeout(k);const r=N.x-C.x,n=N.y-C.y;o({event:t,dropEffect:x,x:b.x-r,y:b.y-n}),d=setTimeout((()=>{m=!1}))};return e=>{g(),y(),E(),v(),f(),p(),clearTimeout(k),clearTimeout(d),h(),(e=>{u&&(i.debug("cancelling drag",e),u=!1,s({event:e}))})(e)}},_n=e=>{const t=e.getBoundingClientRect();return{x:t.left,y:t.top}},Qn=e=>({x:e.pageX,y:e.pageY}),ea=e=>{const t=e.changedTouches[0];return{x:t.pageX,y:t.pageY}},{useEffect:ta,useState:ra}=r,na=({dice:e,diceAnimation:t,anmationDebug:n=!1,parentNode:a,zIndex:l,x:o,y:s,rotation:i,draggable:d,onDiceClick:u,onDiceDrag:m,onDiceDrop:f,onDiceDragEnd:p,disapear:h,appear:g,traceUpdate:E=!1})=>{const v=Z(),y=ie(e.id),b=de(e.id),C=(({chestSlots:e=w()}={})=>Object.keys(e).reduce(((t,r)=>{const n=e[r];return n&&"dice"===n.type?[...t,n.value]:t}),[]))().includes(e.id),[N,k]=ra(!1),[x,S]=ra(null),R=Pe(a),D=t?R:a;ta((()=>{if(!d||!y||!v)return()=>{};let t=!1;const r=Vn(y,{onGrip:()=>{k(!0)},onClick:t=>{u(e,t)},onDrag:({x:r,y:n,relativeX:a,relativeY:l,setDropEffect:o})=>{const s=((e,t)=>{const r=Br(t);return jr(e,r)})({left:r,right:r+gn,top:n,bottom:n+gn},v);S({x:s.left,y:s.top}),t=t||Math.abs(a)>10||Math.abs(l)>10,t&&m(e,{relativeX:a,relativeY:l,setDropEffect:o,diceRectangle:s})},onRelease:({dropEffect:t,x:r,y:n})=>{if("none"!==t){f(e,{diceRectangle:{left:r,right:r+gn,top:n,bottom:n+gn}})}k(!1),S(null),p(e)},onCancel:()=>{k(!1),S(null),p(e)}});return()=>{r()}}),[d,y,v,u,m,f,p]),ta((()=>{if(!t||!y)return()=>{};const{from:e,to:r,onfinish:a}=t;n&&(zr(e),zr(r));const l=`translate(${Math.floor(r.x-e.x)}px, ${Math.floor(r.y-e.y)}px)`,o=y.parentNode.animate([{transform:l}],{duration:500,fill:"forwards",easing:"cubic-bezier(0, 0.55, 0.45, 1)"});return o.onfinish=a,()=>{o.cancel()}}),[y,t]);const I=A(e),O=t&&t.from?t.from.x:x?x.x:o,M=t&&t.from?t.from.y:x?x.y:s,L=x||t?1e3:l;return r.createElement(Xn,{parent:D},r.createElement("svg",{"data-dice-id":e.id,className:"dice",onClick:d?void 0:t=>{u(e,t)},style:{width:gn,height:gn,left:`${O}px`,top:`${M}px`,zIndex:L,cursor:d?N?"grabbing":"grab":void 0,position:x||t?"fixed":void 0}},r.createElement("g",{ref:b,className:h?"dice-cursed-disapear":g?"dice-cursed-appear":"",style:{transform:Hn({rotate:i||0,scale:N?"1.1":"1"}),transitionProperty:"transform",transitionDuration:"500ms",transitionTimingFunction:"cubic-bezier(0, 0.55, 0.45, 1)",transformOrigin:"center center"}},r.createElement("rect",{className:"dice-background",width:"100%",height:"100%",rx:"5",ry:"5",fill:aa(I,C).fill,stroke:aa(I,C).stroke,strokeWidth:"1"}),r.createElement("image",{href:J(c(e)),draggable:"false",style:{width:"100%",height:"100%"}}))))},aa=(e,t)=>e?{fill:"black",stroke:"black"}:t?{fill:"none",stroke:"none"}:{fill:"#eaeaea",stroke:"#b9b9b9"},la=({offscreenDomNode:e,chestDomNode:t,rolledAreaDomNode:n,cursedAreaDomNode:a,onDiceOverChestChange:l=(()=>{}),onDiceOverRolledAreaChange:o=(()=>{})})=>{const s=S(),c=w(),i=R(),d=I(),u=D(),m=ue(),f=C(O()),p=q(),h=(({cursedCount:e=at()}={})=>e>2)(),g=tt(),[E,v]=r.useReducer(((e,t)=>({...e,[t.key]:t.value})),{}),y=vt(),b=kt(),N=Nt(),k=Ct(),x=yt(),M=r.useRef(null);return Object.keys(s).map((C=>{const S=s[C],w=Na(S,{chestSlots:c,diceRolledIds:i,diceCursedIds:d}),R=ka(w,{chestDomNode:t,rolledAreaDomNode:n,cursedAreaDomNode:a,offscreenDomNode:e}),{parentNode:D}=R,I=S.id!==u&&D===n&&A(S),O=D===a,L=ia(S,i),P=r.useCallback((e=>{const t=oa(e,{currentCard:f,witchCardEffectUsed:m,diceIsInRolledArea:L,diceIsInCursedArea:O,chestSlots:c,hasDicesToCurse:g,threeSkullsOrMore:h,scoreMarked:p});if("keep"===t){const t=va(c);b(e,t)}else"unkeep"===t?N(e):"uncurse"===t&&k(e)}),[L,O,c,p,h,f,m]),q=r.useCallback(((e,r)=>{M.current=ca({dragDiceGesture:r,chestDomNode:t,rolledAreaDomNode:n});const a=sa(e,{diceIsInRolledArea:L,chestSlots:c,dropTargetRef:M,rolledAreaDomNode:n,chestDomNode:t,hasDicesToCurse:g,threeSkullsOrMore:h,scoreMarked:p});r.setDropEffect(a),l("keep"===a?e:null),o("unkeep"===a?e:null)}),[L,c,M,n,t,p,h,l,o]),j=r.useCallback(((e,r)=>{const a=sa(e,{diceIsInRolledArea:L,chestSlots:c,dropTargetRef:M,rolledAreaDomNode:n,chestDomNode:t,scoreMarked:p,threeSkullsOrMore:h});let l=!1,o=null;if("reposition-in-rolled-area"===a){const t=ga(r.diceRectangle,n),a=Ea(e,{dices:s,diceRolledIds:i});y(e,t,a)}else if("back-to-rolled-area"===a)l=!0,o=pa(e.rolledAreaPosition,n);else if("keep"===a){const n=ya(e,{chestSlots:c,rectangle:r.diceRectangle,chestDomNode:t});b(e,n),l=!0,o=ha(n,t)}else if("reposition-in-chest"===a){const n=ya(e,{chestSlots:c,rectangle:r.diceRectangle,chestDomNode:t});ba(e,c)!==n&&(x(e,n),l=!0,o=ha(n,t))}else if("back-to-chest"===a){const r=ba(e,c);l=!0,o=ha(r,t)}else if("unkeep"===a){const t=ga(r.diceRectangle,n);y(e,t,Ea(e,{dices:s,diceRolledIds:i})),N(e),l=!0,o=pa(t,n)}l&&v({key:e.id,value:{from:{x:r.diceRectangle.left,y:r.diceRectangle.top},to:o,onfinish:()=>{setTimeout((()=>{v({key:e.id,value:null})}))}}})}),[L,c,M,n,t,p,h]),T=r.useCallback((()=>{l(null),o(null)}),[l,o]),$={key:S.id,...R,dice:S,diceAnimation:E[S.id],witchCardEffectUsed:m,disapear:I,appear:O,onDiceClick:P,onDiceDrag:q,onDiceDrop:j,onDiceDragEnd:T};return r.useMemo((()=>r.createElement(na,$)),Object.keys($).map((e=>$[e])))}))},oa=(e,{currentCard:t,witchCardEffectUsed:r,diceIsInRolledArea:n,diceIsInCursedArea:a,chestSlots:l,hasDicesToCurse:o,threeSkullsOrMore:s,scoreMarked:c})=>n?ua(e,{hasDicesToCurse:o,threeSkullsOrMore:s,scoreMarked:c})?"keep":"none":da(e,l)?ma(e,{threeSkullsOrMore:s,scoreMarked:c})?"unkeep":"none":a&&fa(e,{currentCard:t,witchCardEffectUsed:r,scoreMarked:c,threeSkullsOrMore:s})?"uncurse":"none",sa=(e,{diceIsInRolledArea:t,chestSlots:r,dropTargetRef:n,rolledAreaDomNode:a,chestDomNode:l,hasDicesToCurse:o,threeSkullsOrMore:s,scoreMarked:c})=>t?n.current===a?"reposition-in-rolled-area":n.current===l&&ua(e,{hasDicesToCurse:o,threeSkullsOrMore:s,scoreMarked:c})?"keep":"back-to-rolled-area":da(e,r)?n.current===l?"reposition-in-chest":n.current===a&&ma(e,{scoreMarked:c,threeSkullsOrMore:s})?"unkeep":"back-to-chest":"none",ca=({dragDiceGesture:e,chestDomNode:t,rolledAreaDomNode:r})=>{if(Ur(t,e.diceRectangle))return t;return Ur(r,e.diceRectangle)?r:null},ia=(e,t)=>t.includes(e.id),da=(e,t)=>Object.keys(t).some((r=>{const n=t[r];return n&&"dice"===n.type&&n.value===e.id})),ua=(e,{hasDicesToCurse:t,threeSkullsOrMore:r,scoreMarked:n})=>!A(e)&&(!t&&(!r&&!n)),ma=(e,{scoreMarked:t,threeSkullsOrMore:r})=>!t&&!r,fa=(e,{currentCard:t,witchCardEffectUsed:r,scoreMarked:n,threeSkullsOrMore:a})=>!!oe(t)&&(!r&&(!n&&!a)),pa=(e,t)=>{const r=((e,t)=>{const r=Br(t),n=e.right-e.left,a=e.bottom-e.top;return{left:r.left+e.left,top:r.top+e.top,right:r.left+e.left+n,bottom:r.top+e.top+a}})({left:e.x,top:e.y,right:0,bottom:0},t);return{x:r.left,y:r.top}},ha=(e,t)=>{const r=Ca(e,t),n=Br(r);return{x:n.left+5,y:n.top+5}},ga=(e,t)=>{const r=((e,t)=>{const r=Br(t),n=((e,t)=>{const r=e.left-t.left,n=r+(e.right-e.left),a=e.top-t.top;return{left:r,right:n,top:a,bottom:a+(e.bottom-e.top)}})(jr(e,r),r);return n})(e,t);return{x:r.left,y:r.top}},Ea=(e,{diceRolledIds:t,dices:r})=>{if(0===t.length)return 1;const n=t.slice(1).reduce(((e,t)=>{const n=r[t];return n.rolledAreaZIndex>e.rolledAreaZIndex?n:e}),r[t[0]]);return n===e?e.rolledAreaZIndex:n.rolledAreaZIndex+1},va=e=>Object.keys(e).find((t=>!e[t])),ya=(e,{chestSlots:t,rectangle:r,chestDomNode:n})=>{const a=new Map,l=[];Object.keys(t).forEach((r=>{const o=t[r];if(!o||"dice"===o.type&&o.value===e.id){const e=Ca(r,n);a.set(e,r),l.push(e)}}));const o=Fr(l,r);return a.get(o)},ba=(e,t)=>Object.keys(t).find((r=>{const n=t[r];return n&&"dice"===n.type&&n.value===e.id})),Ca=(e,t)=>t.querySelector(`[data-chest-slot="${e}"]`),Na=(e,{chestSlots:t,diceRolledIds:r,diceCursedIds:n})=>{const a=Object.keys(t).find((r=>t[r]&&"dice"===t[r].type&&t[r].value===e.id));return a?{type:"chest-slot",value:a}:r.includes(e.id)?{type:"rolled-area",value:{...e.rolledAreaPosition,rotation:e.rotation,zIndex:e.rolledAreaZIndex}}:n.includes(e.id)?{type:"cursed-area",value:void 0}:{type:"offscreen-area"}},ka=({type:e,value:t},{chestDomNode:r,rolledAreaDomNode:n,cursedAreaDomNode:a,offscreenDomNode:l})=>"chest-slot"===e?{parentNode:r.querySelector(`[data-chest-slot="${t}"]`),zIndex:void 0,rotation:0,x:void 0,y:void 0,draggable:!0}:"rolled-area"===e?{parentNode:n,zIndex:t.zIndex,rotation:t.rotation,x:t.x,y:t.y,draggable:!0}:"cursed-area"===e?{parentNode:a,zIndex:void 0,rotation:0,x:void 0,y:void 0,draggable:!1}:{parentNode:l,zIndex:void 0,rotation:0,x:void 0,y:void 0,draggable:!1},xa=({dialogIsOpen:e,closeDialog:t,headerSmallCardRef:n})=>{const a=(({cardIds:e=k()}={})=>e.map((e=>C(e))))(),l=O(),o=C(l)||null,s=r.useRef(),c=r.useRef(),i=r.useRef();return r.createElement(xr,{className:"draw-card-dialog dialog-spacing-10 dialog-spacing-fluid",isOpen:e,onRequestClose:t,requestCloseOnClickOutside:!1},r.createElement("div",{className:"dialog-content"},r.createElement("div",{className:"dialog-body"},r.createElement("div",{className:"dialog-label"},0===a.length&&!o&&"Paquet de cartes épuisé. Mélangez-le pour pouvoir piocher à nouveau !",0!==a.length&&!o&&"Piochez une carte pour le tour suivant.",o&&r.createElement("span",{className:"card-name"},Cn[o.type].name)),r.createElement("div",{className:"card-area"},r.createElement("div",{style:{position:"relative"}},r.createElement(Sa,{backCardRef:s,currentCard:o,remainingCardCount:a.length}),r.createElement(wa,{topCardRef:c,smallCardRef:i,currentCard:o})))),r.createElement("div",{className:"dialog-actions"},r.createElement(Ra,{backCardRef:s,cardDeck:a,currentCard:o}),o?r.createElement(Oa,{headerSmallCardRef:n,smallCardRef:i,backCardRef:s,topCardRef:c,currentCard:o,closeDialog:t}):null)))},Sa=({backCardRef:e,currentCard:t,remainingCardCount:n})=>r.createElement("div",{ref:e,className:"card default-card",style:{background:"none"}},r.createElement(qe,{src:ae,width:"150"}),t?null:r.createElement("div",{className:"remaining-cards-number"},n)),wa=({topCardRef:e,smallCardRef:t,currentCard:n})=>n?r.createElement(r.Fragment,null,r.createElement("div",{className:"card current-card",ref:e},r.createElement("div",{className:"flip-card"},r.createElement("div",{className:"flip-card-inner"},r.createElement("div",{className:"flip-card-front"},r.createElement(qe,{className:"card default-card",src:ae})),r.createElement("div",{className:"flip-card-back"},r.createElement(qe,{className:"card-img",src:re(n),width:"150",alt:n.type}))))),r.createElement("div",{className:"small-card"},r.createElement(kn,{card:n,ref:t}))):null,Ra=({backCardRef:e,cardDeck:t,currentCard:n})=>n?null:0===t.length?r.createElement(Aa,{backCardRef:e}):r.createElement(Da,null),Da=()=>{const e=It();return r.createElement("button",{className:"button-card-main button-draw-card",onClick:e},"Piocher")},Aa=({backCardRef:e})=>{const t=T(),n=Lt(),[a,l]=r.useState(!1);return r.useEffect((()=>a?(n(),t?(l(!1),()=>{}):Ia({backCard:e.current,duration:1e3,onfinish:()=>{l(!1)}})):()=>{}),[a]),r.createElement("button",{className:"button-card-main button-shuffle-deck",onClick:()=>{l(!0)}},"Mélanger")},Ia=({backCard:e,duration:t,onfinish:r})=>{e.setAttribute("shaking-deck","");const n=setTimeout((()=>{e.removeAttribute("shaking-deck",""),r()}),t);return()=>{e.removeAttribute("shaking-deck",""),clearTimeout(n)}},Oa=({headerSmallCardRef:e,smallCardRef:t,backCardRef:n,topCardRef:a})=>{const l=T(),o=pt(),[s,c]=r.useState(!1);return r.useEffect((()=>s?l?(o(),()=>{}):Ma({headerSmallCard:e.current,smallCard:t.current,backCard:n.current,topCard:a.current,duration:500,onfinish:()=>{o()}}):()=>{}),[s]),r.createElement("button",{className:"button-card-main button-activate-card",onClick:()=>{s||c(!0)}},"Commencer")},Ma=({headerSmallCard:e,topCard:t,backCard:r,smallCard:n,duration:a,onfinish:l})=>{r.style.opacity=0;const o=Br(e),s=t.animate([{transform:"scale(1)",opacity:1},{transform:"scale(0)",opacity:0}],{duration:a,fill:"forwards"}),c=n.animate([{transform:"scale(0)",opacity:0,position:"fixed",top:`${o.top}.px`,left:`${o.left}.px`},{transform:"scale(1)",opacity:1,position:"fixed",top:`${o.top}.px`,left:`${o.left}.px`}],{duration:a,fill:"forwards"});return c.onfinish=l,()=>{s.cancel(),c.cancel()}},La=({openScoreboard:e,onRoundStart:t,onRoundOver:n})=>{const a=U(),[l,o]=r.useState(!1);r.useEffect((()=>{t()}),[]);const[s,c]=Tt(),[i,d]=Tt(),u=r.useRef();return r.createElement("div",{className:"round-container"},r.createElement(Pt,null),r.createElement(Dn,{openScoreboard:e,headerSmallCardRef:u}),a?r.createElement(Pa,{diceOverRolledAreaListener:s,diceOverChestListener:i,openScoreboard:e,onRoundOver:n,onRoundMounted:e=>{o(e)}}):null,l?r.createElement(la,{offscreenDomNode:l.offscreenDomNode,chestDomNode:l.chestDomNode,rolledAreaDomNode:l.rolledAreaDomNode,cursedAreaDomNode:l.cursedAreaDomNode,onDiceOverChestChange:d,onDiceOverRolledAreaChange:c}):null,r.createElement(xa,{dialogIsOpen:!a,headerSmallCardRef:u}))},Pa=({diceOverRolledAreaListener:e,diceOverChestListener:t,onRoundMounted:n,onRoundOver:a})=>{const l=r.useRef(null),o=r.useRef(null),s=r.useRef(null),c=r.useRef(null);return r.useEffect((()=>{n({rolledAreaDomNode:l.current,chestDomNode:o.current,cursedAreaDomNode:s.current,offscreenDomNode:c.current})}),[]),r.createElement(r.Fragment,null,r.createElement(St,null),r.createElement("div",{className:"chest-and-skulls"},r.createElement(vn,{chestRef:o,diceOverChestListener:t}),r.createElement(Yn,{cursedAreaRef:s})),r.createElement(Bt,{rolledAreaRef:l,offscreenRef:c,diceOverRolledAreaListener:e}),r.createElement(Fn,{onRoundOver:a,rolledAreaRef:l}))},qa=({closeDialog:e,dialogIsOpen:t,player:n})=>{const a=mt();return r.createElement(xr,{className:"score-board-dialog dialog-spacing-10 dialog-spacing-fluid dialog-spacing-left-fixed dialog-spacing-right-fixed",isOpen:t,onRequestClose:e,requestCloseOnClickOutside:!0},r.createElement("div",{className:"dialog-content"},r.createElement("div",{className:"dialog-close",onClick:e},r.createElement(Dr,null)),r.createElement("div",{className:"dialog-body"},r.createElement("div",null,"Au tour de",r.createElement("div",{className:"dialog-label"},n.character.name),r.createElement(qe,{className:"player-img",src:n&&n.character.img,alt:"player",width:"40",height:"40",style:{boxShadow:`inset 0px 0px 0px 4px ${n&&n.character.color||"black"}`}})),r.createElement("div",{className:"dialog-actions"},r.createElement("button",{onClick:()=>{e(),a(n)}},"Jouer")))))},ja=new URL(System.resolve("./assets/win-treasure.png",t.meta.url)),Ta=new URL(System.resolve("./assets/boat.png",t.meta.url)),$a=6e3,Ba={path1:"M39.582,739.564c0-91.824,39.191-96.32,38.045-166.691s-30.042-70.37-47.326-161.729s38.128-86.388,31.276-186.42C55.405,134.602-3.014,89.176,8.812,129.825c5.333,18.333,30.77-21,30.77-129.825",path2:"M39.582,739.564c0-113.074-5.437-166.074-8.437-198.074s36-20.667,33.019-2c-1.796,11.248-24.583,13.333-23.699-22c1.229-49.158,22.68-111,23.68-169s-38-95-46-181S39.582,0,39.582,0",path3:"M39.582,739.564c0-71.926-15.437-155.074-17.437-253.074s30-185,31.087-217s-31.087-46-31.087-26s33,10,31-32s-31-110-31-144S39.582,0,39.582,0",path4:"M39.582,739.564c0-113.074-5.437-166.074-8.437-198.074s36-20.667,33.019-2c-1.796,11.248-24.583,13.333-23.699-22c1.229-49.158,22.68-111,23.68-169s-38-95-46-181S39.582,0,39.582,0"},Ua=({openedByUser:e,closeScoreboard:t,playerAnimation:n})=>{const a=b(),l=Je(),o=me(),[s,c]=r.useState(!1),i=()=>{c(!0)},d=Fa();return r.createElement("div",{className:"score-board-container"},e&&r.createElement("div",{className:"cross",onClick:t},"X"),!o&&!l&&r.createElement("div",{className:"action-container"},r.createElement("button",{className:"score-board-action",onClick:()=>{i()}},"Commencer à jouer")),r.createElement(qe,{className:"win-treasure-img",src:ja,alt:"win-treasure",width:"230",height:"150"}),r.createElement("div",{className:"users-path"},a.map((t=>r.createElement(za,{key:t.id,player:t,openedByUser:e,pathCoordinates:Ba[`path${t.id}`],score:t.score,character:t.character,openStartPlayerRoundDialog:i,isCurrentPlayer:l&&t.id===l.id,playerAnimation:n})))),r.createElement(qa,{dialogIsOpen:s,closeDialog:()=>{c(!1)},player:d}))},Fa=()=>{const e=Je(),t=b();let r;if(e){const n=t.findIndex((t=>t.id===e.id));r=n===t.length-1?t[0]:t[n+1]}else r=t[0];return r},za=({pathCoordinates:e,player:t,openedByUser:n,character:a,score:l,openStartPlayerRoundDialog:o,playerAnimation:s})=>{const c=r.useRef(null),i=r.useRef(null),d=r.useRef(null),u=r.useRef(null),m=Fa(),[f,p]=r.useState(null),[h,g]=r.useState([]),[E,v]=r.useState(!1);return r.useEffect((()=>{s&&s.player===t?"user-collect"===s.roundOverReason?(p(s.score),g(s.symbolsInChest)):"3-skulls"===s.roundOverReason?v(!0):"chalenge-failed"===s.roundOverReason&&p(s.score):p(null)}),[s,t]),r.useEffect((()=>{if(!f)return;const{from:e,to:t}=f,r=i.current.animate([{offsetDistance:Ga(e/$a)},{offsetDistance:Ga(t/$a)}],{duration:1e3,fill:"forwards"}),n=u.current;let a=null;n&&(a=n.animate([{offsetDistance:Ga(e/$a)},{offsetDistance:Ga(t/$a)}],{duration:1e3,fill:"forwards"}));const l=c.current,o=l.getTotalLength();console.log("from",e),console.log("to",t);const s=l.animate([{strokeDashoffset:Wa(e/$a,o)},{strokeDashoffset:Wa(t/$a,o)}],{duration:1e3,fill:"forwards"});return s.onfinish=()=>{"finished"===r.playState&&p(null)},r.onfinish=()=>{"finished"===s.playState&&p(null)},()=>{s.cancel(),r.cancel(),a&&a.cancel()}}),[f]),r.useEffect((()=>{const e=c.current,t=e.getTotalLength();e.style.strokeDasharray=t,e.style.strokeDashoffset=Wa(l/$a,t)}),[l]),r.createElement("div",{className:"user-path"},r.createElement("svg",{viewBox:"0 0 79.164 739.564",width:"50",height:"450",fill:"none",stroke:"none"},r.createElement("path",{d:e,className:"path-background"}),r.createElement("path",{ref:c,d:e,className:"path-foreground"}),r.createElement("g",{className:"score-indicator"},r.createElement("image",{ref:i,href:Ta,width:"26",height:"26",className:"boat",style:{offsetPath:`path('${e}')`,offsetDistance:Ga(l/$a)}}),h&&h.length>0&&r.createElement("g",{className:"animation-symbols",ref:u,style:{offsetPath:`path('${e}')`,offsetDistance:Ga(l/$a)}},h.map(((e,t)=>r.createElement("image",{key:t,width:"30",height:"30",className:`symbol symbol-${t+1}`,href:J(e)})))))),r.createElement("div",{className:"speech-bubble"},l),r.createElement("div",{className:"user-avatar "+(m.character.id!==a.id||n?"":"next-player"),onClick:()=>{m.character.id!==a.id||n||o()}},E&&r.createElement("div",{className:"animation-3skulls",ref:d},r.createElement(Ya,null)),r.createElement(Za,{character:a})))},Ga=e=>100*e+"%",Wa=(e,t)=>t-e*t,Ya=()=>new Array(3).fill("").map(((e,t)=>r.createElement(qe,{key:t,width:"30",height:"30",className:`skull skull-${t+1}`,src:le,animateLoaded:!1}))),Za=({character:e})=>r.createElement(qe,{className:"player-img",src:e.img,alt:"player",width:"40",height:"40",style:{boxShadow:`inset 0px 0px 0px 4px ${e.color||"black"}`}}),Ka=()=>{const e=Xa();return r.createElement("div",{className:"game-configuration"},r.createElement("div",{className:"background-image"}),r.createElement("div",{className:"content"},r.createElement("div",{className:"title"},"A l’abordage !"),r.createElement("div",{className:"subtitle"},"Combien de joueurs participent à l’aventure ?"),r.createElement("div",{className:"buttons"},[1,2,3,4,5].map((t=>r.createElement("button",{key:t,onClick:()=>{e(t)}},t))))))},Xa=s(((e,t)=>({...e,players:new Array(t).fill("").map(((e,t)=>({id:t+1,number:t+1,score:0})))}))),Ha=[{id:1,name:"Luffy",color:"#ef9620",img:String(new URL(System.resolve("./assets/Luffy.png",t.meta.url)))},{id:2,name:"Miss Fortune",color:"#d90f1b",img:String(new URL(System.resolve("./assets/miss_fortune.png",t.meta.url)))},{id:3,name:"Jack Sparrow",color:"#007033",img:String(new URL(System.resolve("./assets/JackSparrow.png",t.meta.url)))},{id:4,name:"Barbe Rouge",color:"#7baac9",img:String(new URL(System.resolve("./assets/BarbeRouge.png",t.meta.url)))},{id:5,name:"Ginette Boulette",color:"#e2500c",img:String(new URL(System.resolve("./assets/GinetteBoulette.png",t.meta.url)))},{id:6,name:"Capitaine Crochet",color:"#952460",img:String(new URL(System.resolve("./assets/CapitaineCrochet.png",t.meta.url)))}],Ja=({players:e})=>{const t=el(),n=_a(),a=e.find((e=>!e.character));return tl(),r.useEffect((()=>{tl()}),[]),r.createElement("div",{className:"character-selection-page"},r.createElement(Va,null),a&&r.createElement(r.Fragment,null,r.createElement("p",null,"Joueur ",a.number," : quel pirate êtes vous ?"),r.createElement("div",{className:"characters-container",id:"menu-wrapper"},r.createElement("div",{className:"characters menu"},Ha.map((n=>r.createElement("div",{className:"character item "+(Qa(n,e)?"":"disabled"),key:n.id,onClick:r=>{Qa(n,e)&&(r.target.animate([{transform:"scale(1)"},{transform:"scale(1.3)"},{transform:"scale(1)"}],{duration:400,fill:"forwards"}),t(a,n))}},r.createElement(qe,{className:"character-img",width:"40",height:"40",src:n&&n.img,alt:"player",style:{border:`4px solid ${n&&n.color||"black"}`}}),r.createElement("span",null,n.name))))),r.createElement("div",{className:"paddles"},r.createElement("button",{className:"left-paddle paddle hidden"},"<"),r.createElement("button",{className:"right-paddle paddle",onClick:()=>{tl()}},">")))),!a&&r.createElement("div",{className:"crew-completed"},r.createElement("p",null,"L’équipage est au complet !"),r.createElement(qe,{style:{opacity:.5},src:ne({type:fe})}),r.createElement("button",{onClick:()=>{n()}},"Démarrer la partie")))},Va=()=>{const e=b();return r.createElement("div",{className:"crew "+(e.length>3?"large-crew":"")},r.createElement("div",{className:"title"},"Votre equipage:"),r.createElement("ul",null,e.map((e=>r.createElement("li",{key:e.id},e.character?r.createElement(qe,{className:"crew-member-img",width:"40px",height:"40px",src:e.character&&e.character.img,alt:"player",style:{border:`4px solid ${e.character&&e.character.color||"black"}`},loadWhenIntersecting:!1}):r.createElement("div",{className:"placeholder-img"}),r.createElement("span",null,e.character?e.character.name:`Joueur${e.number}`))))))},_a=s((e=>{const{cardIds:t}=e;return{...e,gameStarted:!0,cardIds:B(t)}})),Qa=(e,t)=>!t.some((t=>t.character&&t.character.name===e.name)),el=s(((e,t,r)=>{const{players:n}=e;return t.character=r,{...e,players:[...n]}})),tl=()=>{var e=document.getElementsByClassName("item").length,t=function(){return document.getElementById("menu-wrapper")?document.getElementById("menu-wrapper").offsetWidth:null},r=t(),n=123*e;window.onresize=()=>{r=t()};var a=n-r,l=document.querySelector(".left-paddle"),o=document.querySelector(".right-paddle");document.querySelector(".menu")&&(document.querySelector(".menu").onscroll=()=>{a=n-r;var e=document.querySelector(".menu").scrollLeft,t=a;e<=0?(l.classList.add("hidden"),o.classList.remove("hidden")):e<t?(l.classList.remove("hidden"),o.classList.remove("hidden")):e>=t&&(l.classList.remove("hidden"),o.classList.add("hidden"))}),o&&(o.onclick=()=>{if(document.querySelector(".menu")){const e=document.querySelector(".menu").scrollLeft,t=e+r;Ut({duration:300,onProgress:({progress:r})=>{document.querySelector(".menu").scrollLeft=e+(t-e)*r}})}}),l&&(l.onclick=()=>{if(document.querySelector(".menu")){const e=document.querySelector(".menu").scrollLeft,t=e-r;Ut({duration:300,onProgress:({progress:r})=>{document.querySelector(".menu").scrollLeft=e+(t-e)*r}})}})},rl=({playerAnimationListener:e})=>{const t=b(),n=y(),a=me(),l=nl(),o=al(),[s,c]=r.useState(!1),[i,d]=r.useState(null),[u,m]=r.useState(null),f=!a||s,p=t.find((e=>e.id===n)),h=r.useRef(null);return r.useEffect((()=>{m(i?{player:p,score:{from:h.current,to:p.score},roundOverReason:i.reason,symbolsInChest:i.symbolsInChest}:null)}),[i,n]),r.useEffect((()=>{if(e)return e(m)}),[e]),l?r.createElement(Ka,null):o?r.createElement(Ja,{players:t}):f?r.createElement(Ua,{openedByUser:s,closeScoreboard:()=>{c(!1)},playerAnimation:u}):r.createElement(La,{openScoreboard:()=>{c(!0)},onRoundStart:()=>{h.current=p.score,d(null)},onRoundOver:e=>{d(e)}})},nl=()=>0===b().length,al=()=>!pe(),ll=s((e=>({...e,animationsDisabled:!0}))),ol=s((e=>({...e,animationsDisabled:!1}))),sl=s((e=>({...e,soundDisabled:!0}))),cl=s((e=>({...e,soundDisabled:!1}))),il=s((()=>he)),dl=()=>{const[e,t]=r.useState();return r.useEffect((()=>ge.listenAvailabilityChange((()=>{t(ge.isAvailable())}))),[]),e},ul=()=>r.useCallback(ge.prompt),ml=()=>ye(),fl=()=>be,pl=()=>Ce,hl=({settingsDialogIsOpen:e})=>ml()?r.createElement(gl,{settingsDialogIsOpen:e}):null,gl=({checkOnOpen:e=!0,settingsDialogIsOpen:t})=>{const n=fl(),a=(()=>{const[e,t]=r.useState(Ee());return r.useEffect((()=>ve((()=>{t(Ee())}))),[]),e})();return r.useEffect((()=>{e&&t&&n()}),[e,t]),r.createElement("fieldset",{style:{minHeight:"4em"}},r.createElement("legend",null,"Mise a jour"),a?r.createElement(El,{serviceWorkerUpdate:a}):r.createElement(vl,null))},El=({serviceWorkerUpdate:e})=>{const{shouldBecomeNavigatorController:t,navigatorWillReload:n}=e,a=pl(),[l,o]=r.useState("");return r.createElement(r.Fragment,null,r.createElement("p",null,""===l?"Mise a jour prête":null,"updating"===l||"activating"===l?"Mise a jour...":null,"activated"===l&&n?"Mise a jour activée, la page va se recharger":null,"activated"===l&&!n&&t?"Mise a jour activée, recharger la page pour installer":null,"activated"!==l||n||t?null:"Mise a jour activée"),r.createElement("button",{disabled:Boolean(l),onClick:async()=>{o("updating"),await a({onActivating:()=>o("activating"),onActivated:()=>o("activated"),onBecomesNavigatorController:()=>o("")})}},n?"Recharger pour mettre a jour":"Mettre a jour"))},vl=()=>{const e=fl(),[t,n]=r.useState("");return r.createElement(r.Fragment,null,r.createElement("p",null,"fetching"===t?"Recherche de mise a jour...":null,"notfound"===t?"Pas de mise a jour disponible.":null,"failed"===t?"Une erreur est survenue.":null),r.createElement("button",{disabled:"fetching"===t,onClick:async()=>{n("fetching");try{await e()||n("notfound")}catch(e){n("failed"),console.error(e)}}},"Chercher"))},yl=new URL(System.resolve("./assets/settings.css",t.meta.url)),bl=()=>{const[e,t,n]=Sr();return r.createElement(r.Fragment,null,r.createElement(Wt,{href:yl}),r.createElement("div",{id:"settings",onClick:()=>{t()}},r.createElement("svg",{className:"settings-icon",width:"24px",height:"24px",viewBox:"0 0 24 24"},r.createElement("path",{fill:"currentColor",d:"M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"}))),r.createElement(Cl,{settingsDialogIsOpen:e,closeSettingsDialog:n}))},Cl=({settingsDialogIsOpen:e,closeSettingsDialog:t})=>{const n=T(),a=ll(),l=ol(),o=Ne(),s=sl(),c=cl(),i=il(),[d,u]=r.useState(!1),m=()=>{u(!0)};return r.createElement(xr,{className:"settings-dialog dialog-spacing-10 dialog-spacing-fluid dialog-spacing-left-fixed dialog-spacing-right-fixed",isOpen:e,onRequestClose:t,requestCloseOnClickOutside:!0},r.createElement("div",{className:"settings-dialog-content"},r.createElement("div",{className:"dialog-close",onClick:t},r.createElement(Dr,null)),r.createElement("div",{className:"dialog-simple-title"},"Settings"),r.createElement("div",{className:"setting-element"},r.createElement("label",null,r.createElement("input",{type:"checkbox",className:n?"checked":"unchecked",checked:n,onChange:e=>{e.target.checked?a():l()}}),n&&r.createElement(kl,null),"Désactiver les animations")),r.createElement("div",{className:"setting-element"},r.createElement("label",null,r.createElement("input",{type:"checkbox",className:o?"checked":"unchecked",checked:o,onChange:e=>{e.target.checked?s():c()}}),o&&r.createElement(kl,null),"Couper le son")),r.createElement("div",{className:"setting-element"},r.createElement("button",{onClick:()=>{m()}},"Annuler la partie")),r.createElement(Nl,null),r.createElement(hl,{settingsDialogIsOpen:e}),r.createElement(xl,{confirmCancelGameDialogIsOpen:d,closeConfirmCancelGameDialog:()=>{u(!1)},performCancelGame:()=>{i(),t()}})))},Nl=()=>{const[e,t]=[dl(),ul()];return e?r.createElement("button",{onClick:()=>{t()}},"Installer application"):null},kl=()=>r.createElement("svg",{className:"check-icon",width:"20",height:"20",viewBox:"0 0 512 512"},r.createElement("path",{fill:"currentColor",d:"M435.848 83.466L172.804 346.51l-96.652-96.652c-4.686-4.686-12.284-4.686-16.971 0l-28.284 28.284c-4.686 4.686-4.686 12.284 0 16.971l133.421 133.421c4.686 4.686 12.284 4.686 16.971 0l299.813-299.813c4.686-4.686 4.686-12.284 0-16.971l-28.284-28.284c-4.686-4.686-12.284-4.686-16.97 0z"})),xl=({confirmCancelGameDialogIsOpen:e,closeConfirmCancelGameDialog:t,performCancelGame:n})=>r.createElement(xr,{className:"confirm-cancel-game-dialog dialog-spacing-10 dialog-spacing-fluid dialog-spacing-left-fixed dialog-spacing-right-fixed",isOpen:e,onRequestClose:t,requestCloseOnClickOutside:!0},r.createElement("div",{className:"settings-dialog-content"},r.createElement("div",{className:"dialog-close",onClick:t},r.createElement(Dr,null)),r.createElement("div",{className:"title-container"},r.createElement(qe,{className:"illustration",src:ke,width:"40",height:"40"}),r.createElement("div",{className:"title"},"Êtes-vous certain de vouloir annuler la partie ?")),r.createElement("div",{className:"content"},"Cette action irréversible effacera la progression actuelle et remettra la partie à zéro !"),r.createElement("div",{className:"confirm-action"},r.createElement("button",{onClick:()=>{n(),t()}},"Confirmer")))),Sl=new URL(System.resolve("./assets/app.css",t.meta.url)),wl=(e("App",(e=>r.createElement("div",{id:"main",ref:xe()},r.createElement(Wt,{href:Sl}),r.createElement(bl,null),r.createElement(wl,e)))),e=>Se()?r.createElement(rl,e):r.createElement(Ue,e))}}}));

//# sourceMappingURL=root_0a39b839.js.map