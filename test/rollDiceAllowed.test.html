<!DOCTYPE html>
<html>
  <head>
    <title>Mille sabords</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="./favicon.png" />
  </head>

  <body>
    <script type="module">
      import { assert } from "@jsenv/assert"
      import { useRollDiceAllowed } from "src/game.selectors.js"
      import { CARD_COIN } from "src/cards/cards.js"
      import { createCoinFromDice } from "./test.material.js"

      // card not drawn
      {
        const actual = useRollDiceAllowed({
          currentCard: null,
          hasNeverRolled: true,
          dicesRolled: [],
          scoreMarked: false,
          hasDicesToCurse: false,
          threeSkullsOrMoreInCursedArea: false,
        })
        const expected = false
        assert({ actual, expected })
      }

      // dice never rolled
      {
        const actual = useRollDiceAllowed({
          currentCard: CARD_COIN,
          hasNeverRolled: true,
          dicesRolled: [],
          scoreMarked: false,
          hasDicesToCurse: false,
          threeSkullsOrMoreInCursedArea: false,
        })
        const expected = true
        assert({ actual, expected })
      }

      // skulls in rolled area
      {
        const actual = useRollDiceAllowed({
          currentCard: CARD_COIN,
          hasNeverRolled: false,
          dicesRolled: [],
          scoreMarked: false,
          hasDicesToCurse: true,
          threeSkullsOrMoreInCursedArea: false,
        })
        const expected = false
        assert({ actual, expected })
      }

      // not enough dice to roll
      {
        const actual = useRollDiceAllowed({
          currentCard: CARD_COIN,
          hasNeverRolled: false,
          dicesRolled: [createCoinFromDice()],
          scoreMarked: false,
          hasDicesToCurse: false,
          threeSkullsOrMoreInCursedArea: false,
        })
        const expected = false
        assert({ actual, expected })
      }

      // too many skulls
      {
        const actual = useRollDiceAllowed({
          currentCard: CARD_COIN,
          hasNeverRolled: false,
          dicesRolled: [createCoinFromDice(), createCoinFromDice()],
          scoreMarked: false,
          hasDicesToCurse: false,
          threeSkullsOrMoreInCursedArea: true,
        })
        const expected = false
        assert({ actual, expected })
      }
    </script>
  </body>
</html>
