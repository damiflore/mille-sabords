System.register(["./index-ff6147c2.js"],(function(e){"use strict";var t,n,r,o,a,c,i,l,u,s,d,m,f,v,p,g,h,E,b,y,N,k,x,C,w,S,D,I,R,A,O,M,P,j,q,T,L,F,_,B,z,G,U,K,H,V,J,W,X,Y;return{setters:[function(e){t=e.r,n=e._,r=e.a,o=e.b,a=e.c,c=e.d,i=e.e,l=e.i,u=e.f,s=e.S,d=e.g,m=e.h,f=e.j,v=e.k,p=e.l,g=e.m,h=e.n,E=e.u,b=e.o,y=e.p,N=e.s,k=e.q,x=e.t,C=e.v,w=e.w,S=e.x,D=e.y,I=e.z,R=e.A,A=e.B,O=e.C,M=e.D,P=e.E,j=e.F,q=e.G,T=e.H,L=e.I,F=e.J,_=e.K,B=e.L,z=e.M,G=e.N,U=e.O,K=e.P,H=e.Q,V=e.R,J=e.T,W=e.U,X=e.V,Y=e.W}],execute:function(){var Q=function(e,t,n,r){return e.addEventListener(t,n,r),function(){e.removeEventListener(t,n,r)}},Z=function(e){return e.window===e},$=function(e){return 9===e.nodeType},ee=function(e){if(1!==e.nodeType)return!1;var t=e.nodeName.toLowerCase();return"input"===t?"hidden"!==e.type&&te(e):["button","select","datalist","iframe","textarea"].indexOf(t)>-1||e.hasAttribute("tabindex")||e.hasAttribute("tabIndex")||e.hasAttribute("draggable")?te(e):["a","area"].indexOf(t)>-1?!1!==e.hasAttribute("href")&&te(e):["audio","video"].indexOf(t)>-1&&(!1!==e.hasAttribute("controls")&&te(e))},te=function(e){if(ne(e))return!0;if("hidden"===re(e,"visibility"))return!1;for(var t=e;t&&!ne(t);){if("none"===re(t,"display"))return!1;t=t.parentNode}return!0},ne=function(e){return e===e.ownerDocument.documentElement},re=function(e,t){return function(e){return oe(e).getComputedStyle(e)}(e).getPropertyValue(t)},oe=function(e){return Z(e)?e:$(e)?e.defaultView:ae(e).defaultView},ae=function(e){return Z(e)?e.document:$(e)?e:e.ownerDocument},ce=t.createContext,ie=t.useContext,le=t.useReducer,ue=t.useState,se=ce(),de=function(e,t){return t(e)},me={},fe=function(e){var n=e.children;return t.createElement(se.Provider,{value:le(de,me)},n)},ve=function(){return ie(se)[0]},pe=function(e){return ie(se)[0][e]},ge=function(e){var n=ie(se)[1];return t.useEffect((function(){n((function(t){return e in t?t:r(r({},t),{},o({},e,{status:"loading"}))}))}),[]),function(){n((function(t){return e in t&&"loaded"===t[e].status?t:r(r({},t),{},o({},e,{status:"loaded"}))}))}},he=function(e,t){var n=Q(e,"load",(function(){r(),t()})),r=Q(e,"error",(function(){n(),t()}));return function(){n(),r()}},Ee=function(e){var n=e.href,r=ge(n);return a.createPortal(t.createElement("link",{href:n,ref:function(e){return e?he(e,r):function(){}},rel:"stylesheet",type:"text/css"}),document.head)},be=function(){return t.createElement(ye,null)},ye=function(){var e=Ne();return t.createElement("div",{className:"new-game"},t.createElement("img",{src:"src/dices/dice_sword.png"}),t.createElement("button",{onClick:e},"Nouvelle partie"))},Ne=c((function(e){return r(r({},e),{},{gameCreated:!0})})),ke=function(e,t){var n=xe(e,t);return Boolean(n)},xe=function(e,n){var r=t.useRef(!1);t.useEffect((function(){!1===r.current&&(r.current=!0)}));var o=t.useRef(n);return t.useEffect((function(){o.current=n}),n),r.current&&e.apply(void 0,i(o.current))?{from:o.current,to:n}:null},Ce=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),n.current},we=function(e){var t=e.card,n=e.symbolsInChest,r=e.scoreMarked,o=e.markScoreAllowed;return l(t)?r||o?Se(n,{goal:t.numberOfSwords,gamble:t.gambleAmount}):-t.gambleAmount:u(t)?Ie(n.map((function(e){return e===s?d:e}))):m(t)?2*Ie(n):f(t)||v(t)?Ie(n,9):Ie(n)},Se=function(e,t){var n=t.goal,r=t.gamble;return De(e,h)>=n?Ie(e)+r:-r},De=function(e,t){return e.filter((function(e){return e===t})).length},Ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=0,r=0,o=Re(e);return Object.values(o).forEach((function(e){3===e&&(n+=100),4===e&&(n+=200),5===e&&(n+=500),6===e&&(n+=1e3),7===e&&(n+=2e3),8===e&&(n+=4e3),e>2&&(r+=e)})),e.forEach((function(e){e===p&&(n+=100,o[p]<3&&(r+=1)),e===g&&(n+=100,o[g]<3&&(r+=1))})),r===t&&(n+=500),n},Re=function(e){var t={};return e.forEach((function(e){t.hasOwnProperty(e)?t[e]++:t[e]=1})),t},Ae=t.useMemo,Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentPlayerId,n=void 0===t?E():t,r=e.players,o=void 0===r?b():r;return o.find((function(e){return e.id===n}))},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rollCount,n=void 0===t?R():t;return 0===n},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rollCount,n=void 0===t?R():t;return n>0},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rollCount,n=void 0===t?R():t;return n>1},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dices,n=void 0===t?A():t,r=e.chestSlots,o=void 0===r?y():r;return Object.keys(o).reduce((function(e,t){var r=o[t];if(r&&"symbol"===r.type)return[].concat(i(e),[r.value]);if(r&&"dice"===r.type){var a=r.value,c=n[a];return[].concat(i(e),[T(c)])}return e}),[])},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.skullCountInCursedArea,n=void 0===t?Ge():t;return 3-n},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dicesToCurse,n=void 0===t?_e():t;return n.length>0},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.chestSlots,n=void 0===t?y():t;return Object.keys(n).reduce((function(e,t){var r=n[t];return r&&"dice"===r.type?[].concat(i(e),[r.value]):e}),[])},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dices,n=void 0===t?A():t,r=e.diceRolledIds,o=void 0===r?O():r,a=e.witchUncursedDiceId,c=void 0===a?M():a,i=e.remainingSpotInCursedArea,l=void 0===i?Te():i,u=o.map((function(e){return n[e]})).filter((function(e){return!!P(e)&&e.id!==c})).slice(0,l);return u},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentCardId,n=void 0===t?x():t,r=e.hasNeverRolled,o=void 0===r?Me():r,a=e.diceRolledIds,c=void 0===a?O():a,i=e.scoreMarked,l=void 0===i?j():i,u=e.threeSkullsOrMoreInCursedArea,s=void 0===u?ze():u,d=e.hasDicesToCurse,m=void 0===d?Le():d;return!!n&&(!l&&(!!o||!s&&(!m&&!(c.length<2))))},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.skullCountInCursedArea,n=void 0===t?Ge():t;return n>2},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.diceCursedIds,n=void 0===t?k():t,r=e.symbolsFromCard,o=void 0===r?Ue():r;return n.length+o.filter((function(e){return N(e)})).length},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentCardId,n=void 0===t?x():t,r=C(n);return f(r)?[g]:v(r)?[p]:w(r)?[S]:D(r)?[S,S]:[]},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hasRolledMoreThanOnce,n=void 0===t?je():t,r=e.scoreMarked,o=void 0===r?j():r,a=e.currentCardId,c=void 0===a?x():a,i=e.threeSkullsOrMoreInCursedArea,l=void 0===i?ze():i,u=e.hasDicesToCurse,s=void 0===u?Le():u;return!o&&(l?!(!q(C(c))||!n):!s&&!!c)},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentCardId,n=void 0===t?x():t,r=e.symbolsInChest,o=void 0===r?qe():r,a=e.scoreMarked,c=void 0===a?j():a,i=e.markScoreAllowed,l=void 0===i?Ke():i;return Ae((function(){return we({card:C(n),symbolsInChest:o,scoreMarked:c,markScoreAllowed:l})}),[n,o,c,l])},Ve=c((function(e,t){var n=e.players,o=e.currentPlayerId,a=n.find((function(e){return e.id===o})),c=a.score+t;return a.score=c<0?0:c,r(r({},e),{},{players:i(n),scoreMarked:!0})})),Je=c((function(e){return r(r({},e),{},{isOnSkullIsland:!0})})),We=c((function(e){return r(r({},e),{},{witchUncursedDiceId:null,rollCount:0,diceRolledIds:[],diceCursedIds:[],chestSlots:{1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null,9:null},scoreMarked:!1,isOnSkullIsland:!1,roundStarted:!0,currentPlayerGettingReady:!1})})),Xe=c((function(e,t,n){var o=n.x,a=n.y,c=e.dices;return t.rolledAreaPosition={x:o,y:a},r(r({},e),{},{dices:r({},c)})})),Ye=c((function(e,t,n){var a=e.chestSlots,c=Object.keys(a).find((function(e){var n=a[e];return n&&"dice"===n.type&&n.value===t.id}));return r(r({},e),{},{chestSlots:r(r(r({},a),c?o({},c,null):{}),{},o({},n,{type:"dice",value:t.id}))})})),Qe=c((function(e,t){var n=e.diceRolledIds,o=e.diceCursedIds;return r(r({},e),{},{diceRolledIds:n.filter((function(e){return e!==t.id})),diceCursedIds:[].concat(i(o),[t.id])})})),Ze=c((function(e,t){var n=e.diceRolledIds,o=e.diceCursedIds;return r(r({},e),{},{witchUncursedDiceId:t.id,diceRolledIds:[].concat(i(n),[t.id]),diceCursedIds:o.filter((function(e){return e!==t.id}))})})),$e=c((function(e,t){var n=e.diceRolledIds,a=e.chestSlots,c=Object.keys(a).find((function(e){var n=a[e];return n&&"dice"===n.type&&n.value===t.id}));return r(r({},e),{},{diceRolledIds:[].concat(i(n),[t.id]),chestSlots:r(r({},a),{},o({},c,null))})})),et=c((function(e,t,n){var a=e.diceRolledIds,c=e.chestSlots;return r(r({},e),{},{diceRolledIds:a.filter((function(e){return e!==t.id})),chestSlots:r(r({},c),{},o({},n,{type:"dice",value:t.id}))})})),tt=c((function(e){var t=e.cardIds,n=e.cardUsedIds,o=t[0];return r(r({},e),{},{cardIds:t.slice(1),cardUsedIds:[].concat(i(n),[o]),currentCardId:o})})),nt=c((function(e){var t=e.chestSlots;return r(r({},e),{},{chestSlots:r(r({},t),{},{1:{type:"symbol",value:g}})})})),rt=c((function(e){var t=e.chestSlots;return r(r({},e),{},{chestSlots:r(r({},t),{},{1:{type:"symbol",value:p}})})})),ot=c((function(e){var t=e.cardUsedIds;return r(r({},e),{},{cardIds:L(t),cardUsedIds:[]})})),at=t.useEffect,ct=function(){return it(),null},it=function(){lt(),ut(),st(),dt(),mt()},lt=function(){var e=_e(),t=Qe();at((function(){if(0===e.length)return function(){};var n=setTimeout((function(){e.forEach((function(e){t(e)}))}),1e3);return function(){clearTimeout(n)}}),[e])},ut=function(){var e=C(x()),t=j(),n=Ve(),r=ze(),o=ke((function(e){return!e&&r}),[r]),a=He(),c=l(e);at((function(){c&&!t&&o&&n(a)}),[c,t,o,a])},st=function(){var e=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).rollCount;return 1===(void 0===e?R():e)}(),t=C(x()),n=F(),r=Ge(),o=Je();at((function(){e&&(n||l(t)||r<4||o())}),[e,n,t,r])},dt=function(){var e=nt(),t=C(x()),n=ke((function(e){return!f(e)&&f(t)}),[t]);at((function(){n&&e()}),[n])},mt=function(){var e=rt(),t=C(x()),n=ke((function(e){return!v(e)&&v(t)}),[t]);at((function(){n&&e()}),[n])},ft=function(e){var n=e.rolledAreaRef,o=e.offscreenRef,a=e.dragoverGesture,c=Fe(),i=a&&a.dropTarget===n.current&&a.dropAllowed&&c.includes(a.dropPayload.id);return t.createElement("div",{className:"dice-ongoing"},t.createElement("div",{className:"map"}),t.createElement("div",{className:"area",ref:n,style:r({},i?{outline:"2px dotted"}:{})}),t.createElement("div",{className:"offscreen-area",ref:o}))};var vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pt=function(e,t){if(null===e)return{};var n,r,o=function(e,t){if(null===e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o},gt=function(e,t){for(var n=Et(e,e),r=n.next(),o=r.done,a=r.value;!1===o;){if(t(a))return a;var c=n.next();o=c.done,a=c.value}return null},ht=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!r){var o=t.firstChild;if(o)return o}var a=t.nextSibling;if(a)return a;var c=t.parentNode;return c&&c!==n?e(c,n,!0):null},Et=function(e,t){var n=e;return{next:function(){var e=ht(n,t);return n=e,{done:!1===Boolean(e),value:e}}}},bt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e,o=!1,a=function(){var e=ht(r,t,n&&!1===o);return o=!0,r=e,{done:!1===Boolean(e),value:e}};return{next:a}},yt=function(e){for(var t=e.lastChild;t;){var n=t.lastChild;if(!n)break;t=n}return t},Nt=function(e,t){var n=e;return{next:function(){var e=function(e,t){var n=e.previousSibling;if(n){return yt(n)||n}if(e!==t){var r=e.parentNode;if(r&&r!==t)return r}return null}(n,t);return n=e,{done:!1===Boolean(e),value:e}}}},kt=function(e){var t=gt(e,ee);return t||(ee(e)?e:null)},xt=function(e){if(3===e.nodeType)return console.warn("cannot trap focus inside a text node"),function(){};if(St.find((function(t){return t.element===e})))return console.warn("focus already trapped inside this element"),function(){};var t=function(){return gt(e,Ct)},n=function(){return function(e,t){var n=yt(e);if(n)for(var r=Nt(n,e),o=r.next(),a=o.done,c=o.value;!1===a;){if(t(c))return c;var i=r.next();a=i.done,c=i.value}return null}(e,Ct)},r=function(){return function(e){for(var t=e.from,n=e.root,r=void 0===n?null:n,o=e.predicate,a=Nt(t,r),c=a.next(),i=c.done,l=c.value;!1===i;){if(o(l))return l;var u=a.next();i=u.done,l=u.value}return null}({from:document.activeElement,root:e,predicate:Ct})||n()},o=function(){return function(e){for(var t=e.from,n=e.root,r=void 0===n?null:n,o=e.predicate,a=e.skipChildren,c=bt(t,r,void 0!==a&&a),i=c.next(),l=i.done,u=i.value;!1===l;){if(o(u))return u;var s=c.next();l=s.done,u=s.value}return null}({from:document.activeElement,root:e,predicate:Ct})||t()},a=Dt({element:e,lock:function(){var a=function(t){(function(t){return t.target!==e&&!e.contains(t.target)})(t)&&(t.preventDefault(),t.stopImmediatePropagation())},c=function(e){wt(e)&&(e.preventDefault(),function(e){var a=document.activeElement===document.body;if(e.shiftKey){var c=a?n():r();c&&c.focus()}else{var i=a?t():o();i&&i.focus()}}(e))};return document.addEventListener("mousedown",a,{capture:!0,passive:!1}),document.addEventListener("keydown",c,{capture:!0,passive:!1}),function(){document.removeEventListener("mousedown",a,{capture:!0,passive:!1}),document.removeEventListener("keydown",c,{capture:!0,passive:!1})}}});return function(){a()}},Ct=function(e){return!function(e){return e.hasAttribute&&e.hasAttribute("tabIndex")&&Number(e.getAttribute("tabindex"))<0}(e)&&ee(e)},wt=function(e){return"Tab"===e.key||9===e.keyCode},St=[],Dt=function(e){var t,n=e.lock;St.length>0&&(t=St[St.length-1]).unlock();var r={lock:n,unlock:n()};return St.push(r),function(){if(0!==St.length){var e=St[St.length-1];r===e?(St.pop(),r.unlock(),t&&(t.unlock=t.lock())):console.warn("you must deactivate trap in the same order they were activated")}else console.warn("cannot deactivate an already deactivated trap")}},It=function(e){if("object"!==_(e)||1!==e.nodeType)throw new TypeError("getScrollableParent first argument must be DOM node");var t=e;return"fixed"===re(t,"position")?Rt(t.ownerDocument):_t(t)||Rt(t.ownerDocument)},Rt=function(e){if("scrollingElement"in e)return e.scrollingElement;if(jt(e))return e.documentElement;var t=e.body,n=t&&!/body/i.test(t.tagName)?At(t):t;return n&&Mt(n)?null:n},At=function(e){for(var t=e;t=t.nextSibling;)if(1===t.nodeType&&Ot(t))return t;return null},Ot=function(e){return e.ownerDocument.body===e},Mt=function(e){if(!Tt(e))return!1;if(Pt(e))return!1;var t=e.ownerDocument.documentElement;return!!Tt(t)&&!Pt(t)},Pt=function(e){var t=re(e,"display");return"none"!==t&&("table-row"!==t&&"table-group"!==t&&"table-column"!==t||"collapsed"!==re(e,"visibility"))},jt=function(e){return!!/^CSS1/.test(e.compatMode)&&qt(e)},qt=function(e){var t=e.createElement("iframe");t.style.height="1px",(e.body||e.documentElement||e).appendChild(t);var n=t.contentWindow.document;n.write('<!DOCTYPE html><div style="height:9999em">x</div>'),n.close();var r=n.documentElement.scrollHeight>n.body.scrollHeight;return t.parentNode.removeChild(t),r},Tt=function(e){return!Lt(e)||!Ft(e)},Lt=function(e){return"visible"===re(e,"overflow-x")||"visible"===re(e,"overflow")},Ft=function(e){return"visible"===re(e,"overflow-y")||"visible"===re(e,"overflow")},_t=function(e){for(var t=re(e,"position"),n=e.parentNode;n;){if(ne(n))return null;if("absolute"!==t||"static"!==re(n,"position")){if(Tt(n))return n;n=n.parentNode}else n=n.parentNode}return null},Bt=t.useEffect,zt={position:"absolute",top:"5%",left:"0",right:"0",width:"fit-content",height:"fit-content",margin:"auto",padding:"1em",overscrollBehavior:"contain",outline:"none",background:"white",color:"black",border:"solid"},Gt={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.46)"},Ut=function(e){var o=e.container,c=void 0===o?document.body:o,i=e.children,l=e.isOpen,u=e.closeMethod,s=void 0===u?"display-none":u,d=e.stealFocus,m=void 0===d||d,f=e.restoreStolenFocus,v=void 0===f||f,p=e.trapFocus,g=void 0===p||p,h=e.requestCloseOnEscape,E=void 0===h||h,b=e.requestCloseOnClickOutside,y=void 0!==b&&b,N=e.onAfterOpen,k=void 0===N?function(){}:N,x=e.onRequestClose,C=void 0===x?function(){}:x,w=e.onFocusIn,S=void 0===w?function(){}:w,D=e.onFocusOut,I=void 0===D?function(){}:D,R=e.backdropProps,A=void 0===R?{}:R,O=pt(e,["container","children","isOpen","closeMethod","stealFocus","restoreStolenFocus","trapFocus","requestCloseOnEscape","requestCloseOnClickOutside","onAfterOpen","onRequestClose","onFocusIn","onFocusOut","backdropProps"]);if(!c)return null;var M=t.useState(null),P=n(M,2),j=P[0],q=P[1],T=Boolean(j);return ke((function(e){return!e&&l}),[l])&&k(),Bt((function(){if(!l||!T)return function(){};var e=Vt(j),t=function(t){t.relatedTarget||e&&(e=!1,I(t))},n=function(t){S(t),e=!0},r=function(t){Vt(j)?e=!0:(e=!1,I(t))};return j.addEventListener("focus",n,!0),document.addEventListener("focus",r,!0),document.addEventListener("blur",t,!0),function(){j.removeEventListener("focus",n,!0),document.removeEventListener("focus",r,!0),document.removeEventListener("blur",t,!0)}}),[l,T,S,I]),Bt((function(){return l&&T?function(e){for(var t=[],n=e.previousSibling;n;)1===n.nodeType&&Tt(n)&&t.push(n),n=n.previousSibling;var r=It(e);t.push(r);var o=t.map((function(e){var t=e.style.overflow;return e.style.overflow="hidden",function(){t?e.style.overflow=t:delete e.style.overflow}}));return function(){o.forEach((function(e){e()}))}}(j):function(){}}),[l,T]),Bt((function(){return l&&T&&g?xt(j):function(){}}),[l,T,g]),Bt((function(){if(!l||!T||!m)return function(){};var e=document.activeElement,t=kt(j);return t&&t.focus(),function(){t&&("function"==typeof v?v(e):!0===v&&e.focus())}}),[l,T,m]),Bt((function(){if(!l||!j||!j.parentNode)return function(){};var e=[];return Array.from(j.parentNode.children).forEach((function(t){t!==j&&e.push(t)})),e.forEach((function(e){e.setAttribute("aria-hidden","true")})),function(){e.forEach((function(e){e.removeAttribute("aria-hidden","true")}))}}),[l,j]),"dom-remove"!==s||l?a.createPortal(t.createElement(t.Fragment,null,l?t.createElement(Kt,vt({},A,{style:r(r({},Gt),A.style),onMouseDownPassive:function(e){if(e.preventDefault(),!Vt(j)){var t=kt(j);t&&t.focus()}},onClick:function(e){if(y){var t=e.target;t===j||j.contains(t)||C(e)}A.onClick&&A.onClick(e)}})):null,t.createElement("div",vt({},O,{style:r(r(r({},zt),O.style),l?{}:Ht(s)),ref:function(e){q(e),O.ref&&O.ref(e)},onKeyDown:function(e){E&&e.keyCode===Jt&&C(e),O.onKeyDown&&O.onKeyDown(e)},hidden:"hidden-attribute"===s?l:void 0,tabIndex:"-1"}),i)),c):null},Kt=function(e){var r=e.onMouseDownPassive,o=pt(e,["onMouseDownPassive"]),a=t.useState(null),c=n(a,2),i=c[0],l=c[1];return Bt((function(){return i?(i.addEventListener("mousedown",r,{passive:!1}),function(){i.removeEventListener("mousedown",r,{passive:!1})}):function(){}}),[i]),t.createElement("div",vt({ref:function(e){l(e),o.ref&&o.ref(e)}},o))},Ht=function(e){return"display-none"===e?{display:"none"}:"visibility-hidden"===e?{visibility:"hidden"}:{}},Vt=function(e){var t=document.activeElement;return e===t||e.contains(t)},Jt=27,Wt=function(e){return t.createElement(t.Fragment,null,t.createElement(Ee,{href:"/src/dialog/dialog.css"}),t.createElement(Ut,vt({container:B(),backdropProps:{className:"dialog--backdrop"},style:{top:"10%",left:"6%",right:"6%",bottom:"8%",height:"auto",width:"auto",padding:"0",border:"none",background:"none",maxWidth:"620px",margin:"0 auto"},className:"dialog"},e)))},Xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentCardId,n=void 0===t?x():t,r=C(n);return l(r)?r.numberOfSwords:null},Yt=function(){var e=x(),n=qe(),r=Xt();if(!e)return null;var o=C(e);if(!l(o))return null;var a=De(n,h),c=new Array(r).fill("");return t.createElement("div",{className:"sword-challenge-indicators"},c.map((function(e,n){return a>=n+1?t.createElement(Qt,{key:n}):t.createElement(Zt,{key:n})})))},Qt=function(){return t.createElement("div",{className:"sword-icon"},t.createElement("img",{src:"/src/dices/dice_sword.png"}))},Zt=function(){return t.createElement("div",{className:"sword-icon disabled"},t.createElement("img",{src:"/src/header/swords-disabled.png"}))},$t=function(){return t.createElement("div",{className:"star-rain-container"},t.createElement("div",{className:"star",id:"star-01"},t.createElement(en,null)),t.createElement("div",{className:"star",id:"star-02"},t.createElement(en,null)),t.createElement("div",{className:"star",id:"star-03"},t.createElement(en,null)),t.createElement("div",{className:"star",id:"star-04"},t.createElement(en,null)),t.createElement("div",{className:"star",id:"star-05"},t.createElement(en,null)),t.createElement("div",{className:"star",id:"star-06"},t.createElement(en,null)))},en=function(){return t.createElement("svg",{viewBox:"0 0 217.791 210.633"},t.createElement("path",{fill:"#FFFFE6",d:"M94.15,77.97c0,0-2-54,10-73.5s23,28.5,25.5,72.5c0,0,69.197,4.589,86.5,21c13.637,12.934-61.5,31-87,33.5 c-2,14.5-1.831,60.464-16.5,75.5c-20,20.5-25.5-50.5-23-78c-19-1.5-81.5-3.5-89-17.5S52.15,85.97,94.15,77.97z"}))},tn=t.useState,nn=t.useEffect,rn=function(){var e=C(x()),t=qe(),n=De(t,h),r=Xt();return!!l(e)&&!(n>=r)},on=function(){var e=C(x());return t.createElement("div",{className:"score-area ".concat(rn()?"animated":"")},e?t.createElement(an,null):null)},an=function(){var e=He(),r=C(x()),o=j(),a=tn(!1),c=n(a,2),i=c[0],u=c[1];return t.createElement(t.Fragment,null,m(r)?t.createElement(cn,null):null,o&&t.createElement($t,null),t.createElement("div",{className:"round-score ".concat(rn()?"hidden":""),onClick:function(){u(!0)}},e),l(r)?t.createElement(ln,null):null,t.createElement(un,{dialogIsOpen:i,closeDialog:function(){u(!1)}}))},cn=function(){return z()?t.createElement("div",{className:"pirate-hook"}):t.createElement("div",{style:{display:"none"},className:"pirate-hook"})},ln=function(){var e=He(),r=qe(),o=De(r,h),a=Xt(),c=new Array(a).fill(""),i=o>=a,l=ke((function(e){return e<o}),[o]),u=tn(!1),s=n(u,2),d=s[0],m=s[1];return nn((function(){l&&m(!0)}),[l]),nn((function(){if(d){var e=setTimeout((function(){m(!1)}),300);return function(){clearTimeout(e)}}return function(){}}),[d]),t.createElement(t.Fragment,null,t.createElement("div",{className:"ropes ".concat(i?"challenge-won":"")},c.map((function(e,n){return o>=n+1?t.createElement("div",{key:n,className:"rope rope-".concat(n+1," cut-rope")}):t.createElement("div",{key:n,className:"rope rope-".concat(n+1)})}))),d&&o<=a?t.createElement("div",{className:"sword-slice"},t.createElement("div",{className:"triangle-left"}),t.createElement("div",{className:"triangle-right"})):null,t.createElement("div",{className:"negative-round-score rotate-".concat(o," ").concat(i?"removed":"")},e))},un=function(e){var n=e.dialogIsOpen,r=e.closeDialog;return t.createElement(Wt,{isOpen:n,onRequestClose:r,requestCloseOnClickOutside:!0},t.createElement("div",{className:"border border-right"}),t.createElement("div",{className:"border border-left"}),t.createElement("div",{className:"border border-top"}),t.createElement("div",{className:"border border-bottom"}),t.createElement("div",{className:"dialog-title"},"Score"),t.createElement("div",{className:"dialog-content score-rules-dialog"},t.createElement("div",{className:"dialog-body"},t.createElement("div",{className:"dialog-box"},t.createElement("div",{className:"dialog-label"},"Combinaisons de dés"),t.createElement("div",{className:"columns"},t.createElement("div",{className:"column"},t.createElement("div",{className:"column-title"},"Symbols identiques"),t.createElement("span",{className:"symbol-number"},"3"),t.createElement("span",{className:"symbol-number"},"4"),t.createElement("span",{className:"symbol-number"},"5"),t.createElement("span",{className:"symbol-number"},"6"),t.createElement("span",{className:"symbol-number"},"7"),t.createElement("span",{className:"symbol-number"},"8")),t.createElement("div",{className:"column"},t.createElement("div",{className:"column-title"},"Points"),t.createElement("span",{className:"points"},"+100"),t.createElement("span",{className:"points"},"+200"),t.createElement("span",{className:"points"},"+500"),t.createElement("span",{className:"points"},"+1000"),t.createElement("span",{className:"points"},"+2000"),t.createElement("span",{className:"points"},"+4000")))),t.createElement("div",{className:"dialog-box"},t.createElement("div",{className:"dialog-label"},"Dés spéciaux"),t.createElement("div",{className:"columns"},t.createElement("div",{className:"column"},t.createElement("div",{className:"column-title"},"Symbol"),t.createElement("img",{src:"/src/dices/dice_coin.png"}),t.createElement("img",{src:"/src/dices/dice_diamond.png"})),t.createElement("div",{className:"column"},t.createElement("div",{className:"column-title"},"Points"),t.createElement("span",{className:"points"},"+100"),t.createElement("span",{className:"points"},"+100")))),t.createElement("div",{className:"dialog-box last"},t.createElement("div",{className:"dialog-label"},"Bonus coffre plein"),t.createElement("div",{className:"columns"},t.createElement("div",{className:"column"},t.createElement("div",{className:"column-title"},"Dés utilisés"),t.createElement("span",{className:"symbol-number"},"8")),t.createElement("div",{className:"column"},t.createElement("div",{className:"column-title"},"Points"),t.createElement("span",{className:"points"},"+500")))))))},sn=50,dn=function(e){var n=e.chestRef,o=e.dragoverGesture,a=y(),c=O(),i=ze(),l=o&&o.dropTarget===n.current&&o.dropAllowed&&c.includes(o.dropPayload.id);return t.createElement("div",{className:"chest"},t.createElement("div",{className:"dice-area",ref:n,style:r({},l?{outline:"2px dotted"}:{})},t.createElement("div",{className:"box"},Object.keys(a).map((function(e){return t.createElement("div",{className:"slot",key:e,"data-chest-slot":e},t.createElement(mn,{chestSlotContent:a[e]}))}))),t.createElement("div",{className:"top-left-corner"}),t.createElement("div",{className:"top-right-corner"}),t.createElement("div",{className:"bottom-left-corner"}),t.createElement("div",{className:"bottom-right-corner"}),i?t.createElement(fn,null):null),t.createElement(on,null))},mn=function(e){var n=e.chestSlotContent,r=C(x());if(!n)return null;if("symbol"===n.type){var o=n.value;return t.createElement("button",{className:"dice",style:{width:sn,height:sn,color:"#fcfcfc",margin:"5px",backgroundColor:r.color1,borderColor:r.color2,borderWidth:"2px",borderStyle:"solid"}},t.createElement("img",{src:"/src/dices/dice_".concat(o,".png"),draggable:"false",style:{width:"100%",height:"100%"}}))}return null},fn=function(){return t.createElement("div",{className:"cursed-cover"},t.createElement("img",{draggable:"false",src:"/src/chest/cursed-grid.png",alt:"cursed-cover"}))},vn={animals:{name:"Animaux",rule:"Les singes et les perroquest obtenus sur les dés comptent comme un même symbol dans une combinaison.",more:"Par exemple 2 perroquets et 3 singes forment une conbinaison de 5 dés identiques, soit 500 points."},chest:{name:"Coffre au trésor",rule:'Lorsque le joueur sauvegarde ses dés, grâce à la carte "Coffre au trésor" les dés sont protégés du mauvais sort.',more:"Ainsi même lorsque le joueur obtient 3 têtes de morts, son tour prends fin, mais il peut marquer les points totalisés grâce aux dés sauvegardés!"},coin:{name:"Pièce d'or",rule:"Le joueur commence son tour avec un symbol pièce d'or. Il rapporte des points aussi bien dans une combinaison de dés que comme simple pièce (+100)."},diamond:{name:"Diamant",rule:"Le joueur commence son tour avec un symbol diamant. Il rapporte des points aussi bien dans une combinaison de dés que comme simple diamant (+100)."},pirate:{name:"Capitaine des pirates",rule:"Grâce à l'aide du capitaine, tous les points comptabilisés pendant ce tour sont doublés !"},witch:{name:"Sorcière",rule:"Avec ses potions magiques, la sorcière permet exceptionnellement au joueur de relancer, une fois, un dé avec une tête de mort."},"1skull":{name:"Tête de mort",rule:"Le tour du joueur débute avec un symbole tête de mort."},"2skulls":{name:"2 têtes de mort",rule:"Le tour du joueur débute avec 2 symboles tête de mort."},"2sword-challenge":{name:"Bateau pirate",rule:"Le joueur doit obtenir au minimum 2 symbols sabres. Si il y parvient, il gagne +300 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -300 points pour ce tour, quelque soit son résultat aux dés.",more:"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points."},"3sword-challenge":{name:"Bateau pirate",rule:"Le joueur doit obtenir au minimum 3 symbols sabres. Si il y parvient, il gagne +500 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -500 points pour ce tour, quelque soit son résultat aux dés.",more:"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points."},"4sword-challenge":{name:"Bateau pirate",rule:"Le joueur doit obtenir au minimum 4 symbols sabres. Si il y parvient, il gagne +1000 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -1000 points pour ce tour, quelque soit son résultat aux dés.",more:"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points."}},pn=function(e){var n=e.dialogIsOpen,r=e.closeDialog,o=C(x()),a=vn[o.type];return t.createElement(Wt,{isOpen:n,onRequestClose:r,requestCloseOnClickOutside:!0},t.createElement("div",{className:"border border-right"}),t.createElement("div",{className:"border border-left"}),t.createElement("div",{className:"border border-top"}),t.createElement("div",{className:"border border-bottom"}),t.createElement("div",{className:"dialog-title"},"Carte"),t.createElement("div",{className:"dialog-content card-rules-dialog"},t.createElement("div",{className:"dialog-body"},a&&t.createElement(t.Fragment,null,t.createElement("div",{className:"dialog-label"},a.name),t.createElement("img",{className:"current-card",src:"/src/cards/card_".concat(o.type,".png"),alt:o.type}),t.createElement("div",{className:"text-rule"},a.rule),a.more?t.createElement("div",{className:"text-rule"},a.more):null))))},gn=function(e){var t=e.duration,n=void 0===t?300:t,r=e.timingFunction,o=void 0===r?function(e){return e}:r,a=e.onProgress,c=void 0===a?function(){}:a,i=e.onCancel,l=void 0===i?function(){}:i,u=e.onComplete,s=void 0===u?function(){}:u;if(isNaN(n))return console.warn("duration must be a number, received ".concat(n)),function(){};n=parseInt(n,10);var d,m=performance.now(),f=!1,v=0,p=0;!function e(){d=null;var t=performance.now();v=Math.min((t-m)/n,1),p=o(v),c({done:f=1===v,rawProgress:v,progress:p}),f?s():d=window.requestAnimationFrame(e)}();return function(){d&&(window.cancelAnimationFrame(d),d=null),f||(f=!0,l({rawProgress:v,progress:p}))}},hn=function(e,r){var o=t.useState(null),a=n(o,2),c=a[0],i=a[1],l=Ce(e);t.useEffect((function(){l!==e&&i({from:l,to:e})}),[l,e]),t.useEffect((function(){return c?r(c.from,c.to):function(){}}),[c])},En=function(e){var r=e.openScoreboard,o=t.useState(!1),a=n(o,2),c=a[0],i=a[1],l=C(x());return t.createElement("div",{className:"header"},t.createElement("div",{className:"card-container",onClick:function(){l&&i(!0)}},t.createElement("div",{className:"small-card"},t.createElement(bn,null)),t.createElement(Yt,null)),t.createElement(kn,{openScoreboard:r}),t.createElement(xn,null),t.createElement(pn,{dialogIsOpen:c,closeDialog:function(){i(!1)}}))},bn=function(){var e=C(x());return e?t.createElement(Nn,{card:e}):t.createElement(yn,null)},yn=function(){return t.createElement("div",{className:"card default-card",style:{backgroundImage:"url('/src/cards/card_default.png')",backgroundSize:"217px"}})},Nn=function(e){var n=e.card;return t.createElement("div",{className:"card current-card",style:{backgroundColor:n.color1,borderColor:n.color2}},t.createElement("img",{src:"/src/cards/card_small-".concat(l(n)?"sword-challenge":n.type,".png"),alt:n.type}))},kn=function(e){var n=e.openScoreboard,r=Oe();return t.createElement("img",{onClick:n,className:"avatar",src:"src/score-board/".concat(r&&r.character.img),alt:"player",style:{borderColor:r&&r.character.color||"white"}})},xn=function(){var e=Oe(),r=e.score,o=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.duration,a=void 0===o?300:o,c=r.timingFunction,i=t.useState(null),l=n(i,2),u=l[0],s=l[1];return hn(e,(function(e,t){return s({value:e}),gn({duration:a,timingFunction:c,onProgress:function(n){var r=n.progress,o=Math.round(e+(t-e)*r);s({value:o})},onComplete:function(){s(null)}})})),u}(r,{duration:2e3,timingFunction:function(e){return 1-Math.pow(1-e,5)}});return t.createElement("div",{className:"total-score"},t.createElement("span",{className:"score",style:{backgroundColor:e&&e.character.color||"white"}},o?o.value:r))},Cn=function(e,t,n){var r=Sn(n),o=Math.cos(r),a=Math.sin(r),c=t.x-e.x,i=t.y-e.y;return{x:Math.round(o*c+a*i+e.x),y:Math.round(o*i-a*c+e.y)}},wn=function(e){var t=n(e,4),r=t[0],o=t[1],a=t[2],c=t[3];return{x:(r.x+o.x+a.x+c.x)/4,y:(r.y+o.y+a.y+c.y)/4}},Sn=function(e){return e*Math.PI/180},Dn=function(e,t){return!!In(t,(function(t){return r=t,o=n(e,2),a=o[0],c=o[1],i=n(r,2),l=i[0],u=i[1],s=(u.x-l.x)*(a.y-l.y)-(u.y-l.y)*(a.x-l.x),d=(c.x-a.x)*(a.y-l.y)-(c.y-a.y)*(a.x-l.x),m=(u.y-l.y)*(c.x-a.x)-(u.x-l.x)*(c.y-a.y),(0!==s||0!==d||0!==m)&&0!==m&&(d/=m,(s/=m)>=0&&s<=1&&d>=0&&d<=1);var r,o,a,c,i,l,u,s,d,m}))},In=function(e,t){var r=n(e,4),o=r[0],a=r[1],c=r[2],i=r[3];return!!t([o,a])||(!!t([a,c])||(!!t([c,i])||!!t([i,o])))},Rn=function(e,t){var n=e.left,r=e.right,o=r-n;n<t.left?r=(n=t.left)+o:r>t.right&&(r=(n=t.right-o)+o);var a=e.top,c=e.bottom,i=c-a;return a<t.top?c=(a=t.top)+i:c>t.bottom&&(c=(a=t.bottom-i)+i),{left:n,right:r,top:a,bottom:c}},An=function(e){var t=e.left,n=e.right,r=e.top;return{x:t+(n-t)/2,y:r+(e.bottom-r)/2}},On=function(e,t){var n,r,o,a,c=An(e),i=An(t);return r=i,o=(n=c).x-r.x,a=n.y-r.y,Math.sqrt(o*o+a*a)},Mn=function(e){var t,n,r,o=e.getBoundingClientRect(),a=(n=oe(t=e),r=ae(t),{x:n.pageXOffset||r.documentElement.scrollLeft,y:n.pageYOffset||r.documentElement.scrollTop}),c=o.left+a.x,i=o.top+a.y,l=c+o.width,u=i+o.height;return{left:Math.floor(c),top:Math.floor(i),right:Math.floor(l),bottom:Math.floor(u)}},Pn=function(e,t){var n,r,o=Mn(e);return r=t,!((n=o).right<=r.left||n.left>=r.right||n.bottom<=r.top||n.top>=r.bottom)},jn=function(e,t){var n=e.map((function(e){return Mn(e)})),r=function(e,t){var n=On(t,e[0]);return e.reduce((function(e,r){var o=On(t,r);return o<n?(n=o,r):e}))}(n,t);return e[n.indexOf(r)]},qn=function(e){var t=e.x,n=e.y,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.color,a=void 0===o?"yellow":o,c=r.autoRemoveAfter,i=void 0===c?2e3:c,l=document.createElement("div");l.style.position="absolute",l.style.zIndex="1000",l.style.left="".concat(t,"px"),l.style.top="".concat(n,"px"),l.style.width="5px",l.style.height="5px",l.style.background=a,l.style.border="1px solid red",document.body.appendChild(l);var u,s=function(){document.body.removeChild(l)};return i&&(u=setTimeout(s,i)),function(){s(),clearTimeout(u)}},Tn=6.25,Ln=function(e,t){var n=t.rolledAreaDomNode,r=Mn(n),o=r.right-r.left,a=r.bottom-r.top,c={left:Tn,right:o-56.25,top:Tn,bottom:a-56.25},i=[],l=function(e){var t=0;return function n(){var r=Fn(e,c),o=_n(),a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wn(e);return e.map((function(e){return Cn(n,e,t)}))}(r,o);return!i.some((function(e){return t=e,In(a,(function(e){return Dn(e,t)}));var t}))||t>50?{rectangle:r,rotation:o,rotatedRectangle:a}:(t++,n())}()};return e.forEach((function(e){e.visibleFaceIndex=Bn(e);var t=l(e),n=t.rectangle,r=t.rotation,o=t.rotatedRectangle;i.push(o),e.rolledAreaPosition=n[0],e.rotation=r})),e},Fn=function(e,t){var n={x:zn(t.left,t.right),y:zn(t.top,t.bottom)};return[{x:n.x,y:n.y},{x:n.x+sn,y:n.y},{x:n.x+sn,y:n.y+sn},{x:n.x,y:n.y+sn}]},_n=function(){return zn(-35,35)},Bn=function(e){return zn(0,e.faces.length-1)},zn=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},Gn=function(e){var n=e.rolledAreaRef,r=Be(),o=Un();return r?t.createElement("div",{className:"roll-action"},t.createElement("button",{onClick:function(){o(n.current)}},"Lancer")):null},Un=c((function(e,t){var n=e.dices,o=e.rollCount,a=e.diceRolledIds,c=(0===o?Object.keys(n):a).map((function(e){return n[e]}));return Ln(c,{rolledAreaDomNode:t}),r(r({},e),{},{rollCount:o+1,witchUncursedDiceId:null,diceRolledIds:c.map((function(e){return e.id})),dices:r({},n)})})),Kn=function(e){var n=e.onRoundOver,r=e.rolledAreaRef;return t.createElement("div",{className:"footer actions"},t.createElement(Gn,{rolledAreaRef:r}),t.createElement(Hn,null),t.createElement(Vn,{onRoundOver:n}))},Hn=function(){var e=He(),n=Ve(),r=Ke(),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hasRolledOnce,n=void 0===t?Pe():t,r=e.scoreMarked,o=void 0===r?j():r,a=e.currentCardId,c=void 0===a?x():a,i=e.hasDicesToCurse,l=void 0===i?Le():i;return!(o||l||!c||!n)}(),a=e<0?"-":"+";return o?t.createElement("div",{className:"collect-action"},t.createElement("button",{onClick:function(){n(e)},disabled:!r},t.createElement("span",null,"Collecter"),t.createElement("span",{className:"score"},a," ",Math.abs(e))),!r&&t.createElement("img",{src:"/src/dices/dice_skull.png",className:"skull-symbol"})):null},Vn=function(e){var n=e.onRoundOver,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rollDiceAllowed,n=void 0===t?Be():t,r=e.markScoreAllowed,o=void 0===r?Ke():r,a=e.hasDicesToCurse,c=void 0===a?Le():a;return!n&&!o&&!c}(),o=Jn(),a=He();return r?t.createElement("div",{className:"next-round-action"},t.createElement("button",{onClick:function(){o(),n({reason:"score-marked",value:a})}},"Terminer mon tour")):null},Jn=c((function(e){return r(r({},e),{},{roundStarted:!1})})),Wn=function(e){var n=e.cursedAreaRef,r=C(x());return t.createElement("div",{className:"skull-island"},G(r)?t.createElement(Yn,null):null,t.createElement("div",{className:"bottle"},t.createElement("div",{className:"area",ref:n},w(r)?t.createElement(Xn,{card:r}):null,D(r)?t.createElement(t.Fragment,null,t.createElement(Xn,{card:r}),t.createElement(Xn,{card:r})):null)))},Xn=function(e){var n=e.card;return t.createElement("button",{className:"dice",style:{width:sn,height:sn,color:"#fcfcfc",margin:"1px 5px",backgroundColor:n.color1,borderColor:n.color2,borderWidth:"2px"}},t.createElement("img",{src:"/src/dices/dice_skull.png",style:{width:"100%",height:"100%"}}))},Yn=function(){return z()?t.createElement("div",{className:"witch-label"},t.createElement("img",{src:"/src/skull-island/witch-label.png"}),t.createElement("svg",{x:"0px",y:"0px",width:"156.083px",height:"208.667px",viewBox:"0 0 156.083 208.667"},t.createElement("path",{id:"path_01",fill:"none",stroke:"#E4AD30",d:"M8.406,107.82 c2.541,2.178,2.375,2.875,14.25,3.5c14.782,0.778,19.26-11.965,19.26-11.965S47.918,88,40.251,72.917s-18.916,4.583-9.083,8.167 s27.759-1.338,35.142-12.417C74.75,56,77.583,45.333,79.25,37S78.477,15.833,66.31,3.833"}),t.createElement("path",{id:"path_02",fill:"none",stroke:"#E4AD30",d:"M44.031,110.094 c0,0,1,1.313-4.438,3.344s-14.244,7.281-32.125-2"}),t.createElement("path",{id:"path_03",fill:"none",stroke:"#E4AD30",d:"M42.125,103.688 c0,0,1.313,6.594-9.313,8.625S10.281,108.719,9.406,101"}),t.createElement("path",{id:"path_04",fill:"none",stroke:"#E4AD30",d:"M33.114,112.253c0,0,39.886-19.253,43.011,24.747 c0.372,0.447-0.959,1.208-2.542,1.625"}))):t.createElement("img",{style:{display:"none"},src:"/src/skull-island/witch-label.png"})},Qn=function(e){var n=e.parent,r=e.children;return n?a.createPortal(t.createElement(t.Fragment,null,r),n):null},Zn=function(e){var t=e.rotate,n=e.scale,r=e.translate;return[].concat(i(t?["rotate(".concat(t,"deg)")]:[]),i(n&&1!==n?["scale(".concat(n,")")]:[]),i(r?["translate(".concat(r,")")]:[])).join("")},$n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=o.trailing,c=void 0!==a&&a,i=function o(){for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];clearTimeout(t);var u=Date.now();if(n){var s=u-n;if(s<r){if(c){var d=r-s;t=setTimeout((function(){return o.apply(void 0,i)}),d)}}else n=u,e.apply(void 0,i)}else n=u,e.apply(void 0,i)},l=function(){clearTimeout(t)};return i.cancel=l,i},er=function(e,t){var n,o,a=t.logLevel,c=void 0===a?"warn":a,i=t.onClick,l=void 0===i?function(){}:i,u=t.onGrip,s=void 0===u?function(){}:u,d=t.onLongGrip,m=void 0===d?function(){}:d,f=t.onRelease,v=void 0===f?function(){}:f,p=t.onDrag,g=void 0===p?function(){}:p,h=t.onCancel,E=void 0===h?function(){}:h,b=U({logLevel:c}),y=!1,N=function(){},k=function(){};b.debug("enable drag on",e);var x,C,w,S,D=Q(e,"mousedown",(function(e){3===e.which?b.debug("ignore right click"):(A(nr(e),e),N=Q(document,"mousemove",$n((function(e){M(nr(e),e)}))),k=Q(document,"mouseup",(function(e){k(),N(),P(nr(e),e)})))}),{passive:!0}),I=Q(e,"touchstart",(function(e){A(rr(e),e),N=Q(document,"touchmove",$n((function(e){M(rr(e),e)}))),k=Q(document,"touchend",(function(e){k(),N(),P(rr(e),e)}))}),{passive:!0}),R=Q(e,"click",(function(e){y||l(e)})),A=function(t,n){b.debug("gripping node at",t),o=!0,w=t,x=t,C=tr(e),s({x:C.x,y:C.y,event:n}),S=setTimeout(O,300)},O=function(){m()},M=function(e,t){if(x.x!==e.x||x.y!==e.y){x=e;var n=w.x-C.x,o=w.y-C.y,a={x:e.x-n,y:e.y-o},c=e.x-w.x,i=e.y-w.y;b.debug("move node at",a),(Math.abs(c)>10||Math.abs(i)>10)&&(y=!0),g(r({event:t},a))}else b.debug("no real move")},P=function(e,t){b.debug("releasing node"),o=!1;var r=w.x-C.x,a=w.y-C.y;clearTimeout(S),v({event:t,x:x.x-r,y:x.y-a}),n=setTimeout((function(){y=!1}))};return function(e){R(),D(),I(),N(),k(),clearTimeout(S),clearTimeout(n),function(e){o&&(b.debug("cancelling drag",e),o=!1,E({event:e}))}(e)}},tr=function(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top}},nr=function(e){return{x:e.pageX,y:e.pageY}},rr=function(e){var t=e.changedTouches[0];return{x:t.pageX,y:t.pageY}},or=t.useEffect,ar=t.useState,cr=function(e){var o=e.dice,a=e.diceAnimation,c=e.anmationDebug,i=void 0!==c&&c,l=e.container,u=e.x,s=e.y,d=e.rotation,m=e.draggable,f=e.onDiceAnimationEnd,v=e.onDiceClick,p=e.onDiceDrag,g=e.onDiceDrop,h=e.onDiceDragEnd,E=e.disapear,b=e.appear,y=Ce(l),N=a?y:l,k=B(),x=K(o.id),C=H(o.id),w=ar(!1),S=n(w,2),D=S[0],I=S[1],R=ar(null),A=n(R,2),O=A[0],M=A[1],j=P(o),q=a&&a.from?a.from.x:O?O.x:u,L=a&&a.from?a.from.y:O?O.y:s;return or((function(){if(!m||!x||!k)return function(){};var e=er(x,{onGrip:function(){I(!0)},onClick:function(e){v(o,e)},onDrag:function(e){var t,n,r=e.x,a=e.y,c=(t={left:r,right:r+sn,top:a,bottom:a+sn},n=Mn(k),Rn(t,n));M({x:c.left,y:c.top}),p(o,{diceRectangle:c})},onRelease:function(e){var t=e.x,n=e.y;I(!1),M(null),g(o,{diceRectangle:{left:t,right:t+sn,top:n,bottom:n+sn}}),h(o)},onCancel:function(){I(!1),M(null),h(o)}});return function(){e()}}),[m,x,k]),or((function(){if(!a||!x)return function(){};var e=a.from,t=a.to;i&&(qn(e),qn(t));var n="translate(".concat(Math.floor(t.x-e.x),"px, ").concat(Math.floor(t.y-e.y),"px)"),r=x.parentNode.animate([{transform:n}],{duration:500,fill:"forwards",easing:"cubic-bezier(0, 0.55, 0.45, 1)"});return r.onfinish=function(){f(o)},function(){r.cancel()}}),[x,a]),t.createElement(Qn,{parent:N},t.createElement("svg",{"data-dice-id":o.id,className:"dice",onClick:m?void 0:function(e){v(o,e)},style:r({width:sn,height:sn,left:"".concat(q,"px"),top:"".concat(L,"px")},O||a?{position:"fixed",zIndex:1e3}:{})},t.createElement("g",{ref:C,className:E?"dice-cursed-disapear":b?"dice-cursed-appear":"",style:{transform:Zn({rotate:d||0,scale:D?"1.2":"1"}),transitionProperty:"transform",transitionDuration:"500ms",transitionTimingFunction:"cubic-bezier(0, 0.55, 0.45, 1)",transformOrigin:"center center"}},t.createElement("rect",{className:"dice-background",width:"100%",height:"100%",rx:"5",ry:"5",fill:j?"black":"#fcfcfc",stroke:j?"black":"#b9b9b9",strokeWidth:"1"}),t.createElement("image",{xlinkHref:"/src/dices/dice_".concat(T(o),".png"),draggable:"false",style:{width:"100%",height:"100%"}}))))},ir=function(e){var n=e.diceAnimationState,o=e.chestRef,a=e.rolledAreaRef,c=e.offscreenRef,i=e.cursedAreaRef,l=pt(e,["diceAnimationState","chestRef","rolledAreaRef","offscreenRef","cursedAreaRef"]),u=A(),s=y(),d=Fe(),m=O(),f=k(),v=M(),p=o.current,g=a.current,h=c.current,E=i.current;return p&&g&&h&&E?Object.keys(u).map((function(e){var o=u[e];return t.createElement(lr,vt({key:o.id},r({dice:o,diceAnimation:n[o.id],diceKeptIds:d,chestSlots:s,diceRolledIds:m,diceCursedIds:f,witchUncursedDiceId:v,chestDomNode:p,rolledAreaDomNode:g,offscreenDomNode:h,cursedAreaDomNode:E},l)))})):null},lr=function(e){var n=e.dice,o=e.diceAnimation,a=e.diceKeptIds,c=e.chestSlots,i=e.diceRolledIds,l=e.diceCursedIds,u=e.witchUncursedDiceId,s=e.chestDomNode,d=e.rolledAreaDomNode,m=e.offscreenDomNode,f=e.cursedAreaDomNode,v=pt(e,["dice","diceAnimation","diceKeptIds","chestSlots","diceRolledIds","diceCursedIds","witchUncursedDiceId","chestDomNode","rolledAreaDomNode","offscreenDomNode","cursedAreaDomNode"]),p=ur(n,{diceKeptIds:a,chestSlots:c,chestDomNode:s,diceRolledIds:i,rolledAreaDomNode:d,diceCursedIds:l,cursedAreaDomNode:f,offscreenDomNode:m}),g=p.container,h=p.rotation,E=p.x,b=p.y,y=p.draggable,N=n.id!==u&&g===d&&P(n),k=g===f;return t.createElement(cr,r({dice:n,diceAnimation:o,container:g,rotation:h,x:E,y:b,draggable:y,disapear:N,appear:k},v))},ur=function(e,t){var n=t.diceKeptIds,r=t.chestSlots,o=t.chestDomNode,a=t.diceRolledIds,c=t.rolledAreaDomNode,i=t.diceCursedIds,l=t.cursedAreaDomNode,u=t.offscreenDomNode;if(n.includes(e.id)){var s=Object.keys(r).find((function(t){return r[t]&&"dice"===r[t].type&&r[t].value===e.id}));return{container:o.querySelector('[data-chest-slot="'.concat(s,'"]')),rotation:0,x:0,y:0,draggable:!0}}return a.includes(e.id)?{container:c,rotation:e.rotation,x:e.rolledAreaPosition.x,y:e.rolledAreaPosition.y,draggable:!0}:i.includes(e.id)?{container:l,rotation:0,x:0,y:0,draggable:!1}:{container:u,rotation:0,x:0,y:0,draggable:!1}},sr=function(e){var a=e.openScoreboard,c=e.onRoundOver,i=y(),l=Fe(),u=O(),s=k(),d=C(x()),m=M(),f=j(),v=ze(),p=Xe(),g=et(),h=$e(),E=Ze(),b=Ye(),N=t.useRef(null),w=t.useRef(null),S=t.useRef(null),D=t.useRef(null),I=t.useState(null),R=n(I,2),A=R[0],P=R[1],q=t.useRef(null),T=function(e){return fr(e,{scoreMarked:f,threeSkullsOrMoreInCursedArea:v})},L=function(e){return vr(e,{scoreMarked:f,threeSkullsOrMoreInCursedArea:v})},F=function(e){return u.includes(e.id)},_=function(e){return l.includes(e.id)},B=function(e,t){var n=new Map,r=[];Object.keys(i).forEach((function(t){var o=i[t];if(!o||"dice"===o.type&&o.value===e.id){var a=mr(t,{chestRef:w});n.set(a,t),r.push(a)}}));var o=jn(r,t);return n.get(o)},z=function(e){var t=function(e,t){var n=Mn(t);return function(e,t){var n=e.left-t.left,r=n+(e.right-e.left),o=e.top-t.top;return{left:n,right:r,top:o,bottom:o+(e.bottom-e.top)}}(Rn(e,n),n)}(e,N.current);return{x:t.left,y:t.top}},G=function(e){return F(e)?"keep":_?"unkeep":function(e){return s.includes(e.id)}(e)?"uncurse":"other"},U=t.useReducer((function(e,t){return r(r({},e),{},o({},t.key,t.value))}),{}),K=n(U,2),H=K[0],V=K[1],J=function(e,t,n){V({key:e.id,value:{from:t,to:n}})},W=function(e,t,n){var r,o,a,c,i,l=n.dropDiceGesture,u=(r={left:t.x,top:t.y,right:0,bottom:0},o=N.current,a=Mn(o),c=r.right-r.left,i=r.bottom-r.top,{left:a.left+r.left,top:a.top+r.top,right:a.left+r.left+c,bottom:a.top+r.top+i});J(e,{x:l.diceRectangle.left,y:l.diceRectangle.top},{x:u.left,y:u.top})},X=function(e,t,n){var r=n.dropDiceGesture,o=mr(t,{chestRef:w}),a=Mn(o);J(e,{x:r.diceRectangle.left,y:r.diceRectangle.top},{x:a.left,y:a.top})};return t.createElement("div",{className:"round-container"},t.createElement(ct,null),t.createElement(En,{openScoreboard:a}),t.createElement("div",{className:"chest-and-skulls"},t.createElement(dn,{chestRef:w,dragoverGesture:A}),t.createElement(Wn,{cursedAreaRef:S})),t.createElement(ft,{rolledAreaRef:N,offscreenRef:D,dragoverGesture:A}),t.createElement(Kn,{onRoundOver:c,rolledAreaRef:N}),t.createElement(ir,{chestRef:w,rolledAreaRef:N,offscreenRef:D,cursedAreaRef:S,diceAnimationState:H,onDiceClick:function(e){var t=G(e);"keep"!==t?"unkeep"!==t?"uncurse"!==t||function(e){return pr(e,{scoreMarked:f,threeSkullsOrMoreInCursedArea:v,currentCard:d,witchUncursedDiceId:m})}(e)&&E(e):L(e)&&h(e):T(e)&&g(e,Object.keys(i).find((function(e){return!i[e]})))},onDiceDrag:function(e,t){var n=!1,r=null,o=w.current;Pn(o,t.diceRectangle)&&(r=w.current,n=T(e));var a=N.current;Pn(a,t.diceRectangle)&&(r=a,n=L(e)),P({dropPayload:e,dropTarget:r,dropAllowed:n}),q.current=r},onDiceDrop:function(e,t){var n=function(e){return F(e)?q.current===N.current?"reposition-in-rolled-area":q.current===w.current&&T(e)?"keep":"back-to-rolled-area":_(e)?q.current===w.current?"reposition-in-chest":q.current===N.current&&L(e)?"unkeep":"back-to-chest":"none"}(e);if(console.log("drop",{dice:e,diceKeptIds:l,diceRolledIds:u,dropEffect:n}),"reposition-in-rolled-area"===n)p(e,z(t.diceRectangle));else if("back-to-rolled-area"===n)W(e,e.rolledAreaPosition,{dropDiceGesture:t});else if("keep"===n){var r=B(e,t.diceRectangle);g(e,r),X(e,r,{dropDiceGesture:t})}else if("reposition-in-chest"===n){var o=B(e,t.diceRectangle);dr(e,{chestSlots:i})!==o&&(b(e,o),X(e,o,{dropDiceGesture:t}))}else if("back-to-chest"===n){var a=dr(e,{chestSlots:i}),c=mr(a,{chestRef:w}),s=Mn(c);J(e,{x:t.diceRectangle.left,y:t.diceRectangle.top},{x:s.left,y:s.top})}else if("unkeep"===n){var d=z(t.diceRectangle);p(e,d),h(e),W(e,d,{dropDiceGesture:t})}},onDiceAnimationEnd:function(e){V({key:e.id,value:null})},onDiceDragEnd:function(){P(null)}}))},dr=function(e,t){var n=t.chestSlots;return Object.keys(n).find((function(t){var r=n[t];return r&&"dice"===r.type&&r.value===e.id}))},mr=function(e,t){return t.chestRef.current.querySelector('[data-chest-slot="'.concat(e,'"]'))},fr=function(e,t){var n=t.scoreMarked,r=t.threeSkullsOrMoreInCursedArea;return!n&&!r},vr=function(e,t){var n=t.scoreMarked,r=t.threeSkullsOrMoreInCursedArea;return!n&&!r},pr=function(e,t){var n=t.scoreMarked,r=t.threeSkullsOrMoreInCursedArea,o=t.currentCard,a=t.witchUncursedDiceId;return!n&&(!r&&(!!G(o)&&a===e.id))},gr=function(e){var n=e.dialogIsOpen,r=e.closeDialog,o=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cardIds;return(void 0===e?I():e).map((function(e){return C(e)}))}(),a=x(),c=C(a)||null;return t.createElement(Wt,{isOpen:n,onRequestClose:r,requestCloseOnClickOutside:!1},t.createElement("div",{className:"border border-right"}),t.createElement("div",{className:"border border-left"}),t.createElement("div",{className:"border border-top"}),t.createElement("div",{className:"border border-bottom"}),t.createElement("div",{className:"dialog-title"},"Suivant"),t.createElement("div",{className:"dialog-content draw-card-dialog"},t.createElement("div",{className:"dialog-body"},t.createElement("div",{className:"dialog-label"},0!==o.length||a?"Piochez une carte pour le tour suivant.":"Paquet de cartes épuisé. Mélangez-le pour pouvoir piocher à nouveau."),t.createElement("div",{className:"card-area"},t.createElement(kr,{remainingCardCount:o.length}),t.createElement(hr,{currentCard:c})),t.createElement(Er,{card:c})),t.createElement("div",{className:"dialog-actions"},t.createElement(xr,{cardDeck:o,currentCard:c}),t.createElement(Sr,{currentCard:c,closeDialog:r}))))},hr=function(e){var n=e.currentCard;return n?t.createElement("div",{className:"card current-card"},t.createElement("div",{className:"flip-card"},t.createElement("div",{className:"flip-card-inner"},t.createElement("div",{className:"flip-card-front"},t.createElement("div",{className:"card default-card",style:{backgroundImage:"url('/src/cards/card_default.png')"}})),t.createElement("div",{className:"flip-card-back"},t.createElement("img",{src:"/src/cards/card_".concat(n.type,".png"),alt:n.type}))))):null},Er=function(e){var r=e.card,o=t.useState(!1),a=n(o,2),c=a[0],i=a[1];return r?t.createElement("div",{className:"card-description"},t.createElement("span",{className:"subtitle"},vn[r.type].name),t.createElement("button",{className:"moreInfoIcon",onClick:function(){i(!c)}},c?t.createElement(Nr,null):t.createElement(yr,null)),t.createElement(br,{card:r,moreInfoVisible:c})):null},br=function(e){var n=e.card;return e.moreInfoVisible?vn[n].more?t.createElement(t.Fragment,null,t.createElement("div",{className:"text-rule"},vn[n.type].rule),t.createElement("div",{className:"text-rule"},vn[n.type].more)):t.createElement("div",{className:"text-rule"},vn[n].rule):null},yr=function(){return t.createElement("svg",{viewBox:"0 0 24 24",height:"24px",width:"24px"},t.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),t.createElement("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}))},Nr=function(){return t.createElement("svg",{viewBox:"0 0 24 24",width:"24px",height:"24px"},t.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),t.createElement("path",{d:"M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}))},kr=function(e){var n=e.remainingCardCount;return t.createElement("div",{className:"card default-card",id:"back-deck-card",style:{backgroundImage:"url('/src/cards/card_default.png')"}},t.createElement("div",{className:"remaining-cards-number"},n))},xr=function(e){var n=e.cardDeck;return e.currentCard?null:0===n.length?t.createElement(wr,null):t.createElement(Cr,null)},Cr=function(){var e=tt();return t.createElement("button",{className:"draw-card-btn",onClick:e},"Piocher")},wr=function(){var e=ot();return t.createElement("button",{className:"draw-card-btn",onClick:function(){document.getElementById("back-deck-card").setAttribute("shaking-deck",""),setTimeout((function(){document.getElementById("back-deck-card").removeAttribute("shaking-deck",""),e()}),1e3)}},"Mélanger le paquet")},Sr=function(e){var n=e.currentCard,r=e.closeDialog,o=We();return n?t.createElement("button",{className:"draw-card-btn",onClick:function(){o(),r()}},"Commencer"):null},Dr=function(e){var n=e.openDrawCardDialog,r=e.closeDialog,o=e.dialogIsOpen,a=e.player,c=Ur(),i=Ir();return t.createElement(Wt,{isOpen:o,onRequestClose:r,requestCloseOnClickOutside:!0},t.createElement("div",{className:"dialog-content score-board-dialog"},t.createElement("div",{className:"cross",onClick:r},"X"),t.createElement("div",{className:"dialog-body"},t.createElement("div",null,"Au tour de",t.createElement("div",{className:"dialog-label"},a.character.name),t.createElement("img",{className:"player-img",src:"src/score-board/".concat(a&&a.character.img),alt:"player",style:{boxShadow:"inset 0px 0px 0px 4px ".concat(a&&a.character.color||"black")}})),t.createElement("div",{className:"dialog-actions"},t.createElement("button",{onClick:function(){r(),i(),c(a),n()}},"Jouer")))))},Ir=c((function(e){return r(r({},e),{},{currentPlayerGettingReady:!0})})),Rr={path1:"M39.582,739.564c0-91.824,39.191-96.32,38.045-166.691s-30.042-70.37-47.326-161.729s38.128-86.388,31.276-186.42C55.405,134.602-3.014,89.176,8.812,129.825c5.333,18.333,30.77-21,30.77-129.825",path2:"M39.582,739.564c0-113.074-5.437-166.074-8.437-198.074s36-20.667,33.019-2c-1.796,11.248-24.583,13.333-23.699-22c1.229-49.158,22.68-111,23.68-169s-38-95-46-181S39.582,0,39.582,0",path3:"M39.582,739.564c0-71.926-15.437-155.074-17.437-253.074s30-185,31.087-217s-31.087-46-31.087-26s33,10,31-32s-31-110-31-144S39.582,0,39.582,0",path4:"M39.582,739.564c0-113.074-5.437-166.074-8.437-198.074s36-20.667,33.019-2c-1.796,11.248-24.583,13.333-23.699-22c1.229-49.158,22.68-111,23.68-169s-38-95-46-181S39.582,0,39.582,0"},Ar=function(){var e,t=Oe(),n=b();if(t){var r=n.findIndex((function(e){return e.id===t.id}));e=r===n.length-1?n[0]:n[r+1]}else e=n[0];return e},Or=function(e){var r=e.openedByUser,o=e.closeScoreboard,a=e.scoreAnimation,c=b(),i=Oe(),l=z(),u=V(),s=t.useState(!1),d=n(s,2),m=d[0],f=d[1],v=function(){f(!0)},p=i&&u,g=t.useState(p),h=n(g,2),E=h[0],y=h[1],N=Ar();return t.createElement("div",{className:"score-board-container"},r&&t.createElement("div",{className:"cross",onClick:o},"X"),!l&&!i&&t.createElement("div",{className:"action-container"},t.createElement("button",{className:"score-board-action",onClick:function(){v()}},"Commencer à jouer")),t.createElement("img",{className:"win-treasure-img",src:"src/score-board/win-treasure.png",alt:"win-treasure"}),t.createElement("div",{className:"users-path"},c.map((function(e){return t.createElement(Mr,{key:e.id,pathCoordinates:Rr["path".concat(e.id)],score:e.score,character:e.character,openStartPlayerRoundDialog:v,scoreAnimation:i&&e.id===i.id&&a?{from:e.score-a.newScore,to:e.score}:null})}))),t.createElement(Dr,{dialogIsOpen:m,closeDialog:function(){f(!1)},openDrawCardDialog:function(){y(!0)},player:N}),t.createElement(gr,{dialogIsOpen:E,closeDialog:function(){y(!1)}}))},Mr=function(e){var n=e.scoreAnimation,r=e.pathCoordinates,o=e.character,a=e.score,c=e.openStartPlayerRoundDialog,i=t.useRef(null),l=t.useRef(null),u=Ar();return t.useEffect((function(){if(n){var e=n.from,t=n.to,r=i.current,o=r.getTotalLength();r.style.strokeDashoffset="".concat(o-e*(o/2)/3e3),r.animate([{strokeDashoffset:"".concat(o-e*(o/2)/3e3)},{strokeDashoffset:"".concat(o-t*(o/2)/3e3)}],{duration:1e3,fill:"forwards"});var a=l.current;a.style.offsetDistance="".concat(50*e/3e3,"%"),a.animate([{offsetDistance:"".concat(50*e/3e3,"%")},{offsetDistance:"".concat(50*t/3e3,"%")}],{duration:1e3,fill:"forwards"})}}),[n]),t.useEffect((function(){var e=i.current,t=e.getTotalLength();e.style.strokeDasharray=t,e.style.strokeDashoffset=t-a/6e3*t}),[a]),t.createElement("div",{className:"user-path"},t.createElement("svg",{viewBox:"0 0 79.164 739.564"},t.createElement("path",{d:r,className:"path-background"}),t.createElement("path",{ref:i,d:r,className:"path-foreground"}),t.createElement("circle",{ref:l,r:"13",fill:o.color||"white",className:"score-indicator",style:{offsetPath:"path('".concat(r,"')"),offsetDistance:"".concat(a/6e3*100,"%")}})),t.createElement("div",{className:"speech-bubble"},a),t.createElement("div",{className:"user-avatar ".concat(u.character.id===o.id?"next-player":""),onClick:function(){u.character.id===o.id&&c()}},t.createElement(Pr,{character:o})))},Pr=function(e){var n=e.character;return t.createElement("img",{className:"player-img",src:"src/score-board/".concat(n.img),alt:"player",style:{boxShadow:"inset 0px 0px 0px 4px ".concat(n.color||"black")}})},jr=[{id:1,name:"Luffy",color:"#ef9620",img:"Luffy.png"},{id:2,name:"Miss Fortune",color:"#d90f1b",img:"MissFortune.png"},{id:3,name:"Jack Sparrow",color:"#007033",img:"JackSparrow.png"},{id:4,name:"Barbe Rouge",color:"#7baac9",img:"BarbeRouge.png"},{id:5,name:"Ginette Boulette",color:"#e2500c",img:"GinetteBoulette.png"},{id:6,name:"Capitaine Crochet",color:"#952460",img:"CapitaineCrochet.png"}],qr=function(e){var n=e.players,r=_r(),o=Lr(),a=n.find((function(e){return!e.character}));return t.createElement("div",{className:"character-selection-page"},t.createElement(Tr,null),a&&t.createElement(t.Fragment,null,t.createElement("p",null,"Joueur ",a.number," : quel pirate êtes vous ?"),t.createElement("div",{className:"characters-container"},t.createElement("div",{className:"characters"},jr.map((function(e){return t.createElement("div",{className:"character ".concat(Fr(e,n)?"":"disabled"),key:e.id,onClick:function(){r(a,e)}},t.createElement("img",{className:"character-img",src:"src/score-board/".concat(e&&e.img),alt:"player",style:{border:"4px solid ".concat(e&&e.color||"black")}}),t.createElement("span",null,e.name))}))))),!a&&t.createElement("div",{className:"crew-completed"},t.createElement("p",null,"L‘équipage est au complet !"),t.createElement("img",{src:"src/cards/card_small-sword-challenge.png"}),t.createElement("button",{onClick:function(){o()}},"Démarrer la partie")))},Tr=function(){var e=b();return t.createElement("div",{className:"crew ".concat(e.length>3?"large-crew":"")},t.createElement("p",null,"Votre équipage:"),t.createElement("ul",null,e.map((function(e){return t.createElement("li",{key:e.id},e.character?t.createElement("img",{className:"crew-member-img",src:"src/score-board/".concat(e.character&&e.character.img),alt:"player",style:{border:"4px solid ".concat(e.character&&e.character.color||"black")}}):t.createElement("div",{className:"placeholder-img"}),t.createElement("span",null,e.character?e.character.name:"Joueur".concat(e.number)))}))))},Lr=c((function(e){var t=e.cardIds;return r(r({},e),{},{gameStarted:!0,cardIds:L(t)})})),Fr=function(e,t){return!t.some((function(t){return t.character&&t.character.name===e.name}))},_r=c((function(e,t,n){var o=e.players;return t.character=n,r(r({},e),{},{players:i(o)})})),Br=function(){var e=b(),r=z(),o=J(),a=0===e.length,c=t.useState(!1),i=n(c,2),l=i[0],u=i[1],s=t.useState(null),d=n(s,2),m=d[0],f=d[1];return a?t.createElement(zr,null):o?!r||l?t.createElement(Or,{openedByUser:l,closeScoreboard:function(){u(!1)},scoreAnimation:m}):t.createElement(sr,{openScoreboard:function(){u(!0)},onRoundOver:function(e){"score-marked"===e.reason?f({newScore:e.value}):f(null)}}):t.createElement(qr,{players:e})},zr=function(){var e=Gr();return t.createElement("div",null,t.createElement("p",null,"Combien de joueur?"),[1,2,3,4,5].map((function(n){return t.createElement("button",{key:n,onClick:function(){e(n)}},1===n?"1 joueur":"".concat(n," joueurs"))})))},Gr=c((function(e,t){return r(r({},e),{},{players:new Array(t).fill("").map((function(e,t){return{id:t+1,number:t+1,score:0}}))})})),Ur=c((function(e,t){return r(r({},e),{},{currentPlayerId:t.id,currentCardId:null})}));function Kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Hr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Vr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};var Jr=function(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t};function Wr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vr(e);if(t){var o=Vr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Jr(this,n)}}var Xr,Yr,Qr=function(e){var n=e.ref,r=e.src,o=pt(e,["ref","src"]),a=ge(r),c=function(e){return e?e.complete?(a(),function(){}):he(e,a):function(){}};if(n){var i=n;n=function(e){i(e),c(e)}}else n=c;return t.createElement("img",vt({},o,{src:r,ref:n}))},Zr=function(){var e=["/src/wood.jpg","/src/chest/pirate-hook.png","/src/chest/pirate-hook-02.png","/src/chest/wood-box.jpg","/src/dice-ongoing/treasure-map.png","/src/skull-island/witch-label.png","/src/skull-island/skull-bottle.png","/src/cards/card_default.png"].concat(i(W.map((function(e){return"/src/cards/card_".concat(e,".png")}))));return t.createElement("div",{style:{display:"none"}},e.map((function(e){return t.createElement(Qr,{key:e,src:e})})))},$r=function(){return Y()?t.createElement(Br,null):t.createElement(be,null)};e("Main",function(e,n){return function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hr(e,t)}(l,r);var o,a,c,i=Wr(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).state={hasError:!1,error:null},t}return o=l,c=[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}],(a=[{key:"render",value:function(){return this.state.hasError?t.createElement(n,{error:this.state.error}):t.createElement(e,this.props)}}])&&Kr(o.prototype,a),c&&Kr(o,c),l}(t.Component)}((Xr=function(e){var n=e.booted;return t.useEffect((function(){n&&window.removeSplashscreen()}),[n]),t.createElement("div",{id:"main-container"},t.createElement("div",{id:"main",ref:X()},t.createElement(Ee,{href:"/mille-sabord.css"}),t.createElement($r,null),n?t.createElement(Zr,null):null))},Yr=function(e){var n=ge("");t.useEffect((function(){n()}),[]);var r=pe(""),o=ve();return t.useEffect((function(){if(!r)return function(){};if(Object.keys(o).every((function(e){return"loaded"===o[e].status}))){var t=window.requestIdleCallback((function(){e.bootedSetter(!0)}),{timeout:400});return function(){window.cancelIdleCallback(t)}}return function(){}}),[r,o]),t.createElement(Xr,e)},function(){var e=ue(!1),r=n(e,2),o=r[0],a=r[1];return t.createElement(fe,null,t.createElement(Yr,{booted:o,bootedSetter:a}))}),(function(e){var n=e.error;return window.removeSplashscreen(),t.createElement("div",null,"An error occured",t.createElement("pre",null,"object"===_(n)?n.stack:n))})))}}}));
//# sourceMappingURL=main.component-0d0390cd.js.map
