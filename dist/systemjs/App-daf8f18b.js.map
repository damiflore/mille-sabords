{
  "version": 3,
  "file": "App.js",
  "sources": [
    "../../src/home/Home.jsx",
    "../../src/hooks.js",
    "../../src/helper/signal.js",
    "../../src/animation/startJavaScriptAnimation.js",
    "../../src/animation/useAnimateTransition.js",
    "../../src/animation/ValueWithAnimatedTransition.jsx",
    "../../src/dom/dom.traversal.js",
    "../../src/dialog/focus-trap.js",
    "../../src/dialog/scroll-trap.js",
    "../../src/dialog/dialog.base.css",
    "../../src/dialog/DialogBase.jsx",
    "../../src/dialog/dialog.css",
    "../../src/dialog/dialog.component.jsx",
    "../../src/round/computeRoundScore.js",
    "../../src/header/swords-disabled.png",
    "../../src/header/SwordChallengeIndicator.jsx",
    "../../src/game-design/StarRain.jsx",
    "../../src/dialog/dialog.wood.jsx",
    "../../src/round/RoundScoreRulesDialog.jsx",
    "../../src/helper/geometry.js",
    "../../src/helper/rectangle.js",
    "../../src/dom/dom.position.js",
    "../../src/score/score.particle.jsx",
    "../../src/round/useRoundScoreParticleEffects.js",
    "../../src/round/RoundScore.jsx",
    "../../src/dices/dicePosition.js",
    "../../src/chest/cursed-grid.png",
    "../../src/chest/chest.component.jsx",
    "../../src/round/round.selectors.js",
    "../../src/round/round.actions.js",
    "../../src/dices/dices.actions.js",
    "../../src/round/round.effects.js",
    "../../src/cards/cards.actions.js",
    "../../src/cards/cards.effects.js",
    "../../src/dice-ongoing/DiceOnGoing.jsx",
    "../../src/cards/cards-rules.js",
    "../../src/header/CardRulesDialog.jsx",
    "../../src/cards/SmallCard.jsx",
    "../../src/header/Header.jsx",
    "../../src/dices/rollDices.js",
    "../../src/footer/ButtonRoll.js",
    "../../src/footer/Footer.jsx",
    "../../src/skull-island/SkullIsland.jsx",
    "../../src/generic/Portal.jsx",
    "../../src/helper/render.js",
    "../../src/helper/throttle.js",
    "../../src/drag/drag.js",
    "../../src/dices/Dice.jsx",
    "../../src/dices/DiceContainer.jsx",
    "../../src/footer/DrawCardDialog.jsx",
    "../../src/round/Round.jsx",
    "../../src/score-board/StartPlayerRoundDialog.jsx",
    "../../src/score-board/win-treasure.png",
    "../../src/score-board/ScoreBoard.jsx",
    "../../src/game/GameConfiguration.jsx",
    "../../src/players/players.main.js",
    "../../src/players/Luffy.png",
    "../../src/players/MissFortune.png",
    "../../src/players/JackSparrow.png",
    "../../src/players/BarbeRouge.png",
    "../../src/players/GinetteBoulette.png",
    "../../src/players/CapitaineCrochet.png",
    "../../src/game/CharacterSelection.jsx",
    "../../src/game/Game.jsx",
    "../../src/main.actions.js",
    "../../src/settings/settings.css",
    "../../src/settings/settings.component.js",
    "../../mille-sabord.css",
    "../../src/App.jsx"
  ],
  "sourcesContent": [
    "import React from \"react\"\nimport { Image } from \"src/generic/Image.jsx\"\nimport { createAction } from \"src/main.store.js\"\nimport { symbolSwordUrl } from \"src/symbols/symbols.js\"\n\nexport const Home = () => {\n  return <ButtonNewGame />\n}\n\nconst ButtonNewGame = () => {\n  const createNewGame = useCreateNewGame()\n\n  return (\n    <div className=\"new-game\">\n      <Image src={symbolSwordUrl} />\n      <button onClick={createNewGame}>Nouvelle partie</button>\n    </div>\n  )\n}\n\nconst useCreateNewGame = createAction((state) => {\n  return {\n    ...state,\n    gameCreated: true,\n  }\n})\n",
    "import React from \"react\"\n\nexport const useMountEffect = (effect) => {\n  React.useEffect(effect, [])\n}\n\nexport const useUpdateEffect = (effect, dependencies = [], { layout = false } = {}) => {\n  const isInitialMount = React.useRef(true)\n  ;(layout ? React.useLayoutEffect : React.useEffect)(() => {\n    if (isInitialMount.current) {\n      isInitialMount.current = false\n      return undefined\n    }\n\n    return effect()\n  }, dependencies)\n}\n\n// https://stackoverflow.com/a/61680184/2634179\nexport const useBecomes = (becomesPredicate, deps) => {\n  const transition = useTransition(becomesPredicate, deps)\n  return Boolean(transition)\n}\n\nexport const useTransition = (transitionPredicate, deps) => {\n  const mountedRef = React.useRef(false)\n  React.useEffect(() => {\n    if (mountedRef.current === false) {\n      mountedRef.current = true\n    }\n  })\n\n  const depsRef = React.useRef(deps)\n  React.useEffect(() => {\n    depsRef.current = deps\n  }, deps)\n\n  if (!mountedRef.current) {\n    return null\n  }\n  if (!transitionPredicate(...depsRef.current)) {\n    return null\n  }\n  return {\n    from: depsRef.current,\n    to: deps,\n  }\n}\n\nexport const usePrevious = (value) => {\n  const ref = React.useRef(value)\n  React.useEffect(() => {\n    ref.current = value\n  }, [value])\n  return ref.current\n}\n",
    "import React from \"react\"\n\nexport const createSignal = () => {\n  let listeners = []\n\n  const listen = (callback, { once = false } = {}) => {\n    if (once) {\n      const callbackOriginal = callback\n      callback = (...args) => {\n        stopListening()\n        callbackOriginal(...args)\n      }\n    }\n\n    listeners = [...listeners, callback]\n\n    let removed = false\n    const stopListening = () => {\n      if (removed) return\n      removed = true\n      const listenersWithoutCallback = []\n      let i = listeners.length\n      let searching = true\n      while (i--) {\n        const listenerCandidate = listeners[i]\n        if (searching) {\n          if (listenerCandidate === callback) {\n            searching = false\n          } else {\n            listenersWithoutCallback.push(listenerCandidate)\n          }\n        } else {\n          listenersWithoutCallback.push(listenerCandidate)\n        }\n      }\n      listeners = listenersWithoutCallback\n    }\n    return stopListening\n  }\n\n  const emit = (...args) => {\n    listeners.forEach((listener) => {\n      listener(...args)\n    })\n  }\n\n  return {\n    listen,\n    emit,\n  }\n}\n\nexport const useSignal = () => {\n  const [signal] = React.useState(() => createSignal())\n  return [signal.listen, signal.emit]\n}\n\nexport const useSignalState = (listen) => {\n  const [state, stateSetter] = React.useState()\n  React.useEffect(() => {\n    return listen(stateSetter)\n  }, [])\n  return state\n}\n",
    "export const startJavaScriptAnimation = ({\n  duration = 300,\n  timingFunction = (t) => t, // https://easings.net/\n  onProgress = () => {},\n  onCancel = () => {},\n  onComplete = () => {},\n}) => {\n  if (isNaN(duration)) {\n    console.warn(`duration must be a number, received ${duration}`)\n    return () => {}\n  }\n  duration = parseInt(duration, 10)\n  const startMs = performance.now()\n  let currentRequestAnimationFrameId\n  let done = false\n  let rawProgress = 0\n  let progress = 0\n  const handler = () => {\n    currentRequestAnimationFrameId = null\n    const nowMs = performance.now()\n    rawProgress = Math.min((nowMs - startMs) / duration, 1)\n    progress = timingFunction(rawProgress)\n    done = rawProgress === 1\n    onProgress({\n      done,\n      rawProgress,\n      progress,\n    })\n    if (done) {\n      onComplete()\n    } else {\n      currentRequestAnimationFrameId = window.requestAnimationFrame(handler)\n    }\n  }\n  handler()\n  const stop = () => {\n    if (currentRequestAnimationFrameId) {\n      window.cancelAnimationFrame(currentRequestAnimationFrameId)\n      currentRequestAnimationFrameId = null\n    }\n    if (!done) {\n      done = true\n      onCancel({\n        rawProgress,\n        progress,\n      })\n    }\n  }\n  return stop\n}\n",
    "// https://usehooks.com/useAnimation/\n\nimport React from \"react\"\nimport { usePrevious } from \"src/hooks.js\"\nimport { startJavaScriptAnimation } from \"./startJavaScriptAnimation.js\"\n\nexport const useAnimateTransitionUsingJs = (\n  value,\n  { duration = 300, timingFunction, condition } = {},\n) => {\n  const [animatedValue, animatedValueSetter] = React.useState(null)\n  useAnimateTransition(\n    value,\n    (from, to) => {\n      animatedValueSetter({ value: from })\n      return startJavaScriptAnimation({\n        duration,\n        timingFunction,\n        onProgress: ({ progress }) => {\n          const value = Math.round(from + (to - from) * progress)\n          animatedValueSetter({\n            value,\n          })\n        },\n        onComplete: () => {\n          animatedValueSetter(null)\n        },\n      })\n    },\n    { condition },\n  )\n  return animatedValue\n}\n\nexport const useAnimateTransitionUsingWebAnimation = (value, animate) => {\n  useAnimateTransition(value, (from, to) => {\n    const animation = animate(from, to)\n    return () => {\n      animation.cancel()\n    }\n  })\n}\n\nconst useAnimateTransition = (value, animate, { condition = () => true } = {}) => {\n  const [transition, transitionSetter] = React.useState(null)\n\n  const valuePrevious = usePrevious(value)\n  React.useEffect(() => {\n    if (valuePrevious !== value && condition(value, valuePrevious)) {\n      transitionSetter({\n        from: valuePrevious,\n        to: value,\n      })\n    }\n  }, [valuePrevious, value])\n  React.useEffect(() => {\n    if (transition) {\n      return animate(transition.from, transition.to)\n    }\n    return () => {}\n  }, [transition])\n}\n",
    "import { useAnimateTransitionUsingJs } from \"./useAnimateTransition.js\"\n\nexport const ValueWithAnimatedTransition = ({ value, duration, condition }) => {\n  const animatedValue = useAnimateTransitionUsingJs(value, { duration, condition })\n  return animatedValue ? animatedValue.value : value\n}\n",
    "export const findFirstAncestor = (node, predicate) => {\n  let ancestor = node.parentNode\n  while (ancestor) {\n    if (predicate(ancestor)) {\n      return ancestor\n    }\n    ancestor = ancestor.parentNode\n  }\n  return null\n}\n\nexport const findFirstDescendant = (rootNode, fn) => {\n  const iterator = createNextNodeIterator(rootNode, rootNode)\n  let { done, value: node } = iterator.next()\n  while (done === false) {\n    if (fn(node)) {\n      return node\n    }\n    ;({ done, value: node } = iterator.next())\n  }\n  return null\n}\n\nexport const findLastDescendant = (rootNode, fn) => {\n  const deepestNode = getDeepestNode(rootNode)\n  if (deepestNode) {\n    const iterator = createPreviousNodeIterator(deepestNode, rootNode)\n    let { done, value: node } = iterator.next()\n    while (done === false) {\n      if (fn(node)) {\n        return node\n      }\n      ;({ done, value: node } = iterator.next())\n    }\n  }\n  return null\n}\n\nexport const findAfter = ({ from, root = null, predicate, skipChildren = false }) => {\n  const iterator = createAfterNodeIterator(from, root, skipChildren)\n  let { done, value: node } = iterator.next()\n  while (done === false) {\n    if (predicate(node)) {\n      return node\n    }\n    ;({ done, value: node } = iterator.next())\n  }\n  return null\n}\n\nexport const findAfterSkippingChildren = (param) => findAfter({ ...param, skipChildren: true })\n\nexport const findBefore = ({ from, root = null, predicate }) => {\n  const iterator = createPreviousNodeIterator(from, root)\n  let { done, value: node } = iterator.next()\n  while (done === false) {\n    if (predicate(node)) {\n      return node\n    }\n    ;({ done, value: node } = iterator.next())\n  }\n  return null\n}\n\nconst getNextNode = (node, rootNode, skipChild = false) => {\n  if (!skipChild) {\n    const firstChild = node.firstChild\n    if (firstChild) {\n      return firstChild\n    }\n  }\n\n  const nextSibling = node.nextSibling\n  if (nextSibling) {\n    return nextSibling\n  }\n\n  const parentNode = node.parentNode\n  if (parentNode && parentNode !== rootNode) {\n    return getNextNode(parentNode, rootNode, true)\n  }\n\n  return null\n}\n\nconst createNextNodeIterator = (node, rootNode) => {\n  let current = node\n  const next = () => {\n    const nextNode = getNextNode(current, rootNode)\n    current = nextNode\n    return {\n      done: Boolean(nextNode) === false,\n      value: nextNode,\n    }\n  }\n  return { next }\n}\n\nconst createAfterNodeIterator = (fromNode, rootNode, skipChildren = false) => {\n  let current = fromNode\n  let childrenSkipped = false\n  const next = () => {\n    const nextNode = getNextNode(current, rootNode, skipChildren && childrenSkipped === false)\n    childrenSkipped = true\n    current = nextNode\n    return {\n      done: Boolean(nextNode) === false,\n      value: nextNode,\n    }\n  }\n  return { next }\n}\n\nconst getDeepestNode = (node) => {\n  let deepestNode = node.lastChild\n  while (deepestNode) {\n    const lastChild = deepestNode.lastChild\n    if (lastChild) {\n      deepestNode = lastChild\n    } else {\n      break\n    }\n  }\n  return deepestNode\n}\n\nconst getPreviousNode = (node, rootNode) => {\n  const previousSibling = node.previousSibling\n  if (previousSibling) {\n    const deepestChild = getDeepestNode(previousSibling)\n\n    if (deepestChild) {\n      return deepestChild\n    }\n    return previousSibling\n  }\n  if (node !== rootNode) {\n    const parentNode = node.parentNode\n    if (parentNode && parentNode !== rootNode) {\n      return parentNode\n    }\n  }\n  return null\n}\n\nconst createPreviousNodeIterator = (fromNode, rootNode) => {\n  let current = fromNode\n  const next = () => {\n    const previousNode = getPreviousNode(current, rootNode)\n    current = previousNode\n    return {\n      done: Boolean(previousNode) === false,\n      value: previousNode,\n    }\n  }\n  return {\n    next,\n  }\n}\n",
    "import { isFocusable } from \"src/dom/dom.util.js\"\nimport {\n  findAfter,\n  findBefore,\n  findFirstDescendant,\n  findLastDescendant,\n} from \"src/dom/dom.traversal.js\"\n\nexport const firstFocusableDescendantOrSelf = (element) => {\n  const firstFocusableDescendant = findFirstDescendant(element, isFocusable)\n  if (firstFocusableDescendant) return firstFocusableDescendant\n\n  if (isFocusable(element)) return element\n\n  return null\n}\n\nexport const trapFocusInside = (element) => {\n  if (element.nodeType === 3) {\n    console.warn(\"cannot trap focus inside a text node\")\n    return () => {}\n  }\n\n  const trappedElement = activeTraps.find((activeTrap) => activeTrap.element === element)\n  if (trappedElement) {\n    console.warn(\"focus already trapped inside this element\")\n    return () => {}\n  }\n\n  const isEventOutside = (event) => {\n    if (event.target === element) return false\n    if (element.contains(event.target)) return false\n    return true\n  }\n\n  const getFirstTabbable = () => findFirstDescendant(element, isDiscoverableWithKeyboard)\n\n  const getLastTabbable = () => findLastDescendant(element, isDiscoverableWithKeyboard)\n\n  const getPreviousTabbableOrLast = () => {\n    const previous = findBefore({\n      from: document.activeElement,\n      root: element,\n      predicate: isDiscoverableWithKeyboard,\n    })\n    return previous || getLastTabbable()\n  }\n\n  const getNextTabbableOrFirst = () => {\n    const next = findAfter({\n      from: document.activeElement,\n      root: element,\n      predicate: isDiscoverableWithKeyboard,\n    })\n    return next || getFirstTabbable()\n  }\n\n  const performTabEventNavigation = (event) => {\n    const activeElement = document.activeElement\n    const activeElementIsBody = activeElement === document.body\n\n    if (event.shiftKey) {\n      const elementToFocus = activeElementIsBody\n        ? getLastTabbable()\n        : getPreviousTabbableOrLast(activeElement)\n      if (elementToFocus) {\n        elementToFocus.focus()\n      }\n    } else {\n      const elementToFocus = activeElementIsBody\n        ? getFirstTabbable()\n        : getNextTabbableOrFirst(activeElement)\n      if (elementToFocus) {\n        elementToFocus.focus()\n      }\n    }\n  }\n\n  const lock = () => {\n    const onmousedown = (event) => {\n      if (isEventOutside(event)) {\n        event.preventDefault()\n        event.stopImmediatePropagation()\n      }\n    }\n\n    const onkeydown = (event) => {\n      if (isTabEvent(event)) {\n        event.preventDefault()\n        performTabEventNavigation(event)\n      }\n    }\n\n    document.addEventListener(\"mousedown\", onmousedown, { capture: true, passive: false })\n    document.addEventListener(\"keydown\", onkeydown, { capture: true, passive: false })\n\n    return () => {\n      document.removeEventListener(\"mousedown\", onmousedown, { capture: true, passive: false })\n      document.removeEventListener(\"keydown\", onkeydown, { capture: true, passive: false })\n    }\n  }\n\n  const deactivate = activate({ element, lock })\n\n  const untrap = () => {\n    deactivate()\n  }\n\n  return untrap\n}\n\nconst hasNegativeTabIndex = (element) => {\n  return (\n    element.hasAttribute &&\n    element.hasAttribute(\"tabIndex\") &&\n    Number(element.getAttribute(\"tabindex\")) < 0\n  )\n}\n\nconst isDiscoverableWithKeyboard = (element) => {\n  if (hasNegativeTabIndex(element)) {\n    return false\n  }\n  return isFocusable(element)\n}\n\nconst isTabEvent = (event) => event.key === \"Tab\" || event.keyCode === 9\n\nconst activeTraps = []\nconst activate = ({ lock }) => {\n  // unlock any trap currently activated\n  let previousTrap\n  if (activeTraps.length > 0) {\n    previousTrap = activeTraps[activeTraps.length - 1]\n    previousTrap.unlock()\n  }\n\n  // store trap methods to lock/unlock as traps are acivated/deactivated\n  const trap = { lock, unlock: lock() }\n  activeTraps.push(trap)\n\n  return () => {\n    if (activeTraps.length === 0) {\n      console.warn(\"cannot deactivate an already deactivated trap\")\n      return\n    }\n    const lastTrap = activeTraps[activeTraps.length - 1]\n    if (trap !== lastTrap) {\n      // TODO: investigate this and maybe remove this requirment\n      console.warn(\"you must deactivate trap in the same order they were activated\")\n      return\n    }\n    activeTraps.pop()\n    trap.unlock()\n    // if any,reactivate the previous trap\n    if (previousTrap) {\n      previousTrap.unlock = previousTrap.lock()\n    }\n  }\n}\n",
    "import { getStyleValue, isDocumentElement } from \"src/dom/dom.util.js\"\n\nexport const trapScrollInside = (element) => {\n  const elementsToScrollLock = []\n  let previous = element.previousSibling\n  while (previous) {\n    if (previous.nodeType === 1) {\n      if (isScrollable(previous)) {\n        elementsToScrollLock.push(previous)\n      }\n    }\n    previous = previous.previousSibling\n  }\n\n  const scrollableParents = getAllScrollableParent(element)\n  elementsToScrollLock.push(...scrollableParents)\n  const cleanUpArray = elementsToScrollLock.map((element) => {\n    const prev = element.style.overflow\n    element.style.overflow = \"hidden\"\n    return () => {\n      if (prev) {\n        element.style.overflow = prev\n      } else {\n        element.style.removeProperty(\"overflow\")\n      }\n    }\n  })\n\n  return () => {\n    cleanUpArray.forEach((cleanup) => {\n      cleanup()\n    })\n  }\n}\n\nconst getAllScrollableParent = (element) => {\n  const scrollableParents = []\n\n  const visitElement = (elementOrScrollableParent) => {\n    const scrollableParent = getScrollableParent(elementOrScrollableParent)\n    if (scrollableParent) {\n      scrollableParents.push(scrollableParent)\n      if (scrollableParent === document) {\n        return\n      }\n      visitElement(scrollableParent)\n    }\n  }\n  visitElement(element)\n\n  return scrollableParents\n}\n\nconst getScrollableParent = (arg) => {\n  if (typeof arg !== \"object\" || arg.nodeType !== 1) {\n    throw new TypeError(\"getScrollableParent first argument must be DOM node\")\n  }\n  const element = arg\n  if (element === document.documentElement) {\n    return null\n  }\n  const position = getStyleValue(element, \"position\")\n\n  if (position === \"fixed\") {\n    return getScrollingElement(element.ownerDocument)\n  }\n  return findScrollableParent(element) || getScrollingElement(element.ownerDocument)\n}\n\nconst getScrollingElement = (document) => {\n  if (\"scrollingElement\" in document) {\n    return document.scrollingElement\n  }\n\n  if (isCompliant(document)) {\n    return document.documentElement\n  }\n\n  const body = document.body\n  const isFrameset = body && !/body/i.test(body.tagName)\n  const possiblyScrollingElement = isFrameset ? getNextBodyElement(body) : body\n\n  // If `body` is itself scrollable, it is not the `scrollingElement`.\n  return possiblyScrollingElement && bodyIsScrollable(possiblyScrollingElement)\n    ? null\n    : possiblyScrollingElement\n}\n\nconst getNextBodyElement = (frameset) => {\n  // We use this function to be correct per spec in case `document.body` is\n  // a `frameset` but there exists a later `body`. Since `document.body` is\n  // a `frameset`, we know the root is an `html`, and there was no `body`\n  // before the `frameset`, so we just need to look at siblings after the\n  // `frameset`.\n  let current = frameset\n  while ((current = current.nextSibling)) {\n    if (current.nodeType === 1 && isBodyElement(current)) {\n      return current\n    }\n  }\n  return null\n}\n\nconst isBodyElement = (element) => element.ownerDocument.body === element\n\nconst bodyIsScrollable = (body) => {\n  // a body element is scrollable if body and html are scrollable and rendered\n  if (!isScrollable(body)) {\n    return false\n  }\n  if (isHidden(body)) {\n    return false\n  }\n\n  const documentElement = body.ownerDocument.documentElement\n  if (!isScrollable(documentElement)) {\n    return false\n  }\n  if (isHidden(documentElement)) {\n    return false\n  }\n\n  return true\n}\n\nconst isHidden = (element) => {\n  const display = getStyleValue(element, \"display\")\n  if (display === \"none\") {\n    return false\n  }\n\n  if (display === \"table-row\" || display === \"table-group\" || display === \"table-column\") {\n    return getStyleValue(element, \"visibility\") !== \"collapsed\"\n  }\n\n  return true\n}\n\nconst isCompliant = (document) => {\n  // Note: document.compatMode can be toggle at runtime by document.write\n  const isStandardsMode = /^CSS1/.test(document.compatMode)\n  if (isStandardsMode) {\n    return testScrollCompliance(document)\n  }\n  return false\n}\n\nconst testScrollCompliance = (document) => {\n  const iframe = document.createElement(\"iframe\")\n  iframe.style.height = \"1px\"\n  const parentNode = document.body || document.documentElement || document\n  parentNode.appendChild(iframe)\n  const iframeDocument = iframe.contentWindow.document\n  iframeDocument.write('<!DOCTYPE html><div style=\"height:9999em\">x</div>')\n  iframeDocument.close()\n  const scrollComplianceResult =\n    iframeDocument.documentElement.scrollHeight > iframeDocument.body.scrollHeight\n  iframe.parentNode.removeChild(iframe)\n  return scrollComplianceResult\n}\n\nconst isScrollable = (element) => {\n  // note: keep in mind that an element with overflow: 'hidden' is scrollable\n  // it can be scrolled using keyboard arrows or JavaScript properties such as scrollTop, scrollLeft\n  if (!verticalOverflowIsVisible(element)) {\n    return true\n  }\n\n  if (!horizontalOverflowIsVisible(element)) {\n    return true\n  }\n\n  return false\n}\n\nconst verticalOverflowIsVisible = (element) => {\n  const verticalOverflow = getStyleValue(element, \"overflow-x\")\n  if (verticalOverflow === \"visible\") {\n    return true\n  }\n\n  const overflow = getStyleValue(element, \"overflow\")\n  return overflow === \"visible\"\n}\n\nconst horizontalOverflowIsVisible = (element) => {\n  const horizontalOverflow = getStyleValue(element, \"overflow-y\")\n  if (horizontalOverflow === \"visible\") {\n    return true\n  }\n  const overflow = getStyleValue(element, \"overflow\")\n  return overflow === \"visible\"\n}\n\nconst findScrollableParent = (element) => {\n  if (element === document.documentElement) return null\n\n  const position = getStyleValue(element, \"position\")\n  let parent = element.parentNode\n  while (parent) {\n    if (isDocumentElement(parent)) {\n      return null\n    }\n    if (position === \"absolute\" && getStyleValue(parent, \"position\") === \"static\") {\n      parent = parent.parentNode\n      continue\n    }\n    if (isScrollable(parent)) {\n      return parent\n    }\n    parent = parent.parentNode\n  }\n  return null\n}\n",
    "export default import.meta.ROLLUP_FILE_URL_0acc56d3",
    "/**\n\n--- click-no-effect-scenario ---\n\nBe careful if you ever create the following html structure:\n\n<div onClick={openDialog}>\n  Open dialog\n  <Dialog requestCloseOnClickOutside={true} requestClose={closeDialog} />\n</div>\n\nIn this context the onClick will happen on dialog backdrop which is\nInside the <div>. The closeDialog will be called but as click event bubbles\nit will also trigger onClick listener from the <div>.\nIn the end the click interaction both close and open the dialog in the same event loop.\n\n*/\n\nimport React from \"react\"\nimport ReactDOM from \"react-dom\"\n\nimport { useBecomes } from \"src/hooks.js\"\nimport { Stylesheet } from \"src/generic/Stylesheet.jsx\"\nimport { firstFocusableDescendantOrSelf, trapFocusInside } from \"./focus-trap.js\"\nimport { trapScrollInside } from \"./scroll-trap.js\"\n\nimport dialogBaseCssUrl from \"./dialog.base.css\"\n\nconst { useEffect } = React\n\n/**\nhttps://github.com/reactjs/react-modal\nhttps://github.com/reactjs/react-modal/blob/master/src/components/ModalPortal.js\nhttps://fr.reactjs.org/docs/portals.html\n*/\n\nexport const DialogBase = ({\n  container = document.body,\n  insertTop,\n  insertLeft,\n  insertRight,\n  insertBottom,\n  children,\n\n  isOpen,\n  requestCloseOnEscape = true,\n  requestCloseOnClickOutside = false,\n  // closeMethod can be \"visibility-hidden\", \"hidden-attribute\", \"dom-remove\"\n  // ideally we should return null when isOpen is false and the dialog never rendered\n  // (to avoid putting the dialog in display none while it might never be used)\n  // (but it's too early to know exactly what we want/need)\n  closeMethod = \"display-none\",\n\n  stealFocus = true,\n  restoreStolenFocus = true,\n  trapFocus = true,\n\n  onAfterOpen = () => {},\n  onRequestClose = () => {},\n  onFocusIn = () => {},\n  onFocusOut = () => {},\n  backdropProps = {},\n  ...rest\n}) => {\n  if (!container) return null\n  const [dialogRootNode, dialogRootNodeSetter] = React.useState(null)\n\n  const isInsideDocument = Boolean(dialogRootNode)\n  const becomesOpen = useBecomes((isOpenPrevious) => !isOpenPrevious && isOpen, [isOpen])\n\n  if (becomesOpen) {\n    onAfterOpen()\n  }\n\n  // onFocusIn, onFocusOut implementation\n  // https://github.com/facebook/react/issues/6410\n  useEffect(() => {\n    if (!isOpen || !isInsideDocument) return () => {}\n\n    let focusIsInsideDialog = hasOrContainsFocus(dialogRootNode)\n\n    const onDocumentBlur = (blurEvent) => {\n      // focus is leaving the document and it was inside dialog\n      if (!blurEvent.relatedTarget) {\n        if (focusIsInsideDialog) {\n          focusIsInsideDialog = false\n          onFocusOut(blurEvent)\n        }\n      }\n    }\n\n    const onDialogFocus = (focusEvent) => {\n      onFocusIn(focusEvent)\n      focusIsInsideDialog = true\n    }\n    const onDocumentFocus = (focusEvent) => {\n      if (hasOrContainsFocus(dialogRootNode)) {\n        focusIsInsideDialog = true\n      } else {\n        focusIsInsideDialog = false\n        onFocusOut(focusEvent)\n      }\n    }\n\n    dialogRootNode.addEventListener(\"focus\", onDialogFocus, true)\n    document.addEventListener(\"focus\", onDocumentFocus, true)\n    document.addEventListener(\"blur\", onDocumentBlur, true)\n    return () => {\n      dialogRootNode.removeEventListener(\"focus\", onDialogFocus, true)\n      document.removeEventListener(\"focus\", onDocumentFocus, true)\n      document.removeEventListener(\"blur\", onDocumentBlur, true)\n    }\n  }, [isOpen, isInsideDocument, onFocusIn, onFocusOut])\n\n  // trap scroll inside dialog\n  useEffect(() => {\n    if (!isOpen || !isInsideDocument) {\n      return () => {}\n    }\n    return trapScrollInside(dialogRootNode)\n  }, [isOpen, isInsideDocument])\n\n  // trap focus inside dialog\n  useEffect(() => {\n    if (!isOpen || !isInsideDocument || !trapFocus) return () => {}\n\n    return trapFocusInside(dialogRootNode)\n  }, [isOpen, isInsideDocument, trapFocus])\n\n  // steal focus to move it into dialog when it opens\n  useEffect(() => {\n    if (!isOpen || !isInsideDocument || !stealFocus) return () => {}\n\n    const nodeFocusedBeforeTransfer = document.activeElement\n    const firstFocusableElement = firstFocusableDescendantOrSelf(dialogRootNode)\n    if (firstFocusableElement) {\n      firstFocusableElement.focus({ preventScroll: true })\n    }\n    return () => {\n      if (firstFocusableElement) {\n        if (typeof restoreStolenFocus === \"function\") {\n          restoreStolenFocus(nodeFocusedBeforeTransfer)\n        } else if (restoreStolenFocus === true) {\n          nodeFocusedBeforeTransfer.focus({ preventScroll: true })\n        }\n      }\n    }\n  }, [isOpen, isInsideDocument, stealFocus])\n\n  // put aria-hidden on elements behind this dialog\n  useEffect(() => {\n    if (!isOpen || !dialogRootNode || !dialogRootNode.parentNode) return () => {}\n\n    const elementsToHide = []\n    /*\n    we hide previous and next siblings\n    because when dialog is opened everything around it should be considered\n    hidden (you cannot have several modal visible at the same time).\n\n    Let's keep in mind we are talking about a dialog in the accessibility terms.\n    It should focus trap, prevent interaction with the rest of the page\n    and consider the rest as hidden.\n    This dialog is not meant to be used for tooltip and so on.\n    */\n    const parentChildren = Array.from(dialogRootNode.parentNode.children)\n    parentChildren.forEach((child) => {\n      if (child !== dialogRootNode) {\n        elementsToHide.push(child)\n      }\n    })\n\n    elementsToHide.forEach((element) => {\n      element.setAttribute(\"aria-hidden\", \"true\")\n    })\n    return () => {\n      elementsToHide.forEach((element) => {\n        element.removeAttribute(\"aria-hidden\", \"true\")\n      })\n    }\n  }, [isOpen, dialogRootNode])\n\n  if (closeMethod === \"dom-remove\" && !isOpen) {\n    return null\n  }\n\n  return ReactDOM.createPortal(\n    <div\n      {...rest}\n      role=\"dialog\"\n      className={`dialog--root${rest.className ? ` ${rest.className}` : \"\"}`}\n      ref={(element) => {\n        dialogRootNodeSetter(element)\n        if (rest.ref) rest.ref(element)\n      }}\n      onKeyDown={(keydownEvent) => {\n        if (requestCloseOnEscape && keydownEvent.keyCode === ESC_KEY) {\n          onRequestClose(keydownEvent)\n        }\n        if (rest.onKeyDown) rest.onKeyDown(keydownEvent)\n      }}\n      tabIndex=\"-1\"\n      style={{\n        ...(closeMethod === \"display-none\" && !isOpen ? { display: \"none\" } : {}),\n        ...(closeMethod === \"visibility-hidden\" && !isOpen ? { visibility: \"hidden\" } : {}),\n      }}\n      hidden={closeMethod === \"hidden-attribute\" && !isOpen ? true : undefined}\n    >\n      <Stylesheet href={dialogBaseCssUrl} />\n      {isOpen ? (\n        <DialogBackDrop\n          {...backdropProps}\n          className=\"dialog--backdrop\"\n          // mousedown on backdrop -> transfer focus to dialog\n          onMouseDownActive={(mousedownEvent) => {\n            // prevent mousedown on backdrop from putting focus on document.body\n            mousedownEvent.preventDefault()\n            // instead foward focus to the dialog if not already inside\n            if (!hasOrContainsFocus(dialogRootNode)) {\n              const firstFocusableElement = firstFocusableDescendantOrSelf(dialogRootNode)\n              if (firstFocusableElement) {\n                firstFocusableElement.focus({ preventScroll: true })\n              }\n            }\n          }}\n          onClick={(clickEvent) => {\n            // I wonder if we should clickEvent.stopPropagation()\n            // because back drop is also there to shallow click interaction\n            // it would prevent the click event from bubbling and creates the potential\n            // --- click-no-effect-scenario --- described at the top of this file.\n            if (requestCloseOnClickOutside) {\n              onRequestClose(clickEvent)\n            }\n            if (backdropProps.onClick) backdropProps.onClick(clickEvent)\n          }}\n        />\n      ) : null}\n      <div className=\"dialog--document\">\n        <div className=\"dialog--insert-top\">{insertTop}</div>\n        <div className=\"dialog--main\">\n          <div className=\"dialog--insert-left\">{insertLeft}</div>\n          <div className=\"dialog--scrollable-content\">{children}</div>\n          <div className=\"dialog--insert-right\">{insertRight}</div>\n        </div>\n        <div className=\"dialog--insert-bottom\">{insertBottom}</div>\n      </div>\n    </div>,\n    container,\n  )\n}\n\nconst DialogBackDrop = ({ onMouseDownActive, ...props }) => {\n  const [backdropElement, setBackdropElement] = React.useState(null)\n  useEffect(() => {\n    if (!backdropElement) return () => {}\n\n    backdropElement.addEventListener(\"mousedown\", onMouseDownActive, { passive: false })\n    return () => {\n      backdropElement.removeEventListener(\"mousedown\", onMouseDownActive, { passive: false })\n    }\n  }, [backdropElement])\n\n  return (\n    <div\n      ref={(element) => {\n        setBackdropElement(element)\n        if (props.ref) props.ref(element)\n      }}\n      {...props}\n    ></div>\n  )\n}\n\nconst hasOrContainsFocus = (element) => {\n  const { activeElement } = document\n  return element === activeElement || element.contains(activeElement)\n}\n\nconst ESC_KEY = 27\n",
    "export default import.meta.ROLLUP_FILE_URL_c69576f5",
    "import React from \"react\"\n\nimport { useMainDomNode } from \"src/dom/dom.main.js\"\nimport { Stylesheet } from \"src/generic/Stylesheet.jsx\"\n\nimport { DialogBase } from \"./DialogBase.jsx\"\nimport dialogCssUrl from \"src/dialog/dialog.css\"\n\nexport const Dialog = (props) => {\n  return (\n    <>\n      <Stylesheet href={dialogCssUrl} />\n      <DialogBase container={useMainDomNode()} {...props} />\n    </>\n  )\n}\n\nexport const useDialogState = () => {\n  const [dialogIsOpen, setDialogIsOpen] = React.useState(false)\n  const openDialog = () => {\n    setDialogIsOpen(true)\n  }\n  const closeDialog = () => {\n    setDialogIsOpen(false)\n  }\n  return [dialogIsOpen, openDialog, closeDialog]\n}\n",
    "import {\n  SYMBOL_DIAMOND,\n  SYMBOL_COIN,\n  SYMBOL_PARROT,\n  SYMBOL_MONKEY,\n  SYMBOL_SWORD,\n} from \"src/symbols/symbols.js\"\nimport {\n  isAnimalsCard,\n  isPirateCard,\n  isCoinCard,\n  isDiamondCard,\n  isSwordChallengeCard,\n} from \"src/cards/cards.js\"\n\nexport const computeRoundScore = ({ card, symbolsInChest, scoreMarked, markScoreAllowed }) => {\n  if (isSwordChallengeCard(card)) {\n    if (!scoreMarked && !markScoreAllowed) {\n      return -card.gambleAmount\n    }\n    return computeScoreForSwordChallenge(symbolsInChest, {\n      goal: card.numberOfSwords,\n      gamble: card.gambleAmount,\n    })\n  }\n\n  if (isAnimalsCard(card)) {\n    return computeScoreForSymbols(\n      symbolsInChest.map((symbol) => (symbol === SYMBOL_PARROT ? SYMBOL_MONKEY : symbol)),\n    )\n  }\n\n  if (isPirateCard(card)) {\n    return computeScoreForSymbols(symbolsInChest) * 2\n  }\n\n  if (isCoinCard(card)) {\n    return computeScoreForSymbols(symbolsInChest, 9)\n  }\n\n  if (isDiamondCard(card)) {\n    return computeScoreForSymbols(symbolsInChest, 9)\n  }\n\n  return computeScoreForSymbols(symbolsInChest)\n}\n\nconst computeScoreForSwordChallenge = (symbols, { goal, gamble }) => {\n  const swordChallengeAchieved = countSymbol(symbols, SYMBOL_SWORD) >= goal\n  if (swordChallengeAchieved) {\n    return computeScoreForSymbols(symbols) + gamble\n  }\n  return -gamble\n}\n\nexport const countSymbol = (symbolArray, symbol) => {\n  return symbolArray.filter((symbolCandidate) => symbolCandidate === symbol).length\n}\n\nconst computeScoreForSymbols = (symbols, perfectCount) => {\n  const { score, perfectBonus } = getScoreAndPerfectBonus(symbols, perfectCount)\n  return score + perfectBonus\n}\n\nexport const getScoreAndPerfectBonus = (symbols, perfectCount = 8) => {\n  let score = 0\n  let usefullSymbol = 0\n\n  // add points for dice combinaisons\n  const symbolCountMap = countSymbolsOccurences(symbols)\n  Object.values(symbolCountMap).forEach((symbolCount) => {\n    if (symbolCount === 3) score += 100\n    if (symbolCount === 4) score += 200\n    if (symbolCount === 5) score += 500\n    if (symbolCount === 6) score += 1000\n    if (symbolCount === 7) score += 2000\n    if (symbolCount === 8) score += 4000\n    if (symbolCount > 2) usefullSymbol += symbolCount\n  })\n\n  // add 1 point for each coin and diamond\n  symbols.forEach((symbol) => {\n    if (symbol === SYMBOL_DIAMOND) {\n      score += 100\n      if (symbolCountMap[SYMBOL_DIAMOND] < 3) usefullSymbol += 1\n    }\n    if (symbol === SYMBOL_COIN) {\n      score += 100\n      if (symbolCountMap[SYMBOL_COIN] < 3) usefullSymbol += 1\n    }\n  })\n\n  return {\n    score,\n    perfectBonus: usefullSymbol === perfectCount ? 500 : 0,\n  }\n}\n\nconst countSymbolsOccurences = (symbols) => {\n  const symbolCountMap = {}\n  symbols.forEach((symbol) => {\n    if (symbolCountMap.hasOwnProperty(symbol)) {\n      symbolCountMap[symbol]++\n    } else {\n      symbolCountMap[symbol] = 1\n    }\n  })\n  return symbolCountMap\n}\n",
    "export default import.meta.ROLLUP_FILE_URL_0f175120",
    "import React from \"react\"\n\nimport { Image } from \"src/generic/Image.jsx\"\nimport { useCurrentCardId } from \"src/main.store.js\"\nimport { useSymbolsInChest } from \"src/round/round.selectors.js\"\nimport { cardIdToCard, isSwordChallengeCard } from \"src/cards/cards.js\"\nimport { SYMBOL_SWORD, symbolSwordUrl } from \"src/symbols/symbols.js\"\nimport { countSymbol } from \"src/round/computeRoundScore.js\"\nimport swordsDisabledImageUrl from \"src/header/swords-disabled.png\"\n\nexport const useSwordQuantityRequired = ({ currentCardId = useCurrentCardId() } = {}) => {\n  const card = cardIdToCard(currentCardId)\n  if (isSwordChallengeCard(card)) return card.numberOfSwords\n  return null\n}\n\nexport const SwordChallengeIndicator = () => {\n  const currentCardId = useCurrentCardId()\n  const symbolsInChest = useSymbolsInChest()\n  const quantityRequired = useSwordQuantityRequired()\n\n  if (!currentCardId) {\n    return null\n  }\n  const currentCard = cardIdToCard(currentCardId)\n  if (!isSwordChallengeCard(currentCard)) {\n    return null\n  }\n\n  const quantityKept = countSymbol(symbolsInChest, SYMBOL_SWORD)\n  const quantityRequiredArray = new Array(quantityRequired).fill(\"\")\n\n  return (\n    <div className=\"sword-challenge-indicators\">\n      {quantityRequiredArray.map((value, index) => {\n        if (quantityKept >= index + 1) return <SwordIconActivated key={index} />\n        return <SwordIconDisabled key={index} />\n      })}\n    </div>\n  )\n}\n\nconst SwordIconActivated = () => (\n  <div className=\"sword-icon\">\n    <Image src={symbolSwordUrl} />\n  </div>\n)\n\nconst SwordIconDisabled = () => (\n  <div className=\"sword-icon disabled\">\n    <Image src={swordsDisabledImageUrl} />\n  </div>\n)\n",
    "import React from \"react\"\n\nexport const StarRain = () => {\n  return (\n    <div className=\"star-rain-container\">\n      <div className=\"star\" id=\"star-01\">\n        <Star />\n      </div>\n      <div className=\"star\" id=\"star-02\">\n        <Star />\n      </div>\n      <div className=\"star\" id=\"star-03\">\n        <Star />\n      </div>\n      <div className=\"star\" id=\"star-04\">\n        <Star />\n      </div>\n      <div className=\"star\" id=\"star-05\">\n        <Star />\n      </div>\n      <div className=\"star\" id=\"star-06\">\n        <Star />\n      </div>\n    </div>\n  )\n}\n\nconst Star = () => (\n  <svg viewBox=\"0 0 217.791 210.633\">\n    <path\n      fill=\"#FFFFE6\"\n      d=\"M94.15,77.97c0,0-2-54,10-73.5s23,28.5,25.5,72.5c0,0,69.197,4.589,86.5,21c13.637,12.934-61.5,31-87,33.5\n\tc-2,14.5-1.831,60.464-16.5,75.5c-20,20.5-25.5-50.5-23-78c-19-1.5-81.5-3.5-89-17.5S52.15,85.97,94.15,77.97z\"\n    />\n  </svg>\n)\n",
    "import React from \"react\"\n\nimport { Dialog } from \"src/dialog/dialog.component.jsx\"\n\nexport const DialogWood = ({ title, children, ...props }) => {\n  return (\n    <Dialog\n      requestCloseOnClickOutside={true}\n      insertTop={\n        <>\n          <div className=\"dialog-border-top\"></div>\n          <div className=\"dialog-title\">{title}</div>\n        </>\n      }\n      insertBottom={<div className=\"dialog-border-bottom\"></div>}\n      insertLeft={<div className=\"dialog-border-left\"></div>}\n      insertRight={<div className=\"dialog-border-right\"></div>}\n      {...props}\n      className={`dialog-theme-wood dialog-spacing-10 dialog-spacing-fluid dialog-spacing-top-fixed ${props.className}`}\n    >\n      {children}\n    </Dialog>\n  )\n}\n",
    "/* eslint-disable import/max-dependencies */\nimport React from \"react\"\n\nimport { Image } from \"src/generic/Image.jsx\"\n\nimport { DialogWood } from \"src/dialog/dialog.wood.jsx\"\nimport { symbolCoinUrl, symbolDiamondUrl } from \"src/symbols/symbols.js\"\n\nexport const RoundScoreRulesDialog = ({ dialogIsOpen, closeDialog }) => {\n  return (\n    <DialogWood\n      className=\"score-rules-dialog\"\n      isOpen={dialogIsOpen}\n      onRequestClose={closeDialog}\n      requestCloseOnClickOutside={true}\n      title=\"Score\"\n    >\n      <>\n        <div className=\"dialog-box\">\n          <div className=\"dialog-label\">Combinaisons de dés</div>\n          <div className=\"columns\">\n            <div className=\"column\">\n              <div className=\"column-title\">Symbols identiques</div>\n              <span className=\"symbol-number\">3</span>\n              <span className=\"symbol-number\">4</span>\n              <span className=\"symbol-number\">5</span>\n              <span className=\"symbol-number\">6</span>\n              <span className=\"symbol-number\">7</span>\n              <span className=\"symbol-number\">8</span>\n            </div>\n            <div className=\"column\">\n              <div className=\"column-title\">Points</div>\n              <span className=\"points\">+100</span>\n              <span className=\"points\">+200</span>\n              <span className=\"points\">+500</span>\n              <span className=\"points\">+1000</span>\n              <span className=\"points\">+2000</span>\n              <span className=\"points\">+4000</span>\n            </div>\n          </div>\n        </div>\n        <div className=\"dialog-box\">\n          <div className=\"dialog-label\">Dés spéciaux</div>\n          <div className=\"columns\">\n            <div className=\"column\">\n              <div className=\"column-title\">Symbol</div>\n              <Image src={symbolCoinUrl} />\n              <Image src={symbolDiamondUrl} />\n            </div>\n            <div className=\"column\">\n              <div className=\"column-title\">Points</div>\n              <span className=\"points\">+100</span>\n              <span className=\"points\">+100</span>\n            </div>\n          </div>\n        </div>\n        <div className=\"dialog-box last\">\n          <div className=\"dialog-label\">Bonus coffre plein</div>\n          <div className=\"columns\">\n            <div className=\"column\">\n              <div className=\"column-title\">Dés utilisés</div>\n              <span className=\"symbol-number\">8</span>\n            </div>\n            <div className=\"column\">\n              <div className=\"column-title\">Points</div>\n              <span className=\"points\">+500</span>\n            </div>\n          </div>\n        </div>\n      </>\n    </DialogWood>\n  )\n}\n",
    "import { getDocumentScroll, getStyleValue } from \"src/dom/dom.util.js\"\n\nexport const rotatePoint = (origin, point, degrees) => {\n  const radians = degreesToRadians(degrees)\n  const cosinus = Math.cos(radians)\n  const sinus = Math.sin(radians)\n  const run = point.x - origin.x\n  const rise = point.y - origin.y\n\n  return {\n    x: Math.round(cosinus * run + sinus * rise + origin.x),\n    y: Math.round(cosinus * rise - sinus * run + origin.y),\n  }\n}\n\nexport const getDistanceBetweenTwoPoints = (firstPoint, secondPoint) => {\n  const horizontalDiff = firstPoint.x - secondPoint.x\n  const verticalDiff = firstPoint.y - secondPoint.y\n  return Math.sqrt(horizontalDiff * horizontalDiff + verticalDiff * verticalDiff)\n}\n\nconst getRectangleCenterPoint = ([topLeft, topRight, bottomRight, bottomLeft]) => {\n  return {\n    x: (topLeft.x + topRight.x + bottomRight.x + bottomLeft.x) / 4,\n    y: (topLeft.y + topRight.y + bottomRight.y + bottomLeft.y) / 4,\n  }\n}\n\nexport const rotateRectangle = (points, degree, origin = getRectangleCenterPoint(points)) => {\n  return points.map((point) => rotatePoint(origin, point, degree))\n}\n\nconst degreesToRadians = (degrees) => (degrees * Math.PI) / 180\n\nconst radiansToDegree = (radians) => Math.round(radians * (180 / Math.PI))\n\n// https://github.com/davidfig/intersects/blob/master/lineToLine.js\nexport const lineCollidesWithLine = (\n  [firstLineStartPoint, firstLineEndPoint],\n  [secondLineStartPoint, secondLineEndPoint],\n) => {\n  let unknownA =\n    (secondLineEndPoint.x - secondLineStartPoint.x) *\n      (firstLineStartPoint.y - secondLineStartPoint.y) -\n    (secondLineEndPoint.y - secondLineStartPoint.y) *\n      (firstLineStartPoint.x - secondLineStartPoint.x)\n  let unknownB =\n    (firstLineEndPoint.x - firstLineStartPoint.x) *\n      (firstLineStartPoint.y - secondLineStartPoint.y) -\n    (firstLineEndPoint.y - firstLineStartPoint.y) * (firstLineStartPoint.x - secondLineStartPoint.x)\n  const denominator =\n    (secondLineEndPoint.y - secondLineStartPoint.y) *\n      (firstLineEndPoint.x - firstLineStartPoint.x) -\n    (secondLineEndPoint.x - secondLineStartPoint.x) * (firstLineEndPoint.y - firstLineStartPoint.y)\n\n  // Test if Coincident\n  // If the denominator and numerator for the ua and ub are 0\n  // then the two lines are coincident.\n  if (unknownA === 0 && unknownB === 0 && denominator === 0) {\n    return false\n  }\n\n  // Test if Parallel\n  // If the denominator for the equations for ua and ub is 0\n  // then the two lines are parallel.\n  if (denominator === 0) {\n    return false\n  }\n\n  // test if line segments are colliding\n  unknownA /= denominator\n  unknownB /= denominator\n  const isIntersecting = unknownA >= 0 && unknownA <= 1 && unknownB >= 0 && unknownB <= 1\n\n  return isIntersecting\n}\n\nexport const rotatedRectangleCollidesWithRotatedRectangle = (\n  firstRotatedRectangle,\n  secondRotatedRectangle,\n) =>\n  someRectangleSideLine(firstRotatedRectangle, (firstRotatedRectangleSideLine) =>\n    lineCollidesWithRectangle(firstRotatedRectangleSideLine, secondRotatedRectangle),\n  )\n\n// https://riptutorial.com/html5-canvas/example/17710/are-line-segment-and-rectangle-colliding-\nexport const lineCollidesWithRectangle = (line, rectangle) => {\n  const lineIntersects = someRectangleSideLine(rectangle, (rectangleSideLine) =>\n    lineCollidesWithLine(line, rectangleSideLine),\n  )\n  if (lineIntersects) return true\n  // TODO: here we should check if line is contained inside the rectangle because in that case\n  // it's not intersecting but it's colliding\n  return false\n}\n\nconst someRectangleSideLine = ([firstPoint, secondPoint, thirdPoint, fourthPoint], predicate) => {\n  const rectangleFirstLine = [firstPoint, secondPoint]\n  if (predicate(rectangleFirstLine)) return true\n  const rectangleSecondLine = [secondPoint, thirdPoint]\n  if (predicate(rectangleSecondLine)) return true\n  const rectangleThirdLine = [thirdPoint, fourthPoint]\n  if (predicate(rectangleThirdLine)) return true\n  const rectangleFourthLine = [fourthPoint, firstPoint]\n  if (predicate(rectangleFourthLine)) return true\n  return false\n}\n\n/**\nA matrix is an array composed by\n[\n  scale x,\n  skew y,\n  skew x,\n  scale y,\n  translate x,\n  translate y,\n]\n*/\n\n// https://stackoverflow.com/questions/14687318/how-to-find-new-coordinates-of-rectangle-after-rotation\nexport const getDomNodePoints = (domNode) => {\n  const transformMatrix = getStyleValue(domNode, \"transform\")\n  const transformOrigin = getStyleValue(domNode, \"transform-origin\")\n\n  domNode.style.transform = \"matrix(1, 0, 0, 1, 0, 0)\"\n  domNode.style.transformOrigin = \"0 0\"\n  const boundlingClientRectangle = domNode.getBoundingClientRect()\n  domNode.style.transform = transformMatrix\n  domNode.style.transformOrigin = transformOrigin\n\n  const documentScroll = getDocumentScroll(domNode)\n  const left = boundlingClientRectangle.left + documentScroll.x\n  const top = boundlingClientRectangle.top + documentScroll.y\n  const right = left + boundlingClientRectangle.width\n  const bottom = top + boundlingClientRectangle.height\n\n  const topLeftPoint = { x: left, y: top }\n  const topRightPoint = { x: right, y: top }\n  const bottomLeftPoint = { x: right, y: bottom }\n  const bottomRightPoint = { x: left, y: bottom }\n  const points = [topLeftPoint, topRightPoint, bottomLeftPoint, bottomRightPoint]\n\n  if (transformMatrix) {\n    const matrix = transformMatrix.slice(\"matrix(\".length, -1).split(\", \").map(parseFloat)\n\n    let rotateOrigin\n    // this code assume transform is only about rotation, no scaling, no translation\n    // it does not work if there is a transform origin for some reason\n    if (transformOrigin) {\n      const origin = transformOrigin.split(\" \").map(parseFloat)\n      rotateOrigin = {\n        x: left + origin[0],\n        y: top + origin[1],\n      }\n    } else {\n      // center of the element by default\n      rotateOrigin = {\n        x: left + (right - left) / 2,\n        y: top + (bottom - top) / 2,\n      }\n    }\n\n    const rotationInDegrees = matrixToRotationInDegrees(matrix)\n    return rotateRectangle(points, rotationInDegrees, rotateOrigin)\n  }\n\n  return points\n}\n\nconst matrixToRotationInDegrees = ([a, b]) => radiansToDegree(Math.atan2(b, a))\n\n// https://github.com/leeoniya/transformation-matrix-js/blob/3595d2b36aa1b0f593bdffdb786b9e832c50c3b0/src/matrix.js#L234\nexport const invertMatrix = ([a, b, c, d, e, f]) => {\n  const dt = a * d - b * c\n  return [d / dt, -b / dt, -c / dt, a / dt, (c * f - d * e) / dt, -(a * f - b * e) / dt]\n}\n\nexport const transformPoint = ({ x, y }, [a, b, c, d, e, f]) => {\n  return {\n    x: x * a + y * c + e,\n    y: x * b + y * d + f,\n  }\n}\n\nexport const transformPoints = (points, matrix) => {\n  return points.map((point) => transformPoint(point, matrix))\n}\n",
    "// https://github.com/infusion/Rectangles.js/blob/master/rectangles.js\n\nimport { getDistanceBetweenTwoPoints } from \"./geometry.js\"\n\nexport const rectangleCollidesWithRectangle = (firstRectangle, secondRectangle) => {\n  // first left of second\n  if (firstRectangle.right <= secondRectangle.left) return false\n  // first right of second\n  if (firstRectangle.left >= secondRectangle.right) return false\n  // first above second\n  if (firstRectangle.bottom <= secondRectangle.top) return false\n  // first below second\n  if (firstRectangle.top >= secondRectangle.bottom) return false\n\n  return true\n}\n\nexport const rectangleInsideOf = (rectangle, parentRectangle) => {\n  let left = rectangle.left\n  let right = rectangle.right\n  const width = right - left\n  if (left < parentRectangle.left) {\n    left = parentRectangle.left\n    right = left + width\n  } else if (right > parentRectangle.right) {\n    left = parentRectangle.right - width\n    right = left + width\n  }\n\n  let top = rectangle.top\n  let bottom = rectangle.bottom\n  const height = bottom - top\n  if (top < parentRectangle.top) {\n    top = parentRectangle.top\n    bottom = top + height\n  } else if (bottom > parentRectangle.bottom) {\n    top = parentRectangle.bottom - height\n    bottom = top + height\n  }\n\n  return {\n    left,\n    right,\n    top,\n    bottom,\n  }\n}\n\nexport const rectangleRelativeTo = (rectangle, parentRectangle) => {\n  const left = rectangle.left - parentRectangle.left\n  const width = rectangle.right - rectangle.left\n  const right = left + width\n\n  const top = rectangle.top - parentRectangle.top\n  const height = rectangle.bottom - rectangle.top\n  const bottom = top + height\n\n  return {\n    left,\n    right,\n    top,\n    bottom,\n  }\n}\n\nexport const findRectangleCloserToRectangle = (rectangleCandidates, rectangle) => {\n  let smallestDistance = getDistanceBetweenRectangles(rectangle, rectangleCandidates[0])\n  return rectangleCandidates.reduce((prev, rectangleCandidate) => {\n    const distance = getDistanceBetweenRectangles(rectangle, rectangleCandidate)\n    if (distance < smallestDistance) {\n      smallestDistance = distance\n      return rectangleCandidate\n    }\n    return prev\n  })\n}\n\nconst getRectangleArea = ({ left, right, top, bottom }) => {\n  const width = right - left\n  const height = bottom - top\n  return width * height\n}\n\nexport const getRectangleCenterPoint = ({ left, right, top, bottom }) => {\n  return {\n    x: left + (right - left) / 2,\n    y: top + (bottom - top) / 2,\n  }\n}\n\nconst getDistanceBetweenRectangles = (firstRectangle, secondRectangle) => {\n  const firstRectangleCenterPoint = getRectangleCenterPoint(firstRectangle)\n  const secondRectangleCenterPoint = getRectangleCenterPoint(secondRectangle)\n  return getDistanceBetweenTwoPoints(firstRectangleCenterPoint, secondRectangleCenterPoint)\n}\n\nexport const getRectangleIntersectionRatio = (firstRectangle, secondRectangle) => {\n  const firstRectangleArea = getRectangleArea(firstRectangle)\n  const overlapArea = getRectangleArea(rectangleOverlapping(firstRectangle, secondRectangle))\n  return firstRectangleArea / overlapArea\n}\n\nexport const rectangleOverlapping = ({ left, right, top, bottom }, intersectingRectangle) => {\n  const overlapRectangle = {\n    left: left < intersectingRectangle.left ? intersectingRectangle.left : left,\n    right: right < intersectingRectangle.right ? right : intersectingRectangle.right,\n    top: top < intersectingRectangle.top ? intersectingRectangle.top : top,\n    bottom: bottom < intersectingRectangle.bottom ? bottom : intersectingRectangle.bottom,\n  }\n  return overlapRectangle\n}\n",
    "import { getDocumentScroll } from \"./dom.util.js\"\nimport {\n  rectangleInsideOf,\n  rectangleRelativeTo,\n  rectangleCollidesWithRectangle,\n  findRectangleCloserToRectangle,\n} from \"src/helper/rectangle.js\"\n\nexport const getDomNodeRectangle = (domNode) => {\n  const domNodeRect = domNode.getBoundingClientRect()\n  const documentScroll = getDocumentScroll(domNode)\n  const left = domNodeRect.left + documentScroll.x\n  const top = domNodeRect.top + documentScroll.y\n  const right = left + domNodeRect.width\n  const bottom = top + domNodeRect.height\n\n  return {\n    left: Math.floor(left),\n    top: Math.floor(top),\n    right: Math.floor(right),\n    bottom: Math.floor(bottom),\n  }\n}\n\nexport const rectangleToRectangleInsideDomNode = (rectangle, domNode) => {\n  const domNodeRectangle = getDomNodeRectangle(domNode)\n  const rectangleInsideDomNode = rectangleInsideOf(rectangle, domNodeRectangle)\n  return rectangleInsideDomNode\n}\n\nexport const rectangleRelativeToDomNode = (rectangle, domNode) => {\n  const domNodeRectangle = getDomNodeRectangle(domNode)\n  const rectangleInsideDomNode = rectangleInsideOf(rectangle, domNodeRectangle)\n  const rectangleInsideAndRelative = rectangleRelativeTo(rectangleInsideDomNode, domNodeRectangle)\n  return rectangleInsideAndRelative\n}\n\nexport const rectangleAbsoluteToDomNode = (rectangle, domNode) => {\n  const domNodeRectangle = getDomNodeRectangle(domNode)\n  const rectangleWidth = rectangle.right - rectangle.left\n  const rectangleHeight = rectangle.bottom - rectangle.top\n  const rectangleAbsolute = {\n    left: domNodeRectangle.left + rectangle.left,\n    top: domNodeRectangle.top + rectangle.top,\n    right: domNodeRectangle.left + rectangle.left + rectangleWidth,\n    bottom: domNodeRectangle.top + rectangle.top + rectangleHeight,\n  }\n  return rectangleAbsolute\n}\n\nexport const domNodeCollidesWithRectangle = (domNode, rectangle) => {\n  const domNodeRectangle = getDomNodeRectangle(domNode)\n  return rectangleCollidesWithRectangle(domNodeRectangle, rectangle)\n}\n\nexport const findDomNodeClosestToRectangle = (domNodeCandidates, rectangle) => {\n  const rectangleCandidates = domNodeCandidates.map((domNodeCandidate) =>\n    getDomNodeRectangle(domNodeCandidate),\n  )\n  const closestRectangle = findRectangleCloserToRectangle(rectangleCandidates, rectangle)\n  return domNodeCandidates[rectangleCandidates.indexOf(closestRectangle)]\n}\n\nexport const printPointInDocument = (\n  { x, y },\n  { color = \"yellow\", autoRemove = true, autoRemoveAfter = 2000 } = {},\n) => {\n  const div = document.createElement(\"div\")\n  div.style.position = \"absolute\"\n  div.style.zIndex = \"1000\"\n  div.style.left = `${x}px`\n  div.style.top = `${y}px`\n  div.style.width = \"5px\"\n  div.style.height = \"5px\"\n  div.style.background = color\n  div.style.border = \"1px solid red\"\n  document.body.appendChild(div)\n\n  const remove = () => {\n    document.body.removeChild(div)\n  }\n\n  let autoRemoveTimeout\n  if (autoRemove) {\n    autoRemoveTimeout = setTimeout(remove, autoRemoveAfter)\n  }\n\n  return () => {\n    remove()\n    clearTimeout(autoRemoveTimeout)\n  }\n}\n",
    "import React from \"react\"\n\nimport { getDomNodeRectangle } from \"src/dom/dom.position.js\"\n\nexport const useScoreParticles = ({\n  totalScore = 0,\n  minDelayBetweenParticles = 400,\n  onScoreParticleAdded = () => {},\n  onScoreParticleRemoved = () => {},\n  onScoreParticleMerged = () => {},\n} = {}) => {\n  const [score, scoreSetter] = React.useState(totalScore)\n  const [scoreParticles, scoreParticlesSetter] = React.useState([])\n\n  React.useEffect(() => {\n    scoreSetter(totalScore)\n  }, [totalScore])\n\n  const addScoreParticleToState = (scoreParticle) => {\n    // scoreParticlesSetter([...scoreParticles, scoreParticle])\n    // return () => {\n    //   scoreParticlesSetter(\n    //     scoreParticles.filter((scoreParticleCandidate) => scoreParticleCandidate !== scoreParticle),\n    //   )\n    // }\n    scoreParticlesSetter((scoreParticles) => {\n      const scoreParticlesWithParticle = [...scoreParticles, scoreParticle]\n      return scoreParticlesWithParticle\n    })\n    onScoreParticleAdded(scoreParticle)\n    let removed = false\n    return () => {\n      if (removed) return\n      removed = true\n      scoreParticlesSetter((scoreParticles) => {\n        const scoreParticlesWithoutParticle = scoreParticles.filter(\n          (scoreParticleCandidate) => scoreParticleCandidate !== scoreParticle,\n        )\n        return scoreParticlesWithoutParticle\n      })\n      scoreSetter((score) => score - scoreParticle.value)\n      onScoreParticleRemoved(scoreParticle)\n    }\n  }\n\n  const lastAnimationMsRef = React.useRef(null)\n  const addScoreParticle = ({ id, value, x, y }) => {\n    const lastAnimationMs = lastAnimationMsRef.current\n    const animationDelay = scoreParticleAnimationDelayGetter(\n      lastAnimationMs,\n      minDelayBetweenParticles,\n    )\n    lastAnimationMsRef.current = Date.now() + animationDelay\n\n    const scoreParticle = {\n      id,\n      value,\n      x,\n      y,\n      animationDelay,\n      oncancel: () => {\n        // not really needed as long as code calling addScoreParticle\n        // does it in a useEffect and returns removeScoreParticleFromState\n        removeScoreParticleFromState()\n      },\n      onfinish: () => {\n        // removeScoreParticleFromState()\n        onScoreParticleMerged(scoreParticle)\n        scoreSetter((score) => score + scoreParticle.value)\n      },\n    }\n    const removeScoreParticleFromState = addScoreParticleToState(scoreParticle)\n    return removeScoreParticleFromState\n  }\n\n  const scoreInParticles = scoreParticles.reduce(\n    (previous, particle) => previous + particle.value,\n    0,\n  )\n  const scoreDisplayed = score - scoreInParticles\n\n  return [scoreParticles, addScoreParticle, scoreDisplayed]\n}\n\nconst scoreParticleAnimationDelayGetter = (lastAnimationMs, minDelayBetweenParticles) => {\n  if (!lastAnimationMs) {\n    return 0\n  }\n\n  const nowMs = Date.now()\n  const msEllapsedSinceLastParticle = nowMs - lastAnimationMs\n  const msToWait = minDelayBetweenParticles - msEllapsedSinceLastParticle\n  if (msToWait <= 0) {\n    return 0\n  }\n\n  return msToWait\n}\n\nexport const ScoreParticle = ({ totalScoreDomNodeRef, scoreParticle }) => {\n  const particleDomNodeRef = React.useRef()\n\n  React.useLayoutEffect(() => {\n    const particleDomNode = particleDomNodeRef.current\n    const textNode = particleDomNode.querySelector(\"text\")\n    const textNodeBox = textNode.getBBox()\n    particleDomNode.setAttribute(\"width\", textNodeBox.width)\n    particleDomNode.setAttribute(\"height\", textNodeBox.height)\n  }, [])\n\n  React.useEffect(() => {\n    const particleDomNode = particleDomNodeRef.current\n    const totalScoreDomNode = totalScoreDomNodeRef.current\n    return animateScoreParticle({\n      particleDomNode,\n      totalScoreDomNode,\n      x: scoreParticle.x,\n      y: scoreParticle.y,\n      delay: scoreParticle.animationDelay,\n      oncancel: scoreParticle.oncancel,\n      onfinish: scoreParticle.onfinish,\n    })\n  }, [])\n\n  return (\n    <svg ref={particleDomNodeRef} className=\"score-particle\">\n      <text x=\"0\" y=\"0\" dominantBaseline=\"text-before-edge\" className=\"score-particle--value\">\n        {scoreParticle.value}\n      </text>\n    </svg>\n  )\n}\n\nconst animateScoreParticle = ({\n  particleDomNode,\n  totalScoreDomNode,\n  x,\n  y,\n  duration = 800,\n  delay = 0,\n  oncancel = () => {},\n  onfinish = () => {},\n}) => {\n  const particleDomNodeRectangle = getDomNodeRectangle(particleDomNode)\n  const totalScoreDomNodeRectangle = getDomNodeRectangle(totalScoreDomNode)\n\n  const particleWidth = particleDomNodeRectangle.right - particleDomNodeRectangle.left\n  const particleHeight = particleDomNodeRectangle.bottom - particleDomNodeRectangle.top\n  const startX = x - particleWidth / 2\n  const startY = y - particleHeight / 2\n  const intermediateX = startX + 5\n  const intermediateY = startY - particleHeight * 1.5\n  const endX = totalScoreDomNodeRectangle.left\n  const endY = totalScoreDomNodeRectangle.top\n\n  particleDomNode.style.left = `${startX}px`\n  particleDomNode.style.top = `${startY}px`\n\n  // en premier fait apparaitre avec opacité\n  const animation = particleDomNode.animate(\n    [\n      {\n        opacity: 0,\n        visibility: \"visible\",\n        transform: \"translate(0px, 0px)\",\n      },\n      {\n        offset: 0.1,\n        opacity: 1,\n        // transform: \"translate(0px, 0px)\",\n      },\n      {\n        offset: 0.4,\n        opacity: 1,\n        transform: `translate(${intermediateX - startX}px, ${intermediateY - startY}px) scale(1.2)`,\n      },\n      {\n        transform: `translate(${endX - startX}px, ${endY - startY}px) scale(1.2)`,\n      },\n    ],\n    {\n      duration,\n      delay,\n      fill: \"forwards\",\n    },\n  )\n  animation.onfinish = () => {\n    onfinish()\n  }\n\n  return () => {\n    oncancel()\n    animation.cancel()\n  }\n}\n",
    "import React from \"react\"\nimport { useUpdateEffect } from \"src/hooks.js\"\nimport { getDomNodeRectangle } from \"src/dom/dom.position.js\"\nimport { getRectangleCenterPoint } from \"src/helper/rectangle.js\"\nimport { useChestSlots, useDices } from \"src/main.store.js\"\nimport { chestSlotContentToSymbol, compareChestSlotContent } from \"src/chest/chest.component.jsx\"\nimport { SYMBOL_COIN, SYMBOL_DIAMOND } from \"src/symbols/symbols.js\"\nimport { getScoreAndPerfectBonus } from \"src/round/computeRoundScore.js\"\n\nexport const useRoundScoreParticleEffects = ({ addScoreParticle }) => {\n  useSymbolEffect({\n    symbol: SYMBOL_COIN,\n    symbolEffect: ({ chestSlot }) => {\n      return addScoreParticle({\n        id: `chest-slot-${chestSlot}-coin`,\n        value: 100,\n        ...chestSlotDomNodeToScoreParticlePosition(\n          document.querySelector(`[data-chest-slot=\"${chestSlot}\"]`),\n        ),\n      })\n    },\n  })\n  useSymbolEffect({\n    symbol: SYMBOL_DIAMOND,\n    symbolEffect: ({ chestSlot }) => {\n      return addScoreParticle({\n        id: `chest-slot-${chestSlot}-diamond`,\n        value: 100,\n        ...chestSlotDomNodeToScoreParticlePosition(\n          document.querySelector(`[data-chest-slot=\"${chestSlot}\"]`),\n        ),\n      })\n    },\n  })\n  useComboEffect({ addScoreParticle })\n  usePerfectEffect({ addScoreParticle })\n  // reste le sword challenge\n}\n\nconst useSymbolEffect = ({ symbol, symbolEffect }) => {\n  const chestSlotUpdates = useChestSlotUpdatesWithoutMoves()\n  const dices = useDices()\n  const updatesWithThatSymbol = React.useMemo(() => {\n    return chestSlotUpdates.filter(({ chestSlotContent }) => {\n      const chestSlotSymbol = chestSlotContentToSymbol(chestSlotContent, dices)\n      return chestSlotSymbol && chestSlotSymbol === symbol\n    })\n  }, [symbol, chestSlotUpdates, dices])\n\n  useUpdateEffect(() => {\n    const effectReturnValues = updatesWithThatSymbol.map((updateWithThatSymbol) => {\n      return symbolEffect(updateWithThatSymbol)\n    })\n    return () => {\n      effectReturnValues.forEach((effectReturnValue) => {\n        if (typeof effectReturnValue === \"function\") {\n          effectReturnValue()\n        }\n      })\n    }\n  }, [updatesWithThatSymbol])\n}\n\nconst useComboEffect = ({ addScoreParticle }) => {\n  const chestSlots = useChestSlots()\n  const dices = useDices()\n  const combos = React.useMemo(() => {\n    const combos = {}\n    Object.keys(chestSlots).forEach((chestSlot) => {\n      const chestSlotContent = chestSlots[chestSlot]\n      const chestSlotSymbol = chestSlotContentToSymbol(chestSlotContent, dices)\n      if (!chestSlotSymbol) {\n        return\n      }\n\n      if (chestSlotSymbol in combos) {\n        combos[chestSlotSymbol].push(chestSlot)\n      } else {\n        combos[chestSlotSymbol] = [chestSlot]\n      }\n    })\n    return combos\n  }, [chestSlots, dices])\n\n  const chestSlotUpdates = useChestSlotUpdatesWithoutMoves()\n  const comboUpdates = React.useMemo(() => {\n    const comboUpdates = []\n    // une combo est update si un de ses chest slots a été modifié\n    Object.keys(combos).forEach((symbol) => {\n      const slotsParticipatingToCombo = combos[symbol]\n      const firstSlotUpated = slotsParticipatingToCombo.find((chestSlot) =>\n        chestSlotUpdates.some(\n          (chestSlotUpdateCandidate) => chestSlotUpdateCandidate.chestSlot === chestSlot,\n        ),\n      )\n      if (firstSlotUpated) {\n        comboUpdates.push({\n          symbol,\n          slotsParticipatingToCombo,\n          chestSlot: firstSlotUpated,\n        })\n      }\n    })\n    return comboUpdates\n  }, [combos, chestSlotUpdates])\n\n  useUpdateEffect(() => {\n    const cleanupFunctions = comboUpdates.map(\n      ({ symbol, slotsParticipatingToCombo, chestSlot }) => {\n        const symbolCount = slotsParticipatingToCombo.length\n        const value = COMBO_SCORES[symbolCount]\n        if (!value) {\n          return () => {}\n        }\n\n        const id = `${symbolCount}-${symbol}-combo`\n        return addScoreParticle({\n          id,\n          value,\n          ...chestSlotDomNodeToScoreParticlePosition(\n            document.querySelector(`[data-chest-slot=\"${chestSlot}\"]`),\n          ),\n        })\n      },\n    )\n    return () => {\n      cleanupFunctions.forEach((cleanup) => {\n        cleanup()\n      })\n    }\n  }, [comboUpdates])\n}\n\nconst COMBO_SCORES = {\n  3: 100,\n  4: 200,\n  5: 500,\n  6: 1000,\n  7: 2000,\n  8: 4000,\n}\n\nconst useChestSlotUpdatesWithoutMoves = () => {\n  const chestSlots = useChestSlots()\n  const chestSlotsPreviousRef = React.useRef(null)\n\n  const chestSlotsUpdates = React.useMemo(() => {\n    const chestSlotsPrevious = chestSlotsPreviousRef.current\n    chestSlotsPreviousRef.current = chestSlots\n\n    const updates = []\n    if (chestSlotsPrevious === null) {\n      return updates\n    }\n\n    Object.keys(chestSlots).forEach((chestSlot) => {\n      const chestSlotContent = chestSlots[chestSlot]\n      const chestSlotContentPreviousSlot = Object.keys(chestSlotsPrevious).find(\n        (chestSlotPrevious) => {\n          const chestSlotContentPrevious = chestSlotsPrevious[chestSlotPrevious]\n          return compareChestSlotContent(chestSlotContent, chestSlotContentPrevious)\n        },\n      )\n      if (!chestSlotContentPreviousSlot) {\n        const chestSlotContentPrevious = chestSlotsPrevious[chestSlot]\n        updates.push({\n          chestSlot,\n          chestSlotContentPrevious,\n          chestSlotContent,\n        })\n      }\n    })\n    return updates\n  }, [chestSlots])\n\n  return chestSlotsUpdates\n}\n\nconst chestSlotDomNodeToScoreParticlePosition = (chestSlotDomNode) => {\n  const domNodeRectangle = getDomNodeRectangle(chestSlotDomNode)\n  const centerPoint = getRectangleCenterPoint(domNodeRectangle)\n  return centerPoint\n}\n\nconst usePerfectEffect = ({ addScoreParticle }) => {\n  // tout les dés dans le chests doivent rapporté des points\n  // il faut donc reprendre une partie du code qui provient de computeRoundScore\n  // et s'assurer de jouer cet effect que si on vient de le déclancher avec un dé\n\n  const chestSlots = useChestSlots()\n  const dices = useDices()\n  const perfect = React.useMemo(() => {\n    const symbols = []\n    Object.keys(chestSlots).forEach((chestSlot) => {\n      const chestSlotContent = chestSlots[chestSlot]\n      if (!chestSlotContent) {\n        return\n      }\n\n      const chestSlotHasDice = chestSlotContent.type === \"dice\"\n      if (!chestSlotHasDice) {\n        return\n      }\n\n      symbols.push(chestSlotContentToSymbol(chestSlotContent, dices))\n    })\n    const { perfectBonus } = getScoreAndPerfectBonus(symbols)\n    return Boolean(perfectBonus)\n  }, [chestSlots, dices])\n\n  const chestSlotUpdates = useChestSlotUpdatesWithoutMoves()\n  const perfectUpdate = React.useMemo(() => {\n    if (chestSlotUpdates.length === 0) return null\n    return {\n      perfect,\n      chestSlot: chestSlotUpdates[0].chestSlot,\n    }\n  }, [perfect, chestSlotUpdates])\n\n  useUpdateEffect(() => {\n    if (perfectUpdate && perfectUpdate.perfect) {\n      return addScoreParticle({\n        id: \"perfect\",\n        value: 500,\n        ...chestSlotDomNodeToScoreParticlePosition(\n          document.querySelector(`[data-chest-slot=\"${perfectUpdate.chestSlot}\"]`),\n        ),\n      })\n    }\n    return undefined\n  }, [perfectUpdate])\n}\n",
    "/* eslint-disable import/max-dependencies */\nimport React from \"react\"\n\nimport { useBecomes } from \"src/hooks.js\"\nimport { useSignal, useSignalState } from \"src/helper/signal.js\"\nimport { useCurrentCardId, useCurrentCardActivated, useScoreMarked } from \"src/main.store.js\"\nimport { useRoundScore, useSymbolsInChest } from \"src/round/round.selectors.js\"\nimport { ValueWithAnimatedTransition } from \"src/animation/ValueWithAnimatedTransition.jsx\"\n\nimport { cardIdToCard, isPirateCard, isSwordChallengeCard } from \"src/cards/cards.js\"\nimport { useDialogState } from \"src/dialog/dialog.component.jsx\"\n\nimport { SYMBOL_SWORD } from \"src/symbols/symbols.js\"\nimport { useSwordQuantityRequired } from \"src/header/SwordChallengeIndicator.jsx\"\nimport { countSymbol } from \"src/round/computeRoundScore.js\"\nimport { StarRain } from \"src/game-design/StarRain.jsx\"\nimport { RoundScoreRulesDialog } from \"src/round/RoundScoreRulesDialog.jsx\"\nimport { ScoreParticle, useScoreParticles } from \"src/score/score.particle.jsx\"\nimport { useRoundScoreParticleEffects } from \"src/round/useRoundScoreParticleEffects.js\"\n\nconst { useState, useEffect } = React\n\nexport const RoundScore = () => {\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const swordChallengeOngoing = useSwordChallengeOngoing()\n\n  return (\n    <div className={`score-area ${swordChallengeOngoing ? \"animated\" : \"\"}`}>\n      {currentCard ? <ScoreDisplay /> : null}\n    </div>\n  )\n}\n\nconst useSwordChallengeOngoing = () => {\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const symbolsInChest = useSymbolsInChest()\n  const quantityKept = countSymbol(symbolsInChest, SYMBOL_SWORD)\n  const quantityRequired = useSwordQuantityRequired()\n\n  if (!isSwordChallengeCard(currentCard)) {\n    return false\n  }\n\n  const challengeWon = quantityKept >= quantityRequired\n  return !challengeWon\n}\n\nconst ScoreDisplay = () => {\n  const roundScore = useRoundScore()\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const scoreMarked = useScoreMarked()\n  const swordChallengeOngoing = useSwordChallengeOngoing()\n\n  const roundScoreDomNodeRef = React.useRef()\n  const [scoreDialogIsOpen, openScoreDialog, closeScoreDialog] = useDialogState()\n  const [scoreParticleMergedListener, scoreParticleMergedEmitter] = useSignal()\n  const [scoreParticles, addScoreParticle, scoreDisplayed] = useScoreParticles({\n    totalScore: roundScore,\n    onScoreParticleMerged: scoreParticleMergedEmitter,\n  })\n\n  useRoundScoreParticleEffects({ addScoreParticle })\n  useScoreParticleMergeEffect({ roundScoreDomNodeRef, scoreParticleMergedListener })\n\n  return (\n    <>\n      {isPirateCard(currentCard) ? <DoubleScoreIndicator /> : null}\n      {scoreMarked ? <StarRain /> : null}\n      <button\n        className={`round-score ${swordChallengeOngoing ? \"hidden\" : \"\"}`}\n        onClick={openScoreDialog}\n      >\n        <span ref={roundScoreDomNodeRef} className=\"round-score--value\">\n          <ValueWithAnimatedTransition\n            value={scoreDisplayed}\n            condition={(value, previousValue) => value > previousValue}\n            duration={600}\n          />\n        </span>\n      </button>\n      {isSwordChallengeCard(currentCard) ? <NegativeScoreSign /> : null}\n      <RoundScoreRulesDialog dialogIsOpen={scoreDialogIsOpen} closeDialog={closeScoreDialog} />\n\n      {scoreParticles.map((scoreParticle) => {\n        return (\n          <ScoreParticle\n            key={scoreParticle.id}\n            totalScoreDomNodeRef={roundScoreDomNodeRef}\n            scoreParticle={scoreParticle}\n          />\n        )\n      })}\n    </>\n  )\n}\n\nconst useScoreParticleMergeEffect = ({ roundScoreDomNodeRef, scoreParticleMergedListener }) => {\n  const scoreParticleMerged = useSignalState(scoreParticleMergedListener)\n\n  React.useEffect(() => {\n    if (!scoreParticleMerged) {\n      return undefined\n    }\n    const roundScoreDomNode = roundScoreDomNodeRef.current\n    return animateScoreParticleMerge({\n      roundScoreDomNode,\n      duration: 300,\n    })\n  }, [scoreParticleMerged])\n}\n\nconst animateScoreParticleMerge = ({ roundScoreDomNode, duration }) => {\n  const animation = roundScoreDomNode.animate(\n    [\n      {\n        transform: \"scale(1.5)\",\n      },\n    ],\n    { duration },\n  )\n  return () => {\n    animation.cancel()\n  }\n}\n\nconst DoubleScoreIndicator = () => {\n  const currentCardActivated = useCurrentCardActivated()\n  if (!currentCardActivated) {\n    return <div style={{ display: \"none\" }} className=\"pirate-hook\"></div>\n  }\n  return <div className=\"pirate-hook\"></div>\n}\n\nconst NegativeScoreSign = () => {\n  const roundScore = useRoundScore()\n\n  const symbolsInChest = useSymbolsInChest()\n  const quantityKept = countSymbol(symbolsInChest, SYMBOL_SWORD)\n  const quantityRequired = useSwordQuantityRequired()\n  const quantityRequiredArray = new Array(quantityRequired).fill(\"\")\n  const challengeWon = quantityKept >= quantityRequired\n\n  const swordNumberIncreased = useBecomes(\n    (quantityKeptPrevious) => quantityKeptPrevious < quantityKept,\n    [quantityKept],\n  )\n\n  const [swordSliceAnimation, swordSliceAnimationSetter] = useState(false)\n\n  useEffect(() => {\n    if (swordNumberIncreased) {\n      swordSliceAnimationSetter(true)\n    }\n  }, [swordNumberIncreased])\n\n  useEffect(() => {\n    if (swordSliceAnimation) {\n      const timeout = setTimeout(() => {\n        swordSliceAnimationSetter(false)\n      }, 300)\n      return () => {\n        clearTimeout(timeout)\n      }\n    }\n    return () => {}\n  }, [swordSliceAnimation])\n\n  return (\n    <>\n      <div className={`ropes ${challengeWon ? \"challenge-won\" : \"\"}`}>\n        {quantityRequiredArray.map((value, index) => {\n          if (quantityKept >= index + 1)\n            return <div key={index} className={`rope rope-${index + 1} cut-rope`}></div>\n          return <div key={index} className={`rope rope-${index + 1}`}></div>\n        })}\n      </div>\n      {swordSliceAnimation && quantityKept <= quantityRequired ? (\n        <div className=\"sword-slice\">\n          <div className=\"triangle-left\"></div>\n          <div className=\"triangle-right\"></div>\n        </div>\n      ) : null}\n      <div\n        className={`negative-round-score rotate-${quantityKept} ${challengeWon ? \"removed\" : \"\"}`}\n      >\n        {roundScore}\n      </div>\n    </>\n  )\n}\n",
    "export const diceSize = 50\n",
    "export default import.meta.ROLLUP_FILE_URL_fdd9b9de",
    "/* eslint-disable import/max-dependencies */\nimport React from \"react\"\n\nimport { useSignalState } from \"src/helper/signal.js\"\nimport { useCurrentCardId, useChestSlots } from \"src/main.store.js\"\nimport { Image } from \"src/generic/Image.jsx\"\nimport { useThreeSkullsOrMoreInCursedArea } from \"src/round/round.selectors.js\"\n\nimport { symbolToImageUrl } from \"src/symbols/symbols.js\"\nimport { cardIdToCard, isChestCard } from \"src/cards/cards.js\"\nimport { diceToVisibleSymbol } from \"src/dices/dices.js\"\n\nimport { RoundScore } from \"src/round/RoundScore.jsx\"\nimport { diceSize } from \"src/dices/dicePosition.js\"\n\nimport cursedGridImageUrl from \"src/chest/cursed-grid.png\"\n\nexport const Chest = ({ chestRef, diceOverChestListener }) => {\n  const chestSlots = useChestSlots()\n  const threeSkullsOrMoreInCursedArea = useThreeSkullsOrMoreInCursedArea()\n  const diceOverChest = useSignalState(diceOverChestListener)\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const protectedByChestCard = threeSkullsOrMoreInCursedArea && isChestCard(currentCard)\n\n  return (\n    <div className=\"chest\">\n      <div\n        ref={chestRef}\n        className={`dice-area ${isChestCard(currentCard) ? \"glow\" : \"\"}`}\n        style={{\n          ...(diceOverChest ? { outline: \"2px dotted\" } : {}),\n        }}\n      >\n        <div className=\"box\">\n          {Object.keys(chestSlots).map((chestSlot) => (\n            <div className=\"slot\" key={chestSlot} data-chest-slot={chestSlot}>\n              <ChestSlot chestSlotContent={chestSlots[chestSlot]} />\n            </div>\n          ))}\n        </div>\n        <div className=\"top-left-corner\"></div>\n        <div className=\"top-right-corner\"></div>\n        <div className=\"bottom-left-corner\"></div>\n        <div className=\"bottom-right-corner\"></div>\n        {threeSkullsOrMoreInCursedArea && !protectedByChestCard ? <CursedCover /> : null}\n      </div>\n      <RoundScore />\n    </div>\n  )\n}\n\nexport const chestSlotContentToSymbol = (chestSlotContent, dices) => {\n  if (chestSlotContent && chestSlotContent.type === \"symbol\") {\n    return chestSlotContent.value\n  }\n\n  if (chestSlotContent && chestSlotContent.type === \"dice\") {\n    const diceId = chestSlotContent.value\n    const dice = dices[diceId]\n    return diceToVisibleSymbol(dice)\n  }\n\n  return null\n}\n\nexport const compareChestSlotContent = (chestSlotContentLeft, chestSlotContentRight) => {\n  const leftHasContent = Boolean(chestSlotContentLeft)\n  const rightHasContent = Boolean(chestSlotContentRight)\n  if (!leftHasContent && !rightHasContent) {\n    return true\n  }\n  if (leftHasContent !== rightHasContent) {\n    return false\n  }\n\n  const leftType = chestSlotContentLeft.type\n  const rightType = chestSlotContentRight.type\n  if (leftType !== rightType) {\n    return false\n  }\n\n  return chestSlotContentLeft.value === chestSlotContentRight.value\n}\n\nconst ChestSlot = ({ chestSlotContent }) => {\n  const currentCard = cardIdToCard(useCurrentCardId())\n\n  if (!chestSlotContent) {\n    return null\n  }\n\n  if (chestSlotContent.type === \"symbol\") {\n    const symbol = chestSlotContent.value\n    return (\n      <button\n        className=\"dice\"\n        style={{\n          width: diceSize,\n          height: diceSize,\n          color: \"#fcfcfc\",\n          margin: \"5px\",\n          backgroundColor: currentCard.color1,\n          borderColor: currentCard.color2,\n          borderWidth: \"2px\",\n          borderStyle: \"solid\",\n        }}\n      >\n        <Image\n          src={symbolToImageUrl(symbol)}\n          draggable=\"false\"\n          style={{\n            width: \"100%\",\n            height: \"100%\",\n          }}\n        />\n      </button>\n    )\n  }\n\n  // it's a dice\n  return null\n}\n\nconst CursedCover = () => {\n  return (\n    <div className=\"cursed-cover\">\n      <Image draggable=\"false\" src={cursedGridImageUrl} alt=\"cursed-cover\" />\n    </div>\n  )\n}\n",
    "import React from \"react\"\n\nimport {\n  useRollCount,\n  useWitchUncursedDiceId,\n  useCurrentCardId,\n  useScoreMarked,\n  useCardIds,\n  useDiceRolledIds,\n  useDiceCursedIds,\n  useChestSlots,\n  useCurrentPlayerId,\n  usePlayers,\n  useDices,\n} from \"src/main.store.js\"\nimport { diceIsOnSkull } from \"src/dices/dices.js\"\nimport {\n  cardIdToCard,\n  isChestCard,\n  isCoinCard,\n  isDiamondCard,\n  isOneSkullCard,\n  isTwoSkullsCard,\n} from \"src/cards/cards.js\"\nimport { chestSlotContentToSymbol } from \"src/chest/chest.component.jsx\"\n\nimport { computeRoundScore } from \"src/round/computeRoundScore.js\"\nimport { symbolIsSkull, SYMBOL_COIN, SYMBOL_DIAMOND, SYMBOL_SKULL } from \"src/symbols/symbols.js\"\n\nconst { useMemo } = React\n\nexport const useCardDeck = ({ cardIds = useCardIds() } = {}) => {\n  return cardIds.map((cardId) => cardIdToCard(cardId))\n}\n\nexport const useCurrentPlayer = ({\n  currentPlayerId = useCurrentPlayerId(),\n  players = usePlayers(),\n} = {}) => {\n  return players.find((playerCandidate) => playerCandidate.id === currentPlayerId)\n}\n\nexport const usePlayer = (playerId, { players = usePlayers() } = {}) =>\n  players.find((playerCandidate) => playerCandidate.id === playerId)\n\nexport const useHasNeverRolled = ({ rollCount = useRollCount() } = {}) => rollCount === 0\n\nexport const useHasRolledOnce = ({ rollCount = useRollCount() } = {}) => rollCount > 0\n\nexport const useIsFirstRoll = ({ rollCount = useRollCount() } = {}) => rollCount === 1\n\nexport const useHasRolledMoreThanOnce = ({ rollCount = useRollCount() } = {}) => rollCount > 1\n\nexport const useSymbolsInChest = ({ dices = useDices(), chestSlots = useChestSlots() } = {}) => {\n  return Object.keys(chestSlots).reduce((previous, chestSlot) => {\n    const symbol = chestSlotContentToSymbol(chestSlots[chestSlot], dices)\n\n    if (symbol) {\n      return [...previous, symbol]\n    }\n\n    return previous\n  }, [])\n}\n\nexport const useRemainingSpotInCursedArea = ({\n  skullCountInCursedArea = useSkullCountInCursedArea(),\n} = {}) => {\n  return 3 - skullCountInCursedArea\n}\n\nexport const useHasDicesToCurse = ({ dicesToCurse = useDicesToCurse() } = {}) => {\n  return dicesToCurse.length > 0\n}\n\nexport const useDiceKeptIds = ({ chestSlots = useChestSlots() } = {}) => {\n  return Object.keys(chestSlots).reduce((previous, chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n    if (chestSlotContent && chestSlotContent.type === \"dice\") {\n      return [...previous, chestSlotContent.value]\n    }\n    return previous\n  }, [])\n}\n\nexport const useDicesToCurse = ({\n  dices = useDices(),\n  diceRolledIds = useDiceRolledIds(),\n  witchUncursedDiceId = useWitchUncursedDiceId(),\n  remainingSpotInCursedArea = useRemainingSpotInCursedArea(),\n} = {}) => {\n  const dicesToCurse = diceRolledIds\n    .map((diceRolledId) => dices[diceRolledId])\n    .filter((diceRolled) => {\n      if (!diceIsOnSkull(diceRolled)) return false\n      if (diceRolled.id === witchUncursedDiceId) return false\n      return true\n    })\n    .slice(0, remainingSpotInCursedArea)\n  return dicesToCurse\n}\n\nexport const useRollDiceAllowed = ({\n  currentCardId = useCurrentCardId(),\n  hasNeverRolled = useHasNeverRolled(),\n  scoreMarked = useScoreMarked(),\n  threeSkullsOrMoreInCursedArea = useThreeSkullsOrMoreInCursedArea(),\n  hasDicesToCurse = useHasDicesToCurse(),\n} = {}) => {\n  if (!currentCardId) {\n    return false\n  }\n\n  if (scoreMarked) {\n    return false\n  }\n\n  if (hasNeverRolled) {\n    return true\n  }\n\n  if (threeSkullsOrMoreInCursedArea) {\n    if (isChestCard(cardIdToCard(currentCardId))) {\n      return true\n    }\n    return false\n  }\n\n  if (hasDicesToCurse) {\n    return false\n  }\n\n  return true\n}\n\nexport const useThreeSkullsOrMoreInCursedArea = ({\n  skullCountInCursedArea = useSkullCountInCursedArea(),\n} = {}) => {\n  return skullCountInCursedArea > 2\n}\n\nexport const useSkullCountInCursedArea = ({\n  diceCursedIds = useDiceCursedIds(),\n  symbolsFromCard = useSymbolsFromCard(),\n} = {}) => {\n  return diceCursedIds.length + symbolsFromCard.filter((symbol) => symbolIsSkull(symbol)).length\n}\n\nconst useSymbolsFromCard = ({ currentCardId = useCurrentCardId() } = {}) => {\n  if (!currentCardId) return []\n  const currentCard = cardIdToCard(currentCardId)\n  if (isCoinCard(currentCard)) return [SYMBOL_COIN]\n  if (isDiamondCard(currentCard)) return [SYMBOL_DIAMOND]\n  if (isOneSkullCard(currentCard)) return [SYMBOL_SKULL]\n  if (isTwoSkullsCard(currentCard)) return [SYMBOL_SKULL, SYMBOL_SKULL]\n  return []\n}\n\nexport const useMarkScoreButtonVisible = ({\n  hasRolledOnce = useHasRolledOnce(),\n  scoreMarked = useScoreMarked(),\n  currentCardId = useCurrentCardId(),\n  hasDicesToCurse = useHasDicesToCurse(),\n} = {}) => {\n  if (scoreMarked) {\n    return false\n  }\n\n  if (hasDicesToCurse) {\n    return false\n  }\n\n  if (!currentCardId) {\n    return false\n  }\n\n  if (!hasRolledOnce) {\n    return false\n  }\n\n  return true\n}\n\nexport const useMarkScoreAllowed = ({\n  scoreMarked = useScoreMarked(),\n  currentCardId = useCurrentCardId(),\n  threeSkullsOrMoreInCursedArea = useThreeSkullsOrMoreInCursedArea(),\n  hasDicesToCurse = useHasDicesToCurse(),\n} = {}) => {\n  if (scoreMarked) {\n    return false\n  }\n\n  if (threeSkullsOrMoreInCursedArea) {\n    if (isChestCard(cardIdToCard(currentCardId))) {\n      return true\n    }\n    return false\n  }\n\n  if (hasDicesToCurse) {\n    return false\n  }\n\n  if (!currentCardId) {\n    return false\n  }\n\n  return true\n}\n\nexport const useStartNextRoundAllowed = ({\n  rollDiceAllowed = useRollDiceAllowed(),\n  markScoreAllowed = useMarkScoreAllowed(),\n  hasDicesToCurse = useHasDicesToCurse(),\n} = {}) => {\n  if (rollDiceAllowed) {\n    return false\n  }\n\n  if (markScoreAllowed) {\n    return false\n  }\n\n  if (hasDicesToCurse) {\n    return false\n  }\n\n  return true\n}\n\nexport const useRoundScore = ({\n  currentCardId = useCurrentCardId(),\n  symbolsInChest = useSymbolsInChest(),\n  scoreMarked = useScoreMarked(),\n  markScoreAllowed = useMarkScoreAllowed(),\n} = {}) => {\n  return useMemo(\n    () =>\n      computeRoundScore({\n        card: cardIdToCard(currentCardId),\n        symbolsInChest,\n        scoreMarked,\n        markScoreAllowed,\n      }),\n    [currentCardId, symbolsInChest, scoreMarked, markScoreAllowed],\n  )\n}\n",
    "import { createAction } from \"src/main.store.js\"\n\nexport const useStartPlayerRound = createAction((state, player) => {\n  return {\n    ...state,\n    currentPlayerId: player.id,\n    currentCardId: null,\n    currentCardActivated: false,\n    roundStarted: true,\n    ...ROUND_START_STATE,\n  }\n})\n\nexport const useEndPlayerRound = createAction((state) => {\n  return {\n    ...state,\n    currentCardId: null,\n    currentCardActivated: false,\n    roundStarted: false,\n  }\n})\n\nexport const useActivateCurrentCard = createAction((state) => {\n  return {\n    ...state,\n    currentCardActivated: true,\n  }\n})\n\nexport const useSendToSkullIsland = createAction((state) => {\n  return {\n    ...state,\n    isOnSkullIsland: true,\n  }\n})\n\nexport const useMarkScore = createAction((state, score) => {\n  const { players, currentPlayerId } = state\n  const currentPlayer = players.find(({ id }) => id === currentPlayerId)\n  const nextScore = currentPlayer.score + score\n  currentPlayer.score = nextScore < 0 ? 0 : nextScore\n\n  return {\n    ...state,\n    players: [...players],\n    scoreMarked: true,\n  }\n})\n\nexport const useResetRound = createAction((state) => {\n  return {\n    ...state,\n    ...ROUND_START_STATE,\n  }\n})\n\nconst ROUND_START_STATE = {\n  witchUncursedDiceId: null,\n  witchCardEffectUsed: false,\n  rollCount: 0,\n  diceRolledIds: [],\n  diceCursedIds: [],\n  chestSlots: {\n    1: null,\n    2: null,\n    3: null,\n    4: null,\n    5: null,\n    6: null,\n    7: null,\n    8: null,\n    9: null,\n  },\n  scoreMarked: false,\n  isOnSkullIsland: false,\n}\n",
    "import { createAction } from \"src/main.store.js\"\n\nexport const useSetDiceRolledAreaPosition = createAction((state, dice, { x, y }, zIndex) => {\n  const { dices } = state\n  dice.rolledAreaPosition = { x, y }\n  dice.rolledAreaZIndex = zIndex\n  return {\n    ...state,\n    dices: { ...dices },\n  }\n})\n\nexport const useSetDiceChestSlot = createAction((state, dice, chestSlot) => {\n  const { chestSlots } = state\n  const previousChestSlot = Object.keys(chestSlots).find((chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n    return (\n      chestSlotContent && chestSlotContent.type === \"dice\" && chestSlotContent.value === dice.id\n    )\n  })\n  return {\n    ...state,\n    chestSlots: {\n      ...chestSlots,\n      ...(previousChestSlot ? { [previousChestSlot]: null } : {}),\n      [chestSlot]: { type: \"dice\", value: dice.id },\n    },\n  }\n})\n\nexport const useCurseDice = createAction((state, dice) => {\n  const { diceRolledIds, diceCursedIds } = state\n  return {\n    ...state,\n    diceRolledIds: diceRolledIds.filter((diceRolledId) => diceRolledId !== dice.id),\n    diceCursedIds: [...diceCursedIds, dice.id],\n  }\n})\n\nexport const useUncurseDice = createAction((state, dice, fromLab = false) => {\n  const { diceRolledIds, diceCursedIds } = state\n  return {\n    ...state,\n    ...(fromLab\n      ? {}\n      : {\n          witchUncursedDiceId: dice.id,\n          witchCardEffectUsed: true,\n        }),\n    diceRolledIds: [...diceRolledIds, dice.id],\n    diceCursedIds: diceCursedIds.filter((diceCursedId) => diceCursedId !== dice.id),\n  }\n})\n\nexport const useUnkeepDice = createAction((state, dice) => {\n  const { diceRolledIds, chestSlots } = state\n  const previousChestSlot = Object.keys(chestSlots).find((chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n    return (\n      chestSlotContent && chestSlotContent.type === \"dice\" && chestSlotContent.value === dice.id\n    )\n  })\n  return {\n    ...state,\n    diceRolledIds: [...diceRolledIds, dice.id],\n    chestSlots: {\n      ...chestSlots,\n      [previousChestSlot]: null,\n    },\n  }\n})\n\nexport const useKeepDice = createAction((state, dice, chestSlot) => {\n  const { diceRolledIds, chestSlots } = state\n  return {\n    ...state,\n    diceRolledIds: diceRolledIds.filter((diceRolledId) => diceRolledId !== dice.id),\n    chestSlots: {\n      ...chestSlots,\n      [chestSlot]: {\n        type: \"dice\",\n        value: dice.id,\n      },\n    },\n  }\n})\n",
    "import React from \"react\"\n\nimport { useBecomes } from \"src/hooks.js\"\nimport {\n  useCurrentCardId,\n  useScoreMarked,\n  useIsOnSkullIsland,\n  useAnimationsDisabled,\n} from \"src/main.store.js\"\nimport { cardIdToCard, isSwordChallengeCard } from \"src/cards/cards.js\"\nimport {\n  useIsFirstRoll,\n  useThreeSkullsOrMoreInCursedArea,\n  useDicesToCurse,\n  useSkullCountInCursedArea,\n  useRoundScore,\n} from \"src/round/round.selectors.js\"\nimport { useMarkScore, useSendToSkullIsland } from \"src/round/round.actions.js\"\nimport { useCurseDice } from \"src/dices/dices.actions.js\"\n\nconst { useEffect } = React\n\nexport const RoundEffects = () => {\n  useRoundEffects()\n  return null\n}\n\nexport const useRoundEffects = () => {\n  useCurseDiceEffect()\n  useFailSwordChallengeEffect()\n  useFourSkullsOrMoreOnFirstRollEffect()\n}\n\nconst useCurseDiceEffect = () => {\n  const animationsDisabled = useAnimationsDisabled()\n  const dicesToCurse = useDicesToCurse()\n  const curseDice = useCurseDice()\n\n  useEffect(() => {\n    if (dicesToCurse.length === 0) {\n      return () => {}\n    }\n\n    if (animationsDisabled) {\n      dicesToCurse.forEach((dice) => {\n        curseDice(dice)\n      })\n      return () => {}\n    }\n\n    const timeout = setTimeout(() => {\n      dicesToCurse.forEach((dice) => {\n        curseDice(dice)\n      })\n    }, 1000)\n\n    return () => {\n      clearTimeout(timeout)\n    }\n  }, [dicesToCurse])\n}\n\n// auto mark score for failed sword challenges\nconst useFailSwordChallengeEffect = () => {\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const scoreMarked = useScoreMarked()\n  const markScore = useMarkScore()\n  const threeSkullsOrMoreInCursedArea = useThreeSkullsOrMoreInCursedArea()\n  const threeSkullsOrMoreInCursedAreaBecomesTrue = useBecomes(\n    (threeSkullsOrMoreInCursedAreaPrevious) =>\n      !threeSkullsOrMoreInCursedAreaPrevious && threeSkullsOrMoreInCursedArea,\n    [threeSkullsOrMoreInCursedArea],\n  )\n  const roundScore = useRoundScore()\n  const swordChallengeCard = isSwordChallengeCard(currentCard)\n\n  useEffect(() => {\n    if (swordChallengeCard && !scoreMarked && threeSkullsOrMoreInCursedAreaBecomesTrue) {\n      markScore(roundScore)\n    }\n  }, [swordChallengeCard, scoreMarked, threeSkullsOrMoreInCursedAreaBecomesTrue, roundScore])\n}\n\n// go to skull island if 4 skulls or more on first roll\nconst useFourSkullsOrMoreOnFirstRollEffect = () => {\n  const isFirstRoll = useIsFirstRoll()\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const isOnSkullIsland = useIsOnSkullIsland()\n  const skullCountInCursedArea = useSkullCountInCursedArea()\n  const sendToSkullIsland = useSendToSkullIsland()\n\n  useEffect(() => {\n    if (!isFirstRoll) return\n\n    if (isOnSkullIsland) return\n\n    if (isSwordChallengeCard(currentCard)) return\n\n    if (skullCountInCursedArea < 4) return\n\n    sendToSkullIsland()\n  }, [isFirstRoll, isOnSkullIsland, currentCard, skullCountInCursedArea])\n}\n",
    "import { createAction } from \"src/main.store.js\"\nimport { mixDeck } from \"src/cards/cards.js\"\nimport { SYMBOL_COIN, SYMBOL_DIAMOND } from \"src/symbols/symbols.js\"\n\nexport const useDrawCard = createAction((state) => {\n  const { cardIds, cardUsedIds } = state\n  const cardDrawnId = cardIds[0]\n  return {\n    ...state,\n    cardIds: cardIds.slice(1),\n    cardUsedIds: [...cardUsedIds, cardDrawnId],\n    currentCardId: cardDrawnId,\n  }\n})\n\nexport const useAddExtraCoin = createAction((state) => {\n  const { chestSlots } = state\n  return {\n    ...state,\n    chestSlots: {\n      ...chestSlots,\n      1: {\n        type: \"symbol\",\n        value: SYMBOL_COIN,\n      },\n    },\n  }\n})\n\nexport const useAddExtraDiamond = createAction((state) => {\n  const { chestSlots } = state\n  return {\n    ...state,\n    chestSlots: {\n      ...chestSlots,\n      1: {\n        type: \"symbol\",\n        value: SYMBOL_DIAMOND,\n      },\n    },\n  }\n})\n\nexport const useShuffleDeck = createAction((state) => {\n  const { cardIds, cardUsedIds } = state\n  return {\n    ...state,\n    // shuffle deck is conceptually the action of taking all the cards\n    // and shuffling them.\n    // hence the [...cardIds, ...cardUsedIds]\n    // For now shuffleDeck is called when cardsIds is empty.\n    // If we change [...cardIds, ...cardUsedIds] by cardUsedIds\n    // it makes shuffleDeck less robust because it cannot be called twice\n    // or at any time.\n    cardIds: mixDeck([...cardIds, ...cardUsedIds]),\n    cardUsedIds: [],\n  }\n})\n\nexport const useUndrawCard = createAction((state) => {\n  const { currentCardId, cardIds, cardUsedIds } = state\n  return {\n    ...state,\n    currentCardId: null,\n    cardIds: [currentCardId, ...cardIds],\n    cardUsedIds: cardUsedIds.slice(1),\n  }\n})\n",
    "import React from \"react\"\n\nimport { useCurrentCardId, useCurrentCardActivated } from \"src/main.store.js\"\nimport { useBecomes } from \"src/hooks.js\"\nimport { cardIdToCard, isCoinCard, isDiamondCard } from \"src/cards/cards.js\"\nimport { useAddExtraCoin, useAddExtraDiamond } from \"src/cards/cards.actions.js\"\n\nexport const CardsEffects = () => {\n  useCoinCardEffect()\n  useDiamondCardEffect()\n  return null\n}\n\nconst useCoinCardEffect = () => {\n  const addExtraCoin = useAddExtraCoin()\n  const currentCardId = useCurrentCardId()\n  const currentCardActivated = useCurrentCardActivated()\n\n  const currentCardBecomesActivated = useBecomes(\n    (currentCardActivatedPrevious) => !currentCardActivatedPrevious === currentCardActivated,\n    [currentCardActivated],\n  )\n  const currentCardIsCoinCard = currentCardId && isCoinCard(cardIdToCard(currentCardId))\n\n  React.useEffect(() => {\n    if (currentCardIsCoinCard) {\n      addExtraCoin()\n    }\n  }, [])\n\n  React.useEffect(() => {\n    if (currentCardBecomesActivated && currentCardIsCoinCard) {\n      addExtraCoin()\n    }\n  }, [currentCardBecomesActivated, currentCardIsCoinCard])\n}\n\nconst useDiamondCardEffect = () => {\n  const addExtraDiamond = useAddExtraDiamond()\n  const currentCardId = useCurrentCardId()\n  const currentCardActivated = useCurrentCardActivated()\n\n  const currentCardBecomesActivated = useBecomes(\n    (currentCardActivatedPrevious) => !currentCardActivatedPrevious === currentCardActivated,\n    [currentCardActivated],\n  )\n  const currentCardIsDiamondCard = currentCardId && isDiamondCard(cardIdToCard(currentCardId))\n\n  React.useEffect(() => {\n    if (currentCardIsDiamondCard) {\n      addExtraDiamond()\n    }\n  }, [])\n\n  React.useEffect(() => {\n    if (currentCardBecomesActivated && currentCardIsDiamondCard) {\n      addExtraDiamond()\n    }\n  }, [currentCardBecomesActivated, currentCardIsDiamondCard])\n}\n",
    "import React from \"react\"\nimport { useSignalState } from \"src/helper/signal.js\"\n\nexport const DiceOnGoing = ({ rolledAreaRef, offscreenRef, diceOverRolledAreaListener }) => {\n  const diceOverRolledArea = useSignalState(diceOverRolledAreaListener)\n  return (\n    <div className=\"dice-ongoing\">\n      <div className=\"map\"></div>\n      <div\n        className=\"area\"\n        ref={rolledAreaRef}\n        style={{\n          ...(diceOverRolledArea ? { outline: \"2px dotted\" } : {}),\n        }}\n      ></div>\n      <div className=\"offscreen-area\" ref={offscreenRef}>\n        {/* we will move the dice into this zone when they are offgame (first roll) */}\n      </div>\n    </div>\n  )\n}\n",
    "export const cardsRules = {\n  \"animals\": {\n    name: \"Animaux\",\n    rule:\n      \"Les singes et les perroquest obtenus sur les dés comptent comme un même symbol dans une combinaison.\",\n    more:\n      \"Par exemple 2 perroquets et 3 singes forment une conbinaison de 5 dés identiques, soit 500 points.\",\n  },\n  \"chest\": {\n    name: \"Coffre au trésor\",\n    rule:\n      'Lorsque le joueur sauvegarde ses dés, grâce à la carte \"Coffre au trésor\" les dés sont protégés du mauvais sort.',\n    more:\n      \"Ainsi même lorsque le joueur obtient 3 têtes de morts, son tour prends fin, mais il peut marquer les points totalisés grâce aux dés sauvegardés!\",\n  },\n  \"coin\": {\n    name: \"Pièce d'or\",\n    rule:\n      \"Le joueur commence son tour avec un symbol pièce d'or. Il rapporte des points aussi bien dans une combinaison de dés que comme simple pièce (+100).\",\n  },\n  \"diamond\": {\n    name: \"Diamant\",\n    rule:\n      \"Le joueur commence son tour avec un symbol diamant. Il rapporte des points aussi bien dans une combinaison de dés que comme simple diamant (+100).\",\n  },\n  \"pirate\": {\n    name: \"Capitaine des pirates\",\n    rule:\n      \"Grâce à l'aide du capitaine, tous les points comptabilisés pendant ce tour sont doublés !\",\n    //   more: \"Si le joueur doit se rendre sur l'île de la tête de mort, ses adversaires perdent 200 points pour chaque tête de mort révélée.\"\n  },\n  \"witch\": {\n    name: \"Sorcière\",\n    rule:\n      \"Avec ses potions magiques, la sorcière permet exceptionnellement au joueur de relancer, une fois, un dé avec une tête de mort.\",\n  },\n  \"1skull\": {\n    name: \"Tête de mort\",\n    rule: \"Le tour du joueur débute avec un symbole tête de mort.\",\n  },\n  \"2skulls\": {\n    name: \"2 têtes de mort\",\n    rule: \"Le tour du joueur débute avec 2 symboles tête de mort.\",\n  },\n  \"2sword-challenge\": {\n    name: \"Bateau pirate\",\n    rule:\n      \"Le joueur doit obtenir au minimum 2 symbols sabres. Si il y parvient, il gagne +300 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -300 points pour ce tour, quelque soit son résultat aux dés.\",\n    more:\n      \"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points.\",\n    // more: \"Celui qui découvre un bateau pirate ne peut pas aller sur l'île de la tête de mort: un joueur qui obtiendrait 4 têtes de mort ou plus lors de son premier lancer perdrait donc immédiatement son tour.\"\n  },\n  \"3sword-challenge\": {\n    name: \"Bateau pirate\",\n    rule:\n      \"Le joueur doit obtenir au minimum 3 symbols sabres. Si il y parvient, il gagne +500 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -500 points pour ce tour, quelque soit son résultat aux dés.\",\n    more:\n      \"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points.\",\n    // more: \"Celui qui découvre un bateau pirate ne peut pas aller sur l'île de la tête de mort: un joueur qui obtiendrait 4 têtes de mort ou plus lors de son premier lancer perdrait donc immédiatement son tour.\"\n  },\n  \"4sword-challenge\": {\n    name: \"Bateau pirate\",\n    rule:\n      \"Le joueur doit obtenir au minimum 4 symbols sabres. Si il y parvient, il gagne +1000 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -1000 points pour ce tour, quelque soit son résultat aux dés.\",\n    more:\n      \"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points.\",\n    // more: \"Celui qui découvre un bateau pirate ne peut pas aller sur l'île de la tête de mort: un joueur qui obtiendrait 4 têtes de mort ou plus lors de son premier lancer perdrait donc immédiatement son tour.\"\n  },\n}\n",
    "import React from \"react\"\n\nimport { Image } from \"src/generic/Image.jsx\"\nimport { cardsRules } from \"src/cards/cards-rules.js\"\nimport { DialogWood } from \"src/dialog/dialog.wood.jsx\"\nimport { cardToImageUrl } from \"src/cards/cards.js\"\n\nexport const CardRulesDialog = ({ dialogIsOpen, closeDialog, card }) => {\n  const cardRules = cardsRules[card.type]\n\n  return (\n    <DialogWood\n      className=\"card-rules-dialog\"\n      isOpen={dialogIsOpen}\n      onRequestClose={closeDialog}\n      requestCloseOnClickOutside={true}\n      title=\"Carte\"\n    >\n      {cardRules ? (\n        <>\n          <div className=\"dialog-label\">{cardRules.name}</div>\n          <div style={{ textAlign: \"center\" }}>\n            <Image\n              className=\"current-card\"\n              src={cardToImageUrl(card)}\n              width=\"150\"\n              alt={card.type}\n            />\n          </div>\n          <div className=\"text-rule\">{cardRules.rule}</div>\n          {cardRules.more ? <div className=\"text-rule\">{cardRules.more}</div> : null}\n        </>\n      ) : (\n        \"No rule\"\n      )}\n    </DialogWood>\n  )\n}\n",
    "import React from \"react\"\n\nimport { Image } from \"src/generic/Image.jsx\"\nimport { cardToSmallImageUrl } from \"src/cards/cards.js\"\n\nconst SmallCardForward = ({ card, ...props }, ref) => {\n  return (\n    <div\n      className=\"card current-card\"\n      ref={ref}\n      style={{\n        backgroundColor: card.color1,\n        borderColor: card.color2,\n      }}\n      {...props}\n    >\n      <Image src={cardToSmallImageUrl(card)} alt={card.type} />\n    </div>\n  )\n}\n\nexport const SmallCard = React.forwardRef(SmallCardForward)\n",
    "import React from \"react\"\n\nimport { useCurrentCardId, useCurrentCardActivated } from \"src/main.store.js\"\nimport { Image } from \"src/generic/Image.jsx\"\nimport { useCurrentPlayer } from \"src/round/round.selectors.js\"\nimport { cardDefaultUrl, cardIdToCard } from \"src/cards/cards.js\"\nimport { CardRulesDialog } from \"src/header/CardRulesDialog.jsx\"\nimport { SmallCard } from \"src/cards/SmallCard.jsx\"\nimport { SwordChallengeIndicator } from \"./SwordChallengeIndicator.jsx\"\n\nimport { useAnimateTransitionUsingJs } from \"src/animation/useAnimateTransition.js\"\n\nexport const Header = ({ openScoreboard, headerSmallCardRef }) => {\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const currentCardActivated = useCurrentCardActivated()\n\n  return (\n    <div className=\"header\">\n      <div className=\"card-container\">\n        <div className=\"small-card\">\n          {currentCard ? (\n            <HeaderSmallCard headerSmallCardRef={headerSmallCardRef} currentCard={currentCard} />\n          ) : (\n            <BackCard />\n          )}\n        </div>\n        {currentCardActivated && <SwordChallengeIndicator />}\n      </div>\n      <CurrentPlayer openScoreboard={openScoreboard} />\n      <TotalScore />\n    </div>\n  )\n}\n\nconst HeaderSmallCard = ({ headerSmallCardRef, currentCard }) => {\n  const [cardDialogIsOpen, cardDialogIsOpenSetter] = React.useState(false)\n  const openCardDialog = () => {\n    cardDialogIsOpenSetter(true)\n  }\n\n  const closeCardDialog = () => {\n    cardDialogIsOpenSetter(false)\n  }\n\n  return (\n    <>\n      <SmallCard\n        onClick={() => {\n          openCardDialog()\n        }}\n        card={currentCard}\n        ref={headerSmallCardRef}\n      />\n      <CardRulesDialog\n        card={currentCard}\n        dialogIsOpen={cardDialogIsOpen}\n        closeDialog={closeCardDialog}\n      />\n    </>\n  )\n}\n\nconst BackCard = () => {\n  return (\n    <div\n      className=\"card default-card\"\n      style={{\n        backgroundImage: `url(${cardDefaultUrl})`,\n        backgroundSize: \"217px\",\n      }}\n    ></div>\n  )\n}\n\nconst CurrentPlayer = ({ openScoreboard }) => {\n  const player = useCurrentPlayer()\n\n  return (\n    <Image\n      onClick={openScoreboard}\n      className=\"avatar\"\n      src={player && player.character.img}\n      alt=\"player\"\n      style={{\n        borderColor: (player && player.character.color) || \"white\",\n      }}\n    />\n  )\n}\n\nconst TotalScore = () => {\n  const player = useCurrentPlayer()\n  const totalScore = player.score\n  const totalScoreAnimation = useAnimateTransitionUsingJs(totalScore, {\n    duration: 1200,\n    timingFunction: (progress) => 1 - Math.pow(1 - progress, 5),\n  })\n\n  return (\n    <div className=\"total-score\">\n      <span\n        className=\"score\"\n        style={{\n          backgroundColor: (player && player.character.color) || \"white\",\n        }}\n      >\n        {totalScoreAnimation ? totalScoreAnimation.value : totalScore}\n      </span>\n    </div>\n  )\n}\n",
    "import { getDomNodeRectangle } from \"src/dom/dom.position.js\"\nimport {\n  rotateRectangle,\n  rotatedRectangleCollidesWithRotatedRectangle,\n} from \"src/helper/geometry.js\"\nimport { diceSize } from \"./dicePosition.js\"\n\n// margin because of rotation\nconst diceSpacing = diceSize / 8\n\nexport const rollDices = (dices, { rolledAreaDomNode }) => {\n  const rolledAreaRectangle = getDomNodeRectangle(rolledAreaDomNode)\n  const rolledAreaWidth = rolledAreaRectangle.right - rolledAreaRectangle.left\n  const rolledAreaHeight = rolledAreaRectangle.bottom - rolledAreaRectangle.top\n  const rectangleAllowed = {\n    left: diceSpacing,\n    right: rolledAreaWidth - (diceSize + diceSpacing),\n    top: diceSpacing,\n    bottom: rolledAreaHeight - (diceSize + diceSpacing),\n  }\n\n  const otherRotatedRectangles = []\n  const getRandomAndCollisionFreeInfo = (dice) => {\n    let count = 0\n    const next = () => {\n      const rectangleCandidate = getRandomDiceRectangle(dice, rectangleAllowed)\n      const rotation = getDiceRandomRotation()\n      const rotatedRectangleCandidate = rotateRectangle(rectangleCandidate, rotation)\n      const someOtherDiceCollides = otherRotatedRectangles.some((otherRotatedRectangle) =>\n        rotatedRectangleCollidesWithRotatedRectangle(\n          rotatedRectangleCandidate,\n          otherRotatedRectangle,\n        ),\n      )\n      if (\n        !someOtherDiceCollides ||\n        // better return a collisioning rectangle than an infinite loop\n        count > 50\n      ) {\n        return {\n          rectangle: rectangleCandidate,\n          rotation,\n          rotatedRectangle: rotatedRectangleCandidate,\n        }\n      }\n      count++\n      return next()\n    }\n    return next()\n  }\n\n  dices.forEach((dice, index) => {\n    dice.visibleFaceIndex = getDiceRandomFace(dice)\n\n    const { rectangle, rotation, rotatedRectangle } = getRandomAndCollisionFreeInfo(dice)\n    otherRotatedRectangles.push(rotatedRectangle)\n\n    dice.rolledAreaZIndex = index + 1\n    dice.rolledAreaPosition = rectangle[0]\n    dice.rotation = rotation\n  })\n\n  return dices\n}\n\nconst getRandomDiceRectangle = (dice, rectangleAllowed) => {\n  const positionCandidate = {\n    x: getRandomNumberBetweenInterval(rectangleAllowed.left, rectangleAllowed.right),\n    y: getRandomNumberBetweenInterval(rectangleAllowed.top, rectangleAllowed.bottom),\n  }\n\n  const topLeft = {\n    x: positionCandidate.x,\n    y: positionCandidate.y,\n  }\n  const topRight = {\n    x: positionCandidate.x + diceSize,\n    y: positionCandidate.y,\n  }\n  const bottomRight = {\n    x: positionCandidate.x + diceSize,\n    y: positionCandidate.y + diceSize,\n  }\n  const bottomLeft = {\n    x: positionCandidate.x,\n    y: positionCandidate.y + diceSize,\n  }\n\n  const diceRectangle = [topLeft, topRight, bottomRight, bottomLeft]\n  return diceRectangle\n}\n\nconst getDiceRandomRotation = () => getRandomNumberBetweenInterval(-35, 35)\n\nconst getDiceRandomFace = (dice) => getRandomNumberBetweenInterval(0, dice.faces.length - 1)\n\nconst getRandomNumberBetweenInterval = (min, max) =>\n  Math.floor(Math.random() * (max - min + 1) + min)\n",
    "import React from \"react\"\nimport { createAction, useDiceRolledIds, useCurrentCardId } from \"src/main.store.js\"\nimport { Image } from \"src/generic/Image.jsx\"\nimport {\n  useRollDiceAllowed,\n  useHasNeverRolled,\n  useThreeSkullsOrMoreInCursedArea,\n} from \"src/round/round.selectors.js\"\nimport { rollDices } from \"src/dices/rollDices.js\"\nimport { cardIdToCard, isChestCard } from \"src/cards/cards.js\"\nimport { symbolSkullUrl } from \"src/symbols/symbols.js\"\n\nexport const ButtonRoll = ({ rolledAreaRef }) => {\n  const rollDiceAllowed = useRollDiceAllowed()\n  const diceRolledIds = useDiceRolledIds()\n  const hasNeverRolled = useHasNeverRolled()\n  const roll = useRoll()\n\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const threeSkullsOrMoreInCursedArea = useThreeSkullsOrMoreInCursedArea()\n\n  const disabledNotEnoughDice = diceRolledIds.length < 2 && !hasNeverRolled\n  const disabledChestCard = threeSkullsOrMoreInCursedArea && isChestCard(currentCard)\n  const disabled = disabledNotEnoughDice || disabledChestCard\n\n  if (rollDiceAllowed) {\n    return (\n      <div className=\"roll-action\">\n        <button\n          onClick={() => {\n            roll(rolledAreaRef.current)\n          }}\n          disabled={disabled}\n        >\n          Lancer\n          {disabledNotEnoughDice && !disabledChestCard && (\n            <span className=\"button-subtitle\">(au moins 2 dés !)</span>\n          )}\n        </button>\n        {disabledChestCard && <Image src={symbolSkullUrl} className=\"skull-symbol\" />}\n      </div>\n    )\n  }\n\n  return null\n}\n\nconst useRoll = createAction((state, rolledAreaDomNode) => {\n  const { dices, rollCount, diceRolledIds } = state\n  const diceToRollIds = rollCount === 0 ? Object.keys(dices) : diceRolledIds\n  const dicesToRoll = diceToRollIds.map((diceRolledId) => dices[diceRolledId])\n\n  rollDices(dicesToRoll, { rolledAreaDomNode })\n  return {\n    ...state,\n    rollCount: rollCount + 1,\n    witchUncursedDiceId: null,\n    diceRolledIds: dicesToRoll.map((dice) => dice.id),\n    dices: { ...dices },\n  }\n})\n",
    "import React from \"react\"\n\nimport { useMarkScore, useEndPlayerRound } from \"src/round/round.actions.js\"\nimport { Image } from \"src/generic/Image.jsx\"\nimport {\n  useMarkScoreAllowed,\n  useMarkScoreButtonVisible,\n  useStartNextRoundAllowed,\n  useRoundScore,\n} from \"src/round/round.selectors.js\"\n\nimport { ButtonRoll } from \"./ButtonRoll.js\"\nimport { symbolSkullUrl } from \"src/symbols/symbols.js\"\n\nexport const Footer = ({ onRoundOver, rolledAreaRef }) => {\n  // const roundStarted = useRoundStarted()\n  // if (!roundStarted && !dialogIsOpen) openDialog()\n  // TODO: fix bug in DialogBase: dialog cannot be instantiated open\n\n  return (\n    <div className=\"footer actions\">\n      <ButtonRoll rolledAreaRef={rolledAreaRef} />\n      <ButtonMarkScore />\n      <ButtonEndRound onRoundOver={onRoundOver} />\n    </div>\n  )\n}\n\nconst ButtonMarkScore = () => {\n  const roundScore = useRoundScore()\n  const markScore = useMarkScore()\n  const markScoreAllowed = useMarkScoreAllowed()\n  const markScoreButtonVisible = useMarkScoreButtonVisible()\n\n  const sign = roundScore < 0 ? \"-\" : \"+\"\n\n  if (markScoreButtonVisible) {\n    return (\n      <div className=\"collect-action\">\n        <button\n          onClick={() => {\n            markScore(roundScore)\n          }}\n          disabled={!markScoreAllowed}\n        >\n          <span>Collecter</span>\n          <span className=\"score\">\n            {sign} {Math.abs(roundScore)}\n          </span>\n        </button>\n        {!markScoreAllowed && <Image src={symbolSkullUrl} className=\"skull-symbol\" />}\n      </div>\n    )\n  }\n\n  return null\n}\n\nconst ButtonEndRound = ({ onRoundOver }) => {\n  const startNextRoundAllowed = useStartNextRoundAllowed()\n  const endPlayerRound = useEndPlayerRound()\n  const roundScore = useRoundScore()\n\n  if (startNextRoundAllowed) {\n    return (\n      <div className=\"next-round-action\">\n        <button\n          onClick={() => {\n            // ici on sait que le round est terminé\n            // on peut dire a ceux que ça intéresse\n            // comment ça s'est passé (scoreboard)\n            // qui va alors animer le fait qu'on a marqué un score\n            // on devrait aussi animer le cas ou on fail sword challenge\n            // et le cas ou on se tape 3 tete\n            endPlayerRound()\n            onRoundOver({\n              // a faire ici:\n              // si on fail sword-challenge ou qu'on fait 3 skulls\n              // alors la raison doit changer\n              // et le scoreboard fera une autre animation\n              reason: \"score-marked\",\n              value: roundScore,\n            })\n          }}\n        >\n          Terminer mon tour\n        </button>\n      </div>\n    )\n  }\n\n  return null\n}\n",
    "import React from \"react\"\n\nimport { Image } from \"src/generic/Image.jsx\"\nimport { useCurrentCardId, useCurrentCardActivated } from \"src/main.store.js\"\nimport { cardIdToCard, isOneSkullCard, isTwoSkullsCard, isWitchCard } from \"src/cards/cards.js\"\nimport { diceSize } from \"src/dices/dicePosition.js\"\nimport { symbolSkullUrl } from \"src/symbols/symbols.js\"\nimport wichLabelImageUrl from \"src/skull-island/witch-label.png\"\n\nexport const SkullIsland = ({ cursedAreaRef }) => {\n  const currentCard = cardIdToCard(useCurrentCardId())\n\n  return (\n    <div className=\"skull-island\">\n      {isWitchCard(currentCard) ? <UncurseDiceLabel /> : null}\n      <div className=\"bottle\">\n        <div className=\"area\" ref={cursedAreaRef}>\n          {isOneSkullCard(currentCard) ? <ExtraSkull card={currentCard} /> : null}\n          {isTwoSkullsCard(currentCard) ? (\n            <>\n              <ExtraSkull card={currentCard} />\n              <ExtraSkull card={currentCard} />\n            </>\n          ) : null}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst ExtraSkull = ({ card }) => {\n  return (\n    <button\n      className=\"dice\"\n      style={{\n        width: diceSize,\n        height: diceSize,\n        color: \"#fcfcfc\",\n        margin: \"1px 5px\",\n        backgroundColor: card.color1,\n        borderColor: card.color2,\n        borderWidth: \"2px\",\n      }}\n    >\n      <Image\n        src={symbolSkullUrl}\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n        }}\n      />\n    </button>\n  )\n}\n\nconst UncurseDiceLabel = () => {\n  const currentCardActivated = useCurrentCardActivated()\n\n  if (!currentCardActivated) {\n    return <Image style={{ display: \"none\" }} src={wichLabelImageUrl} />\n  }\n\n  return (\n    <div className=\"witch-label\">\n      <Image src={wichLabelImageUrl} />\n      <svg x=\"0px\" y=\"0px\" width=\"156.083px\" height=\"208.667px\" viewBox=\"0 0 156.083 208.667\">\n        <path\n          id=\"path_01\"\n          fill=\"none\"\n          stroke=\"#E4AD30\"\n          d=\"M8.406,107.82\n\tc2.541,2.178,2.375,2.875,14.25,3.5c14.782,0.778,19.26-11.965,19.26-11.965S47.918,88,40.251,72.917s-18.916,4.583-9.083,8.167\n\ts27.759-1.338,35.142-12.417C74.75,56,77.583,45.333,79.25,37S78.477,15.833,66.31,3.833\"\n        />\n        <path\n          id=\"path_02\"\n          fill=\"none\"\n          stroke=\"#E4AD30\"\n          d=\"M44.031,110.094\n\tc0,0,1,1.313-4.438,3.344s-14.244,7.281-32.125-2\"\n        />\n        <path\n          id=\"path_03\"\n          fill=\"none\"\n          stroke=\"#E4AD30\"\n          d=\"M42.125,103.688\n\tc0,0,1.313,6.594-9.313,8.625S10.281,108.719,9.406,101\"\n        />\n        <path\n          id=\"path_04\"\n          fill=\"none\"\n          stroke=\"#E4AD30\"\n          d=\"M33.114,112.253c0,0,39.886-19.253,43.011,24.747\n\tc0.372,0.447-0.959,1.208-2.542,1.625\"\n        />\n      </svg>\n    </div>\n  )\n}\n",
    "import React from \"react\"\nimport ReactDOM from \"react-dom\"\n\nexport const Portal = ({ parent, children }) => {\n  if (!parent) {\n    return null\n  }\n  return ReactDOM.createPortal(<>{children}</>, parent)\n}\n",
    "export const stringifyClassNames = (classNames) => {\n  return classNames.join(\" \")\n}\n\nexport const stringifyTransformations = ({ rotate, scale, translate }) => {\n  return [\n    ...(rotate ? [`rotate(${rotate}deg)`] : []),\n    ...(scale && scale !== 1 ? [`scale(${scale})`] : []),\n    ...(translate ? [`translate(${translate})`] : []),\n  ].join(\"\")\n}\n",
    "export const throttle = (fn, ms = 60, { trailing = false } = {}) => {\n  let timeout\n  let previousMs\n\n  const throttled = (...args) => {\n    clearTimeout(timeout)\n    const nowMs = Date.now()\n    // la fonction a été appelé il y a previous\n    if (previousMs) {\n      // ca fait combien de temps\n      const msEllapsedSincePreviousCall = nowMs - previousMs\n\n      if (msEllapsedSincePreviousCall < ms) {\n        // pas suffisament de temps écoulé\n        if (trailing) {\n          const remaining = ms - msEllapsedSincePreviousCall\n          timeout = setTimeout(() => throttled(...args), remaining)\n        }\n      } else {\n        // suffisament de temps écoulé\n        previousMs = nowMs\n        fn(...args)\n      }\n    } else {\n      // calls right now\n      previousMs = nowMs\n      fn(...args)\n    }\n  }\n\n  const cancel = () => {\n    clearTimeout(timeout)\n  }\n  throttled.cancel = cancel\n\n  return throttled\n}\n",
    "import { createLogger } from \"@jsenv/logger\"\nimport { throttle } from \"src/helper/throttle.js\"\nimport { addDomEventListener } from \"src/dom/dom.util.js\"\n\nexport const enableDragGesture = (\n  domNode,\n  {\n    logLevel = \"warn\",\n    onGrip = () => {},\n    onLongGrip = () => {},\n    // in case it's passed we will call it only on fast and precise click\n    onClick = () => {},\n    onDrag = () => {},\n    onRelease = () => {},\n    onCancel = () => {},\n    longGripMs = 300,\n  },\n) => {\n  const logger = createLogger({ logLevel })\n  // a small move is a drag gesture but\n  // not yet a drag intent\n  // long grip or big enough move set drag intent to true\n  let dragIntent = false\n  let dragIntentTimeout\n  let pendingGesture\n  let removeMoveListener = () => {}\n  let removeReleaseListener = () => {}\n  let cancelMoveThrottling = () => {}\n\n  logger.debug(\"enable drag on\", domNode)\n\n  // disable native drag\n  // putting draggable=\"false\" on the element is not enough for firefox\n  const removeDragstartListener = addDomEventListener(domNode, \"dragstart\", (dragstartEvent) => {\n    dragstartEvent.preventDefault()\n  })\n\n  const removeMousedownListener = addDomEventListener(\n    domNode,\n    \"mousedown\",\n    (mousedownEvent) => {\n      const isRightClick = mousedownEvent.which === 3\n      if (isRightClick) {\n        logger.debug(\"ignore right click\")\n        return\n      }\n\n      handleGrip(mouseEventToPagePosition(mousedownEvent), mousedownEvent)\n      const mousemoveThrottled = throttle((mousemoveEvent) => {\n        handleMove(mouseEventToPagePosition(mousemoveEvent), mousemoveEvent)\n      })\n      cancelMoveThrottling = () => mousemoveThrottled.cancel()\n      removeMoveListener = addDomEventListener(document, \"mousemove\", mousemoveThrottled)\n      removeReleaseListener = addDomEventListener(document, \"mouseup\", (mouseupEvent) => {\n        removeReleaseListener()\n        removeMoveListener()\n        handleRelease(mouseEventToPagePosition(mouseupEvent), mouseupEvent)\n      })\n    },\n    { passive: true },\n  )\n  const removeTouchstartListener = addDomEventListener(\n    domNode,\n    \"touchstart\",\n    (touchstartEvent) => {\n      handleGrip(touchEventToPagePosition(touchstartEvent), touchstartEvent)\n      const touchmoveThrottled = throttle((touchmoveEvent) => {\n        handleMove(touchEventToPagePosition(touchmoveEvent), touchmoveEvent)\n      })\n      cancelMoveThrottling = () => touchmoveThrottled.cancel()\n      removeMoveListener = addDomEventListener(document, \"touchmove\", touchmoveThrottled)\n      removeReleaseListener = addDomEventListener(document, \"touchend\", (touchendEvent) => {\n        removeReleaseListener()\n        removeMoveListener()\n        handleRelease(touchEventToPagePosition(touchendEvent), touchendEvent)\n      })\n    },\n    { passive: true },\n  )\n  const removeClickListener = addDomEventListener(domNode, \"click\", (clickEvent) => {\n    if (!dragIntent && dropEffect === \"none\") {\n      onClick(clickEvent)\n    }\n  })\n\n  let pointerPositionPrevious\n  let domNodeStartPosition\n  let gripPointerPosition\n  let longGripTimeout\n  let dropEffect\n  const handleGrip = (pointerPosition, event) => {\n    logger.debug(\"gripping node at\", pointerPosition)\n    pendingGesture = true\n    dropEffect = \"none\"\n    gripPointerPosition = pointerPosition\n    pointerPositionPrevious = pointerPosition\n    domNodeStartPosition = domNodeToPagePosition(domNode)\n\n    onGrip({\n      x: domNodeStartPosition.x,\n      y: domNodeStartPosition.y,\n      event,\n    })\n    longGripTimeout = setTimeout(handleLongGrip, longGripMs)\n  }\n\n  const handleLongGrip = () => {\n    dragIntent = true\n    onLongGrip()\n  }\n\n  const handleMove = (pointerPosition, event) => {\n    if (\n      pointerPositionPrevious.x === pointerPosition.x &&\n      pointerPositionPrevious.y === pointerPosition.y\n    ) {\n      logger.debug(\"no real move\")\n      return\n    }\n    pointerPositionPrevious = pointerPosition\n\n    const gripHorizontalShift = gripPointerPosition.x - domNodeStartPosition.x\n    const gripVerticalShit = gripPointerPosition.y - domNodeStartPosition.y\n    const movePosition = {\n      // il y a un décalage entre le bord de l'élément et l'endroit ou l'on l'attrape\n      // ce décalage doit continuer d'exister pour savoir ou on place l'élément en position fixed\n      x: pointerPosition.x - gripHorizontalShift,\n      y: pointerPosition.y - gripVerticalShit,\n    }\n    const relativeX = pointerPosition.x - gripPointerPosition.x\n    const relativeY = pointerPosition.y - gripPointerPosition.y\n\n    logger.debug(\"move node at\", movePosition)\n    onDrag({\n      event,\n      ...movePosition,\n      relativeX,\n      relativeY,\n      setDropEffect: (value) => {\n        dropEffect = value\n      },\n    })\n  }\n\n  const handleRelease = (pointerPosition, event) => {\n    logger.debug(\"releasing node\")\n    pendingGesture = false\n    clearTimeout(longGripTimeout)\n\n    const gripHorizontalShift = gripPointerPosition.x - domNodeStartPosition.x\n    const gripVerticalShit = gripPointerPosition.y - domNodeStartPosition.y\n\n    onRelease({\n      event,\n      dropEffect,\n      x: pointerPositionPrevious.x - gripHorizontalShift,\n      y: pointerPositionPrevious.y - gripVerticalShit,\n    })\n    // setTimeout is to ensure the click cannot happen just after mouseup\n    dragIntentTimeout = setTimeout(() => {\n      dragIntent = false\n    })\n  }\n\n  const handleCancel = (event) => {\n    if (pendingGesture) {\n      logger.debug(\"cancelling drag\", event)\n      pendingGesture = false\n      onCancel({\n        event,\n      })\n    }\n  }\n\n  return (event) => {\n    removeDragstartListener()\n    removeClickListener()\n    removeMousedownListener()\n    removeTouchstartListener()\n    removeMoveListener()\n    removeReleaseListener()\n    clearTimeout(longGripTimeout)\n    clearTimeout(dragIntentTimeout)\n    cancelMoveThrottling()\n    handleCancel(event)\n  }\n}\n\nconst domNodeToPagePosition = (domNode) => {\n  const rect = domNode.getBoundingClientRect()\n  return {\n    x: rect.left,\n    y: rect.top,\n  }\n}\n\nconst mouseEventToPagePosition = (mouseEvent) => {\n  return {\n    x: mouseEvent.pageX,\n    y: mouseEvent.pageY,\n  }\n}\n\nconst touchEventToPagePosition = (touchEvent) => {\n  const firstChangedTouch = touchEvent.changedTouches[0]\n  return {\n    x: firstChangedTouch.pageX,\n    y: firstChangedTouch.pageY,\n  }\n}\n",
    "/* eslint-disable no-nested-ternary */\nimport React from \"react\"\n\nimport { usePrevious } from \"src/hooks.js\"\nimport { Portal } from \"src/generic/Portal.jsx\"\nimport { rectangleToRectangleInsideDomNode, printPointInDocument } from \"src/dom/dom.position.js\"\nimport { stringifyTransformations } from \"src/helper/render.js\"\nimport { useDiceDomNode, useDiceDomNodeSetter, useMainDomNode } from \"src/dom/dom.main.js\"\nimport { diceSize } from \"src/dices/dicePosition.js\"\nimport { diceIsOnSkull, diceToVisibleSymbol } from \"src/dices/dices.js\"\nimport { enableDragGesture } from \"src/drag/drag.js\"\nimport { symbolToImageUrl } from \"src/symbols/symbols.js\"\n\nconst { useEffect, useState } = React\n\nexport const Dice = ({\n  dice,\n  diceAnimation,\n  anmationDebug = false,\n  parentNode,\n  zIndex,\n  x,\n  y,\n  rotation,\n  draggable,\n  onDiceClick,\n  onDiceDrag,\n  onDiceDrop,\n  onDiceDragEnd,\n  disapear,\n  appear,\n}) => {\n  // state from contexts\n  const mainDomNode = useMainDomNode()\n  const diceDomNode = useDiceDomNode(dice.id)\n  const diceDomNodeSetter = useDiceDomNodeSetter(dice.id)\n\n  // local states\n  const [diceGripped, diceGrippedSetter] = useState(false)\n  const [dragGesture, setDragGesture] = useState(null)\n\n  // si y'a une animation alors reste dans ton conteneur\n  // le temps qu'elle se finisse\n  const parentNodePrevious = usePrevious(parentNode)\n  const portalParentNode = diceAnimation ? parentNodePrevious : parentNode\n\n  useEffect(() => {\n    if (!draggable || !diceDomNode || !mainDomNode) {\n      return () => {}\n    }\n\n    let bigMoveOccured = false\n    const disableDragGesture = enableDragGesture(diceDomNode, {\n      onGrip: () => {\n        diceGrippedSetter(true)\n      },\n      onClick: (clickEvent) => {\n        onDiceClick(dice, clickEvent)\n      },\n      onDrag: ({ x, y, relativeX, relativeY, setDropEffect }) => {\n        const diceDesiredRect = {\n          left: x,\n          right: x + diceSize,\n          top: y,\n          bottom: y + diceSize,\n        }\n        const diceRectangle = rectangleToRectangleInsideDomNode(diceDesiredRect, mainDomNode)\n        setDragGesture({ x: diceRectangle.left, y: diceRectangle.top })\n        bigMoveOccured = bigMoveOccured || Math.abs(relativeX) > 10 || Math.abs(relativeY) > 10\n        if (bigMoveOccured) {\n          onDiceDrag(dice, { relativeX, relativeY, setDropEffect, diceRectangle })\n        }\n      },\n      onRelease: ({ dropEffect, x, y }) => {\n        if (dropEffect !== \"none\") {\n          const diceRectangle = {\n            left: x,\n            right: x + diceSize,\n            top: y,\n            bottom: y + diceSize,\n          }\n          onDiceDrop(dice, {\n            diceRectangle,\n          })\n        }\n        diceGrippedSetter(false)\n        setDragGesture(null)\n        onDiceDragEnd(dice)\n      },\n      onCancel: () => {\n        diceGrippedSetter(false)\n        setDragGesture(null)\n        onDiceDragEnd(dice)\n      },\n    })\n    return () => {\n      disableDragGesture()\n    }\n  }, [draggable, diceDomNode, mainDomNode, onDiceClick, onDiceDrag, onDiceDrop, onDiceDragEnd])\n\n  useEffect(() => {\n    if (!diceAnimation || !diceDomNode) return () => {}\n    const { from, to, onfinish } = diceAnimation\n\n    if (anmationDebug) {\n      printPointInDocument(from)\n      printPointInDocument(to)\n    }\n    const transform = `translate(${Math.floor(to.x - from.x)}px, ${Math.floor(to.y - from.y)}px)`\n    const animation = diceDomNode.parentNode.animate(\n      [\n        {\n          transform,\n        },\n      ],\n      {\n        duration: 500,\n        fill: \"forwards\",\n        easing: \"cubic-bezier(0, 0.55, 0.45, 1)\",\n      },\n    )\n    animation.onfinish = onfinish\n    return () => {\n      animation.cancel()\n    }\n  }, [diceDomNode, diceAnimation])\n\n  const onSkull = diceIsOnSkull(dice)\n  const diceX =\n    diceAnimation && diceAnimation.from ? diceAnimation.from.x : dragGesture ? dragGesture.x : x\n\n  const diceY =\n    diceAnimation && diceAnimation.from ? diceAnimation.from.y : dragGesture ? dragGesture.y : y\n\n  const diceZIndex = dragGesture || diceAnimation ? 1000 : zIndex\n\n  // if (dice.id === 4 && !dragGesture) {\n  //   console.log({\n  //     diceX,\n  //     diceY,\n  //     diceAnimation: Boolean(diceAnimation),\n  //     dragGesture: Boolean(dragGesture),\n  //   })\n  // }\n\n  return (\n    <Portal parent={portalParentNode}>\n      <svg\n        data-dice-id={dice.id}\n        className=\"dice\"\n        onClick={\n          draggable\n            ? undefined\n            : (clickEvent) => {\n                onDiceClick(dice, clickEvent)\n              }\n        }\n        style={{\n          width: diceSize,\n          height: diceSize,\n          left: `${diceX}px`,\n          top: `${diceY}px`,\n          zIndex: diceZIndex,\n          cursor: draggable ? (diceGripped ? \"grabbing\" : \"grab\") : undefined,\n          position: dragGesture || diceAnimation ? \"fixed\" : undefined,\n        }}\n      >\n        <g\n          ref={diceDomNodeSetter}\n          className={disapear ? \"dice-cursed-disapear\" : appear ? \"dice-cursed-appear\" : \"\"}\n          style={{\n            transform: stringifyTransformations({\n              rotate: rotation ? rotation : 0,\n              scale: diceGripped ? \"1.1\" : \"1\",\n            }),\n            transitionProperty: \"transform\",\n            transitionDuration: \"500ms\",\n            // https://easings.net/#easeOutCirc\n            transitionTimingFunction: \"cubic-bezier(0, 0.55, 0.45, 1)\",\n            transformOrigin: \"center center\",\n          }}\n        >\n          <rect\n            className=\"dice-background\"\n            width=\"100%\"\n            height=\"100%\"\n            rx=\"5\"\n            ry=\"5\"\n            fill={onSkull ? \"black\" : \"#fcfcfc\"}\n            stroke={onSkull ? \"black\" : \"#b9b9b9\"}\n            strokeWidth=\"1\"\n          ></rect>\n          <image\n            xlinkHref={symbolToImageUrl(diceToVisibleSymbol(dice))}\n            draggable=\"false\"\n            style={{\n              width: \"100%\",\n              height: \"100%\",\n            }}\n          />\n        </g>\n      </svg>\n    </Portal>\n  )\n}\n",
    "import React from \"react\"\nimport {\n  useDices,\n  useDiceCursedIds,\n  useDiceRolledIds,\n  useChestSlots,\n  useWitchUncursedDiceId,\n  useWitchCardEffectUsed,\n  useScoreMarked,\n  useCurrentCardId,\n} from \"src/main.store.js\"\nimport { cardIdToCard, isWitchCard } from \"src/cards/cards.js\"\nimport {\n  rectangleRelativeToDomNode,\n  findDomNodeClosestToRectangle,\n  rectangleAbsoluteToDomNode,\n  getDomNodeRectangle,\n  domNodeCollidesWithRectangle,\n} from \"src/dom/dom.position.js\"\nimport { useThreeSkullsOrMoreInCursedArea, useHasDicesToCurse } from \"src/round/round.selectors.js\"\nimport { Dice } from \"src/dices/Dice.jsx\"\nimport { diceIsOnSkull } from \"src/dices/dices.js\"\nimport {\n  useSetDiceRolledAreaPosition,\n  useKeepDice,\n  useUnkeepDice,\n  useSetDiceChestSlot,\n  useUncurseDice,\n} from \"src/dices/dices.actions.js\"\n\nexport const DiceContainer = ({\n  offscreenDomNode,\n  chestDomNode,\n  rolledAreaDomNode,\n  cursedAreaDomNode,\n  onDiceOverChestChange = () => {},\n  onDiceOverRolledAreaChange = () => {},\n}) => {\n  // global state\n  const dices = useDices()\n  const chestSlots = useChestSlots()\n  const diceRolledIds = useDiceRolledIds()\n  const diceCursedIds = useDiceCursedIds()\n  const witchUncursedDiceId = useWitchUncursedDiceId()\n  const witchCardEffectUsed = useWitchCardEffectUsed()\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const scoreMarked = useScoreMarked()\n  const threeSkullsOrMoreInCursedArea = useThreeSkullsOrMoreInCursedArea()\n  const hasDicesToCurse = useHasDicesToCurse()\n  // local state\n  const [diceAnimationState, dispatchDiceAnimation] = React.useReducer((state, action) => {\n    return {\n      ...state,\n      [action.key]: action.value,\n    }\n  }, {})\n  // actions\n  const setDiceRolledAreaPosition = useSetDiceRolledAreaPosition()\n  const keepDice = useKeepDice()\n  const unkeepDice = useUnkeepDice()\n  const uncurseDice = useUncurseDice()\n  const setDiceChestSlot = useSetDiceChestSlot()\n  // other\n  const dropTargetRef = React.useRef(null)\n\n  return Object.keys(dices).map((diceId) => {\n    const dice = dices[diceId]\n\n    const diceLocation = diceToLocation(dice, { chestSlots, diceRolledIds, diceCursedIds })\n    const propsFromLocation = diceLocationToProps(diceLocation, {\n      chestDomNode,\n      rolledAreaDomNode,\n      cursedAreaDomNode,\n      offscreenDomNode,\n    })\n    const { parentNode } = propsFromLocation\n    const diceIsGoingToBeCursed =\n      dice.id !== witchUncursedDiceId && parentNode === rolledAreaDomNode && diceIsOnSkull(dice)\n    const diceInCursedArea = parentNode === cursedAreaDomNode\n\n    // we use useCallback because it prevents dices\n    // from being re-rendered and drag gesture to become\n    // shortly unavailable while react is rerendering\n    const onDiceClick = React.useCallback(\n      (dice) => {\n        const clickEffect = getClickEffect(dice, {\n          currentCard,\n          witchCardEffectUsed,\n          diceRolledIds,\n          chestSlots,\n          diceCursedIds,\n          hasDicesToCurse,\n          threeSkullsOrMoreInCursedArea,\n          scoreMarked,\n        })\n        // console.log(`click dice#${dice.id} -> ${clickEffect} effect`)\n        if (clickEffect === \"keep\") {\n          const firstAvailableChestSlot = firstAvailableChestSlotGetter(chestSlots)\n          keepDice(dice, firstAvailableChestSlot)\n        } else if (clickEffect === \"unkeep\") {\n          unkeepDice(dice)\n        } else if (clickEffect === \"uncurse\") {\n          uncurseDice(dice)\n        }\n      },\n      [\n        diceRolledIds,\n        chestSlots,\n        diceCursedIds,\n        scoreMarked,\n        threeSkullsOrMoreInCursedArea,\n        currentCard,\n        witchCardEffectUsed,\n      ],\n    )\n\n    const onDiceDrag = React.useCallback(\n      (dice, dragDiceGesture) => {\n        dropTargetRef.current = dropTargetGetter({\n          dragDiceGesture,\n          chestDomNode,\n          rolledAreaDomNode,\n        })\n        const dropEffect = getDropEffect(dice, {\n          diceRolledIds,\n          chestSlots,\n          dropTargetRef,\n          rolledAreaDomNode,\n          chestDomNode,\n          hasDicesToCurse,\n          threeSkullsOrMoreInCursedArea,\n          scoreMarked,\n        })\n        dragDiceGesture.setDropEffect(dropEffect)\n        onDiceOverChestChange(dropEffect === \"keep\" ? dice : null)\n        onDiceOverRolledAreaChange(dropEffect === \"unkeep\" ? dice : null)\n      },\n      [\n        diceRolledIds,\n        chestSlots,\n        dropTargetRef,\n        rolledAreaDomNode,\n        chestDomNode,\n        scoreMarked,\n        threeSkullsOrMoreInCursedArea,\n        onDiceOverChestChange,\n        onDiceOverRolledAreaChange,\n      ],\n    )\n\n    const onDiceDrop = React.useCallback(\n      (dice, dropDiceGesture) => {\n        const dropEffect = getDropEffect(dice, {\n          diceRolledIds,\n          chestSlots,\n          dropTargetRef,\n          rolledAreaDomNode,\n          chestDomNode,\n          scoreMarked,\n          threeSkullsOrMoreInCursedArea,\n        })\n        // console.log(`drop dice#${dice.id} -> ${dropEffect} effect`)\n\n        let dropAnimation = false\n        let dropPosition = null\n\n        if (dropEffect === \"reposition-in-rolled-area\") {\n          const closestRolledAreaPosition = closestRolledAreaPositionGetter(\n            dropDiceGesture.diceRectangle,\n            rolledAreaDomNode,\n          )\n          const highestRolledAreaZIndex = highestRolledAreaZIndexGetter(dice, {\n            dices,\n            diceRolledIds,\n          })\n          setDiceRolledAreaPosition(dice, closestRolledAreaPosition, highestRolledAreaZIndex)\n          // no animation needed, we drop exactly where we want it\n        } else if (dropEffect === \"back-to-rolled-area\") {\n          dropAnimation = true\n          dropPosition = rolledAreaDropPositionGetter(dice.rolledAreaPosition, rolledAreaDomNode)\n        } else if (dropEffect === \"keep\") {\n          const closestAvailableChestSlot = closestAvailableChestSlotGetter(dice, {\n            chestSlots,\n            rectangle: dropDiceGesture.diceRectangle,\n            chestDomNode,\n          })\n          keepDice(dice, closestAvailableChestSlot)\n          dropAnimation = true\n          dropPosition = chestSlotDropPositionGetter(closestAvailableChestSlot, chestDomNode)\n        } else if (dropEffect === \"reposition-in-chest\") {\n          const closestAvailableChestSlot = closestAvailableChestSlotGetter(dice, {\n            chestSlots,\n            rectangle: dropDiceGesture.diceRectangle,\n            chestDomNode,\n          })\n          const diceChestSlot = diceToChestSlot(dice, chestSlots)\n          if (diceChestSlot !== closestAvailableChestSlot) {\n            setDiceChestSlot(dice, closestAvailableChestSlot)\n            dropAnimation = true\n            dropPosition = chestSlotDropPositionGetter(closestAvailableChestSlot, chestDomNode)\n          }\n        } else if (dropEffect === \"back-to-chest\") {\n          const diceChestSlot = diceToChestSlot(dice, chestSlots)\n          dropAnimation = true\n          dropPosition = chestSlotDropPositionGetter(diceChestSlot, chestDomNode)\n        } else if (dropEffect === \"unkeep\") {\n          const closestRolledAreaPosition = closestRolledAreaPositionGetter(\n            dropDiceGesture.diceRectangle,\n            rolledAreaDomNode,\n          )\n          setDiceRolledAreaPosition(\n            dice,\n            closestRolledAreaPosition,\n            highestRolledAreaZIndexGetter(dice, { dices, diceRolledIds }),\n          )\n          unkeepDice(dice)\n          dropAnimation = true\n          dropPosition = rolledAreaDropPositionGetter(closestRolledAreaPosition, rolledAreaDomNode)\n        }\n\n        if (dropAnimation) {\n          dispatchDiceAnimation({\n            key: dice.id,\n            value: {\n              from: {\n                x: dropDiceGesture.diceRectangle.left,\n                y: dropDiceGesture.diceRectangle.top,\n              },\n              to: dropPosition,\n              onfinish: () => {\n                // at the end of dice animation, dice is flickering briely\n                // (moving somewhere on the page and going back to where it's supposed to be)\n                // the following setTimeout fixes this\n                // of course we should improve that because it's an hint there is a deeper\n                // issue to resolve.\n                setTimeout(() => {\n                  dispatchDiceAnimation({\n                    key: dice.id,\n                    value: null,\n                  })\n                })\n              },\n            },\n          })\n        }\n      },\n      [\n        diceRolledIds,\n        chestSlots,\n        dropTargetRef,\n        rolledAreaDomNode,\n        chestDomNode,\n        scoreMarked,\n        threeSkullsOrMoreInCursedArea,\n      ],\n    )\n\n    const onDiceDragEnd = React.useCallback(() => {\n      onDiceOverChestChange(null)\n      onDiceOverRolledAreaChange(null)\n    }, [onDiceOverChestChange, onDiceOverRolledAreaChange])\n\n    const props = {\n      key: dice.id,\n      ...propsFromLocation,\n      dice,\n      diceAnimation: diceAnimationState[dice.id],\n      witchCardEffectUsed,\n      disapear: diceIsGoingToBeCursed,\n      appear: diceInCursedArea,\n      onDiceClick,\n      onDiceDrag,\n      onDiceDrop,\n      onDiceDragEnd,\n    }\n\n    return React.useMemo(\n      () => <Dice {...props} />,\n      Object.keys(props).map((key) => props[key]),\n    )\n  })\n}\n\nconst getClickEffect = (\n  dice,\n  {\n    currentCard,\n    witchCardEffectUsed,\n    diceRolledIds,\n    chestSlots,\n    diceCursedIds,\n    hasDicesToCurse,\n    threeSkullsOrMoreInCursedArea,\n    scoreMarked,\n  },\n) => {\n  if (diceIsInRolledAreaGetter(dice, diceRolledIds)) {\n    if (\n      keepDiceAllowedGetter(dice, { hasDicesToCurse, threeSkullsOrMoreInCursedArea, scoreMarked })\n    ) {\n      return \"keep\"\n    }\n    return \"none\"\n  }\n\n  if (diceIsInChestGetter(dice, chestSlots)) {\n    if (unkeepDiceAllowedGetter(dice, { threeSkullsOrMoreInCursedArea, scoreMarked })) {\n      return \"unkeep\"\n    }\n    return \"none\"\n  }\n\n  if (diceIsInCursedAreaGetter(dice, diceCursedIds)) {\n    if (\n      uncurseDiceAllowedGetter(dice, {\n        currentCard,\n        witchCardEffectUsed,\n        scoreMarked,\n        threeSkullsOrMoreInCursedArea,\n      })\n    ) {\n      return \"uncurse\"\n    }\n    return \"none\"\n  }\n\n  return \"none\"\n}\n\nconst getDropEffect = (\n  dice,\n  {\n    diceRolledIds,\n    chestSlots,\n    dropTargetRef,\n    rolledAreaDomNode,\n    chestDomNode,\n    hasDicesToCurse,\n    threeSkullsOrMoreInCursedArea,\n    scoreMarked,\n  },\n) => {\n  if (diceIsInRolledAreaGetter(dice, diceRolledIds)) {\n    if (dropTargetRef.current === rolledAreaDomNode) {\n      return \"reposition-in-rolled-area\"\n    }\n\n    if (dropTargetRef.current === chestDomNode) {\n      if (\n        keepDiceAllowedGetter(dice, { hasDicesToCurse, threeSkullsOrMoreInCursedArea, scoreMarked })\n      ) {\n        return \"keep\"\n      }\n      return \"back-to-rolled-area\"\n    }\n\n    return \"back-to-rolled-area\"\n  }\n\n  if (diceIsInChestGetter(dice, chestSlots)) {\n    if (dropTargetRef.current === chestDomNode) {\n      return \"reposition-in-chest\"\n    }\n\n    if (dropTargetRef.current === rolledAreaDomNode) {\n      if (unkeepDiceAllowedGetter(dice, { scoreMarked, threeSkullsOrMoreInCursedArea })) {\n        return \"unkeep\"\n      }\n      return \"back-to-chest\"\n    }\n\n    return \"back-to-chest\"\n  }\n\n  return \"none\"\n}\n\nconst dropTargetGetter = ({ dragDiceGesture, chestDomNode, rolledAreaDomNode }) => {\n  const diceIsOverChest = domNodeCollidesWithRectangle(chestDomNode, dragDiceGesture.diceRectangle)\n  if (diceIsOverChest) {\n    return chestDomNode\n  }\n\n  const diceIsOverRolledArea = domNodeCollidesWithRectangle(\n    rolledAreaDomNode,\n    dragDiceGesture.diceRectangle,\n  )\n  if (diceIsOverRolledArea) {\n    return rolledAreaDomNode\n  }\n\n  return null\n}\n\nconst diceIsInRolledAreaGetter = (dice, diceRolledIds) => diceRolledIds.includes(dice.id)\nconst diceIsInChestGetter = (dice, chestSlots) =>\n  Object.keys(chestSlots).some((chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n    return (\n      chestSlotContent && chestSlotContent.type === \"dice\" && chestSlotContent.value === dice.id\n    )\n  })\nconst diceIsInCursedAreaGetter = (dice, diceCursedIds) => diceCursedIds.includes(dice.id)\n\nconst keepDiceAllowedGetter = (\n  dice,\n  { hasDicesToCurse, threeSkullsOrMoreInCursedArea, scoreMarked },\n) => {\n  if (diceIsOnSkull(dice)) {\n    return false\n  }\n\n  if (hasDicesToCurse) {\n    return false\n  }\n\n  if (threeSkullsOrMoreInCursedArea) {\n    return false\n  }\n\n  if (scoreMarked) {\n    return false\n  }\n\n  return true\n}\nconst unkeepDiceAllowedGetter = (dice, { scoreMarked, threeSkullsOrMoreInCursedArea }) => {\n  if (scoreMarked) {\n    return false\n  }\n\n  if (threeSkullsOrMoreInCursedArea) {\n    return false\n  }\n\n  return true\n}\nconst uncurseDiceAllowedGetter = (\n  dice,\n  { currentCard, witchCardEffectUsed, scoreMarked, threeSkullsOrMoreInCursedArea },\n) => {\n  if (!isWitchCard(currentCard)) {\n    return false\n  }\n\n  if (witchCardEffectUsed) {\n    return false\n  }\n\n  if (scoreMarked) {\n    return false\n  }\n\n  if (threeSkullsOrMoreInCursedArea) {\n    return false\n  }\n\n  return true\n}\n\nconst rolledAreaDropPositionGetter = (rolledAreaPosition, rolledAreaDomNode) => {\n  const absoluteRolledAreaPositionRectangle = rectangleAbsoluteToDomNode(\n    {\n      left: rolledAreaPosition.x,\n      top: rolledAreaPosition.y,\n      right: 0,\n      bottom: 0,\n    },\n    rolledAreaDomNode,\n  )\n  return {\n    x: absoluteRolledAreaPositionRectangle.left,\n    y: absoluteRolledAreaPositionRectangle.top,\n  }\n}\n\nconst chestSlotDropPositionGetter = (chestSlot, chestDomNode) => {\n  const destinationSlotDomNode = chestSlotToChestSlotDomNode(chestSlot, chestDomNode)\n  const destinationSlotRectangle = getDomNodeRectangle(destinationSlotDomNode)\n  return {\n    // + 5 is because dice is centered in the chest slot\n    x: destinationSlotRectangle.left + 5,\n    y: destinationSlotRectangle.top + 5,\n  }\n}\n\nconst closestRolledAreaPositionGetter = (requestedRectangle, rolledAreaDomNode) => {\n  const rectangle = rectangleRelativeToDomNode(requestedRectangle, rolledAreaDomNode)\n  const closestRolledAreaPosition = {\n    x: rectangle.left,\n    y: rectangle.top,\n  }\n  return closestRolledAreaPosition\n}\n\nconst highestRolledAreaZIndexGetter = (dice, { diceRolledIds, dices }) => {\n  if (diceRolledIds.length === 0) {\n    return 1\n  }\n  const diceWithHighestZIndex = diceRolledIds.slice(1).reduce((previous, diceId) => {\n    const dice = dices[diceId]\n    const diceZIndex = dice.rolledAreaZIndex\n    if (diceZIndex > previous.rolledAreaZIndex) return dice\n    return previous\n  }, dices[diceRolledIds[0]])\n  if (diceWithHighestZIndex === dice) return dice.rolledAreaZIndex\n  return diceWithHighestZIndex.rolledAreaZIndex + 1\n}\n\nconst firstAvailableChestSlotGetter = (chestSlots) => {\n  const firstAvailableChestSlot = Object.keys(chestSlots).find((chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n    return !chestSlotContent\n  })\n  return firstAvailableChestSlot\n}\n\nconst closestAvailableChestSlotGetter = (dice, { chestSlots, rectangle, chestDomNode }) => {\n  const chestSlotMap = new Map()\n  const domNodeCandidates = []\n  Object.keys(chestSlots).forEach((chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n    const chestSlotIsEmpty = !chestSlotContent\n    if (\n      chestSlotIsEmpty ||\n      (chestSlotContent.type === \"dice\" && chestSlotContent.value === dice.id)\n    ) {\n      const chestSlotDomNode = chestSlotToChestSlotDomNode(chestSlot, chestDomNode)\n      chestSlotMap.set(chestSlotDomNode, chestSlot)\n      domNodeCandidates.push(chestSlotDomNode)\n    }\n  })\n  const closestDomNode = findDomNodeClosestToRectangle(domNodeCandidates, rectangle)\n  const closestChestSlot = chestSlotMap.get(closestDomNode)\n  return closestChestSlot\n}\n\nconst diceToChestSlot = (dice, chestSlots) => {\n  const diceChestSlot = Object.keys(chestSlots).find((chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n    return (\n      chestSlotContent && chestSlotContent.type === \"dice\" && chestSlotContent.value === dice.id\n    )\n  })\n  return diceChestSlot\n}\n\nconst chestSlotToChestSlotDomNode = (chestSlot, chestDomNode) => {\n  const chestSlotDomNode = chestDomNode.querySelector(`[data-chest-slot=\"${chestSlot}\"]`)\n  return chestSlotDomNode\n}\n\nconst diceToLocation = (dice, { chestSlots, diceRolledIds, diceCursedIds }) => {\n  const diceChestSlot = Object.keys(chestSlots).find(\n    (chestSlot) =>\n      chestSlots[chestSlot] &&\n      chestSlots[chestSlot].type === \"dice\" &&\n      chestSlots[chestSlot].value === dice.id,\n  )\n  if (diceChestSlot) {\n    return {\n      type: \"chest-slot\",\n      value: diceChestSlot,\n    }\n  }\n\n  if (diceRolledIds.includes(dice.id)) {\n    return {\n      type: \"rolled-area\",\n      value: {\n        ...dice.rolledAreaPosition,\n        rotation: dice.rotation,\n        zIndex: dice.rolledAreaZIndex,\n      },\n    }\n  }\n\n  if (diceCursedIds.includes(dice.id)) {\n    return {\n      type: \"cursed-area\",\n      value: undefined,\n    }\n  }\n\n  return {\n    type: \"offscreen-area\",\n  }\n}\n\nconst diceLocationToProps = (\n  { type, value },\n  { chestDomNode, rolledAreaDomNode, cursedAreaDomNode, offscreenDomNode },\n) => {\n  if (type === \"chest-slot\") {\n    return {\n      parentNode: chestDomNode.querySelector(`[data-chest-slot=\"${value}\"]`),\n      zIndex: undefined,\n      rotation: 0,\n      x: undefined,\n      y: undefined,\n      draggable: true,\n    }\n  }\n\n  if (type === \"rolled-area\") {\n    return {\n      parentNode: rolledAreaDomNode,\n      zIndex: value.zIndex,\n      rotation: value.rotation,\n      x: value.x,\n      y: value.y,\n      draggable: true,\n    }\n  }\n\n  if (type === \"cursed-area\") {\n    return {\n      parentNode: cursedAreaDomNode,\n      zIndex: undefined,\n      rotation: 0,\n      x: undefined,\n      y: undefined,\n      draggable: false,\n    }\n  }\n\n  return {\n    parentNode: offscreenDomNode,\n    zIndex: undefined,\n    rotation: 0,\n    x: undefined,\n    y: undefined,\n    draggable: false,\n  }\n}\n",
    "/* eslint-disable import/max-dependencies */\nimport React from \"react\"\n\nimport { useCurrentCardId, useAnimationsDisabled } from \"src/main.store.js\"\nimport { Image } from \"src/generic/Image.jsx\"\nimport { useCardDeck } from \"src/round/round.selectors.js\"\nimport { useDrawCard, useShuffleDeck } from \"src/cards/cards.actions.js\"\nimport { useActivateCurrentCard } from \"src/round/round.actions.js\"\n\nimport { cardsRules } from \"src/cards/cards-rules.js\"\nimport { Dialog } from \"src/dialog/dialog.component.jsx\"\nimport { cardIdToCard, cardToImageUrl, cardDefaultUrl } from \"src/cards/cards.js\"\nimport { SmallCard } from \"src/cards/SmallCard.jsx\"\nimport { getDomNodeRectangle } from \"src/dom/dom.position.js\"\n\nexport const DrawCardDialog = ({ dialogIsOpen, closeDialog, headerSmallCardRef }) => {\n  const cardDeck = useCardDeck()\n  const currentCardId = useCurrentCardId()\n  const currentCard = cardIdToCard(currentCardId) || null\n\n  const backCardRef = React.useRef()\n  const topCardRef = React.useRef()\n  const smallCardRef = React.useRef()\n\n  const shuffleCardsText = \"Paquet de cartes épuisé. Mélangez-le pour pouvoir piocher à nouveau !\"\n  const drawCardText = \"Piochez une carte pour le tour suivant.\"\n\n  return (\n    <Dialog\n      className=\"draw-card-dialog dialog-spacing-10 dialog-spacing-fluid\"\n      isOpen={dialogIsOpen}\n      onRequestClose={closeDialog}\n      requestCloseOnClickOutside={false}\n    >\n      <div className=\"dialog-content\">\n        <div className=\"dialog-body\">\n          <div className=\"dialog-label\">\n            {cardDeck.length === 0 && !currentCard && shuffleCardsText}\n            {cardDeck.length !== 0 && !currentCard && drawCardText}\n            {currentCard && <span className=\"card-name\">{cardsRules[currentCard.type].name}</span>}\n          </div>\n          <div className=\"card-area\">\n            <div\n              style={{\n                position: \"relative\",\n              }}\n            >\n              <BackCard\n                backCardRef={backCardRef}\n                currentCard={currentCard}\n                remainingCardCount={cardDeck.length}\n              />\n              <TopCard\n                topCardRef={topCardRef}\n                smallCardRef={smallCardRef}\n                currentCard={currentCard}\n              />\n            </div>\n          </div>\n        </div>\n        <div className=\"dialog-actions\">\n          <DeckButton backCardRef={backCardRef} cardDeck={cardDeck} currentCard={currentCard} />\n          {currentCard ? (\n            <StartButton\n              headerSmallCardRef={headerSmallCardRef}\n              smallCardRef={smallCardRef}\n              backCardRef={backCardRef}\n              topCardRef={topCardRef}\n              currentCard={currentCard}\n              closeDialog={closeDialog}\n            />\n          ) : null}\n        </div>\n      </div>\n    </Dialog>\n  )\n}\n\nconst BackCard = ({ backCardRef, currentCard, remainingCardCount }) => {\n  return (\n    <div ref={backCardRef} className=\"card default-card\" style={{ background: \"none\" }}>\n      <Image src={cardDefaultUrl} width=\"150\" />\n      {currentCard ? null : <div className=\"remaining-cards-number\">{remainingCardCount}</div>}\n    </div>\n  )\n}\n\nconst TopCard = ({ topCardRef, smallCardRef, currentCard }) => {\n  if (!currentCard) {\n    return null\n  }\n\n  return (\n    <>\n      <div className=\"card current-card\" ref={topCardRef}>\n        <div className=\"flip-card\">\n          <div className=\"flip-card-inner\">\n            <div className=\"flip-card-front\">\n              <Image className=\"card default-card\" src={cardDefaultUrl} />\n            </div>\n            <div className=\"flip-card-back\">\n              <Image\n                className=\"card-img\"\n                src={cardToImageUrl(currentCard)}\n                width=\"150\"\n                alt={currentCard.type}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"small-card\">\n        <SmallCard card={currentCard} ref={smallCardRef} />\n      </div>\n    </>\n  )\n}\n\nconst DeckButton = ({ backCardRef, cardDeck, currentCard }) => {\n  if (currentCard) {\n    return null\n  }\n\n  if (cardDeck.length === 0) {\n    return <ButtonShuffleDeck backCardRef={backCardRef} />\n  }\n\n  return <ButtonDrawCard />\n}\n\nconst ButtonDrawCard = () => {\n  const drawCard = useDrawCard()\n\n  return (\n    <button className=\"button-card-main button-draw-card\" onClick={drawCard}>\n      Piocher\n    </button>\n  )\n}\n\nconst ButtonShuffleDeck = ({ backCardRef }) => {\n  const animationsDisabled = useAnimationsDisabled()\n  const shuffleDeck = useShuffleDeck()\n  const [shufflePending, sufflePendingSetter] = React.useState(false)\n\n  const startShuffle = () => {\n    sufflePendingSetter(true)\n  }\n\n  React.useEffect(() => {\n    if (!shufflePending) {\n      return () => {}\n    }\n\n    shuffleDeck()\n\n    if (animationsDisabled) {\n      sufflePendingSetter(false)\n      return () => {}\n    }\n    return animateDeckShuffle({\n      backCard: backCardRef.current,\n      duration: 1000,\n      onfinish: () => {\n        sufflePendingSetter(false)\n      },\n    })\n  }, [shufflePending])\n\n  return (\n    <button className=\"button-card-main button-shuffle-deck\" onClick={startShuffle}>\n      Mélanger\n    </button>\n  )\n}\n\nconst animateDeckShuffle = ({ backCard, duration, onfinish }) => {\n  backCard.setAttribute(\"shaking-deck\", \"\")\n  const timeoutId = setTimeout(() => {\n    backCard.removeAttribute(\"shaking-deck\", \"\")\n    onfinish()\n  }, duration)\n  return () => {\n    backCard.removeAttribute(\"shaking-deck\", \"\")\n    clearTimeout(timeoutId)\n  }\n}\n\nconst StartButton = ({ headerSmallCardRef, smallCardRef, backCardRef, topCardRef }) => {\n  const animationsDisabled = useAnimationsDisabled()\n  const activateCurrentCard = useActivateCurrentCard()\n\n  const [cardActivating, cardActivatingSetter] = React.useState(false)\n\n  const start = () => {\n    if (cardActivating) {\n      return\n    }\n    cardActivatingSetter(true)\n  }\n\n  React.useEffect(() => {\n    if (!cardActivating) {\n      return () => {}\n    }\n\n    if (animationsDisabled) {\n      activateCurrentCard()\n      return () => {}\n    }\n\n    return animateCardActivation({\n      headerSmallCard: headerSmallCardRef.current,\n      smallCard: smallCardRef.current,\n      backCard: backCardRef.current,\n      topCard: topCardRef.current,\n      duration: 500,\n      onfinish: () => {\n        activateCurrentCard()\n      },\n    })\n  }, [cardActivating])\n\n  return (\n    <button\n      className=\"button-card-main button-activate-card\"\n      onClick={() => {\n        start()\n      }}\n    >\n      Commencer\n    </button>\n  )\n}\n\nconst animateCardActivation = ({\n  headerSmallCard,\n  topCard,\n  backCard,\n  smallCard,\n  duration,\n  onfinish,\n}) => {\n  backCard.style.opacity = 0\n\n  const headerSmallCardRectangle = getDomNodeRectangle(headerSmallCard)\n\n  const topCardAnimation = topCard.animate(\n    [\n      {\n        transform: \"scale(1)\",\n        opacity: 1,\n      },\n      {\n        transform: \"scale(0)\",\n        opacity: 0,\n      },\n    ],\n    {\n      duration,\n      fill: \"forwards\",\n    },\n  )\n\n  const smallCardAnimation = smallCard.animate(\n    [\n      {\n        transform: \"scale(0)\",\n        opacity: 0,\n        position: \"fixed\",\n        top: \"auto\",\n        left: \"auto\",\n      },\n      {\n        transform: \"scale(1)\",\n        opacity: 1,\n        position: \"fixed\",\n        top: `${headerSmallCardRectangle.top}.px`,\n        left: `${headerSmallCardRectangle.left}.px`,\n      },\n    ],\n    {\n      duration,\n      fill: \"forwards\",\n    },\n  )\n  smallCardAnimation.onfinish = onfinish\n\n  return () => {\n    topCardAnimation.cancel()\n    smallCardAnimation.cancel()\n  }\n}\n",
    "/* eslint-disable import/max-dependencies */\nimport React from \"react\"\n\nimport { RoundEffects } from \"src/round/round.effects.js\"\nimport { CardsEffects } from \"src/cards/cards.effects.js\"\nimport { DiceOnGoing } from \"src/dice-ongoing/DiceOnGoing.jsx\"\nimport { Chest } from \"src/chest/chest.component.jsx\"\nimport { Header } from \"src/header/Header.jsx\"\nimport { Footer } from \"src/footer/Footer.jsx\"\nimport { SkullIsland } from \"src/skull-island/SkullIsland.jsx\"\nimport { DiceContainer } from \"src/dices/DiceContainer.jsx\"\nimport { useSignal } from \"src/helper/signal.js\"\nimport { DrawCardDialog } from \"src/footer/DrawCardDialog.jsx\"\nimport { useCurrentCardActivated } from \"src/main.store.js\"\n\nexport const Round = ({ openScoreboard, onRoundStart, onRoundOver }) => {\n  const currentCardActivated = useCurrentCardActivated()\n\n  const [roundMounted, roundMountedSetter] = React.useState(false)\n\n  React.useEffect(() => {\n    onRoundStart()\n  }, [])\n\n  const [diceOverRolledAreaListener, diceOverRolledAreaEmitter] = useSignal()\n  const [diceOverChestListener, diceOverChestEmitter] = useSignal()\n\n  const headerSmallCardRef = React.useRef()\n\n  return (\n    <div className=\"round-container\">\n      <CardsEffects />\n      <Header openScoreboard={openScoreboard} headerSmallCardRef={headerSmallCardRef} />\n      {currentCardActivated ? (\n        <RoundGameBoard\n          diceOverRolledAreaListener={diceOverRolledAreaListener}\n          diceOverChestListener={diceOverChestListener}\n          openScoreboard={openScoreboard}\n          onRoundOver={onRoundOver}\n          onRoundMounted={(refs) => {\n            roundMountedSetter(refs)\n          }}\n        />\n      ) : null}\n      {roundMounted ? (\n        <DiceContainer\n          offscreenDomNode={roundMounted.offscreenDomNode}\n          chestDomNode={roundMounted.chestDomNode}\n          rolledAreaDomNode={roundMounted.rolledAreaDomNode}\n          cursedAreaDomNode={roundMounted.cursedAreaDomNode}\n          onDiceOverChestChange={diceOverChestEmitter}\n          onDiceOverRolledAreaChange={diceOverRolledAreaEmitter}\n        />\n      ) : null}\n      <DrawCardDialog\n        dialogIsOpen={!currentCardActivated}\n        headerSmallCardRef={headerSmallCardRef}\n      />\n    </div>\n  )\n}\n\nconst RoundGameBoard = ({\n  diceOverRolledAreaListener,\n  diceOverChestListener,\n  onRoundMounted,\n  onRoundOver,\n}) => {\n  const rolledAreaRef = React.useRef(null)\n  const chestRef = React.useRef(null)\n  const cursedAreaRef = React.useRef(null)\n  const offscreenRef = React.useRef(null)\n\n  React.useEffect(() => {\n    onRoundMounted({\n      rolledAreaDomNode: rolledAreaRef.current,\n      chestDomNode: chestRef.current,\n      cursedAreaDomNode: cursedAreaRef.current,\n      offscreenDomNode: offscreenRef.current,\n    })\n  }, [])\n\n  return (\n    <>\n      <RoundEffects />\n      <div className=\"chest-and-skulls\">\n        <Chest chestRef={chestRef} diceOverChestListener={diceOverChestListener} />\n        <SkullIsland cursedAreaRef={cursedAreaRef} />\n      </div>\n      <DiceOnGoing\n        rolledAreaRef={rolledAreaRef}\n        offscreenRef={offscreenRef}\n        diceOverRolledAreaListener={diceOverRolledAreaListener}\n      />\n      <Footer onRoundOver={onRoundOver} rolledAreaRef={rolledAreaRef} />\n    </>\n  )\n}\n",
    "import React from \"react\"\nimport { Image } from \"src/generic/Image.jsx\"\nimport { useStartPlayerRound } from \"src/round/round.actions.js\"\nimport { Dialog } from \"src/dialog/dialog.component.jsx\"\n\nexport const StartPlayerRoundDialog = ({ closeDialog, dialogIsOpen, player }) => {\n  const startPlayerRound = useStartPlayerRound()\n  return (\n    <Dialog\n      className=\"score-board-dialog dialog-spacing-10 dialog-spacing-fluid\"\n      isOpen={dialogIsOpen}\n      onRequestClose={closeDialog}\n      requestCloseOnClickOutside={true}\n    >\n      <div className=\"dialog-content\">\n        <div className=\"cross\" onClick={closeDialog}>\n          X\n        </div>\n        <div className=\"dialog-body\">\n          <div>\n            Au tour de\n            <div className=\"dialog-label\">{player.character.name}</div>\n            <Image\n              className=\"player-img\"\n              src={player && player.character.img}\n              alt=\"player\"\n              style={{\n                boxShadow: `inset 0px 0px 0px 4px ${(player && player.character.color) || \"black\"}`,\n              }}\n            />\n          </div>\n          <div className=\"dialog-actions\">\n            <button\n              onClick={() => {\n                closeDialog()\n                startPlayerRound(player)\n              }}\n            >\n              Jouer\n            </button>\n          </div>\n        </div>\n      </div>\n    </Dialog>\n  )\n}\n",
    "export default import.meta.ROLLUP_FILE_URL_f239148c",
    "import React from \"react\"\nimport { Image } from \"src/generic/Image.jsx\"\nimport { usePlayers, useRoundStarted } from \"src/main.store.js\"\nimport { useCurrentPlayer } from \"src/round/round.selectors.js\"\nimport { StartPlayerRoundDialog } from \"src/score-board/StartPlayerRoundDialog.jsx\"\nimport winTreasureUrl from \"src/score-board/win-treasure.png\"\n\nconst SCORE_MAX = 6000\n\nconst pathList = {\n  path1:\n    \"M39.582,739.564c0-91.824,39.191-96.32,38.045-166.691s-30.042-70.37-47.326-161.729s38.128-86.388,31.276-186.42C55.405,134.602-3.014,89.176,8.812,129.825c5.333,18.333,30.77-21,30.77-129.825\",\n  path2:\n    \"M39.582,739.564c0-113.074-5.437-166.074-8.437-198.074s36-20.667,33.019-2c-1.796,11.248-24.583,13.333-23.699-22c1.229-49.158,22.68-111,23.68-169s-38-95-46-181S39.582,0,39.582,0\",\n  path3:\n    \"M39.582,739.564c0-71.926-15.437-155.074-17.437-253.074s30-185,31.087-217s-31.087-46-31.087-26s33,10,31-32s-31-110-31-144S39.582,0,39.582,0\",\n  path4:\n    \"M39.582,739.564c0-113.074-5.437-166.074-8.437-198.074s36-20.667,33.019-2c-1.796,11.248-24.583,13.333-23.699-22c1.229-49.158,22.68-111,23.68-169s-38-95-46-181S39.582,0,39.582,0\",\n}\n\nexport const ScoreBoard = ({ openedByUser, closeScoreboard, playerAnimation }) => {\n  const players = usePlayers()\n  const currentPlayer = useCurrentPlayer()\n  const roundStarted = useRoundStarted()\n\n  // dialogue StartPlayerRoundDialog\n  const [startPlayerRoundDialogIsOpen, startPlayerRoundDialogIsOpenSetter] = React.useState(false)\n  const openStartPlayerRoundDialog = () => {\n    startPlayerRoundDialogIsOpenSetter(true)\n  }\n  const closeStartPlayerRoundDialog = () => {\n    startPlayerRoundDialogIsOpenSetter(false)\n  }\n\n  const nextPlayer = getNextPlayer()\n\n  return (\n    <div className=\"score-board-container\">\n      {openedByUser && (\n        <div className=\"cross\" onClick={closeScoreboard}>\n          X\n        </div>\n      )}\n      {!roundStarted && !currentPlayer && (\n        <div className=\"action-container\">\n          <button\n            className=\"score-board-action\"\n            onClick={() => {\n              openStartPlayerRoundDialog()\n            }}\n          >\n            Commencer à jouer\n          </button>\n        </div>\n      )}\n      <Image className=\"win-treasure-img\" src={winTreasureUrl} alt=\"win-treasure\" />\n      <div className=\"users-path\">\n        {players.map((player) => (\n          <PlayerPath\n            key={player.id}\n            player={player}\n            pathCoordinates={pathList[`path${player.id}`]}\n            score={player.score}\n            character={player.character}\n            openStartPlayerRoundDialog={openStartPlayerRoundDialog}\n            isCurrentPlayer={currentPlayer && player.id === currentPlayer.id}\n            playerAnimation={playerAnimation}\n          />\n        ))}\n      </div>\n      <StartPlayerRoundDialog\n        dialogIsOpen={startPlayerRoundDialogIsOpen}\n        closeDialog={closeStartPlayerRoundDialog}\n        player={nextPlayer}\n      />\n    </div>\n  )\n}\n\nconst getNextPlayer = () => {\n  const currentPlayer = useCurrentPlayer()\n  const players = usePlayers()\n\n  let nextPlayer\n  if (currentPlayer) {\n    const currentPlayerIndex = players.findIndex((player) => player.id === currentPlayer.id)\n    nextPlayer =\n      currentPlayerIndex === players.length - 1 ? players[0] : players[currentPlayerIndex + 1]\n  } else {\n    nextPlayer = players[0]\n  }\n  return nextPlayer\n}\n\nconst PlayerPath = ({\n  pathCoordinates,\n  player,\n  character,\n  score,\n  openStartPlayerRoundDialog,\n  playerAnimation,\n}) => {\n  const pathForegroundElementRef = React.useRef(null)\n  const circleElementRef = React.useRef(null)\n  const nextPlayer = getNextPlayer()\n\n  const [scoreAnimation, scoreAnimationSetter] = React.useState()\n\n  React.useEffect(() => {\n    if (playerAnimation && playerAnimation.player === player) {\n      scoreAnimationSetter(playerAnimation.score)\n    } else {\n      scoreAnimationSetter(null)\n    }\n  }, [playerAnimation, player])\n\n  React.useEffect(() => {\n    if (!scoreAnimation) return () => {}\n\n    const { from, to } = scoreAnimation\n    const pathForegroundElement = pathForegroundElementRef.current\n    const pathLength = pathForegroundElement.getTotalLength()\n    const pathForegroundAnimation = pathForegroundElement.animate(\n      [\n        { strokeDashoffset: ratioToStrokeDashOffset(from / SCORE_MAX, pathLength) },\n        { strokeDashoffset: ratioToStrokeDashOffset(to / SCORE_MAX, pathLength) },\n      ],\n      {\n        duration: 1000,\n        fill: \"forwards\",\n      },\n    )\n    const circleElement = circleElementRef.current\n    const circleAnimation = circleElement.animate(\n      [\n        { offsetDistance: ratioToOffsetDistance(from / SCORE_MAX) },\n        { offsetDistance: ratioToOffsetDistance(to / SCORE_MAX) },\n      ],\n      {\n        duration: 1000,\n        fill: \"forwards\",\n      },\n    )\n\n    pathForegroundAnimation.onfinish = () => {\n      if (circleAnimation.playState === \"finished\") scoreAnimationSetter(null)\n    }\n    circleAnimation.onfinish = () => {\n      if (pathForegroundAnimation.playState === \"finished\") scoreAnimationSetter(null)\n    }\n\n    return () => {\n      pathForegroundAnimation.cancel()\n      circleAnimation.cancel()\n    }\n  }, [scoreAnimation])\n\n  // uncomment to test score animation\n  // React.useEffect(() => {\n  //   scoreAnimationSetter({\n  //     from: 0,\n  //     to: -1000,\n  //   })\n  // }, [])\n\n  React.useEffect(() => {\n    // path-foreground line fill\n    const pathForegroundElement = pathForegroundElementRef.current\n    const pathLength = pathForegroundElement.getTotalLength()\n    pathForegroundElement.style.strokeDasharray = pathLength\n    pathForegroundElement.style.strokeDashoffset = ratioToStrokeDashOffset(\n      score / SCORE_MAX,\n      pathLength,\n    )\n  }, [score])\n\n  return (\n    <div className=\"user-path\">\n      <svg viewBox=\"0 0 79.164 739.564\">\n        <path d={pathCoordinates} className=\"path-background\" />\n        <path ref={pathForegroundElementRef} d={pathCoordinates} className=\"path-foreground\" />\n        <circle\n          ref={circleElementRef}\n          r=\"13\"\n          fill={character.color || \"white\"}\n          className=\"score-indicator\"\n          style={{\n            offsetPath: `path('${pathCoordinates}')`,\n            offsetDistance: ratioToOffsetDistance(score / SCORE_MAX),\n          }}\n        />\n      </svg>\n      <div className=\"speech-bubble\">{score}</div>\n      <div\n        className={`user-avatar ${nextPlayer.character.id === character.id ? \"next-player\" : \"\"}`}\n        onClick={() => {\n          if (nextPlayer.character.id === character.id) openStartPlayerRoundDialog()\n        }}\n      >\n        <Avatar character={character} />\n      </div>\n    </div>\n  )\n}\n\nconst ratioToOffsetDistance = (ratio) => `${ratio * 100}%`\n\nconst ratioToStrokeDashOffset = (ratio, pathLength) => pathLength - ratio * pathLength\n\nconst Avatar = ({ character }) => (\n  <Image\n    className=\"player-img\"\n    src={character.img}\n    alt=\"player\"\n    style={{\n      boxShadow: `inset 0px 0px 0px 4px ${character.color || \"black\"}`,\n    }}\n  />\n)\n",
    "import React from \"react\"\nimport { createAction } from \"src/main.store.js\"\n\nexport const GameConfiguration = () => {\n  const setPlayerCount = useSetPlayerCount()\n\n  return (\n    <div>\n      <p>Combien de joueur?</p>\n      {[1, 2, 3, 4, 5].map((playerCount) => {\n        return (\n          <button\n            key={playerCount}\n            onClick={() => {\n              setPlayerCount(playerCount)\n            }}\n          >\n            {playerCount === 1 ? \"1 joueur\" : `${playerCount} joueurs`}\n          </button>\n        )\n      })}\n    </div>\n  )\n}\n\nconst useSetPlayerCount = createAction((state, playerCount) => {\n  return {\n    ...state,\n    players: new Array(playerCount).fill(\"\").map((_, index) => {\n      return {\n        id: index + 1,\n        number: index + 1,\n        score: 0,\n      }\n    }),\n  }\n})\n",
    "import luffyUrl from \"./Luffy.png\"\nimport missFortuneUrl from \"./MissFortune.png\"\nimport jackSparrowUrl from \"./JackSparrow.png\"\nimport barbeRougeUrl from \"./BarbeRouge.png\"\nimport ginetteBouletteUrl from \"./GinetteBoulette.png\"\nimport capitaineCrochetUrl from \"./CapitaineCrochet.png\"\n\nexport const createPlayers = (characters) => {\n  return characters.map((character, index) => {\n    return {\n      id: index + 1,\n      character,\n      score: 0,\n    }\n  })\n}\n\nexport const CHARACTERS = [\n  { id: 1, name: \"Luffy\", color: \"#ef9620\", img: luffyUrl },\n  { id: 2, name: \"Miss Fortune\", color: \"#d90f1b\", img: missFortuneUrl },\n  { id: 3, name: \"Jack Sparrow\", color: \"#007033\", img: jackSparrowUrl },\n  { id: 4, name: \"Barbe Rouge\", color: \"#7baac9\", img: barbeRougeUrl },\n  { id: 5, name: \"Ginette Boulette\", color: \"#e2500c\", img: ginetteBouletteUrl },\n  { id: 6, name: \"Capitaine Crochet\", color: \"#952460\", img: capitaineCrochetUrl },\n]\n",
    "export default import.meta.ROLLUP_FILE_URL_8e778af1",
    "export default import.meta.ROLLUP_FILE_URL_714c25d7",
    "export default import.meta.ROLLUP_FILE_URL_461d5847",
    "export default import.meta.ROLLUP_FILE_URL_15bab1c5",
    "export default import.meta.ROLLUP_FILE_URL_8dcd6913",
    "export default import.meta.ROLLUP_FILE_URL_cec052af",
    "import React from \"react\"\nimport { CHARACTERS } from \"src/players/players.main.js\"\nimport { Image } from \"src/generic/Image.jsx\"\nimport { usePlayers, createAction } from \"src/main.store.js\"\nimport { mixDeck, cardToSmallImageUrl, CARD_TWO_SWORDS_CHALLENGE } from \"src/cards/cards.js\"\nimport { startJavaScriptAnimation } from \"src/animation/startJavaScriptAnimation.js\"\n\nexport const CharacterSelection = ({ players }) => {\n  const setPlayerCharacter = useSetPlayerCharacter()\n  const startGame = useStartGame()\n  const playerWithoutCharacter = players.find((player) => !player.character)\n  scrollEffect()\n\n  React.useEffect(() => {\n    scrollEffect()\n  }, [])\n\n  return (\n    <div className=\"character-selection-page\">\n      <CrewMembers />\n      {playerWithoutCharacter && (\n        <>\n          <p>Joueur {playerWithoutCharacter.number} : quel pirate êtes vous ?</p>\n          <div className=\"characters-container\" id=\"menu-wrapper\">\n            <div className=\"characters menu\">\n              {CHARACTERS.map((character) => {\n                return (\n                  <div\n                    className={`character item ${\n                      characterIsAvailable(character, players) ? \"\" : \"disabled\"\n                    }`}\n                    key={character.id}\n                    onClick={(event) => {\n                      event.target.animate(\n                        [\n                          { transform: \"scale(1)\" },\n                          { transform: \"scale(1.3)\" },\n                          { transform: \"scale(1)\" },\n                        ],\n                        {\n                          duration: 400,\n                          fill: \"forwards\",\n                        },\n                      )\n                      setPlayerCharacter(playerWithoutCharacter, character)\n                    }}\n                  >\n                    <Image\n                      className=\"character-img\"\n                      src={character && character.img}\n                      alt=\"player\"\n                      style={{\n                        border: `4px solid ${(character && character.color) || \"black\"}`,\n                      }}\n                    />\n                    <span>{character.name}</span>\n                  </div>\n                )\n              })}\n            </div>\n            <div className=\"paddles\">\n              <button className=\"left-paddle paddle hidden\">{\"<\"}</button>\n              <button\n                className=\"right-paddle paddle\"\n                onClick={() => {\n                  scrollEffect()\n                }}\n              >\n                {\">\"}\n              </button>\n            </div>\n          </div>\n        </>\n      )}\n\n      {!playerWithoutCharacter && (\n        <div className=\"crew-completed\">\n          <p>L&lsquo;équipage est au complet !</p>\n          <Image src={cardToSmallImageUrl({ type: CARD_TWO_SWORDS_CHALLENGE })} />\n          <button\n            onClick={() => {\n              startGame()\n            }}\n          >\n            Démarrer la partie\n          </button>\n        </div>\n      )}\n    </div>\n  )\n}\n\nconst CrewMembers = () => {\n  const players = usePlayers()\n\n  return (\n    <div className={`crew ${players.length > 3 ? \"large-crew\" : \"\"}`}>\n      <p>Votre équipage:</p>\n      <ul>\n        {players.map((player) => {\n          return (\n            <li key={player.id}>\n              {player.character ? (\n                <Image\n                  className=\"crew-member-img\"\n                  src={player.character && player.character.img}\n                  alt=\"player\"\n                  style={{\n                    border: `4px solid ${(player.character && player.character.color) || \"black\"}`,\n                  }}\n                />\n              ) : (\n                <div className=\"placeholder-img\"></div>\n              )}\n              <span>{player.character ? player.character.name : `Joueur${player.number}`}</span>\n            </li>\n          )\n        })}\n      </ul>\n    </div>\n  )\n}\n\nconst useStartGame = createAction((state) => {\n  const { cardIds } = state\n  return {\n    ...state,\n    gameStarted: true,\n    cardIds: mixDeck(cardIds),\n  }\n})\n\nconst characterIsAvailable = (character, players) => {\n  return !players.some((player) => player.character && player.character.name === character.name)\n}\n\nconst useSetPlayerCharacter = createAction((state, player, character) => {\n  const { players } = state\n  player.character = character\n  return {\n    ...state,\n    players: [...players],\n  }\n})\n\nconst scrollEffect = () => {\n  var scrollDuration = 300\n  var itemsLength = document.getElementsByClassName(\"item\").length\n  var itemSize = 123\n\n  var getMenuWrapperSize = function () {\n    return document.getElementById(\"menu-wrapper\")\n      ? document.getElementById(\"menu-wrapper\").offsetWidth\n      : null\n  }\n  var menuWrapperSize = getMenuWrapperSize()\n  var getMenuSize = function () {\n    return itemsLength * itemSize\n  }\n  var menuSize = getMenuSize()\n  window.onresize = () => {\n    menuWrapperSize = getMenuWrapperSize()\n  }\n  var menuVisibleSize = menuWrapperSize\n  var menuInvisibleSize = menuSize - menuVisibleSize\n\n  var getMenuPosition = function () {\n    return document.querySelector(\".menu\").scrollLeft\n  }\n  var leftPaddle = document.querySelector(\".left-paddle\")\n  var rightPaddle = document.querySelector(\".right-paddle\")\n\n  if (document.querySelector(\".menu\")) {\n    document.querySelector(\".menu\").onscroll = () => {\n      menuInvisibleSize = menuSize - menuWrapperSize\n      var menuPosition = getMenuPosition()\n      var menuEndOffset = menuInvisibleSize\n\n      if (menuPosition <= 0) {\n        leftPaddle.classList.add(\"hidden\")\n        rightPaddle.classList.remove(\"hidden\")\n      } else if (menuPosition < menuEndOffset) {\n        // show both paddles in the middle\n        leftPaddle.classList.remove(\"hidden\")\n        rightPaddle.classList.remove(\"hidden\")\n      } else if (menuPosition >= menuEndOffset) {\n        leftPaddle.classList.remove(\"hidden\")\n        rightPaddle.classList.add(\"hidden\")\n      }\n    }\n  }\n\n  if (rightPaddle) {\n    rightPaddle.onclick = () => {\n      if (document.querySelector(\".menu\")) {\n        const scrollStart = document.querySelector(\".menu\").scrollLeft\n        const scrollEnd = scrollStart + menuWrapperSize\n        startJavaScriptAnimation({\n          duration: scrollDuration,\n          onProgress: ({ progress }) => {\n            document.querySelector(\".menu\").scrollLeft =\n              scrollStart + (scrollEnd - scrollStart) * progress\n          },\n        })\n      }\n    }\n  }\n\n  if (leftPaddle) {\n    leftPaddle.onclick = () => {\n      if (document.querySelector(\".menu\")) {\n        const scrollStart = document.querySelector(\".menu\").scrollLeft\n        const scrollEnd = scrollStart - menuWrapperSize\n        startJavaScriptAnimation({\n          duration: scrollDuration,\n          onProgress: ({ progress }) => {\n            document.querySelector(\".menu\").scrollLeft =\n              scrollStart + (scrollEnd - scrollStart) * progress\n          },\n        })\n      }\n    }\n  }\n}\n",
    "import React from \"react\"\nimport { usePlayers, useGameStarted, useRoundStarted, useCurrentPlayerId } from \"src/main.store.js\"\nimport { Round } from \"src/round/Round.jsx\"\nimport { ScoreBoard } from \"src/score-board/ScoreBoard.jsx\"\nimport { GameConfiguration } from \"src/game/GameConfiguration.jsx\"\nimport { CharacterSelection } from \"src/game/CharacterSelection.jsx\"\n\nexport const Game = ({ playerAnimationListener }) => {\n  const players = usePlayers()\n  const currentPlayerId = useCurrentPlayerId()\n  const roundStarted = useRoundStarted()\n  const isOnGameConfigurationScreen = useIsOnGameConfigurationScreen()\n  const isOnCharacterSelectionScreen = useIsOnCharacterSelectionScreen()\n\n  const [scoreboardOpenedByUser, scoreboardOpenedByUserSetter] = React.useState(false)\n  const [roundOverPayload, roundOverPayloadSetter] = React.useState(null)\n  const [playerAnimation, playerAnimationSetter] = React.useState(null)\n\n  const isOnScoreboardScreen = !roundStarted || scoreboardOpenedByUser\n\n  React.useEffect(() => {\n    if (roundOverPayload && roundOverPayload.reason === \"score-marked\") {\n      const player = players.find((player) => player.id === currentPlayerId)\n      const roundScore = roundOverPayload.value\n      const fromScore = player.score - roundScore\n      playerAnimationSetter({\n        player,\n        score: {\n          from: fromScore < 0 ? 0 : fromScore,\n          to: player.score,\n        },\n      })\n    } else {\n      playerAnimationSetter(null)\n    }\n  }, [roundOverPayload, currentPlayerId])\n  React.useEffect(() => {\n    if (playerAnimationListener) {\n      return playerAnimationListener(playerAnimationSetter)\n    }\n    return undefined\n  }, [playerAnimationListener])\n\n  if (isOnGameConfigurationScreen) {\n    return <GameConfiguration />\n  }\n\n  if (isOnCharacterSelectionScreen) {\n    return <CharacterSelection players={players} />\n  }\n\n  if (isOnScoreboardScreen) {\n    return (\n      <ScoreBoard\n        openedByUser={scoreboardOpenedByUser}\n        closeScoreboard={() => {\n          scoreboardOpenedByUserSetter(false)\n        }}\n        playerAnimation={playerAnimation}\n      />\n    )\n  }\n\n  return (\n    <Round\n      openScoreboard={() => {\n        scoreboardOpenedByUserSetter(true)\n      }}\n      onRoundStart={() => {\n        roundOverPayloadSetter(null)\n      }}\n      onRoundOver={(roundOverPayload) => {\n        roundOverPayloadSetter(roundOverPayload)\n      }}\n    />\n  )\n}\n\nexport const useIsOnGameConfigurationScreen = () => {\n  const players = usePlayers()\n  const needsToChooseNumberOfPlayers = players.length === 0\n  return needsToChooseNumberOfPlayers\n}\n\nexport const useIsOnCharacterSelectionScreen = () => {\n  const gameStarted = useGameStarted()\n  return !gameStarted\n}\n",
    "import { createAction } from \"src/main.store.js\"\n\nexport const useDisableAnimations = createAction((state) => {\n  return {\n    ...state,\n    animationsDisabled: true,\n  }\n})\n\nexport const useEnableAnimations = createAction((state) => {\n  return {\n    ...state,\n    animationsDisabled: false,\n  }\n})\n",
    "export default import.meta.ROLLUP_FILE_URL_0f8d4cc6",
    "import React from \"react\"\nimport { Stylesheet } from \"src/generic/Stylesheet.jsx\"\nimport { Dialog } from \"src/dialog/dialog.component.jsx\"\nimport { useAnimationsDisabled } from \"src/main.store.js\"\nimport { useDisableAnimations, useEnableAnimations } from \"src/main.actions.js\"\n\nimport settingsCssUrl from \"./settings.css\"\n\nexport const Settings = () => {\n  const [settingsDialogIsOpen, settingsDialogIsOpenSetter] = React.useState(false)\n  const openSettingsDialog = () => {\n    settingsDialogIsOpenSetter(true)\n  }\n\n  const closeSettingsDialog = () => {\n    settingsDialogIsOpenSetter(false)\n  }\n\n  return (\n    <>\n      <Stylesheet href={settingsCssUrl} />\n      <div\n        id=\"settings\"\n        onClick={() => {\n          openSettingsDialog()\n        }}\n      >\n        <svg className=\"settings-icon\" viewBox=\"0 0 24 24\">\n          <path d=\"M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z\" />\n        </svg>\n      </div>\n      <SettingsDialog\n        settingsDialogIsOpen={settingsDialogIsOpen}\n        closeSettingsDialog={closeSettingsDialog}\n      />\n    </>\n  )\n}\n\nconst SettingsDialog = ({ settingsDialogIsOpen, closeSettingsDialog }) => {\n  const animationsDisabled = useAnimationsDisabled()\n  const disableAnimations = useDisableAnimations()\n  const enableAnimations = useEnableAnimations()\n\n  return (\n    <Dialog\n      className=\"dialog-spacing-10 dialog-spacing-fluid dialog-spacing-top-fixed\"\n      isOpen={settingsDialogIsOpen}\n      onRequestClose={closeSettingsDialog}\n      requestCloseOnClickOutside={true}\n    >\n      <div className=\"settings-dialog-content\">\n        <label>\n          <input\n            type=\"checkbox\"\n            checked={animationsDisabled}\n            onChange={(e) => {\n              if (e.target.checked) {\n                disableAnimations()\n              } else {\n                enableAnimations()\n              }\n            }}\n          />\n          Désactiver les animations\n        </label>\n      </div>\n    </Dialog>\n  )\n}\n",
    "export default import.meta.ROLLUP_FILE_URL_8cad2148",
    "import React from \"react\"\nimport { useGameCreated } from \"src/main.store.js\"\nimport { useMainDomNodeSetter } from \"src/dom/dom.main.js\"\nimport { Home } from \"src/home/Home.jsx\"\nimport { Game } from \"src/game/Game.jsx\"\nimport { Stylesheet } from \"src/generic/Stylesheet.jsx\"\nimport { Settings } from \"src/settings/settings.component.js\"\n\nimport milleSabordsCssUrl from \"../mille-sabord.css\"\n\nexport const App = (props) => {\n  return (\n    <div id=\"main-container\">\n      <div id=\"main\" ref={useMainDomNodeSetter()}>\n        <Stylesheet href={milleSabordsCssUrl} />\n        <Settings />\n        <AppBody {...props} />\n      </div>\n    </div>\n  )\n}\n\nconst AppBody = (props) => {\n  const gameCreated = useGameCreated()\n\n  if (gameCreated) {\n    return <Game {...props} />\n  }\n\n  return <Home {...props} />\n}\n"
  ],
  "names": [
    "Home",
    "React",
    "ButtonNewGame",
    "createNewGame",
    "useCreateNewGame",
    "className",
    "Image",
    "src",
    "symbolSwordUrl",
    "onClick",
    "createAction",
    "state",
    "gameCreated",
    "useUpdateEffect",
    "effect",
    "dependencies",
    "layout",
    "isInitialMount",
    "useRef",
    "useLayoutEffect",
    "useEffect",
    "current",
    "useBecomes",
    "becomesPredicate",
    "deps",
    "transition",
    "useTransition",
    "Boolean",
    "transitionPredicate",
    "mountedRef",
    "depsRef",
    "from",
    "to",
    "usePrevious",
    "value",
    "ref",
    "useSignal",
    "useState",
    "listeners",
    "listen",
    "callback",
    "once",
    "callbackOriginal",
    "stopListening",
    "removed",
    "listenersWithoutCallback",
    "i",
    "length",
    "searching",
    "listenerCandidate",
    "push",
    "emit",
    "args",
    "forEach",
    "listener",
    "signal",
    "useSignalState",
    "stateSetter",
    "startJavaScriptAnimation",
    "duration",
    "timingFunction",
    "t",
    "onProgress",
    "onCancel",
    "onComplete",
    "isNaN",
    "console",
    "warn",
    "parseInt",
    "currentRequestAnimationFrameId",
    "startMs",
    "performance",
    "now",
    "done",
    "rawProgress",
    "progress",
    "handler",
    "nowMs",
    "Math",
    "min",
    "window",
    "requestAnimationFrame",
    "cancelAnimationFrame",
    "useAnimateTransitionUsingJs",
    "condition",
    "animatedValue",
    "animatedValueSetter",
    "useAnimateTransition",
    "round",
    "animate",
    "transitionSetter",
    "valuePrevious",
    "ValueWithAnimatedTransition",
    "findFirstDescendant",
    "rootNode",
    "fn",
    "iterator",
    "createNextNodeIterator",
    "next",
    "node",
    "getNextNode",
    "skipChild",
    "firstChild",
    "nextSibling",
    "parentNode",
    "nextNode",
    "createAfterNodeIterator",
    "fromNode",
    "skipChildren",
    "childrenSkipped",
    "getDeepestNode",
    "deepestNode",
    "lastChild",
    "createPreviousNodeIterator",
    "previousNode",
    "previousSibling",
    "getPreviousNode",
    "firstFocusableDescendantOrSelf",
    "element",
    "firstFocusableDescendant",
    "isFocusable",
    "trapFocusInside",
    "nodeType",
    "activeTraps",
    "find",
    "activeTrap",
    "getFirstTabbable",
    "isDiscoverableWithKeyboard",
    "getLastTabbable",
    "findLastDescendant",
    "getPreviousTabbableOrLast",
    "root",
    "predicate",
    "findBefore",
    "document",
    "activeElement",
    "getNextTabbableOrFirst",
    "findAfter",
    "deactivate",
    "activate",
    "lock",
    "onmousedown",
    "event",
    "target",
    "contains",
    "isEventOutside",
    "preventDefault",
    "stopImmediatePropagation",
    "onkeydown",
    "isTabEvent",
    "activeElementIsBody",
    "body",
    "shiftKey",
    "elementToFocus",
    "focus",
    "performTabEventNavigation",
    "addEventListener",
    "capture",
    "passive",
    "removeEventListener",
    "hasAttribute",
    "Number",
    "getAttribute",
    "hasNegativeTabIndex",
    "key",
    "keyCode",
    "previousTrap",
    "unlock",
    "trap",
    "lastTrap",
    "pop",
    "getAllScrollableParent",
    "scrollableParents",
    "visitElement",
    "elementOrScrollableParent",
    "scrollableParent",
    "getScrollableParent",
    "arg",
    "_typeof",
    "TypeError",
    "documentElement",
    "getStyleValue",
    "getScrollingElement",
    "ownerDocument",
    "findScrollableParent",
    "scrollingElement",
    "isCompliant",
    "possiblyScrollingElement",
    "test",
    "tagName",
    "getNextBodyElement",
    "bodyIsScrollable",
    "frameset",
    "isBodyElement",
    "isScrollable",
    "isHidden",
    "display",
    "compatMode",
    "testScrollCompliance",
    "iframe",
    "createElement",
    "style",
    "height",
    "appendChild",
    "iframeDocument",
    "contentWindow",
    "write",
    "close",
    "scrollComplianceResult",
    "scrollHeight",
    "removeChild",
    "verticalOverflowIsVisible",
    "horizontalOverflowIsVisible",
    "position",
    "parent",
    "isDocumentElement",
    "System",
    "DialogBase",
    "container",
    "insertTop",
    "insertLeft",
    "insertRight",
    "insertBottom",
    "children",
    "isOpen",
    "requestCloseOnEscape",
    "requestCloseOnClickOutside",
    "closeMethod",
    "stealFocus",
    "restoreStolenFocus",
    "trapFocus",
    "onAfterOpen",
    "onRequestClose",
    "onFocusIn",
    "onFocusOut",
    "backdropProps",
    "rest",
    "dialogRootNode",
    "dialogRootNodeSetter",
    "isInsideDocument",
    "isOpenPrevious",
    "focusIsInsideDialog",
    "hasOrContainsFocus",
    "onDocumentBlur",
    "blurEvent",
    "relatedTarget",
    "onDialogFocus",
    "focusEvent",
    "onDocumentFocus",
    "elementsToScrollLock",
    "previous",
    "cleanUpArray",
    "map",
    "prev",
    "overflow",
    "removeProperty",
    "cleanup",
    "trapScrollInside",
    "nodeFocusedBeforeTransfer",
    "firstFocusableElement",
    "preventScroll",
    "elementsToHide",
    "Array",
    "child",
    "setAttribute",
    "removeAttribute",
    "ReactDOM",
    "createPortal",
    "role",
    "onKeyDown",
    "keydownEvent",
    "ESC_KEY",
    "tabIndex",
    "visibility",
    "hidden",
    "undefined",
    "Stylesheet",
    "href",
    "dialogBaseCssUrl",
    "DialogBackDrop",
    "onMouseDownActive",
    "mousedownEvent",
    "clickEvent",
    "props",
    "backdropElement",
    "setBackdropElement",
    "Dialog",
    "dialogCssUrl",
    "useMainDomNode",
    "computeRoundScore",
    "card",
    "symbolsInChest",
    "scoreMarked",
    "markScoreAllowed",
    "isSwordChallengeCard",
    "computeScoreForSwordChallenge",
    "goal",
    "numberOfSwords",
    "gamble",
    "gambleAmount",
    "isAnimalsCard",
    "computeScoreForSymbols",
    "symbol",
    "SYMBOL_PARROT",
    "SYMBOL_MONKEY",
    "isPirateCard",
    "isCoinCard",
    "isDiamondCard",
    "symbols",
    "countSymbol",
    "SYMBOL_SWORD",
    "symbolArray",
    "filter",
    "symbolCandidate",
    "perfectCount",
    "getScoreAndPerfectBonus",
    "score",
    "perfectBonus",
    "usefullSymbol",
    "symbolCountMap",
    "countSymbolsOccurences",
    "Object",
    "values",
    "symbolCount",
    "SYMBOL_DIAMOND",
    "SYMBOL_COIN",
    "hasOwnProperty",
    "useSwordQuantityRequired",
    "currentCardId",
    "useCurrentCardId",
    "cardIdToCard",
    "SwordChallengeIndicator",
    "useSymbolsInChest",
    "quantityRequired",
    "currentCard",
    "quantityKept",
    "quantityRequiredArray",
    "fill",
    "index",
    "SwordIconActivated",
    "SwordIconDisabled",
    "swordsDisabledImageUrl",
    "StarRain",
    "id",
    "Star",
    "viewBox",
    "d",
    "DialogWood",
    "title",
    "RoundScoreRulesDialog",
    "dialogIsOpen",
    "closeDialog",
    "symbolCoinUrl",
    "symbolDiamondUrl",
    "rotatePoint",
    "origin",
    "point",
    "degrees",
    "radians",
    "degreesToRadians",
    "cosinus",
    "cos",
    "sinus",
    "sin",
    "run",
    "x",
    "rise",
    "y",
    "getRectangleCenterPoint",
    "topLeft",
    "topRight",
    "bottomRight",
    "bottomLeft",
    "PI",
    "lineCollidesWithRectangle",
    "line",
    "rectangle",
    "someRectangleSideLine",
    "rectangleSideLine",
    "firstLineStartPoint",
    "firstLineEndPoint",
    "secondLineStartPoint",
    "secondLineEndPoint",
    "unknownA",
    "unknownB",
    "denominator",
    "firstPoint",
    "secondPoint",
    "thirdPoint",
    "fourthPoint",
    "rectangleInsideOf",
    "parentRectangle",
    "left",
    "right",
    "width",
    "top",
    "bottom",
    "getDistanceBetweenRectangles",
    "firstRectangle",
    "secondRectangle",
    "horizontalDiff",
    "verticalDiff",
    "firstRectangleCenterPoint",
    "secondRectangleCenterPoint",
    "sqrt",
    "getDomNodeRectangle",
    "domNode",
    "domNodeRect",
    "getBoundingClientRect",
    "documentScroll",
    "getDocumentScroll",
    "floor",
    "domNodeCollidesWithRectangle",
    "domNodeRectangle",
    "findDomNodeClosestToRectangle",
    "domNodeCandidates",
    "rectangleCandidates",
    "domNodeCandidate",
    "closestRectangle",
    "smallestDistance",
    "reduce",
    "rectangleCandidate",
    "distance",
    "findRectangleCloserToRectangle",
    "indexOf",
    "printPointInDocument",
    "color",
    "autoRemove",
    "autoRemoveAfter",
    "div",
    "zIndex",
    "background",
    "border",
    "autoRemoveTimeout",
    "remove",
    "setTimeout",
    "clearTimeout",
    "scoreParticleAnimationDelayGetter",
    "lastAnimationMs",
    "minDelayBetweenParticles",
    "msToWait",
    "Date",
    "ScoreParticle",
    "totalScoreDomNodeRef",
    "scoreParticle",
    "particleDomNodeRef",
    "particleDomNode",
    "textNodeBox",
    "querySelector",
    "getBBox",
    "totalScoreDomNode",
    "animateScoreParticle",
    "delay",
    "animationDelay",
    "oncancel",
    "onfinish",
    "dominantBaseline",
    "particleDomNodeRectangle",
    "totalScoreDomNodeRectangle",
    "particleWidth",
    "particleHeight",
    "startX",
    "startY",
    "intermediateX",
    "intermediateY",
    "endX",
    "endY",
    "animation",
    "opacity",
    "transform",
    "offset",
    "cancel",
    "useSymbolEffect",
    "symbolEffect",
    "chestSlotUpdates",
    "useChestSlotUpdatesWithoutMoves",
    "dices",
    "useDices",
    "updatesWithThatSymbol",
    "useMemo",
    "chestSlotContent",
    "chestSlotSymbol",
    "chestSlotContentToSymbol",
    "effectReturnValues",
    "updateWithThatSymbol",
    "effectReturnValue",
    "useComboEffect",
    "addScoreParticle",
    "chestSlots",
    "useChestSlots",
    "combos",
    "keys",
    "chestSlot",
    "comboUpdates",
    "slotsParticipatingToCombo",
    "firstSlotUpated",
    "some",
    "chestSlotUpdateCandidate",
    "cleanupFunctions",
    "COMBO_SCORES",
    "chestSlotDomNodeToScoreParticlePosition",
    "chestSlotsPreviousRef",
    "chestSlotsPrevious",
    "updates",
    "chestSlotPrevious",
    "chestSlotContentPrevious",
    "compareChestSlotContent",
    "chestSlotDomNode",
    "usePerfectEffect",
    "perfect",
    "type",
    "perfectUpdate",
    "RoundScore",
    "swordChallengeOngoing",
    "useSwordChallengeOngoing",
    "ScoreDisplay",
    "setDialogIsOpen",
    "roundScore",
    "useRoundScore",
    "useScoreMarked",
    "roundScoreDomNodeRef",
    "scoreDialogIsOpen",
    "openScoreDialog",
    "closeScoreDialog",
    "scoreParticleMergedListener",
    "totalScore",
    "onScoreParticleAdded",
    "onScoreParticleRemoved",
    "onScoreParticleMerged",
    "scoreSetter",
    "scoreParticles",
    "scoreParticlesSetter",
    "addScoreParticleToState",
    "scoreParticleCandidate",
    "lastAnimationMsRef",
    "removeScoreParticleFromState",
    "scoreInParticles",
    "particle",
    "useScoreParticles",
    "scoreDisplayed",
    "useRoundScoreParticleEffects",
    "useScoreParticleMergeEffect",
    "DoubleScoreIndicator",
    "previousValue",
    "NegativeScoreSign",
    "scoreParticleMerged",
    "roundScoreDomNode",
    "animateScoreParticleMerge",
    "useCurrentCardActivated",
    "challengeWon",
    "swordNumberIncreased",
    "quantityKeptPrevious",
    "swordSliceAnimation",
    "swordSliceAnimationSetter",
    "timeout",
    "diceSize",
    "Chest",
    "chestRef",
    "diceOverChestListener",
    "threeSkullsOrMoreInCursedArea",
    "useThreeSkullsOrMoreInCursedArea",
    "diceOverChest",
    "protectedByChestCard",
    "isChestCard",
    "outline",
    "ChestSlot",
    "CursedCover",
    "dice",
    "diceToVisibleSymbol",
    "chestSlotContentLeft",
    "chestSlotContentRight",
    "leftHasContent",
    "rightHasContent",
    "margin",
    "backgroundColor",
    "color1",
    "borderColor",
    "color2",
    "borderWidth",
    "borderStyle",
    "symbolToImageUrl",
    "draggable",
    "cursedGridImageUrl",
    "alt",
    "useCurrentPlayer",
    "currentPlayerId",
    "useCurrentPlayerId",
    "players",
    "usePlayers",
    "playerCandidate",
    "useHasNeverRolled",
    "rollCount",
    "useRollCount",
    "useHasRolledOnce",
    "useRemainingSpotInCursedArea",
    "skullCountInCursedArea",
    "useSkullCountInCursedArea",
    "useHasDicesToCurse",
    "dicesToCurse",
    "useDicesToCurse",
    "diceRolledIds",
    "useDiceRolledIds",
    "witchUncursedDiceId",
    "useWitchUncursedDiceId",
    "remainingSpotInCursedArea",
    "diceRolledId",
    "diceRolled",
    "diceIsOnSkull",
    "slice",
    "useRollDiceAllowed",
    "hasNeverRolled",
    "hasDicesToCurse",
    "diceCursedIds",
    "useDiceCursedIds",
    "symbolsFromCard",
    "useSymbolsFromCard",
    "symbolIsSkull",
    "isOneSkullCard",
    "SYMBOL_SKULL",
    "isTwoSkullsCard",
    "useMarkScoreAllowed",
    "useStartPlayerRound",
    "player",
    "currentCardActivated",
    "roundStarted",
    "ROUND_START_STATE",
    "useEndPlayerRound",
    "useActivateCurrentCard",
    "useSendToSkullIsland",
    "isOnSkullIsland",
    "useMarkScore",
    "currentPlayer",
    "nextScore",
    "witchCardEffectUsed",
    "useSetDiceRolledAreaPosition",
    "rolledAreaPosition",
    "rolledAreaZIndex",
    "useSetDiceChestSlot",
    "previousChestSlot",
    "useCurseDice",
    "useUncurseDice",
    "fromLab",
    "diceCursedId",
    "useUnkeepDice",
    "useKeepDice",
    "RoundEffects",
    "useRoundEffects",
    "useCurseDiceEffect",
    "useFailSwordChallengeEffect",
    "useFourSkullsOrMoreOnFirstRollEffect",
    "animationsDisabled",
    "useAnimationsDisabled",
    "curseDice",
    "markScore",
    "threeSkullsOrMoreInCursedAreaBecomesTrue",
    "threeSkullsOrMoreInCursedAreaPrevious",
    "swordChallengeCard",
    "isFirstRoll",
    "useIsFirstRoll",
    "useIsOnSkullIsland",
    "sendToSkullIsland",
    "useDrawCard",
    "cardIds",
    "cardUsedIds",
    "cardDrawnId",
    "useAddExtraCoin",
    "useAddExtraDiamond",
    "useShuffleDeck",
    "mixDeck",
    "CardsEffects",
    "useCoinCardEffect",
    "useDiamondCardEffect",
    "addExtraCoin",
    "currentCardBecomesActivated",
    "currentCardActivatedPrevious",
    "currentCardIsCoinCard",
    "addExtraDiamond",
    "currentCardIsDiamondCard",
    "DiceOnGoing",
    "rolledAreaRef",
    "offscreenRef",
    "diceOverRolledAreaListener",
    "diceOverRolledArea",
    "cardsRules",
    "name",
    "rule",
    "more",
    "CardRulesDialog",
    "cardRules",
    "textAlign",
    "cardToImageUrl",
    "SmallCard",
    "forwardRef",
    "cardToSmallImageUrl",
    "Header",
    "openScoreboard",
    "headerSmallCardRef",
    "HeaderSmallCard",
    "BackCard",
    "CurrentPlayer",
    "TotalScore",
    "cardDialogIsOpen",
    "cardDialogIsOpenSetter",
    "backgroundImage",
    "cardDefaultUrl",
    "backgroundSize",
    "character",
    "img",
    "totalScoreAnimation",
    "pow",
    "diceSpacing",
    "rollDices",
    "rolledAreaDomNode",
    "rolledAreaRectangle",
    "rolledAreaWidth",
    "rolledAreaHeight",
    "rectangleAllowed",
    "otherRotatedRectangles",
    "getRandomAndCollisionFreeInfo",
    "count",
    "getRandomDiceRectangle",
    "rotation",
    "getDiceRandomRotation",
    "rotatedRectangleCandidate",
    "points",
    "degree",
    "rotateRectangle",
    "otherRotatedRectangle",
    "secondRotatedRectangle",
    "firstRotatedRectangleSideLine",
    "rotatedRectangle",
    "visibleFaceIndex",
    "getDiceRandomFace",
    "positionCandidate",
    "getRandomNumberBetweenInterval",
    "faces",
    "max",
    "random",
    "ButtonRoll",
    "rollDiceAllowed",
    "roll",
    "useRoll",
    "disabledNotEnoughDice",
    "disabledChestCard",
    "disabled",
    "symbolSkullUrl",
    "dicesToRoll",
    "Footer",
    "onRoundOver",
    "ButtonMarkScore",
    "ButtonEndRound",
    "markScoreButtonVisible",
    "hasRolledOnce",
    "useMarkScoreButtonVisible",
    "sign",
    "abs",
    "startNextRoundAllowed",
    "useStartNextRoundAllowed",
    "endPlayerRound",
    "reason",
    "SkullIsland",
    "cursedAreaRef",
    "isWitchCard",
    "UncurseDiceLabel",
    "ExtraSkull",
    "wichLabelImageUrl",
    "stroke",
    "Portal",
    "stringifyTransformations",
    "rotate",
    "scale",
    "translate",
    "join",
    "throttle",
    "previousMs",
    "ms",
    "trailing",
    "throttled",
    "msEllapsedSincePreviousCall",
    "remaining",
    "enableDragGesture",
    "dragIntentTimeout",
    "pendingGesture",
    "logLevel",
    "onGrip",
    "onLongGrip",
    "onDrag",
    "onRelease",
    "longGripMs",
    "logger",
    "createLogger",
    "dragIntent",
    "removeMoveListener",
    "removeReleaseListener",
    "cancelMoveThrottling",
    "debug",
    "pointerPositionPrevious",
    "domNodeStartPosition",
    "gripPointerPosition",
    "longGripTimeout",
    "dropEffect",
    "removeDragstartListener",
    "addDomEventListener",
    "dragstartEvent",
    "removeMousedownListener",
    "which",
    "handleGrip",
    "mouseEventToPagePosition",
    "mousemoveThrottled",
    "mousemoveEvent",
    "handleMove",
    "mouseupEvent",
    "handleRelease",
    "removeTouchstartListener",
    "touchstartEvent",
    "touchEventToPagePosition",
    "touchmoveThrottled",
    "touchmoveEvent",
    "touchendEvent",
    "removeClickListener",
    "pointerPosition",
    "domNodeToPagePosition",
    "handleLongGrip",
    "gripHorizontalShift",
    "gripVerticalShit",
    "movePosition",
    "relativeX",
    "relativeY",
    "setDropEffect",
    "handleCancel",
    "rect",
    "mouseEvent",
    "pageX",
    "pageY",
    "touchEvent",
    "firstChangedTouch",
    "changedTouches",
    "Dice",
    "diceAnimation",
    "anmationDebug",
    "onDiceClick",
    "onDiceDrag",
    "onDiceDrop",
    "onDiceDragEnd",
    "disapear",
    "appear",
    "mainDomNode",
    "diceDomNode",
    "useDiceDomNode",
    "diceDomNodeSetter",
    "useDiceDomNodeSetter",
    "diceGripped",
    "diceGrippedSetter",
    "dragGesture",
    "setDragGesture",
    "parentNodePrevious",
    "portalParentNode",
    "bigMoveOccured",
    "disableDragGesture",
    "diceRectangle",
    "easing",
    "onSkull",
    "diceX",
    "diceY",
    "diceZIndex",
    "cursor",
    "transitionProperty",
    "transitionDuration",
    "transitionTimingFunction",
    "transformOrigin",
    "rx",
    "ry",
    "strokeWidth",
    "xlinkHref",
    "DiceContainer",
    "offscreenDomNode",
    "chestDomNode",
    "cursedAreaDomNode",
    "onDiceOverChestChange",
    "onDiceOverRolledAreaChange",
    "useWitchCardEffectUsed",
    "useReducer",
    "action",
    "diceAnimationState",
    "dispatchDiceAnimation",
    "setDiceRolledAreaPosition",
    "keepDice",
    "unkeepDice",
    "uncurseDice",
    "setDiceChestSlot",
    "dropTargetRef",
    "diceId",
    "diceLocation",
    "diceToLocation",
    "propsFromLocation",
    "diceLocationToProps",
    "diceIsGoingToBeCursed",
    "diceInCursedArea",
    "useCallback",
    "clickEffect",
    "getClickEffect",
    "firstAvailableChestSlot",
    "firstAvailableChestSlotGetter",
    "dragDiceGesture",
    "dropTargetGetter",
    "getDropEffect",
    "dropDiceGesture",
    "dropAnimation",
    "dropPosition",
    "closestRolledAreaPosition",
    "closestRolledAreaPositionGetter",
    "highestRolledAreaZIndex",
    "highestRolledAreaZIndexGetter",
    "rolledAreaDropPositionGetter",
    "closestAvailableChestSlot",
    "closestAvailableChestSlotGetter",
    "chestSlotDropPositionGetter",
    "diceToChestSlot",
    "diceChestSlot",
    "diceIsInRolledAreaGetter",
    "keepDiceAllowedGetter",
    "diceIsInChestGetter",
    "unkeepDiceAllowedGetter",
    "diceIsInCursedAreaGetter",
    "uncurseDiceAllowedGetter",
    "includes",
    "rectangleWidth",
    "rectangleHeight",
    "absoluteRolledAreaPositionRectangle",
    "destinationSlotDomNode",
    "chestSlotToChestSlotDomNode",
    "destinationSlotRectangle",
    "requestedRectangle",
    "rectangleRelativeTo",
    "rectangleRelativeToDomNode",
    "diceWithHighestZIndex",
    "chestSlotMap",
    "Map",
    "set",
    "closestDomNode",
    "get",
    "DrawCardDialog",
    "cardDeck",
    "useCardIds",
    "cardId",
    "useCardDeck",
    "backCardRef",
    "topCardRef",
    "smallCardRef",
    "remainingCardCount",
    "TopCard",
    "DeckButton",
    "StartButton",
    "ButtonShuffleDeck",
    "ButtonDrawCard",
    "drawCard",
    "shuffleDeck",
    "shufflePending",
    "sufflePendingSetter",
    "animateDeckShuffle",
    "backCard",
    "timeoutId",
    "activateCurrentCard",
    "cardActivating",
    "cardActivatingSetter",
    "animateCardActivation",
    "headerSmallCard",
    "smallCard",
    "topCard",
    "headerSmallCardRectangle",
    "topCardAnimation",
    "smallCardAnimation",
    "Round",
    "onRoundStart",
    "roundMounted",
    "roundMountedSetter",
    "diceOverRolledAreaEmitter",
    "diceOverChestEmitter",
    "RoundGameBoard",
    "onRoundMounted",
    "refs",
    "StartPlayerRoundDialog",
    "startPlayerRound",
    "boxShadow",
    "SCORE_MAX",
    "pathList",
    "path1",
    "path2",
    "path3",
    "path4",
    "ScoreBoard",
    "openedByUser",
    "closeScoreboard",
    "playerAnimation",
    "useRoundStarted",
    "startPlayerRoundDialogIsOpen",
    "startPlayerRoundDialogIsOpenSetter",
    "openStartPlayerRoundDialog",
    "nextPlayer",
    "getNextPlayer",
    "winTreasureUrl",
    "PlayerPath",
    "pathCoordinates",
    "isCurrentPlayer",
    "currentPlayerIndex",
    "findIndex",
    "pathForegroundElementRef",
    "circleElementRef",
    "scoreAnimation",
    "scoreAnimationSetter",
    "pathForegroundElement",
    "pathLength",
    "getTotalLength",
    "pathForegroundAnimation",
    "strokeDashoffset",
    "ratioToStrokeDashOffset",
    "circleAnimation",
    "offsetDistance",
    "ratioToOffsetDistance",
    "playState",
    "strokeDasharray",
    "r",
    "offsetPath",
    "Avatar",
    "ratio",
    "GameConfiguration",
    "setPlayerCount",
    "useSetPlayerCount",
    "playerCount",
    "_",
    "number",
    "CHARACTERS",
    "CharacterSelection",
    "setPlayerCharacter",
    "useSetPlayerCharacter",
    "startGame",
    "useStartGame",
    "playerWithoutCharacter",
    "scrollEffect",
    "CrewMembers",
    "characterIsAvailable",
    "CARD_TWO_SWORDS_CHALLENGE",
    "gameStarted",
    "itemsLength",
    "getElementsByClassName",
    "getMenuWrapperSize",
    "getElementById",
    "offsetWidth",
    "menuWrapperSize",
    "menuSize",
    "onresize",
    "menuInvisibleSize",
    "leftPaddle",
    "rightPaddle",
    "onscroll",
    "menuPosition",
    "scrollLeft",
    "menuEndOffset",
    "classList",
    "add",
    "onclick",
    "scrollStart",
    "scrollEnd",
    "Game",
    "playerAnimationListener",
    "isOnGameConfigurationScreen",
    "useIsOnGameConfigurationScreen",
    "isOnCharacterSelectionScreen",
    "useIsOnCharacterSelectionScreen",
    "scoreboardOpenedByUser",
    "scoreboardOpenedByUserSetter",
    "roundOverPayload",
    "roundOverPayloadSetter",
    "playerAnimationSetter",
    "isOnScoreboardScreen",
    "fromScore",
    "useGameStarted",
    "useDisableAnimations",
    "useEnableAnimations",
    "Settings",
    "settingsDialogIsOpen",
    "settingsDialogIsOpenSetter",
    "settingsCssUrl",
    "SettingsDialog",
    "closeSettingsDialog",
    "disableAnimations",
    "enableAnimations",
    "checked",
    "onChange",
    "e",
    "AppBody",
    "useMainDomNodeSetter",
    "milleSabordsCssUrl",
    "useGameCreated"
  ],
  "mappings": "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"
}