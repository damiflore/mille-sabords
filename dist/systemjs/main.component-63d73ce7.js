System.register(["./main.js"],(function(e,t){"use strict";var n,r,o,u,a,i,c,s;return{setters:[function(e){n=e.r,r=e._,o=e.a,u=e.b,a=e.c,i=e.d,c=e.e,s=e.s}],execute:function(){var l,f,d,m=e("d",System.resolve("./assets/card_default.png",t.meta.url)),v=window.requestIdleCallback?function(e){var t=window.requestIdleCallback(e,{timeout:400});return function(){window.cancelIdleCallback(t)}}:function(e){var t=window.requestAnimationFrame(e);return function(){window.cancelAnimationFrame(t)}},h=e("_",(function(e,t){if(null===e)return{};var n,r,o=function(e,t){if(null===e)return{};var n,r,o={},u=Object.keys(e);for(r=0;r<u.length;r++)n=u[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(r=0;r<u.length;r++)n=u[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o})),p=e("e",(function(e,t,n,r){return e.addEventListener(t,n,r),function(){e.removeEventListener(t,n,r)}})),g=function(e){return e.window===e},y=function(e){return 9===e.nodeType},b=(e("i",(function(e){if(1!==e.nodeType)return!1;var t=e.nodeName.toLowerCase();return"input"===t?"hidden"!==e.type&&b(e):["button","select","datalist","iframe","textarea"].indexOf(t)>-1||e.hasAttribute("tabindex")||e.hasAttribute("tabIndex")||e.hasAttribute("draggable")?b(e):["a","area"].indexOf(t)>-1?!1!==e.hasAttribute("href")&&b(e):["audio","video"].indexOf(t)>-1&&(!1!==e.hasAttribute("controls")&&b(e))})),function(e){if(E(e))return!0;if("hidden"===w(e,"visibility"))return!1;for(var t=e;t&&!E(t);){if("none"===w(t,"display"))return!1;t=t.parentNode}return!0}),E=e("a",(function(e){return e===e.ownerDocument.documentElement})),w=e("g",(function(e,t){return function(e){return A(e).getComputedStyle(e)}(e).getPropertyValue(t)})),A=function(e){return g(e)?e:y(e)?e.defaultView:O(e).defaultView},O=function(e){return g(e)?e.document:y(e)?e:e.ownerDocument},S=(e("c",(function(e){var t=A(e),n=O(e);return{x:t.pageXOffset||n.documentElement.scrollLeft,y:t.pageYOffset||n.documentElement.scrollTop}})),n.createContext()),C=function(e,t){return t(e)},k={},P=function(e){var t=e.children;return n.createElement(S.Provider,{value:n.useReducer(C,k)},t)},j=function(e){var t=n.useContext(S);if(!t)return[function(){},function(){}];var u=t[1],a=function(){u((function(t){if(!t.hasOwnProperty(e))return t;if("loading"!==t[e].status)return t;var n={};return Object.keys(t).forEach((function(r){r!==e&&(n[r]=t[r])})),n}))};return n.useEffect((function(){return u((function(t){return e in t?t:r(r({},t),{},o({},e,{status:"loading"}))})),function(){a()}}),[]),[function(){u((function(t){return e in t&&"loaded"===t[e].status?t:r(r({},t),{},o({},e,{status:"loaded"}))}))},a]},R=function(){var e=n.useContext(S);return e?e[0]:null},x=function(e,t){var n=p(e,"load",(function(){r(),t()})),r=p(e,"error",(function(){n(),t()}));return function(){n(),r()}},I=e("S",(function(e){var t=e.href,r=j(t),o=u(r,1)[0];return n.useEffect((function(){return _(t,{onload:o})}),[t]),null})),_=(l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.onload,r=void 0===n?function(){}:n,o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var u=x(o,r);return o.href=e,document.head.appendChild(o),function(){u(),document.head.removeChild(o)}},f=new Map,d=function(e){if(f.has(e)){var t=f.get(e),n=t.useCount,o=h(t,["useCount"]);n>1?f.set(e,r({useCount:n-1},o)):(f.delete(e),o.linkCleanup())}},function(e){if(f.has(e)){var t=f.get(e),n=t.useCount,o=h(t,["useCount"]);return f.set(e,r({useCount:n+1},o)),d}for(var u=arguments.length,a=new Array(u>1?u-1:0),i=1;i<u;i++)a[i-1]=arguments[i];var c=l.apply(void 0,[e].concat(a));return f.set(e,{useCount:1,linkCleanup:c}),d});function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};var N=function(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t};function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var o=T(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return N(this,n)}}var W=System.resolve("./assets/wood.jpg",t.meta.url),V=System.resolve("./assets/pirate-hook.png",t.meta.url),D=System.resolve("./assets/pirate-hook-02.png",t.meta.url),B=System.resolve("./assets/wood-box.jpg",t.meta.url),Y=System.resolve("./assets/treasure-map.png",t.meta.url),q=e("w",System.resolve("./assets/witch-label.png",t.meta.url)),H=System.resolve("./assets/skull-bottle.png",t.meta.url),U=function(e,t){var n=new Image;return t&&(n.crossOrigin=t),new Promise((function(t,r){var o=function(e){z(n),r(e)};n.onload=function(e){z(n),t(e.target||e.srcElement)},n.onerror=o,n.onabort=o,n.src=e}))},z=function(e){e.onload=null,e.onerror=null,e.onabort=null;try{delete e.src}catch(e){}};function K(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Q(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function G(){}function X(e,t){if(!t)return e&&e.then?e.then(G):Promise.resolve()}function J(e){var t=e();if(t&&t.then)return t.then(G)}function Z(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function $(e){if(e&&e.then)return e.then(G)}var ee=Q((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.chunkSize,r=void 0===n?7:n,o=t.msDelayBetweenChunks,u=void 0===o?2e3:o,a=0,i={},c={},s=Q((function(e){return K(Promise.all(e.map(Q((function(e){return $(Z((function(){return K(U(e),(function(t){i[e]=t}))}),(function(){c[e]=!0})))})))),(function(){return K(new Promise((function(e){setTimeout(e,u)})),(function(){var e=l();return J((function(){if(e.length>0)return X(s(e))}))}))}))})),l=function(){for(var t=[],n=0;n<r&&a<e.length;)t.push(e[a]),n++,a++;return t};return K(s(l()),(function(){return{loaded:i,failed:c}}))})),te=function(){var e=[W,V,D,B,Y,q,H,m].concat(i(Object.keys(c).map((function(e){return c[e]}))));return n.useEffect((function(){var t=setTimeout((function(){return ee(e)}),2e3);return function(){clearTimeout(t)}}),[]),null};var ne=e("b",Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});var re=new Map;var oe="loading",ue="loaded",ae="failed",ie=function(e){var t=re.get(e),r=t?ue:oe,o=n.useState(r),a=u(o,2),i=a[0],c=a[1],s=n.useRef(!1);return n.useEffect((function(){return e&&i!==ue?(s.current=!0,(t=function(){return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return t=U(e),n=function(t){s.current&&(re.set(e,t),c(ue))},r?n?n(t):t:(t&&t.then||(t=Promise.resolve(t)),n?t.then(n):t);var t,n,r}),(function(){s.current&&(re.delete(e),c(ae))}))},function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(e){return Promise.reject(e)}})(),function(){s.current=!1}):function(){};var t}),[e,i]),[i,t]},ce=function(e){var t=e.fallback,r=e.root,o=e.rootMargin,a=e.threshold,i=void 0===a?0:a,c=e.children,s=n.useState(!1),l=u(s,2),f=l[0],d=l[1],m=n.useState(null),v=u(m,2),h=v[0],p=v[1];return n.useEffect((function(){if(!h)return function(){};if(f)return function(){};var e=new window.IntersectionObserver((function(t){u(t,1)[0].isIntersecting?(e.unobserve(h),d(!0)):d(!1)}),{root:r,rootMargin:o,threshold:i});return e.observe(h),function(){e.disconnect()}}),[h,f]),f?n.createElement(n.Fragment,null,c):t({ref:p})},se=e("I",(function(e){var t=e.loadWhenIntersecting,r=void 0===t||t,o=e.usePlaceholderWhileLoading,a=void 0===o||o,i=e.animateLoaded,c=void 0===i||i,s=e.intersectionRoot,l=e.intersectionRootMargin,f=e.intersectionThreshold,d=e.FallbackWhileNotIntersecting,m=void 0===d?me:d,v=e.FallbackWhileLoading,p=void 0===v?de:v,g=e.useImageStatusHook,y=void 0===g?ie:g,b=e.src,E=h(e,["loadWhenIntersecting","usePlaceholderWhileLoading","animateLoaded","intersectionRoot","intersectionRootMargin","intersectionThreshold","FallbackWhileNotIntersecting","FallbackWhileLoading","useImageStatusHook","src"]),w=y(b),A=u(w,1)[0],O=j(b),S=u(O,1)[0];n.useEffect((function(){"loaded"===A&&S()}),[A]);var C=n.createElement("img",ne({src:b},E));if(c&&(C=n.createElement(le,{status:A,src:b,imageProps:E})),a&&"loaded"!==A){var k=C;C=n.createElement(fe,{status:A,fallback:n.createElement(p,E)},k)}if(r&&"loaded"!==A){var P=C;C=n.createElement(ce,{fallback:function(e){var t=e.ref;return n.createElement(m,ne({ref:t},E))},root:s,rootMargin:l,threshold:f},P)}return C})),le=function(e){var t=e.status,r=e.src,o=e.imageProps,u=n.useRef(!1),a=n.useRef(),i=n.useRef(t);return n.useLayoutEffect((function(){var e=u.current,n=a.current,r=i.current;if(u.current=!0,i.current=t,e&&r!==t&&"loaded"===t){var o=window.getComputedStyle(n).getPropertyValue("opacity");n.animate([{opacity:0},{opacity:o}],{duration:300})}}),[t,a]),n.createElement("img",ne({ref:a,src:r},o))},fe=function(e){var t=e.fallback,n=e.status,r=e.children;return"loaded"!==n?t:r},de=n.forwardRef((function(e,t){return n.createElement("img",ne({src:ve,ref:t},e))})),me=n.forwardRef((function(e,t){return n.createElement("img",ne({src:ve,ref:t},e))})),ve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",he=System.resolve("./assets/loadscreen.css",t.meta.url);var pe=function(e){var r,o=n.useRef(),a=n.useState(!1),i=u(a,2),c=i[0],l=i[1],f=n.useState(!1),d=u(f,2),m=d[0],h=d[1],p=n.useState(!1),g=u(p,2),y=g[0],b=g[1],E=n.useState(null),w=u(E,2),A=w[0],O=w[1],S=n.useState(!1),C=u(S,2),k=C[0],P=C[1],j=n.useState(!1),x=u(j,2),_=x[0],L=x[1],F=n.useState(),T=u(F,2)[1],N=(r=R(),Object.keys(r).length),M=function(){var e=R();return Object.keys(e).filter((function(t){return"loaded"===e[t].status})).length}();return n.useEffect((function(){return v((function(){l(!0)}))}),[]),n.useEffect((function(){c&&M===N&&h(!0)}),[c,M,N]),n.useEffect((function(){var e;m&&(window.splashscreen.remove(),b(!0),(e=function(){return function(e){if(e&&e.then)return e.then(ge)}(function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return e=t.import("./App.js"),n=function(e){b(!1),O(e),v((function(){P(!0)}))},r?n?n(e):e:(e&&e.then||(e=Promise.resolve(e)),n?e.then(n):e);var e,n,r}),(function(e){T((function(){throw e}))})))},function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}})())}),[m]),n.useEffect((function(){k&&M===N&&L(!0)}),[k,M,N]),n.useEffect((function(){_&&o&&(o.current.animate([{opacity:1},{opacity:0}],{duration:300,fill:"forwards"}).onfinish=function(){o.current.style.display="none"})}),[o,_]),n.createElement(n.Fragment,null,A?n.createElement(A.App,e):null,n.createElement("div",{id:"loadscreen",ref:o},n.createElement(I,{href:he}),n.createElement(se,{src:s,animateLoaded:!1}),y?n.createElement("p",{className:"text"},"Chargement du jeu..."):n.createElement(n.Fragment,null,n.createElement("p",{className:"text"},"Chargement du jeu..."),n.createElement("div",{className:"progress"},M,"/",N))),_?n.createElement(te,null):null)};function ge(){}var ye,be,Ee=(ye=function(e){return n.createElement(P,null,n.createElement(pe,e))},be=function(e){var t=e.error;return window.splashscreen.remove(),n.createElement("div",null,"An error occured",n.createElement("pre",null,"object"===a(t)?t.stack:t))},function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(a,e);var t,r,o,u=M(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=u.call(this,e)).state={hasError:!1,error:null},t}return t=a,o=[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}],(r=[{key:"render",value:function(){return this.state.hasError?n.createElement(be,{error:this.state.error}):n.createElement(ye,this.props)}}])&&L(t.prototype,r),o&&L(t,o),a}(n.Component));e("m",Object.freeze({__proto__:null,Main:Ee}))}}}));

//# sourceMappingURL=main.component-63d73ce7.js.map