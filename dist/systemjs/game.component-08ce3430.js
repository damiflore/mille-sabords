System.register(["./main.js"],(function(e){"use strict";var t,n,r,o,a,l,c,i,u,s,d,m,f,v,p,g,h,b,E,y,x,N,k,C,w,S,O,A,D,M,I,R,q,L,P,j,T,_,F,B,z,G,H,U,V,Y,X,K,W,J,Q,Z,$,ee,te;return{setters:[function(e){t=e.r,n=e.a,r=e._,o=e.i,a=e.T,l=e.b,c=e.c,i=e.d,u=e.F,s=e.e,d=e.S,m=e.f,f=e.g,v=e.h,p=e.j,g=e.k,h=e.l,b=e.m,E=e.n,y=e.s,x=e.u,N=e.o,k=e.p,C=e.q,w=e.t,S=e.v,O=e.w,A=e.x,D=e.y,M=e.z,I=e.A,R=e.B,q=e.C,L=e.D,P=e.E,j=e.G,T=e.H,_=e.I,F=e.J,B=e.K,z=e.L,G=e.M,H=e.N,U=e.O,V=e.P,Y=e.Q,X=e.R,K=e.U,W=e.V,J=e.W,Q=e.X,Z=e.Y,$=e.Z,ee=e.$,te=e.a0}],execute:function(){var ne=function(e){var r=e.href,o=e.children;return r?t.createPortal(n.createElement("link",{href:r,rel:"stylesheet",type:"text/css"}),document.head):t.createPortal(n.createElement("style",{type:"text/css"},o),document.head)},re=n.useEffect,oe=n.useRef,ae=function(e,t){var n=oe(!1);re((function(){!1===n.current&&(n.current=!0)}));var o=oe(t);return re((function(){o.current=t}),t),!!n.current&&Boolean(e.apply(void 0,r(o.current)))},le=function(e){var t=e.card,n=e.symbolsInChest,r=e.scoreMarked,g=e.markScoreAllowed;return o(t)?r||g?ce(n,{goal:a.numberOfSwords,gamble:a.gambleAmount}):-a.gambleAmount:l(t)?r||g?ce(n,{goal:c.numberOfSwords,gamble:c.gambleAmount}):-c.gambleAmount:i(t)?r||g?ce(n,{goal:u.numberOfSwords,gamble:u.gambleAmount}):-u.gambleAmount:s(t)?ue(n.map((function(e){return e===d?m:e}))):f(t)?2*ue(n):v(t)||p(t)?ue(n,9):ue(n)},ce=function(e,t){var n=t.goal,r=t.gamble;return ie(e,b)>=n?ue(e)+r:-r},ie=function(e,t){return e.filter((function(e){return e===t})).length},ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=0,r=0,o=se(e);return Object.values(o).forEach((function(e){3===e&&(n+=100),4===e&&(n+=200),5===e&&(n+=500),6===e&&(n+=1e3),7===e&&(n+=2e3),8===e&&(n+=4e3),e>2&&(r+=e)})),e.forEach((function(e){e===g&&(n+=100,o[g]<3&&(r+=1)),e===h&&(n+=100,o[h]<3&&(r+=1))})),r===t&&(n+=500),n},se=function(e){var t={};return e.forEach((function(e){t.hasOwnProperty(e)?t[e]++:t[e]=1})),t},de=n.useMemo,me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rollCount,n=void 0===t?x():t;return 0===n},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rollCount,n=void 0===t?x():t;return n>0},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rollCount,n=void 0===t?x():t;return n>1},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentCard,n=void 0===t?w():t;return v(n)?[h]:p(n)?[g]:M(n)?[I]:R(n)?[I,I]:[]},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.chestSlots,n=void 0===t?q():t;return Object.keys(n).filter((function(e){return n[e]})).map((function(e){var t=n[e];return"symbol"===t.type?t.value:D(t.value)}))},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.skullCountInCursedArea,n=void 0===t?Ne():t;return 3-n},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dicesToCurse,n=void 0===t?Ee():t;return n.length>0},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dicesRolled,n=void 0===t?N():t,r=e.witchUncursedDiceId,o=void 0===r?k():r,a=e.remainingSpotInCursedArea,l=void 0===a?he():a;return n.filter((function(e){return E(e)&&e.id!==o})).slice(0,l)},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentCard,n=void 0===t?w():t,r=e.hasNeverRolled,o=void 0===r?me():r,a=e.dicesRolled,l=void 0===a?N():a,c=e.scoreMarked,i=void 0===c?O():c,u=e.threeSkullsOrMoreInCursedArea,s=void 0===u?xe():u,d=e.hasDicesToCurse,m=void 0===d?be():d;return!!n&&(!i&&(!!o||!s&&(!m&&!(l.length<2))))},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.skullCountInCursedArea,n=void 0===t?Ne():t;return n>2},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dicesCursed,n=void 0===t?C():t,r=e.symbolsFromCard,o=void 0===r?pe():r;return n.length+o.filter((function(e){return y(e)})).length},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hasRolledMoreThanOnce,n=void 0===t?ve():t,r=e.scoreMarked,o=void 0===r?O():r,a=e.currentCard,l=void 0===a?w():a,c=e.threeSkullsOrMoreInCursedArea,i=void 0===c?xe():c,u=e.hasDicesToCurse,s=void 0===u?be():u;return!o&&(i?!(!A(l)||!n):!s&&!!l)},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentCard,n=void 0===t?w():t,r=e.symbolsInChest,o=void 0===r?ge():r,a=e.scoreMarked,l=void 0===a?O():a,c=e.markScoreAllowed,i=void 0===c?ke():c;return de((function(){return le({card:n,symbolsInChest:o,scoreMarked:l,markScoreAllowed:i})}),[n,o,l,i])},we=L((function(e,t){var n=e.totalScore;return P(P({},e),{},{totalScore:Math.max(n+t,0),scoreMarked:!0})})),Se=L((function(e){return P(P({},e),{},{isOnSkullIsland:!0})})),Oe=L((function(e){return P(P({},e),{},{roundStarted:!0})})),Ae=L((function(e,t){var n=e.dicesRolled,o=e.dicesCursed;return P(P({},e),{},{dicesRolled:n.filter((function(e){return e.id!==t.id})),dicesCursed:[].concat(r(o),[t])})})),De=L((function(e,t){var n=e.dicesRolled,o=e.dicesCursed;return P(P({},e),{},{witchUncursedDiceId:t.id,dicesRolled:[].concat(r(n),[t]),dicesCursed:o.filter((function(e){return e.id!==t.id}))})})),Me=L((function(e,t,n){var o=e.dicesRolled,a=e.chestSlots;return t.rolledAreaPosition=n,P(P({},e),{},{dicesRolled:[].concat(r(o),[t]),chestSlots:P(P({},a),{},j({},t.chestSlot,null))})})),Ie=L((function(e,t,n){var r=e.dicesRolled,o=e.chestSlots;return t.chestSlot=n,P(P({},e),{},{dicesRolled:r.filter((function(e){return e.id!==t.id})),chestSlots:P(P({},o),{},j({},n,{type:"dice",value:t}))})})),Re=L((function(e){var t=e.cardDeck,n=e.cardsUsed,o=t[0];return P(P({},e),{},{cardDeck:t.slice(1),cardsUsed:[].concat(r(n),[o]),currentCard:o})})),qe=L((function(e){var t=e.chestSlots;return P(P({},e),{},{chestSlots:P(P({},t),{},{1:{type:"symbol",value:h}})})})),Le=L((function(e){var t=e.chestSlots;return P(P({},e),{},{chestSlots:P(P({},t),{},{1:{type:"symbol",value:g}})})})),Pe=L((function(e){var t=e.cardsUsed;return P(P({},e),{},{cardsUsed:[],cardDeck:T(t)})})),je=n.useEffect,Te=function(){return _e(),null},_e=function(){Fe(),Be(),ze(),Ge(),He()},Fe=function(){var e=Ee(),t=Ae();je((function(){if(0===e.length)return function(){};var n=setTimeout((function(){e.forEach((function(e){t(e)}))}),1e3);return function(){clearTimeout(n)}}),[e])},Be=function(){var e=w(),t=O(),n=we(),r=xe(),o=ae((function(e){return!e&&r}),[r]),a=Ce(),l=F(e);je((function(){l&&!t&&o&&n(a)}),[l,t,o,a])},ze=function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rollCount,n=void 0===t?x():t;return 1===n}(),t=w(),n=_(),r=Ne(),o=Se();je((function(){e&&(n||F(t)||r<4||o())}),[e,n,t,r])},Ge=function(){var e=qe(),t=w(),n=ae((function(e){return!v(e)&&v(t)}),[t]);je((function(){n&&e()}),[n])},He=function(){var e=Le(),t=w(),n=ae((function(e){return!p(e)&&p(t)}),[t]);je((function(){n&&e()}),[n])},Ue=function(){return n.createElement("div",{style:{display:"none"}},n.createElement("img",{src:"/src/skull-island/witch-label.png"}),n.createElement("img",{src:"/src/chest/pirate-hook.png"}),n.createElement("img",{src:"/src/chest/pirate-hook-02.png"}),n.createElement("img",{src:"/src/cards/card_default.png"}),B.map((function(e){return n.createElement("img",{src:"/src/cards/card_".concat(e,".png"),alt:e,key:e})})))},Ve=function(e){return e.window===e},Ye=function(e){return 9===e.nodeType},Xe=function(e){if(1!==e.nodeType)return!1;var t=e.nodeName.toLowerCase();return"input"===t?"hidden"!==e.type&&Ke(e):["button","select","datalist","iframe","textarea"].indexOf(t)>-1||e.hasAttribute("tabindex")||e.hasAttribute("tabIndex")||e.hasAttribute("draggable")?Ke(e):["a","area"].indexOf(t)>-1?!1!==e.hasAttribute("href")&&Ke(e):["audio","video"].indexOf(t)>-1&&(!1!==e.hasAttribute("controls")&&Ke(e))},Ke=function(e){if(We(e))return!0;if("hidden"===Je(e,"visibility"))return!1;for(var t=e;t&&!We(t);){if("none"===Je(t,"display"))return!1;t=t.parentNode}return!0},We=function(e){return e===e.ownerDocument.documentElement},Je=function(e,t){return function(e){return Qe(e).getComputedStyle(e)}(e).getPropertyValue(t)},Qe=function(e){return Ve(e)?e:Ye(e)?e.defaultView:Ze(e).defaultView},Ze=function(e){return Ve(e)?e.document:Ye(e)?e:e.ownerDocument},$e=function(e,t,n){var r=tt(n),o=Math.cos(r),a=Math.sin(r),l=t.x-e.x,c=t.y-e.y;return{x:Math.round(o*l+a*c+e.x),y:Math.round(o*c-a*l+e.y)}},et=function(e){var t=z(e,4),n=t[0],r=t[1],o=t[2],a=t[3];return{x:(n.x+r.x+o.x+a.x)/4,y:(n.y+r.y+o.y+a.y)/4}},tt=function(e){return e*Math.PI/180},nt=function(e,t){return!!rt(t,(function(t){return n=t,r=z(e,2),o=r[0],a=r[1],l=z(n,2),c=l[0],i=l[1],u=(i.x-c.x)*(o.y-c.y)-(i.y-c.y)*(o.x-c.x),s=(a.x-o.x)*(o.y-c.y)-(a.y-o.y)*(o.x-c.x),d=(i.y-c.y)*(a.x-o.x)-(i.x-c.x)*(a.y-o.y),(0!==u||0!==s||0!==d)&&0!==d&&(s/=d,(u/=d)>=0&&u<=1&&s>=0&&s<=1);var n,r,o,a,l,c,i,u,s,d}))},rt=function(e,t){var n=z(e,4),r=n[0],o=n[1],a=n[2],l=n[3];return!!t([r,o])||(!!t([o,a])||(!!t([a,l])||!!t([l,r])))},ot=function(e,t){return!(e.right<=t.left)&&(!(e.left>=t.right)&&(!(e.bottom<=t.top)&&!(e.top>=t.bottom)))},at=function(e,t){var n=e.left,r=e.right,o=r-n;n<t.left?r=(n=t.left)+o:r>t.right&&(r=(n=t.right-o)+o);var a=e.top,l=e.bottom,c=l-a;return a<t.top?l=(a=t.top)+c:l>t.bottom&&(l=(a=t.bottom-c)+c),{left:n,right:r,top:a,bottom:l}},lt=function(e){var t=e.left,n=e.right,r=e.top;return{x:t+(n-t)/2,y:r+(e.bottom-r)/2}},ct=function(e,t){var n,r,o,a,l=lt(e),c=lt(t);return r=c,o=(n=l).x-r.x,a=n.y-r.y,Math.sqrt(o*o+a*a)},it=function(e){var t,n,r,o=e.getBoundingClientRect(),a=(n=Qe(t=e),r=Ze(t),{x:n.pageXOffset||r.documentElement.scrollLeft,y:n.pageYOffset||r.documentElement.scrollTop}),l=o.left+a.x,c=o.top+a.y,i=l+o.width,u=c+o.height;return{left:Math.floor(l),top:Math.floor(c),right:Math.floor(i),bottom:Math.floor(u)}},ut=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=o.trailing,l=void 0!==a&&a,c=function o(){for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];clearTimeout(t);var u=Date.now();if(n){var s=u-n;if(s<r){if(l){var d=r-s;t=setTimeout((function(){return o.apply(void 0,c)}),d)}}else n=u,e.apply(void 0,c)}else n=u,e.apply(void 0,c)},i=function(){clearTimeout(t)};return c.cancel=i,c},st=function(e,t){var n,r=t.logLevel,o=void 0===r?"warn":r,a=t.onGrip,l=void 0===a?function(){}:a,c=t.onLongGrip,i=void 0===c?function(){}:c,u=t.onRelease,s=void 0===u?function(){}:u,d=t.onDrag,m=void 0===d?function(){}:d,f=t.onCancel,v=void 0===f?function(){}:f,p=G({logLevel:o}),g=function(){},h=function(){};p.debug("enable drag on",e);var b,E,y,x,N=dt(e,"mousedown",(function(e){3===e.which?p.debug("ignore right click"):(C(ft(e),e),g=dt(document,"mousemove",ut((function(e){S(ft(e),e)}))),h=dt(document,"mouseup",(function(e){h(),g(),O(ft(e),e)})))}),{passive:!0}),k=dt(e,"touchstart",(function(e){C(vt(e),e),g=dt(document,"touchmove",ut((function(e){S(vt(e),e)}))),h=dt(document,"touchend",(function(e){h(),g(),O(vt(e),e)}))}),{passive:!0}),C=function(t,r){p.debug("gripping node at",t),n=!0,y=t,b=t,E=mt(e),l({x:E.x,y:E.y,event:r}),x=setTimeout(w,300)},w=function(){i()},S=function(e,t){if(b.x!==e.x||b.y!==e.y){b=e;var n=y.x-E.x,r=y.y-E.y,o={x:e.x-n,y:e.y-r};p.debug("move node at",o),m(P(P({event:t},o),{},{relativeX:e.x-y.x,relativeY:e.y-y.y}))}else p.debug("no real move")},O=function(e,t){p.debug("releasing node"),n=!1;var r=y.x-E.x,o=y.y-E.y;clearTimeout(x),s({event:t,x:b.x-r,y:b.y-o})};return function(e){N(),k(),g(),h(),clearTimeout(x),function(e){n&&(p.debug("cancelling drag",e),n=!1,v({event:e}))}(e)}},dt=function(e,t,n,r){return e.addEventListener(t,n,r),function(){e.removeEventListener(t,n,r)}},mt=function(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top}},ft=function(e){return{x:e.pageX,y:e.pageY}},vt=function(e){var t=e.changedTouches[0];return{x:t.pageX,y:t.pageY}},pt=n.useEffect,gt=n.useState,ht=function(e){var t=e.dice,r=e.clickAllowed,o=e.disabled,a=e.draggable,l=e.onClickAction,c=e.specificStyle,i=e.diceOnGoing,u=E(t),s=H(),d=U(t.id),m=V(t.id),f=k(),v=gt(!1),p=z(v,2),g=p[0],h=p[1],b=gt(null),y=z(b,2),x=y[0],N=y[1],C=Y();return pt((function(){if(!a||!d||!s)return function(){};var e,n=new Map,r=st(d,{onGrip:function(){},onLongGrip:function(){h(!0)},onDrag:function(e){var r=e.x,o=e.y,a=e.relativeX,l=e.relativeY;(Math.abs(a)>5||Math.abs(l)>5)&&h(!0);var c={left:r,right:r+50,top:o,bottom:o+50},i=it(s),u=at(c,i);N({x:u.left,y:u.top}),C({dice:t,diceRectangle:u,setDropHandler:function(e,t){n.set(e,t)}})},onRelease:function(t){var r=t.x,o=t.y;e=setTimeout((function(){return h(!1)})),N(null),C(null);var a={left:r,right:r+50,top:o,bottom:o+50};n.forEach((function(e){return e({diceRectangle:a})}))},onCancel:function(){h(!1),N(null),C(null)}});return function(){r(),clearTimeout(e)}}),[a,d,s]),n.createElement("button",{disabled:o,"data-dice-id":t.id,ref:m,onClick:l&&r&&!g?function(){return l(t)}:void 0,className:u?function(e){return e.id===f?"dice":i?"dice dice-cursed-disapear":"dice dice-cursed-appear"}(t):"dice",style:P(P({width:50,height:50,background:u?"black":"#fcfcfc",color:u?"black":"#fcfcfc",borderColor:u?"black":"#b9b9b9"},c),x?{position:"fixed",zIndex:1e3,transform:"none",left:x.x,top:x.y}:{})},n.createElement("img",{src:"src/dices/dice_".concat(D(t),".png"),draggable:"false",style:{width:"100%",height:"100%"}}))},bt=n.useState,Et=n.useEffect,yt=function(){var e=N(),t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scoreMarked,n=void 0===t?O():t,r=e.threeSkullsOrMoreInCursedArea,o=void 0===r?xe():r;return!n&&!o}(),r=Ie(),o=X(),a=K(),l=bt(!1),c=z(l,2),i=c[0],u=c[1];Et((function(){u(xt({dragDiceGesture:a,rolledAreaDomNode:o}))}),[a,o]);var s=q(),d=i&&Object.keys(s).some((function(e){return s[e]&&s[e].value===i})),m=i&&e.includes(i),f=Me(),v=Nt();return Et((function(){a&&a.setDropHandler(o,(function(e){var t=e.diceRectangle;if(d||m){var n,r,a,l,c,u=it(o),s=(n=at(t,u),r=u,a=n.left-r.left,l=a+(n.right-n.left),c=n.top-r.top,{left:a,right:l,top:c,bottom:c+(n.bottom-n.top)});d?f(i,{x:s.left,y:s.top}):v(i,{x:s.left,y:s.top})}}))}),[a,o]),n.createElement("div",{className:"dice-ongoing"},n.createElement("div",{className:"map"}),n.createElement("div",{className:"area",ref:W(),style:P({},d?{outline:"2px dotted"}:{})},e.map((function(e){return n.createElement(ht,{key:e.id,dice:e,clickAllowed:!E(e)&&t,onClickAction:function(e){var t=Object.keys(s).find((function(e){return!s[e]}));r(e,t)},draggable:!0,diceOnGoing:!0,specificStyle:{left:"".concat(e.rolledAreaPosition.x,"px"),top:"".concat(e.rolledAreaPosition.y,"px"),transform:"rotate(".concat(e.rotation,"deg)"),position:"absolute"}})}))))},xt=function(e){var t=e.dragDiceGesture,n=e.rolledAreaDomNode;if(!t)return null;var r=it(n);return ot(t.diceRectangle,r)?t.dice:null},Nt=L((function(e,t,n){var o=e.dicesRolled;return t.rotation=0,t.rolledAreaPosition=n,P(P({},e),{},{dicesRolled:r(o)})}));var kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ct=function(e,t){if(null===e)return{};var n,r,o=function(e,t){if(null===e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o},wt=function(e,t){for(var n=Ot(e,e),r=n.next(),o=r.done,a=r.value;!1===o;){if(t(a))return a;var l=n.next();o=l.done,a=l.value}return null},St=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!r){var o=t.firstChild;if(o)return o}var a=t.nextSibling;if(a)return a;var l=t.parentNode;return l&&l!==n?e(l,n,!0):null},Ot=function(e,t){var n=e;return{next:function(){var e=St(n,t);return n=e,{done:!1===Boolean(e),value:e}}}},At=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e,o=!1,a=function(){var e=St(r,t,n&&!1===o);return o=!0,r=e,{done:!1===Boolean(e),value:e}};return{next:a}},Dt=function(e){for(var t=e.lastChild;t;){var n=t.lastChild;if(!n)break;t=n}return t},Mt=function(e,t){var n=e;return{next:function(){var e=function(e,t){var n=e.previousSibling;if(n){var r=Dt(n);return r||n}if(e!==t){var o=e.parentNode;if(o&&o!==t)return o}return null}(n,t);return n=e,{done:!1===Boolean(e),value:e}}}},It=function(e){var t=wt(e,Xe);return t||(Xe(e)?e:null)},Rt=function(e){if(3===e.nodeType)return console.warn("cannot trap focus inside a text node"),function(){};if(Pt.find((function(t){return t.element===e})))return console.warn("focus already trapped inside this element"),function(){};var t=function(){return wt(e,qt)},n=function(){return function(e,t){var n=Dt(e);if(n)for(var r=Mt(n,e),o=r.next(),a=o.done,l=o.value;!1===a;){if(t(l))return l;var c=r.next();a=c.done,l=c.value}return null}(e,qt)},r=function(){return function(e){for(var t=e.from,n=e.root,r=void 0===n?null:n,o=e.predicate,a=Mt(t,r),l=a.next(),c=l.done,i=l.value;!1===c;){if(o(i))return i;var u=a.next();c=u.done,i=u.value}return null}({from:document.activeElement,root:e,predicate:qt})||n()},o=function(){return function(e){for(var t=e.from,n=e.root,r=void 0===n?null:n,o=e.predicate,a=e.skipChildren,l=At(t,r,void 0!==a&&a),c=l.next(),i=c.done,u=c.value;!1===i;){if(o(u))return u;var s=l.next();i=s.done,u=s.value}return null}({from:document.activeElement,root:e,predicate:qt})||t()},a=jt({element:e,lock:function(){var a=function(t){(function(t){return t.target!==e&&!e.contains(t.target)})(t)&&(t.preventDefault(),t.stopImmediatePropagation())},l=function(e){Lt(e)&&(e.preventDefault(),function(e){var a=document.activeElement===document.body;if(e.shiftKey){var l=a?n():r();l&&l.focus()}else{var c=a?t():o();c&&c.focus()}}(e))};return document.addEventListener("mousedown",a,{capture:!0,passive:!1}),document.addEventListener("keydown",l,{capture:!0,passive:!1}),function(){document.removeEventListener("mousedown",a,{capture:!0,passive:!1}),document.removeEventListener("keydown",l,{capture:!0,passive:!1})}}});return function(){a()}},qt=function(e){return!function(e){return e.hasAttribute&&e.hasAttribute("tabIndex")&&Number(e.getAttribute("tabindex"))<0}(e)&&Xe(e)},Lt=function(e){return"Tab"===e.key||9===e.keyCode},Pt=[],jt=function(e){var t,n=e.lock;Pt.length>0&&(t=Pt[Pt.length-1]).unlock();var r={lock:n,unlock:n()};return Pt.push(r),function(){if(0!==Pt.length){var e=Pt[Pt.length-1];r===e?(Pt.pop(),r.unlock(),t&&(t.unlock=t.lock())):console.warn("you must deactivate trap in the same order they were activated")}else console.warn("cannot deactivate an already deactivated trap")}},Tt=function(e){if("object"!==J(e)||1!==e.nodeType)throw new TypeError("getScrollableParent first argument must be DOM node");var t=e;return"fixed"===Je(t,"position")?_t(t.ownerDocument):Kt(t)||_t(t.ownerDocument)},_t=function(e){if("scrollingElement"in e)return e.scrollingElement;if(Ht(e))return e.documentElement;var t=e.body,n=t&&!/body/i.test(t.tagName)?Ft(t):t;return n&&zt(n)?null:n},Ft=function(e){for(var t=e;t=t.nextSibling;)if(1===t.nodeType&&Bt(t))return t;return null},Bt=function(e){return e.ownerDocument.body===e},zt=function(e){if(!Vt(e))return!1;if(Gt(e))return!1;var t=e.ownerDocument.documentElement;return!!Vt(t)&&!Gt(t)},Gt=function(e){var t=Je(e,"display");return"none"!==t&&("table-row"!==t&&"table-group"!==t&&"table-column"!==t||"collapsed"!==Je(e,"visibility"))},Ht=function(e){return!!/^CSS1/.test(e.compatMode)&&Ut(e)},Ut=function(e){var t=e.createElement("iframe");t.style.height="1px",(e.body||e.documentElement||e).appendChild(t);var n=t.contentWindow.document;n.write('<!DOCTYPE html><div style="height:9999em">x</div>'),n.close();var r=n.documentElement.scrollHeight>n.body.scrollHeight;return t.parentNode.removeChild(t),r},Vt=function(e){return!Yt(e)||!Xt(e)},Yt=function(e){return"visible"===Je(e,"overflow-x")||"visible"===Je(e,"overflow")},Xt=function(e){return"visible"===Je(e,"overflow-y")||"visible"===Je(e,"overflow")},Kt=function(e){for(var t=Je(e,"position"),n=e.parentNode;n;){if(We(n))return null;if("absolute"!==t||"static"!==Je(n,"position")){if(Vt(n))return n;n=n.parentNode}else n=n.parentNode}return null},Wt=n.useEffect,Jt={position:"absolute",top:"5%",left:"0",right:"0",width:"fit-content",height:"fit-content",margin:"auto",padding:"1em",overscrollBehavior:"contain",outline:"none",background:"white",color:"black",border:"solid"},Qt={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.46)"},Zt=function(e){var r=e.container,o=void 0===r?document.body:r,a=e.children,l=e.isOpen,c=e.closeMethod,i=void 0===c?"display-none":c,u=e.stealFocus,s=void 0===u||u,d=e.restoreStolenFocus,m=void 0===d||d,f=e.trapFocus,v=void 0===f||f,p=e.requestCloseOnEscape,g=void 0===p||p,h=e.requestCloseOnClickOutside,b=void 0!==h&&h,E=e.onAfterOpen,y=void 0===E?function(){}:E,x=e.onRequestClose,N=void 0===x?function(){}:x,k=e.onFocusIn,C=void 0===k?function(){}:k,w=e.onFocusOut,S=void 0===w?function(){}:w,O=e.backdropProps,A=void 0===O?{}:O,D=Ct(e,["container","children","isOpen","closeMethod","stealFocus","restoreStolenFocus","trapFocus","requestCloseOnEscape","requestCloseOnClickOutside","onAfterOpen","onRequestClose","onFocusIn","onFocusOut","backdropProps"]);if(!o)return null;var M=n.useState(null),I=z(M,2),R=I[0],q=I[1],L=Boolean(R);return ae((function(e){return!e&&l}),[l])&&y(),Wt((function(){if(!l||!L)return function(){};var e=tn(R),t=function(t){t.relatedTarget||e&&(e=!1,S(t))},n=function(t){C(t),e=!0},r=function(t){tn(R)?e=!0:(e=!1,S(t))};return R.addEventListener("focus",n,!0),document.addEventListener("focus",r,!0),document.addEventListener("blur",t,!0),function(){R.removeEventListener("focus",n,!0),document.removeEventListener("focus",r,!0),document.removeEventListener("blur",t,!0)}}),[l,L,C,S]),Wt((function(){return l&&L?function(e){for(var t=[],n=e.previousSibling;n;)1===n.nodeType&&Vt(n)&&t.push(n),n=n.previousSibling;var r=Tt(e);t.push(r);var o=t.map((function(e){var t=e.style.overflow;return e.style.overflow="hidden",function(){t?e.style.overflow=t:delete e.style.overflow}}));return function(){o.forEach((function(e){e()}))}}(R):function(){}}),[l,L]),Wt((function(){return l&&L&&v?Rt(R):function(){}}),[l,L,v]),Wt((function(){if(!l||!L||!s)return function(){};var e=document.activeElement,t=It(R);return t&&t.focus(),function(){t&&("function"==typeof m?m(e):!0===m&&e.focus())}}),[l,L,s]),Wt((function(){if(!l||!L)return function(){};var e=[];return Array.from(R.parentNode.children).forEach((function(t){t!==R&&e.push(t)})),e.forEach((function(e){e.setAttribute("aria-hidden","true")})),function(){e.forEach((function(e){e.removeAttribute("aria-hidden","true")}))}}),[l,L]),"dom-remove"!==i||l?t.createPortal(n.createElement(n.Fragment,null,l?n.createElement($t,kt({},A,{style:P(P({},Qt),A.style),onMouseDownPassive:function(e){if(e.preventDefault(),!tn(R)){var t=It(R);t&&t.focus()}},onClick:function(e){if(b){var t=e.target;t===R||R.contains(t)||N(e)}A.onClick&&A.onClick(e)}})):null,n.createElement("div",kt({},D,{style:P(P(P({},Jt),D.style),l?{}:en(i)),ref:function(e){q(e),D.ref&&D.ref(e)},onKeyDown:function(e){g&&e.keyCode===nn&&N(e),D.onKeyDown&&D.onKeyDown(e)},hidden:"hidden-attribute"===i?l:void 0,tabIndex:"-1"}),a)),o):null},$t=function(e){var t=e.onMouseDownPassive,r=Ct(e,["onMouseDownPassive"]),o=n.useState(null),a=z(o,2),l=a[0],c=a[1];return Wt((function(){return l?(l.addEventListener("mousedown",t,{passive:!1}),function(){l.removeEventListener("mousedown",t,{passive:!1})}):function(){}}),[l]),n.createElement("div",kt({ref:function(e){c(e),r.ref&&r.ref(e)}},r))},en=function(e){return"display-none"===e?{display:"none"}:"visibility-hidden"===e?{visibility:"hidden"}:{}},tn=function(e){var t=document.activeElement;return e===t||e.contains(t)},nn=27,rn=function(e){return n.createElement(n.Fragment,null,n.createElement(on,null),n.createElement(Zt,kt({container:H(),backdropProps:{className:"dialog--backdrop"},style:{top:"10%",left:"6%",right:"6%",bottom:"8%",height:"auto",width:"auto",padding:"0",border:"none",background:"none",maxWidth:"620px",margin:"0 auto"},className:"dialog"},e)))},on=function(){return n.createElement(ne,{href:"/src/dialog/dialog.css"})};on=n.memo(on);var an=function(){var e=w();return n.createElement("div",{className:"score-area"},e?n.createElement(ln,null):null)},ln=function(){var e=Ce(),t=w(),r=n.useState(!1),o=z(r,2),a=o[0],l=o[1];return n.createElement(n.Fragment,null,n.createElement("div",{className:"bonds"}),f(t)?n.createElement(cn,null):null,n.createElement("div",{className:"round-score",onClick:function(){l(!0)}},e),n.createElement(un,{dialogIsOpen:a,closeDialog:function(){l(!1)}}))},cn=function(){return Q()?n.createElement("div",{className:"pirate-hook"}):n.createElement("div",{style:{display:"none"},className:"pirate-hook"})},un=function(e){var t=e.dialogIsOpen,r=e.closeDialog;return n.createElement(rn,{isOpen:t,onRequestClose:r,requestCloseOnClickOutside:!0},n.createElement("div",{className:"border border-right"}),n.createElement("div",{className:"border border-left"}),n.createElement("div",{className:"border border-top"}),n.createElement("div",{className:"border border-bottom"}),n.createElement("div",{className:"dialog-title"},"Score"),n.createElement("div",{className:"dialog-content score-rules-dialog"},n.createElement("div",{className:"dialog-body"},n.createElement("div",{className:"dialog-box"},n.createElement("div",{className:"dialog-label"},"Combinaisons de dés"),n.createElement("div",{className:"columns"},n.createElement("div",{className:"column"},n.createElement("div",{className:"column-title"},"Symbols identiques"),n.createElement("span",{className:"symbol-number"},"3"),n.createElement("span",{className:"symbol-number"},"4"),n.createElement("span",{className:"symbol-number"},"5"),n.createElement("span",{className:"symbol-number"},"6"),n.createElement("span",{className:"symbol-number"},"7"),n.createElement("span",{className:"symbol-number"},"8")),n.createElement("div",{className:"column"},n.createElement("div",{className:"column-title"},"Points"),n.createElement("span",{className:"points"},"+100"),n.createElement("span",{className:"points"},"+200"),n.createElement("span",{className:"points"},"+500"),n.createElement("span",{className:"points"},"+1000"),n.createElement("span",{className:"points"},"+2000"),n.createElement("span",{className:"points"},"+4000")))),n.createElement("div",{className:"dialog-box"},n.createElement("div",{className:"dialog-label"},"Dés spéciaux"),n.createElement("div",{className:"columns"},n.createElement("div",{className:"column"},n.createElement("div",{className:"column-title"},"Symbol"),n.createElement("img",{src:"src/dices/dice_coin.png"}),n.createElement("img",{src:"src/dices/dice_diamond.png"})),n.createElement("div",{className:"column"},n.createElement("div",{className:"column-title"},"Points"),n.createElement("span",{className:"points"},"+100"),n.createElement("span",{className:"points"},"+100")))),n.createElement("div",{className:"dialog-box last"},n.createElement("div",{className:"dialog-label"},"Bonus coffre plein"),n.createElement("div",{className:"columns"},n.createElement("div",{className:"column"},n.createElement("div",{className:"column-title"},"Dés utilisés"),n.createElement("span",{className:"symbol-number"},"8")),n.createElement("div",{className:"column"},n.createElement("div",{className:"column-title"},"Points"),n.createElement("span",{className:"points"},"+500")))))))},sn=n.useState,dn=n.useEffect,mn=function(){var e=q(),t=sn(null),r=z(t,2),o=r[0],a=r[1],l=K(),c=sn(!1),i=z(c,2),u=i[0],s=i[1];dn((function(){s(vn({dragDiceGesture:l,chestDropAreaDomNode:o}))}),[l,o]);var d=N(),m=u&&d.includes(u),f=u&&Object.keys(e).some((function(t){return e[t]&&e[t].value===u})),v=Ie(),p=gn();dn((function(){l&&l.setDropHandler(o,(function(t){var n=t.diceRectangle;if(!g&&(m||f)){var r=new Map,a=[];Object.keys(e).forEach((function(t){var n=e[t];if(!n||n.value===u){var l=o.querySelector('[data-chest-slot="'.concat(t,'"]')),c=it(l);r.set(c,t),a.push(c)}}));var l=function(e,t){var n=ct(e,t[0]);return t.reduce((function(t,r){var o=ct(e,r);return o<n?(n=o,r):t}))}(n,a),c=r.get(l);m?v(u,c):p(u,c)}}))}),[l,o]);var g=xe();return n.createElement("div",{className:"chest"},n.createElement("div",{className:"dice-area",ref:a,style:P({},m&&!g?{outline:"2px dotted"}:{})},n.createElement("div",{className:"box"},Object.keys(e).map((function(t){return n.createElement("div",{className:"slot",key:t,"data-chest-slot":t},n.createElement(fn,{chestSlotContent:e[t]}))}))),n.createElement("div",{className:"top-left-corner"}),n.createElement("div",{className:"top-right-corner"}),n.createElement("div",{className:"bottom-left-corner"}),n.createElement("div",{className:"bottom-right-corner"}),g?n.createElement(pn,null):null),n.createElement(an,null))},fn=function(e){var t=e.chestSlotContent,r=w(),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scoreMarked,n=void 0===t?O():t,r=e.threeSkullsOrMoreInCursedArea,o=void 0===r?xe():r;return!n&&!o}(),a=Me();if(!t)return null;if("symbol"===t.type){var l=t.value;return n.createElement("button",{className:"dice",style:{width:50,height:50,color:"#fcfcfc",margin:"5px",backgroundColor:Z[r].color1,borderColor:Z[r].color2,borderWidth:"2px",borderStyle:"solid"}},n.createElement("img",{src:"src/dices/dice_".concat(l,".png"),draggable:"false",style:{width:"100%",height:"100%"}}))}var c=t.value;return n.createElement(ht,{dice:c,draggable:!0,clickAllowed:o,onClickAction:function(e){a(e,e.rolledAreaPosition)}})},vn=function(e){var t=e.dragDiceGesture,n=e.chestDropAreaDomNode;if(!t)return null;var r=it(n);return ot(t.diceRectangle,r)?t.dice:null},pn=function(){return n.createElement("div",{className:"cursed-cover"},n.createElement("img",{src:"src/chest/cursed-grid.png",alt:"cursed-cover"}))},gn=L((function(e,t,n){var r,o=e.chestSlots,a=t.chestSlot;return t.chestSlot=n,P(P({},e),{},{chestSlots:P(P({},o),{},(r={},j(r,a,null),j(r,n,{type:"dice",value:t}),r))})})),hn={animals:{name:"Animaux",rule:"Les singes et les perroquest obtenus sur les dés comptent comme un même symbol dans une combinaison.",more:"Par exemple 2 perroquets et 3 singes forment une conbinaison de 5 dés identiques, soit 500 points."},chest:{name:"Coffre au trésor",rule:'Lorsque le joueur sauvegarde ses dés, grâce à la carte "Coffre au trésor" les dés sont protégés du mauvais sort.',more:"Ainsi même lorsque le joueur obtient 3 têtes de morts, son tour prends fin, mais il peut marquer les points totalisés grâce aux dés sauvegardés!"},coin:{name:"Pièce d'or",rule:"Le joueur commence son tour avec un symbol pièce d'or. Il rapporte des points aussi bien dans une combinaison de dés que comme simple pièce (+100)."},diamond:{name:"Diamant",rule:"Le joueur commence son tour avec un symbol diamant. Il rapporte des points aussi bien dans une combinaison de dés que comme simple diamant (+100)."},pirate:{name:"Capitaine des pirates",rule:"Grâce à l'aide du capitaine, tous les points comptabilisés pendant ce tour sont doublés !"},witch:{name:"Sorcière",rule:"Avec ses potions magiques, la sorcière permet exceptionnellement au joueur de relancer, une fois, un dé avec une tête de mort."},"1skull":{name:"Tête de mort",rule:"Le tour du joueur débute avec un symbole tête de mort."},"2skulls":{name:"2 têtes de mort",rule:"Le tour du joueur débute avec 2 symboles tête de mort."},"2sword-challenge":{name:"Bateau pirate",rule:"Le joueur doit obtenir au minimum 2 symbols sabres. Si il y parvient, il gagne +300 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -300 points pour ce tour, quelque soit son résultat aux dés.",more:"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points."},"3sword-challenge":{name:"Bateau pirate",rule:"Le joueur doit obtenir au minimum 3 symbols sabres. Si il y parvient, il gagne +500 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -500 points pour ce tour, quelque soit son résultat aux dés.",more:"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points."},"4sword-challenge":{name:"Bateau pirate",rule:"Le joueur doit obtenir au minimum 4 symbols sabres. Si il y parvient, il gagne +1000 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -1000 points pour ce tour, quelque soit son résultat aux dés.",more:"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points."}},bn=function(e){var t=e.dialogIsOpen,r=e.closeDialog,o=w();return n.createElement(rn,{isOpen:t,onRequestClose:r,requestCloseOnClickOutside:!0},n.createElement("div",{className:"border border-right"}),n.createElement("div",{className:"border border-left"}),n.createElement("div",{className:"border border-top"}),n.createElement("div",{className:"border border-bottom"}),n.createElement("div",{className:"dialog-title"},"Carte"),n.createElement("div",{className:"dialog-content card-rules-dialog"},n.createElement("div",{className:"dialog-body"},hn[o]&&n.createElement(n.Fragment,null,n.createElement("div",{className:"dialog-label"},hn[o].name),n.createElement("img",{className:"current-card",src:"src/cards/card_".concat(o,".png"),alt:o}),n.createElement("div",{className:"text-rule"},hn[o].rule),hn[o].more?n.createElement("div",{className:"text-rule"},hn[o].more):null))))},En=function(){var e=w(),t=ge(),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentCard,n=void 0===t?w():t;return o(n)?a.numberOfSwords:l(n)?c.numberOfSwords:i(n)?u.numberOfSwords:null}();if(!e||!F(e))return null;var s=ie(t,b),d=new Array(r).fill("");return n.createElement("div",{className:"sword-challenge-indicators"},d.map((function(e,t){return s>=t+1?n.createElement(yn,{key:t}):n.createElement(xn,{key:t})})))},yn=function(){return n.createElement("div",{className:"sword-icon"},n.createElement("img",{src:"src/dices/dice_sword.png"}))},xn=function(){return n.createElement("div",{className:"sword-icon disabled"},n.createElement("img",{src:"src/header/swords-disabled.png"}))},Nn=function(){var e=n.useState(!1),t=z(e,2),r=t[0],o=t[1],a=w();return n.createElement("div",{className:"header"},n.createElement("div",{className:"card-container",onClick:function(){a&&o(!0)}},n.createElement("div",{className:"small-card"},n.createElement(kn,null)),n.createElement(En,null)),n.createElement(Sn,null),n.createElement(bn,{dialogIsOpen:r,closeDialog:function(){o(!1)}}))},kn=function(){var e=w();return e?n.createElement(wn,{card:e}):n.createElement(Cn,null)},Cn=function(){return n.createElement("div",{className:"card default-card",style:{backgroundImage:"url('src/cards/card_default.png')",backgroundSize:"217px"}})},wn=function(e){var t=e.card;return n.createElement("div",{className:"card current-card",style:{backgroundColor:Z[t].color1,borderColor:Z[t].color2}},n.createElement("img",{src:"src/cards/card_small-".concat(F(t)?"sword-challenge":t,".png"),alt:t}))},Sn=function(){var e=$();return n.createElement("div",{className:"total-score"},n.createElement("span",{className:"score"},e))},On=function(e){var t=e.openDialog,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rollDiceAllowed,n=void 0===t?ye():t,r=e.markScoreAllowed,o=void 0===r?ke():r,a=e.hasDicesToCurse,l=void 0===a?be():a;return!n&&(!o&&!l)}(),o=An();return r?n.createElement("div",{className:"next-round-action"},n.createElement("button",{onClick:function(){t(!0),o()}},"Tour suivant")):null},An=L((function(e){return P(P({},e),{},{witchUncursedDiceId:null,roundStarted:!1,rollCount:0,dicesRolled:[],dicesCursed:[],chestSlots:{1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null,9:null},scoreMarked:!1,currentCard:null,isOnSkullIsland:!1})})),Dn=function(e){var t=e.dialogIsOpen,r=e.closeDialog,o=ee(),a=w();return n.createElement(rn,{isOpen:t,onRequestClose:r,requestCloseOnClickOutside:!1},n.createElement("div",{className:"border border-right"}),n.createElement("div",{className:"border border-left"}),n.createElement("div",{className:"border border-top"}),n.createElement("div",{className:"border border-bottom"}),n.createElement("div",{className:"dialog-title"},"Suivant"),n.createElement("div",{className:"dialog-content draw-card-dialog"},n.createElement("div",{className:"dialog-body"},n.createElement("div",{className:"dialog-label"},0!==o.length||a?"Piochez une carte pour le tour suivant.":"Paquet de cartes épuisé. Mélangez-le pour pouvoir piocher à nouveau."),n.createElement("div",{className:"card-area"},n.createElement(Pn,null),n.createElement(Mn,null)),n.createElement(In,null)),n.createElement("div",{className:"dialog-actions"},n.createElement(jn,null),n.createElement(Fn,{closeDialog:r}))))},Mn=function(){var e=w();return e?n.createElement("div",{className:"card current-card"},n.createElement("div",{className:"flip-card"},n.createElement("div",{className:"flip-card-inner"},n.createElement("div",{className:"flip-card-front"},n.createElement("div",{className:"card default-card",style:{backgroundImage:"url('src/cards/card_default.png')"}})),n.createElement("div",{className:"flip-card-back"},n.createElement("img",{src:"src/cards/card_".concat(e,".png"),alt:e}))))):null},In=function(){var e=w(),t=n.useState(!1),r=z(t,2),o=r[0],a=r[1];return e?n.createElement("div",{className:"card-description"},n.createElement("span",{className:"subtitle"},hn[e].name),n.createElement("button",{className:"moreInfoIcon",onClick:function(){a(!o)}},o?n.createElement(Ln,null):n.createElement(qn,null)),n.createElement(Rn,{moreInfoVisible:o})):null},Rn=function(e){var t=e.moreInfoVisible,r=w();return t?hn[r].more?n.createElement(n.Fragment,null,n.createElement("div",{className:"text-rule"},hn[r].rule),n.createElement("div",{className:"text-rule"},hn[r].more)):n.createElement("div",{className:"text-rule"},hn[r].rule):null},qn=function(){return n.createElement("svg",{viewBox:"0 0 24 24",height:"24px",width:"24px"},n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),n.createElement("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}))},Ln=function(){return n.createElement("svg",{viewBox:"0 0 24 24",width:"24px",height:"24px"},n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),n.createElement("path",{d:"M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}))},Pn=function(){var e=ee();return n.createElement("div",{className:"card default-card",id:"back-deck-card",style:{backgroundImage:"url('src/cards/card_default.png')"}},n.createElement("div",{className:"remaining-cards-number"},e.length))},jn=function(){var e=w(),t=ee();return e?null:0===t.length?n.createElement(_n,null):n.createElement(Tn,null)},Tn=function(){var e=Re();return n.createElement("button",{className:"draw-card-btn",onClick:e},"Piocher")},_n=function(){var e=Pe();return n.createElement("button",{className:"draw-card-btn",onClick:function(){document.getElementById("back-deck-card").setAttribute("shaking-deck",""),setTimeout((function(){document.getElementById("back-deck-card").removeAttribute("shaking-deck",""),e()}),1e3)}},"Mélanger le paquet")},Fn=function(e){var t=e.closeDialog,r=w(),o=Oe();return r?n.createElement("button",{className:"draw-card-btn",onClick:function(){o(),t()}},"Commencer"):null},Bn=function(e,t){var n=t.rolledAreaDomNode,r=it(n),o={left:6.25,right:r.right-r.left-56.25,top:6.25,bottom:r.bottom-r.top-56.25},a=[],l=function(e){var t=0;return function n(){var r=zn(e,o),l=Gn(),c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:et(e);return e.map((function(e){return $e(n,e,t)}))}(r,l);return!a.some((function(e){return t=e,rt(c,(function(e){return nt(e,t)}));var t}))||t>50?{rectangle:r,rotation:l,rotatedRectangle:c}:(t++,n())}()};return e.forEach((function(e){e.visibleFaceIndex=Hn(e);var t=l(e),n=t.rectangle,r=t.rotation,o=t.rotatedRectangle;a.push(o),e.rotation=r,e.rolledAreaPosition=n[0]})),e},zn=function(e,t){var n={x:Un(t.left,t.right),y:Un(t.top,t.bottom)};return[{x:n.x,y:n.y},{x:n.x+50,y:n.y},{x:n.x+50,y:n.y+50},{x:n.x,y:n.y+50}]},Gn=function(){return Un(-35,35)},Hn=function(e){return Un(0,e.faces.length-1)},Un=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},Vn=function(){var e=ye(),t=X(),r=Yn();return e?n.createElement("div",{className:"roll-action"},n.createElement("button",{onClick:function(){r(t)}},"Lancer")):null},Yn=L((function(e,t){var n=e.rollCount,o=e.dices,a=e.dicesRolled;return P(P({},e),{},{rollCount:n+1,dicesRolled:r(Bn(0===n?o:a,{rolledAreaDomNode:t}))})})),Xn=function(){var e=we(),t=Ce(),r=n.useState(!1),o=z(r,2),a=o[0],l=o[1];return n.createElement("div",{className:"actions"},n.createElement(Vn,null),n.createElement(On,{openDialog:function(){l(!0)}}),n.createElement(Kn,{onClick:function(){e(t)}}),n.createElement(Dn,{dialogIsOpen:a,closeDialog:function(){l(!1)}}))},Kn=function(e){var t=e.onClick,r=ke(),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hasRolledOnce,n=void 0===t?fe():t,r=e.scoreMarked,o=void 0===r?O():r,a=e.currentCard,l=void 0===a?w():a,c=e.hasDicesToCurse,i=void 0===c?be():c;return!o&&(!i&&(!!l&&!!n))}(),a=Ce(),l=a<0?"-":"+";return o?n.createElement("div",{className:"collect-action"},n.createElement("button",{onClick:t,disabled:!r},n.createElement("span",null,"Collecter"),n.createElement("span",{className:"score"},l," ",Math.abs(a))),!r&&n.createElement("img",{src:"src/dices/dice_skull.png",className:"skull-symbol"})):null},Wn=function(){var e=w(),t=C(),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.witchUncursedDiceId,n=void 0===t?k():t,r=e.currentCard,o=void 0===r?w():r,a=e.threeSkullsOrMoreInCursedArea,l=void 0===a?xe():a;return!!S(o)&&(!l&&!n)}(),o=De();return n.createElement("div",{className:"skull-island"},S(e)?n.createElement(Qn,null):null,n.createElement("div",{className:"bottle"},n.createElement("div",{className:"area"},M(e)?n.createElement(Jn,{card:e}):null,R(e)?n.createElement(n.Fragment,null,n.createElement(Jn,{card:e}),n.createElement(Jn,{card:e})):null,t.map((function(e){return n.createElement(ht,{key:e.id,dice:e,clickAllowed:r,onClickAction:function(e){o(e)},specificStyle:{margin:"1px 5px"}})})))))},Jn=function(e){var t=e.card;return n.createElement("button",{className:"dice",style:{width:50,height:50,color:"#fcfcfc",margin:"1px 5px",backgroundColor:Z[t].color1,borderColor:Z[t].color2,borderWidth:"2px"}},n.createElement("img",{src:"src/dices/dice_skull.png",style:{width:"100%",height:"100%"}}))},Qn=function(){return Q()?n.createElement("div",{className:"witch-label"},n.createElement("img",{src:"src/skull-island/witch-label.png"}),n.createElement("svg",{x:"0px",y:"0px",width:"156.083px",height:"208.667px",viewBox:"0 0 156.083 208.667"},n.createElement("path",{id:"path_01",fill:"none",stroke:"#E4AD30",d:"M8.406,107.82 c2.541,2.178,2.375,2.875,14.25,3.5c14.782,0.778,19.26-11.965,19.26-11.965S47.918,88,40.251,72.917s-18.916,4.583-9.083,8.167 s27.759-1.338,35.142-12.417C74.75,56,77.583,45.333,79.25,37S78.477,15.833,66.31,3.833"}),n.createElement("path",{id:"path_02",fill:"none",stroke:"#E4AD30",d:"M44.031,110.094 c0,0,1,1.313-4.438,3.344s-14.244,7.281-32.125-2"}),n.createElement("path",{id:"path_03",fill:"none",stroke:"#E4AD30",d:"M42.125,103.688 c0,0,1.313,6.594-9.313,8.625S10.281,108.719,9.406,101"}),n.createElement("path",{id:"path_04",fill:"none",stroke:"#E4AD30",d:"M33.114,112.253c0,0,39.886-19.253,43.011,24.747 c0.372,0.447-0.959,1.208-2.542,1.625"}))):n.createElement("img",{style:{display:"none"},src:"src/skull-island/witch-label.png"})},Zn=n.useMemo;e("Game",(function(){var e=te();return Zn((function(){return n.createElement("div",{id:"game-container"},n.createElement("div",{id:"game",ref:e},n.createElement(ne,{href:"/mille-sabord.css"}),n.createElement(Te,null),n.createElement(Ue,null),n.createElement(Nn,null),n.createElement("div",{className:"chest-and-skulls"},n.createElement(mn,null),n.createElement(Wn,null)),n.createElement(yt,null),n.createElement(Xn,null)))}))}))}}}));
//# sourceMappingURL=game.component-08ce3430.js.map
