{
  "version": 3,
  "file": "main.component.js",
  "sources": [
    "../../src/cards/card_default.png",
    "../../src/dom/dom.util.js",
    "../../src/loading/loading.main.js",
    "../../src/generic/Stylesheet.jsx",
    "../../node_modules/@jsenv/core/helpers/babel/extends/extends.js",
    "../../node_modules/@jsenv/core/helpers/babel/objectWithoutProperties/objectWithoutProperties.js",
    "../../node_modules/@jsenv/core/helpers/babel/objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js",
    "../../src/loading/loadImage.js",
    "../../src/loading/useImage.js",
    "../../src/generic/OnceIntersectingSuspense.js",
    "../../src/generic/Image.jsx",
    "../../src/home/Home.jsx",
    "../../src/hooks.js",
    "../../src/helper/signal.js",
    "../../src/score/computeRoundScore.js",
    "../../src/round/round.selectors.js",
    "../../src/round/round.actions.js",
    "../../src/dices/dices.actions.js",
    "../../src/round/round.effects.js",
    "../../src/cards/cards.actions.js",
    "../../src/cards/cards.effects.js",
    "../../src/dice-ongoing/DiceOnGoing.jsx",
    "../../src/dom/dom.traversal.js",
    "../../src/dialog/focus-trap.js",
    "../../src/dialog/scroll-trap.js",
    "../../src/dialog/DialogBase.jsx",
    "../../src/dialog/dialog.css",
    "../../src/dialog/Dialog.jsx",
    "../../src/header/swords-disabled.png",
    "../../src/header/SwordChallengeIndicator.jsx",
    "../../src/game-design/StarRain.jsx",
    "../../src/score/RoundScore.jsx",
    "../../src/dices/dicePosition.js",
    "../../src/chest/cursed-grid.png",
    "../../src/chest/Chest.jsx",
    "../../src/cards/cards-rules.js",
    "../../src/header/CardRulesDialog.jsx",
    "../../src/animation/startJavaScriptAnimation.js",
    "../../src/animation/useAnimateTransition.js",
    "../../src/header/Header.jsx",
    "../../src/helper/geometry.js",
    "../../src/helper/rectangle.js",
    "../../src/dom/dom.position.js",
    "../../src/dices/rollDices.js",
    "../../src/footer/ButtonRoll.js",
    "../../src/footer/Footer.jsx",
    "../../src/skull-island/witch-label.png",
    "../../src/skull-island/SkullIsland.jsx",
    "../../src/generic/Portal.jsx",
    "../../src/helper/render.js",
    "../../src/helper/throttle.js",
    "../../src/drag/drag.js",
    "../../src/dices/Dice.jsx",
    "../../src/dices/DiceContainer.jsx",
    "../../src/footer/DrawCardDialog.jsx",
    "../../src/round/Round.jsx",
    "../../src/score-board/StartPlayerRoundDialog.jsx",
    "../../src/score-board/win-treasure.png",
    "../../src/score-board/ScoreBoard.jsx",
    "../../src/game/GameConfiguration.jsx",
    "../../src/players/players.main.js",
    "../../src/players/Luffy.png",
    "../../src/players/MissFortune.png",
    "../../src/players/JackSparrow.png",
    "../../src/players/BarbeRouge.png",
    "../../src/players/GinetteBoulette.png",
    "../../src/players/CapitaineCrochet.png",
    "../../src/game/CharacterSelection.jsx",
    "../../src/game/Game.jsx",
    "../../node_modules/@jsenv/core/helpers/babel/createClass/createClass.js",
    "../../node_modules/@jsenv/core/helpers/babel/setPrototypeOf/setPrototypeOf.js",
    "../../node_modules/@jsenv/core/helpers/babel/getPrototypeOf/getPrototypeOf.js",
    "../../node_modules/@jsenv/core/helpers/babel/possibleConstructorReturn/possibleConstructorReturn.js",
    "../../node_modules/@jsenv/core/helpers/babel/assertThisInitialized/assertThisInitialized.js",
    "../../node_modules/@jsenv/core/helpers/babel/createSuper/createSuper.js",
    "../../node_modules/@jsenv/core/helpers/babel/isNativeReflectConstruct/isNativeReflectConstruct.js",
    "../../src/error/error.main.js",
    "../../src/wood.jpg",
    "../../src/chest/pirate-hook.png",
    "../../src/chest/pirate-hook-02.png",
    "../../src/chest/wood-box.jpg",
    "../../src/dice-ongoing/treasure-map.png",
    "../../src/skull-island/skull-bottle.png",
    "../../src/loading/preloadImages.js",
    "../../src/loading/ImagePreloader.jsx",
    "../../mille-sabord.css",
    "../../loadscreen.css",
    "../../src/main.component.js",
    "../../node_modules/@jsenv/core/helpers/babel/inherits/inherits.js",
    "../../node_modules/@jsenv/core/helpers/babel/classCallCheck/classCallCheck.js"
  ],
  "sourcesContent": [
    "export default import.meta.ROLLUP_FILE_URL_7755e30f",
    "/* eslint-disable valid-jsdoc */\n\nexport const addDomEventListener = (domNode, eventName, callback, options) => {\n  domNode.addEventListener(eventName, callback, options)\n  return () => {\n    domNode.removeEventListener(eventName, callback, options)\n  }\n}\n\n// checking if somthing is window is tricky\n// we could also use a.constructor.name === 'Window'\n// but it's safer to use approach below\nexport const elementIsWindow = (a) => a.window === a\n\nexport const elementIsDocument = (a) => a.nodeType === 9\n\nexport const elementIsIframe = ({ nodeName }) => nodeName === \"IFRAME\"\n\nexport const isFocusable = (node) => {\n  // only element node can be focused, document, textNodes etc cannot\n  if (node.nodeType !== 1) {\n    return false\n  }\n  const nodeName = node.nodeName.toLowerCase()\n\n  if (nodeName === \"input\") {\n    if (node.type === \"hidden\") {\n      return false\n    }\n    return isVisible(node)\n  }\n\n  if ([\"button\", \"select\", \"datalist\", \"iframe\", \"textarea\"].indexOf(nodeName) > -1) {\n    return isVisible(node)\n  }\n\n  if (node.hasAttribute(\"tabindex\") || node.hasAttribute(\"tabIndex\")) {\n    return isVisible(node)\n  }\n\n  if (node.hasAttribute(\"draggable\")) {\n    return isVisible(node)\n  }\n\n  if ([\"a\", \"area\"].indexOf(nodeName) > -1) {\n    if (node.hasAttribute(\"href\") === false) {\n      return false\n    }\n    return isVisible(node)\n  }\n\n  if ([\"audio\", \"video\"].indexOf(nodeName) > -1) {\n    if (node.hasAttribute(\"controls\") === false) {\n      return false\n    }\n    return isVisible(node)\n  }\n\n  return false\n}\n\nexport const isVisible = (node) => {\n  if (isDocumentElement(node)) {\n    return true\n  }\n  if (getStyleValue(node, \"visibility\") === \"hidden\") {\n    return false\n  }\n\n  let nodeOrAncestor = node\n  while (nodeOrAncestor) {\n    if (isDocumentElement(nodeOrAncestor)) {\n      break\n    }\n    if (getStyleValue(nodeOrAncestor, \"display\") === \"none\") {\n      return false\n    }\n    nodeOrAncestor = nodeOrAncestor.parentNode\n  }\n\n  return true\n}\n\n// https://github.com/davidtheclark/tabbable/blob/master/index.js\nexport const isDocumentElement = (node) => node === node.ownerDocument.documentElement\n\nexport const getStyle = (element) => elementToOwnerWindow(element).getComputedStyle(element)\n\nexport const getStyleValue = (element, name) => getStyle(element).getPropertyValue(name)\n\n/**\n * elementToOwnerWindow returns the window owning the element.\n * Usually an element window will just be window.\n * But when an element is inside an iframe, the window of that element\n * is iframe.contentWindow\n * It's often important to work with the correct window because\n * element are scoped per iframes.\n */\nexport const elementToOwnerWindow = (element) => {\n  if (elementIsWindow(element)) return element\n\n  if (elementIsDocument(element)) return element.defaultView\n\n  return elementToOwnerDocument(element).defaultView\n}\n\n/**\n * elementToOwnerDocument returns the document containing the element.\n * Usually an element document is window.document.\n * But when an element is inside an iframe, the document of that element\n * is iframe.contentWindow.document\n * It's often important to work with the correct document because\n * element are scoped per iframes.\n */\nexport const elementToOwnerDocument = (element) => {\n  if (elementIsWindow(element)) return element.document\n\n  if (elementIsDocument(element)) return element\n\n  return element.ownerDocument\n}\n\nexport const getDocumentScroll = (element) => {\n  const elementWindow = elementToOwnerWindow(element)\n  const elementDocument = elementToOwnerDocument(element)\n  return {\n    x: elementWindow.pageXOffset || elementDocument.documentElement.scrollLeft,\n    y: elementWindow.pageYOffset || elementDocument.documentElement.scrollTop,\n  }\n}\n\n/**\n * elementToOwnerIframe returns the iframe owning the element or null\n * when element is not inside an iframe.\n */\nexport const elementToOwnerIframe = (element) => {\n  const elementOwnerWindow = elementToOwnerWindow(element)\n  // element is not inside an iframe because it is owned by window\n  // if element is window itself, elementOwnerWindow is window too\n  // because elementToOwnerWindow(window) returns window\n  if (elementOwnerWindow === window) return null\n\n  const parentDocument = elementOwnerWindow.parent.document\n  return Array.from(parentDocument.querySelectorAll(\"iframe\")).find(\n    (iframe) => iframeIsFriendly(iframe) && iframe.contentWindow.document.contains(element),\n  )\n}\n\n/**\n * This function is used to ensure we are allowed to manipulate an iframe.\n * If we don't do this check before doing stuff like adding 'mousemove' event\n * to the iframe, it will throw an error.\n * A friendly iframe is usually an iframe with src set to 'about:blank'.\n * The opposite of a friendly iframe is an iframe on an other domain.\n */\nexport const iframeIsFriendly = (iframe) => {\n  const key = `${Number(new Date())}${Math.random()}`\n  const value = {}\n\n  try {\n    const iframeWindow = iframe.contentWindow\n    iframeWindow[key] = value\n    const isFriendly = iframeWindow[key] === value\n    delete iframeWindow[key]\n    return isFriendly\n  } catch (e) {\n    return false\n  }\n}\n",
    "import React from \"react\"\nimport { addDomEventListener } from \"src/dom/dom.util.js\"\n\nconst UrlLoadingContext = React.createContext()\nconst reducer = (state, action) => action(state)\nconst initialState = {}\n\nconst logs = true\n\nexport const UrlLoadingProvider = ({ children }) => {\n  return (\n    <UrlLoadingContext.Provider value={React.useReducer(reducer, initialState)}>\n      {children}\n    </UrlLoadingContext.Provider>\n  )\n}\n\nexport const useAllUrlLoaded = (fakeUrl) => {\n  const urlTrackerReady = useUrlTrackerReady(fakeUrl)\n  const urlTrackerTotalCount = useUrlTrackerTotalCount()\n  const urlTrackerLoadedCount = useUrlTrackerLoadedCount()\n  const [allUrlLoaded, allUrlLoadedSetter] = React.useState(false)\n\n  React.useEffect(() => {\n    if (urlTrackerReady && urlTrackerLoadedCount === urlTrackerTotalCount) {\n      allUrlLoadedSetter(true)\n    }\n  }, [urlTrackerReady, urlTrackerLoadedCount, urlTrackerTotalCount])\n  return allUrlLoaded\n}\n\nexport const useUrlTrackerReady = (fakeUrl = \"\") => {\n  const urlLoadingState = useUrlLoadingState()\n  const fakeUrlLoadends = useUrlLoadingNotifier(fakeUrl)\n  const fakeUrlLoadingTracker = urlLoadingState[fakeUrl]\n\n  const [ready, readySetter] = React.useState(false)\n\n  // wait a first fake url load ends to ensure other components are rendered\n  // once and capable to call useUrlLoadingNotifier() informing us\n  // that something is loading an url.\n  React.useEffect(() => {\n    // also use requestIdleCallback in case some image\n    // use intersection observer before starting to load\n    const callbackRequestId = window.requestIdleCallback(fakeUrlLoadends)\n    return () => {\n      window.cancelIdleCallback(callbackRequestId)\n    }\n  }, [])\n\n  React.useEffect(() => {\n    if (!fakeUrlLoadingTracker || fakeUrlLoadingTracker.status !== \"loaded\") {\n      return\n    }\n    readySetter(true)\n  })\n  return ready\n}\n\nexport const useUrlTrackerTotalCount = () => {\n  const urlLoadingState = useUrlLoadingState()\n  const totalCount = Object.keys(urlLoadingState).length\n  return totalCount\n}\n\nexport const useUrlTrackerLoadedCount = () => {\n  const urlLoadingState = useUrlLoadingState()\n  const loadedCount = Object.keys(urlLoadingState).filter(\n    (url) => urlLoadingState[url].status === \"loaded\",\n  ).length\n  return loadedCount\n}\n\nexport const useUrlTrackerAllLoaded = () => {\n  const totalCount = useUrlTrackerTotalCount()\n  const loadedCount = useUrlTrackerLoadedCount()\n  return loadedCount === totalCount\n}\n\nexport const useUrlLoadingNotifier = (url) => {\n  const contextValue = React.useContext(UrlLoadingContext)\n  if (!contextValue) {\n    if (import.meta.dev) {\n      console.warn(`useUrlLoadingNotifier was called on a component without UrlLoadingContext`)\n    }\n    return () => {}\n  }\n\n  const dispatch = contextValue[1]\n\n  const loadStarts = () => {\n    dispatch((state) => {\n      if (url in state) {\n        // console.log(\"start loading early return\", url, state[url])\n        return state\n      }\n      if (logs) {\n        console.log(\"start loading\", url)\n      }\n      return {\n        ...state,\n        [url]: { status: \"loading\" },\n      }\n    })\n  }\n\n  const loadEnds = () => {\n    dispatch((state) => {\n      if (url in state && state[url].status === \"loaded\") {\n        // console.log(\"end loading early return\", url, state[url])\n        return state\n      }\n      if (logs) {\n        console.log(\"end loading\", url)\n      }\n      return {\n        ...state,\n        [url]: { status: \"loaded\" },\n      }\n    })\n  }\n\n  React.useEffect(() => {\n    loadStarts()\n  }, [])\n\n  return loadEnds\n}\n\nexport const useDOMNodeLoadingNotifier = (url) => {\n  const loadEnds = useUrlLoadingNotifier(url)\n\n  const nodeRefCallback = (node) => {\n    if (node) {\n      addLoadedListener(node, loadEnds)\n    }\n  }\n\n  return nodeRefCallback\n}\n\nconst useUrlLoadingState = () => {\n  const contextValue = React.useContext(UrlLoadingContext)\n  if (!contextValue) {\n    if (import.meta.dev) {\n      console.warn(`useUrlLoadingState was called on a component without UrlLoadingContext`)\n    }\n    return null\n  }\n  return contextValue[0]\n}\n\nexport const useSingleUrlLoadingTracker = (url) => useUrlLoadingState()[url]\n\nconst addLoadedListener = (domNode, callback) => {\n  const removeLoadListener = addDomEventListener(domNode, \"load\", () => {\n    removeErrorListener()\n    callback()\n  })\n  const removeErrorListener = addDomEventListener(domNode, \"error\", () => {\n    removeLoadListener()\n    callback()\n  })\n\n  return () => {\n    removeLoadListener()\n    removeErrorListener()\n  }\n}\n",
    "import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport { useDOMNodeLoadingNotifier } from \"src/loading/loading.main.js\"\n\nexport const Stylesheet = ({ href }) => {\n  const ref = useDOMNodeLoadingNotifier(href)\n\n  return ReactDOM.createPortal(\n    <link href={href} ref={ref} rel=\"stylesheet\" type=\"text/css\" />,\n    document.head,\n  )\n}\n",
    "function assign(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    // eslint-disable-next-line prefer-rest-params\n    var source = arguments[i]\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key]\n      }\n    }\n  }\n  return target\n}\n\nexport default Object.assign || assign\n",
    "import objectWithoutPropertiesLoose from \"../objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js\"\n\nexport default (source, excluded) => {\n  if (source === null) return {}\n\n  var target = objectWithoutPropertiesLoose(source, excluded)\n  var key\n  var i\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source)\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i]\n      if (excluded.indexOf(key) >= 0) continue\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue\n      target[key] = source[key]\n    }\n  }\n  return target\n}\n",
    "export default (source, excluded) => {\n  if (source === null) return {}\n  var target = {}\n  var sourceKeys = Object.keys(source)\n  var key\n  var i\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i]\n    if (excluded.indexOf(key) >= 0) continue\n    target[key] = source[key]\n  }\n  return target\n}\n",
    "// https://vincenttaverna.com/posts/react-image-hook/\nexport const loadImage = (url, crossOrigin) => {\n  const image = new Image()\n\n  if (crossOrigin) {\n    image.crossOrigin = crossOrigin\n  }\n\n  return new Promise((resolve, reject) => {\n    // Load Handler\n    const loaded = (event) => {\n      // Cleanup our image element, we no longer need it\n      unbindEvents(image)\n      // Fulfill our promise with the event image element, even in older browsers\n      resolve(event.target || event.srcElement)\n    }\n\n    // Error Handler\n    const errored = (error) => {\n      // Cleanup our image element, we no longer need it\n      unbindEvents(image)\n      // Forward our error to the user\n      reject(error)\n    }\n\n    // Set our handlers\n    image.onload = loaded\n    image.onerror = errored\n    image.onabort = errored\n\n    // Tell the browser we are ready to begin downloading\n    image.src = url\n  })\n}\n\nconst unbindEvents = (image) => {\n  // Reset callbacks\n  image.onload = null\n  image.onerror = null\n  image.onabort = null\n\n  try {\n    // Some browsers need you to remove the src\n    // in order to garbage collect the image object\n    delete image.src\n  } catch (e) {\n    // Safari's strict mode throws, ignore\n  }\n}\n",
    "import React from \"react\"\nimport { loadImage } from \"./loadImage.js\"\n\nconst cache = new Map()\n\nexport const Status = {\n  LOADING: \"loading\",\n  LOADED: \"loaded\",\n  FAILED: \"failed\",\n}\n\nexport const useImage = (src) => {\n  const cachedImg = cache.get(src)\n  const initialState = cachedImg ? Status.LOADED : Status.LOADING\n  const [status, setStatus] = React.useState(initialState)\n  const mounted = React.useRef(false)\n\n  React.useEffect(() => {\n    if (!src || status === Status.LOADED) {\n      return () => {}\n    }\n    mounted.current = true\n    ;(async () => {\n      try {\n        const image = await loadImage(src)\n        if (!mounted.current) return\n\n        cache.set(src, image)\n        setStatus(Status.LOADED)\n      } catch (error) {\n        if (!mounted.current) return\n\n        cache.delete(src)\n        setStatus(Status.FAILED)\n      }\n    })()\n\n    return () => {\n      mounted.current = false\n    }\n  }, [src, status])\n\n  return [status, cachedImg]\n}\n",
    "import React from \"react\"\n\nexport const OnceIntersectingSuspense = ({\n  fallback,\n  root,\n  rootMargin,\n  threshold = 0,\n  children,\n}) => {\n  const [isIntersecting, isIntersectingSetter] = React.useState(false)\n  const [node, nodeSetter] = React.useState(null)\n\n  React.useEffect(() => {\n    if (!node) {\n      return () => {}\n    }\n    if (isIntersecting) {\n      return () => {}\n    }\n\n    // https://developer.mozilla.org/fr/docs/Web/API/Intersection_Observer_API\n    const observer = new window.IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          observer.unobserve(node)\n          isIntersectingSetter(true)\n        } else {\n          isIntersectingSetter(false)\n        }\n      },\n      {\n        root,\n        rootMargin,\n        threshold,\n      },\n    )\n    observer.observe(node)\n\n    return () => {\n      observer.disconnect()\n    }\n  }, [node, isIntersecting])\n\n  if (!isIntersecting) {\n    return fallback({ ref: nodeSetter })\n  }\n\n  return <>{children}</>\n}\n",
    "import React from \"react\"\n\nimport { useUrlLoadingNotifier } from \"src/loading/loading.main.js\"\nimport { useImage } from \"src/loading/useImage.js\"\nimport { OnceIntersectingSuspense } from \"./OnceIntersectingSuspense.js\"\n\nexport const Image = ({\n  loadWhenIntersecting = true,\n  usePlaceholderWhileLoading = true,\n  animateLoaded = true,\n\n  intersectionRoot,\n  intersectionRootMargin,\n  intersectionThreshold,\n  FallbackWhileNotIntersecting = ImageNotIntersectingFallback,\n  FallbackWhileLoading = ImageLoadingFallback,\n  src,\n  ...props\n}) => {\n  const [status] = useImage(src)\n  const imageLoadEnds = useUrlLoadingNotifier(src)\n  React.useEffect(() => {\n    if (status === \"loaded\") {\n      imageLoadEnds()\n    }\n  }, [status])\n\n  let Component = <img {...props} src={src} />\n\n  if (animateLoaded) {\n    Component = <AnimateImageLoaded {...props} src={src} />\n  }\n\n  if (usePlaceholderWhileLoading) {\n    const ComponentPrevious = Component\n    Component = (\n      <OnceImageLoadedSuspense src={src} fallback={<FallbackWhileLoading {...props} />}>\n        {ComponentPrevious}\n      </OnceImageLoadedSuspense>\n    )\n  }\n\n  if (loadWhenIntersecting) {\n    const ComponentPrevious = Component\n    Component = (\n      <OnceIntersectingSuspense\n        fallback={({ ref }) => <FallbackWhileNotIntersecting ref={ref} {...props} />}\n        root={intersectionRoot}\n        rootMargin={intersectionRootMargin}\n        threshold={intersectionThreshold}\n      >\n        {ComponentPrevious}\n      </OnceIntersectingSuspense>\n    )\n  }\n\n  return Component\n}\n\nconst AnimateImageLoaded = (props) => {\n  const nodeRef = React.useRef()\n  React.useEffect(() => {\n    nodeRef.current.animate(\n      [\n        { transform: \"scale(0)\", opacity: 0 },\n        { transform: \"scale(1)\", opacity: 1 },\n      ],\n      {\n        duration: 300,\n        fill: \"forwards\",\n      },\n    )\n  }, [nodeRef])\n  return <img {...props} ref={nodeRef} />\n}\n\nconst OnceImageLoadedSuspense = ({ fallback, src, children }) => {\n  const [status] = useImage(src)\n\n  if (status !== \"loaded\") {\n    return fallback\n  }\n\n  return children\n}\n\n// eslint-disable-next-line react/display-name\nconst ImageLoadingFallback = React.forwardRef((props, ref) => {\n  return <img src={TRANSPARENT_PNG_DATA_URL} {...props} ref={ref} />\n})\n\n// eslint-disable-next-line react/display-name\nconst ImageNotIntersectingFallback = React.forwardRef((props, ref) => {\n  return <img src={TRANSPARENT_PNG_DATA_URL} {...props} ref={ref} />\n})\n\nconst TRANSPARENT_PNG_DATA_URL =\n  \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==\"\n",
    "import React from \"react\"\nimport { Image } from \"src/generic/Image.jsx\"\nimport { createAction } from \"src/main.store.js\"\nimport { symbolSwordUrl } from \"src/symbols/symbols.js\"\n\nexport const Home = () => {\n  return <ButtonNewGame />\n}\n\nconst ButtonNewGame = () => {\n  const createNewGame = useCreateNewGame()\n\n  return (\n    <div className=\"new-game\">\n      <Image src={symbolSwordUrl} />\n      <button onClick={createNewGame}>Nouvelle partie</button>\n    </div>\n  )\n}\n\nconst useCreateNewGame = createAction((state) => {\n  return {\n    ...state,\n    gameCreated: true,\n  }\n})\n",
    "import React from \"react\"\nimport { createSignal } from \"src/helper/signal.js\"\n\n// https://stackoverflow.com/a/61680184/2634179\nexport const useBecomes = (becomesPredicate, deps) => {\n  const transition = useTransition(becomesPredicate, deps)\n  return Boolean(transition)\n}\n\nexport const useTransition = (transitionPredicate, deps) => {\n  const mountedRef = React.useRef(false)\n  React.useEffect(() => {\n    if (mountedRef.current === false) {\n      mountedRef.current = true\n    }\n  })\n\n  const depsRef = React.useRef(deps)\n  React.useEffect(() => {\n    depsRef.current = deps\n  }, deps)\n\n  if (!mountedRef.current) {\n    return null\n  }\n  if (!transitionPredicate(...depsRef.current)) {\n    return null\n  }\n  return {\n    from: depsRef.current,\n    to: deps,\n  }\n}\n\nexport const usePrevious = (value) => {\n  const ref = React.useRef(value)\n  React.useEffect(() => {\n    ref.current = value\n  }, [value])\n  return ref.current\n}\n\nexport const useSignalEmitter = () => {\n  const [signal] = React.useState(() => createSignal())\n  return signal\n}\n\nexport const useSignalListener = (signal) => {\n  const [state, stateSetter] = React.useState()\n  React.useEffect(() => {\n    return signal.listen(stateSetter)\n  }, [])\n  return state\n}\n",
    "export const createSignal = () => {\n  let listeners = []\n\n  const listen = (callback) => {\n    let removed = false\n    listeners = [...listeners, callback]\n    return () => {\n      if (removed) return\n      removed = true\n      const listenersWithoutCallback = []\n      let i = listeners.length\n      let searching = true\n      while (i--) {\n        const listenerCandidate = listeners[i]\n        if (searching) {\n          if (listenerCandidate === callback) {\n            searching = false\n          } else {\n            listenersWithoutCallback.push(listenerCandidate)\n          }\n        } else {\n          listenersWithoutCallback.push(listenerCandidate)\n        }\n      }\n      listeners = listenersWithoutCallback\n    }\n  }\n\n  const emit = (...args) => {\n    listeners.forEach((listener) => {\n      listener(...args)\n    })\n  }\n\n  return {\n    listen,\n    emit,\n  }\n}\n",
    "import {\n  SYMBOL_DIAMOND,\n  SYMBOL_COIN,\n  SYMBOL_PARROT,\n  SYMBOL_MONKEY,\n  SYMBOL_SWORD,\n} from \"src/symbols/symbols.js\"\nimport {\n  isAnimalsCard,\n  isPirateCard,\n  isCoinCard,\n  isDiamondCard,\n  isSwordChallengeCard,\n} from \"src/cards/cards.js\"\n\nexport const computeRoundScore = ({ card, symbolsInChest, scoreMarked, markScoreAllowed }) => {\n  if (isSwordChallengeCard(card)) {\n    if (!scoreMarked && !markScoreAllowed) {\n      return -card.gambleAmount\n    }\n    return computeScoreForSwordChallenge(symbolsInChest, {\n      goal: card.numberOfSwords,\n      gamble: card.gambleAmount,\n    })\n  }\n\n  if (isAnimalsCard(card)) {\n    return computeScoreForSymbols(\n      symbolsInChest.map((symbol) => (symbol === SYMBOL_PARROT ? SYMBOL_MONKEY : symbol)),\n    )\n  }\n\n  if (isPirateCard(card)) {\n    return computeScoreForSymbols(symbolsInChest) * 2\n  }\n\n  if (isCoinCard(card)) {\n    return computeScoreForSymbols(symbolsInChest, 9)\n  }\n\n  if (isDiamondCard(card)) {\n    return computeScoreForSymbols(symbolsInChest, 9)\n  }\n\n  return computeScoreForSymbols(symbolsInChest)\n}\n\nconst computeScoreForSwordChallenge = (symbols, { goal, gamble }) => {\n  const swordChallengeAchieved = countSymbol(symbols, SYMBOL_SWORD) >= goal\n  if (swordChallengeAchieved) {\n    return computeScoreForSymbols(symbols) + gamble\n  }\n  return -gamble\n}\n\nexport const countSymbol = (symbolArray, symbol) => {\n  return symbolArray.filter((symbolCandidate) => symbolCandidate === symbol).length\n}\n\nconst computeScoreForSymbols = (symbols, perfectCount = 8) => {\n  let score = 0\n  let usefullSymbol = 0\n\n  // add points for dice combinaisons\n  const symbolCountMap = countSymbolsOccurences(symbols)\n  Object.values(symbolCountMap).forEach((symbolCount) => {\n    if (symbolCount === 3) score += 100\n    if (symbolCount === 4) score += 200\n    if (symbolCount === 5) score += 500\n    if (symbolCount === 6) score += 1000\n    if (symbolCount === 7) score += 2000\n    if (symbolCount === 8) score += 4000\n    if (symbolCount > 2) usefullSymbol += symbolCount\n  })\n\n  // add 1 point for each coin and diamond\n  symbols.forEach((symbol) => {\n    if (symbol === SYMBOL_DIAMOND) {\n      score += 100\n      if (symbolCountMap[SYMBOL_DIAMOND] < 3) usefullSymbol += 1\n    }\n    if (symbol === SYMBOL_COIN) {\n      score += 100\n      if (symbolCountMap[SYMBOL_COIN] < 3) usefullSymbol += 1\n    }\n  })\n\n  if (usefullSymbol === perfectCount) score += 500\n\n  return score\n}\n\nconst countSymbolsOccurences = (symbols) => {\n  const symbolCountMap = {}\n  symbols.forEach((symbol) => {\n    if (symbolCountMap.hasOwnProperty(symbol)) {\n      symbolCountMap[symbol]++\n    } else {\n      symbolCountMap[symbol] = 1\n    }\n  })\n  return symbolCountMap\n}\n",
    "import React from \"react\"\n\nimport {\n  useRollCount,\n  useWitchUncursedDiceId,\n  useCurrentCardId,\n  useScoreMarked,\n  useCardIds,\n  useDiceRolledIds,\n  useDiceCursedIds,\n  useChestSlots,\n  useCurrentPlayerId,\n  usePlayers,\n  useDices,\n} from \"src/main.store.js\"\nimport { diceIsOnSkull, diceToVisibleSymbol } from \"src/dices/dices.js\"\nimport {\n  cardIdToCard,\n  isChestCard,\n  isCoinCard,\n  isDiamondCard,\n  isOneSkullCard,\n  isTwoSkullsCard,\n} from \"src/cards/cards.js\"\n\nimport { computeRoundScore } from \"src/score/computeRoundScore.js\"\nimport { symbolIsSkull, SYMBOL_COIN, SYMBOL_DIAMOND, SYMBOL_SKULL } from \"src/symbols/symbols.js\"\n\nconst { useMemo } = React\n\nexport const useCardDeck = ({ cardIds = useCardIds() } = {}) => {\n  return cardIds.map((cardId) => cardIdToCard(cardId))\n}\n\nexport const useCurrentPlayer = ({\n  currentPlayerId = useCurrentPlayerId(),\n  players = usePlayers(),\n} = {}) => {\n  return players.find((playerCandidate) => playerCandidate.id === currentPlayerId)\n}\n\nexport const usePlayer = (playerId, { players = usePlayers() } = {}) =>\n  players.find((playerCandidate) => playerCandidate.id === playerId)\n\nexport const useHasNeverRolled = ({ rollCount = useRollCount() } = {}) => rollCount === 0\n\nexport const useHasRolledOnce = ({ rollCount = useRollCount() } = {}) => rollCount > 0\n\nexport const useIsFirstRoll = ({ rollCount = useRollCount() } = {}) => rollCount === 1\n\nexport const useHasRolledMoreThanOnce = ({ rollCount = useRollCount() } = {}) => rollCount > 1\n\nexport const useSymbolsInChest = ({ dices = useDices(), chestSlots = useChestSlots() } = {}) => {\n  return Object.keys(chestSlots).reduce((previous, chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n\n    if (chestSlotContent && chestSlotContent.type === \"symbol\") {\n      return [...previous, chestSlotContent.value]\n    }\n\n    if (chestSlotContent && chestSlotContent.type === \"dice\") {\n      const diceId = chestSlotContent.value\n      const dice = dices[diceId]\n      return [...previous, diceToVisibleSymbol(dice)]\n    }\n\n    return previous\n  }, [])\n}\n\nexport const useRemainingSpotInCursedArea = ({\n  skullCountInCursedArea = useSkullCountInCursedArea(),\n} = {}) => {\n  return 3 - skullCountInCursedArea\n}\n\nexport const useHasDicesToCurse = ({ dicesToCurse = useDicesToCurse() } = {}) => {\n  return dicesToCurse.length > 0\n}\n\nexport const useDiceKeptIds = ({ chestSlots = useChestSlots() } = {}) => {\n  return Object.keys(chestSlots).reduce((previous, chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n    if (chestSlotContent && chestSlotContent.type === \"dice\") {\n      return [...previous, chestSlotContent.value]\n    }\n    return previous\n  }, [])\n}\n\nexport const useDicesToCurse = ({\n  dices = useDices(),\n  diceRolledIds = useDiceRolledIds(),\n  witchUncursedDiceId = useWitchUncursedDiceId(),\n  remainingSpotInCursedArea = useRemainingSpotInCursedArea(),\n} = {}) => {\n  const dicesToCurse = diceRolledIds\n    .map((diceRolledId) => dices[diceRolledId])\n    .filter((diceRolled) => {\n      if (!diceIsOnSkull(diceRolled)) return false\n      if (diceRolled.id === witchUncursedDiceId) return false\n      return true\n    })\n    .slice(0, remainingSpotInCursedArea)\n  return dicesToCurse\n}\n\nexport const useRollDiceAllowed = ({\n  currentCardId = useCurrentCardId(),\n  hasNeverRolled = useHasNeverRolled(),\n  scoreMarked = useScoreMarked(),\n  threeSkullsOrMoreInCursedArea = useThreeSkullsOrMoreInCursedArea(),\n  hasDicesToCurse = useHasDicesToCurse(),\n} = {}) => {\n  if (!currentCardId) {\n    return false\n  }\n\n  if (scoreMarked) {\n    return false\n  }\n\n  if (hasNeverRolled) {\n    return true\n  }\n\n  if (threeSkullsOrMoreInCursedArea) {\n    if (isChestCard(cardIdToCard(currentCardId))) {\n      return true\n    }\n    return false\n  }\n\n  if (hasDicesToCurse) {\n    return false\n  }\n\n  return true\n}\n\nexport const useThreeSkullsOrMoreInCursedArea = ({\n  skullCountInCursedArea = useSkullCountInCursedArea(),\n} = {}) => {\n  return skullCountInCursedArea > 2\n}\n\nexport const useSkullCountInCursedArea = ({\n  diceCursedIds = useDiceCursedIds(),\n  symbolsFromCard = useSymbolsFromCard(),\n} = {}) => {\n  return diceCursedIds.length + symbolsFromCard.filter((symbol) => symbolIsSkull(symbol)).length\n}\n\nconst useSymbolsFromCard = ({ currentCardId = useCurrentCardId() } = {}) => {\n  if (!currentCardId) return []\n  const currentCard = cardIdToCard(currentCardId)\n  if (isCoinCard(currentCard)) return [SYMBOL_COIN]\n  if (isDiamondCard(currentCard)) return [SYMBOL_DIAMOND]\n  if (isOneSkullCard(currentCard)) return [SYMBOL_SKULL]\n  if (isTwoSkullsCard(currentCard)) return [SYMBOL_SKULL, SYMBOL_SKULL]\n  return []\n}\n\nexport const useMarkScoreButtonVisible = ({\n  hasRolledOnce = useHasRolledOnce(),\n  scoreMarked = useScoreMarked(),\n  currentCardId = useCurrentCardId(),\n  hasDicesToCurse = useHasDicesToCurse(),\n} = {}) => {\n  if (scoreMarked) {\n    return false\n  }\n\n  if (hasDicesToCurse) {\n    return false\n  }\n\n  if (!currentCardId) {\n    return false\n  }\n\n  if (!hasRolledOnce) {\n    return false\n  }\n\n  return true\n}\n\nexport const useMarkScoreAllowed = ({\n  scoreMarked = useScoreMarked(),\n  currentCardId = useCurrentCardId(),\n  threeSkullsOrMoreInCursedArea = useThreeSkullsOrMoreInCursedArea(),\n  hasDicesToCurse = useHasDicesToCurse(),\n} = {}) => {\n  if (scoreMarked) {\n    return false\n  }\n\n  if (threeSkullsOrMoreInCursedArea) {\n    if (isChestCard(cardIdToCard(currentCardId))) {\n      return true\n    }\n    return false\n  }\n\n  if (hasDicesToCurse) {\n    return false\n  }\n\n  if (!currentCardId) {\n    return false\n  }\n\n  return true\n}\n\nexport const useStartNextRoundAllowed = ({\n  rollDiceAllowed = useRollDiceAllowed(),\n  markScoreAllowed = useMarkScoreAllowed(),\n  hasDicesToCurse = useHasDicesToCurse(),\n} = {}) => {\n  if (rollDiceAllowed) {\n    return false\n  }\n\n  if (markScoreAllowed) {\n    return false\n  }\n\n  if (hasDicesToCurse) {\n    return false\n  }\n\n  return true\n}\n\nexport const useRoundScore = ({\n  currentCardId = useCurrentCardId(),\n  symbolsInChest = useSymbolsInChest(),\n  scoreMarked = useScoreMarked(),\n  markScoreAllowed = useMarkScoreAllowed(),\n} = {}) => {\n  return useMemo(\n    () =>\n      computeRoundScore({\n        card: cardIdToCard(currentCardId),\n        symbolsInChest,\n        scoreMarked,\n        markScoreAllowed,\n      }),\n    [currentCardId, symbolsInChest, scoreMarked, markScoreAllowed],\n  )\n}\n",
    "import { createAction } from \"src/main.store.js\"\n\nexport const useStartPlayerRound = createAction((state, player) => {\n  return {\n    ...state,\n    currentPlayerId: player.id,\n    currentCardId: null,\n    currentCardActivated: false,\n    roundStarted: true,\n  }\n})\n\nexport const useActivateCurrentCard = createAction((state) => {\n  return {\n    ...state,\n    currentCardActivated: true,\n    ...ROUND_START_STATE,\n  }\n})\n\nexport const useSendToSkullIsland = createAction((state) => {\n  return {\n    ...state,\n    isOnSkullIsland: true,\n  }\n})\n\nexport const useMarkScore = createAction((state, score) => {\n  const { players, currentPlayerId } = state\n  const currentPlayer = players.find(({ id }) => id === currentPlayerId)\n  const nextScore = currentPlayer.score + score\n  currentPlayer.score = nextScore < 0 ? 0 : nextScore\n\n  return {\n    ...state,\n    players: [...players],\n    scoreMarked: true,\n  }\n})\n\nexport const useResetRound = createAction((state) => {\n  return {\n    ...state,\n    ...ROUND_START_STATE,\n  }\n})\n\nexport const useEndPlayerRound = createAction((state) => {\n  return {\n    ...state,\n    roundStarted: false,\n  }\n})\n\nconst ROUND_START_STATE = {\n  witchUncursedDiceId: null,\n  rollCount: 0,\n  diceRolledIds: [],\n  diceCursedIds: [],\n  chestSlots: {\n    1: null,\n    2: null,\n    3: null,\n    4: null,\n    5: null,\n    6: null,\n    7: null,\n    8: null,\n    9: null,\n  },\n  scoreMarked: false,\n  isOnSkullIsland: false,\n}\n",
    "import { createAction } from \"src/main.store.js\"\n\nexport const useSetDiceRolledAreaPosition = createAction((state, dice, { x, y }, zIndex) => {\n  const { dices } = state\n  dice.rolledAreaPosition = { x, y }\n  dice.rolledAreaZIndex = zIndex\n  return {\n    ...state,\n    dices: { ...dices },\n  }\n})\n\nexport const useSetDiceChestSlot = createAction((state, dice, chestSlot) => {\n  const { chestSlots } = state\n  const previousChestSlot = Object.keys(chestSlots).find((chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n    return (\n      chestSlotContent && chestSlotContent.type === \"dice\" && chestSlotContent.value === dice.id\n    )\n  })\n  return {\n    ...state,\n    chestSlots: {\n      ...chestSlots,\n      ...(previousChestSlot ? { [previousChestSlot]: null } : {}),\n      [chestSlot]: { type: \"dice\", value: dice.id },\n    },\n  }\n})\n\nexport const useCurseDice = createAction((state, dice) => {\n  const { diceRolledIds, diceCursedIds } = state\n  return {\n    ...state,\n    diceRolledIds: diceRolledIds.filter((diceRolledId) => diceRolledId !== dice.id),\n    diceCursedIds: [...diceCursedIds, dice.id],\n  }\n})\n\nexport const useUncurseDice = createAction((state, dice, fromLab = false) => {\n  const { diceRolledIds, diceCursedIds } = state\n  return {\n    ...state,\n    ...(fromLab ? {} : { witchUncursedDiceId: dice.id }),\n    diceRolledIds: [...diceRolledIds, dice.id],\n    diceCursedIds: diceCursedIds.filter((diceCursedId) => diceCursedId !== dice.id),\n  }\n})\n\nexport const useUnkeepDice = createAction((state, dice) => {\n  const { diceRolledIds, chestSlots } = state\n  const previousChestSlot = Object.keys(chestSlots).find((chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n    return (\n      chestSlotContent && chestSlotContent.type === \"dice\" && chestSlotContent.value === dice.id\n    )\n  })\n  return {\n    ...state,\n    diceRolledIds: [...diceRolledIds, dice.id],\n    chestSlots: {\n      ...chestSlots,\n      [previousChestSlot]: null,\n    },\n  }\n})\n\nexport const useKeepDice = createAction((state, dice, chestSlot) => {\n  const { diceRolledIds, chestSlots } = state\n  return {\n    ...state,\n    diceRolledIds: diceRolledIds.filter((diceRolledId) => diceRolledId !== dice.id),\n    chestSlots: {\n      ...chestSlots,\n      [chestSlot]: {\n        type: \"dice\",\n        value: dice.id,\n      },\n    },\n  }\n})\n",
    "import React from \"react\"\n\nimport { useBecomes } from \"src/hooks.js\"\nimport { useCurrentCardId, useScoreMarked, useIsOnSkullIsland } from \"src/main.store.js\"\nimport { cardIdToCard, isSwordChallengeCard } from \"src/cards/cards.js\"\nimport {\n  useIsFirstRoll,\n  useThreeSkullsOrMoreInCursedArea,\n  useDicesToCurse,\n  useSkullCountInCursedArea,\n  useRoundScore,\n} from \"src/round/round.selectors.js\"\nimport { useMarkScore, useSendToSkullIsland } from \"src/round/round.actions.js\"\nimport { useCurseDice } from \"src/dices/dices.actions.js\"\n\nconst { useEffect } = React\n\nexport const RoundEffects = () => {\n  useRoundEffects()\n  return null\n}\n\nexport const useRoundEffects = () => {\n  useCurseDiceEffect()\n  useFailSwordChallengeEffect()\n  useFourSkullsOrMoreOnFirstRollEffect()\n}\n\nconst useCurseDiceEffect = () => {\n  const dicesToCurse = useDicesToCurse()\n  const curseDice = useCurseDice()\n\n  useEffect(() => {\n    if (dicesToCurse.length === 0) return () => {}\n\n    const timeout = setTimeout(() => {\n      dicesToCurse.forEach((dice) => {\n        curseDice(dice)\n      })\n    }, 1000)\n\n    return () => {\n      clearTimeout(timeout)\n    }\n  }, [dicesToCurse])\n}\n\n// auto mark score for failed sword challenges\nconst useFailSwordChallengeEffect = () => {\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const scoreMarked = useScoreMarked()\n  const markScore = useMarkScore()\n  const threeSkullsOrMoreInCursedArea = useThreeSkullsOrMoreInCursedArea()\n  const threeSkullsOrMoreInCursedAreaBecomesTrue = useBecomes(\n    (threeSkullsOrMoreInCursedAreaPrevious) =>\n      !threeSkullsOrMoreInCursedAreaPrevious && threeSkullsOrMoreInCursedArea,\n    [threeSkullsOrMoreInCursedArea],\n  )\n  const roundScore = useRoundScore()\n  const swordChallengeCard = isSwordChallengeCard(currentCard)\n\n  useEffect(() => {\n    if (swordChallengeCard && !scoreMarked && threeSkullsOrMoreInCursedAreaBecomesTrue) {\n      markScore(roundScore)\n    }\n  }, [swordChallengeCard, scoreMarked, threeSkullsOrMoreInCursedAreaBecomesTrue, roundScore])\n}\n\n// go to skull island if 4 skulls or more on first roll\nconst useFourSkullsOrMoreOnFirstRollEffect = () => {\n  const isFirstRoll = useIsFirstRoll()\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const isOnSkullIsland = useIsOnSkullIsland()\n  const skullCountInCursedArea = useSkullCountInCursedArea()\n  const sendToSkullIsland = useSendToSkullIsland()\n\n  useEffect(() => {\n    if (!isFirstRoll) return\n\n    if (isOnSkullIsland) return\n\n    if (isSwordChallengeCard(currentCard)) return\n\n    if (skullCountInCursedArea < 4) return\n\n    sendToSkullIsland()\n  }, [isFirstRoll, isOnSkullIsland, currentCard, skullCountInCursedArea])\n}\n",
    "import { createAction } from \"src/main.store.js\"\nimport { mixDeck } from \"src/cards/cards.js\"\nimport { SYMBOL_COIN, SYMBOL_DIAMOND } from \"src/symbols/symbols.js\"\n\nexport const useDrawCard = createAction((state) => {\n  const { cardIds, cardUsedIds } = state\n  const cardDrawnId = cardIds[0]\n  return {\n    ...state,\n    cardIds: cardIds.slice(1),\n    cardUsedIds: [...cardUsedIds, cardDrawnId],\n    currentCardId: cardDrawnId,\n  }\n})\n\nexport const useAddExtraCoin = createAction((state) => {\n  const { chestSlots } = state\n  return {\n    ...state,\n    chestSlots: {\n      ...chestSlots,\n      1: {\n        type: \"symbol\",\n        value: SYMBOL_COIN,\n      },\n    },\n  }\n})\n\nexport const useAddExtraDiamond = createAction((state) => {\n  const { chestSlots } = state\n  return {\n    ...state,\n    chestSlots: {\n      ...chestSlots,\n      1: {\n        type: \"symbol\",\n        value: SYMBOL_DIAMOND,\n      },\n    },\n  }\n})\n\nexport const useShuffleDeck = createAction((state) => {\n  const { cardUsedIds } = state\n  return {\n    ...state,\n    cardIds: mixDeck(cardUsedIds),\n    cardUsedIds: [],\n  }\n})\n\nexport const useUndrawCard = createAction((state) => {\n  const { currentCardId, cardIds, cardUsedIds } = state\n  return {\n    ...state,\n    currentCardId: null,\n    cardIds: [currentCardId, ...cardIds],\n    cardUsedIds: cardUsedIds.slice(1),\n  }\n})\n",
    "import React from \"react\"\n\nimport { useBecomes } from \"src/hooks.js\"\nimport { useCurrentCardId } from \"src/main.store.js\"\nimport { cardIdToCard, isCoinCard, isDiamondCard } from \"src/cards/cards.js\"\nimport { useAddExtraCoin, useAddExtraDiamond } from \"src/cards/cards.actions.js\"\n\nexport const CardsEffects = () => {\n  useCoinCardEffect()\n  useDiamondCardEffect()\n  return null\n}\n\nconst useCoinCardEffect = () => {\n  const addExtraCoin = useAddExtraCoin()\n  const currentCardId = useCurrentCardId()\n  const drawCoinCard = useBecomes(\n    (currentCardIdPrevious) =>\n      !currentCardIdPrevious && currentCardId && isCoinCard(cardIdToCard(currentCardId)),\n    [currentCardId],\n  )\n\n  React.useEffect(() => {\n    if (drawCoinCard) {\n      addExtraCoin()\n    }\n  }, [drawCoinCard])\n}\n\nconst useDiamondCardEffect = () => {\n  const addExtraDiamond = useAddExtraDiamond()\n  const currentCardId = useCurrentCardId()\n  const drawDiamondCard = useBecomes(\n    (currentCardIdPrevious) =>\n      !currentCardIdPrevious && currentCardId && isDiamondCard(cardIdToCard(currentCardId)),\n    [currentCardId],\n  )\n\n  React.useEffect(() => {\n    if (drawDiamondCard) {\n      addExtraDiamond()\n    }\n  }, [drawDiamondCard])\n}\n",
    "import React from \"react\"\nimport { useSignalListener } from \"src/hooks.js\"\n\nexport const DiceOnGoing = ({ rolledAreaRef, offscreenRef, diceOverRolledAreaSignal }) => {\n  const diceOverRolledArea = useSignalListener(diceOverRolledAreaSignal)\n  return (\n    <div className=\"dice-ongoing\">\n      <div className=\"map\"></div>\n      <div\n        className=\"area\"\n        ref={rolledAreaRef}\n        style={{\n          ...(diceOverRolledArea ? { outline: \"2px dotted\" } : {}),\n        }}\n      ></div>\n      <div className=\"offscreen-area\" ref={offscreenRef}>\n        {/* we will move the dice into this zone when they are offgame (first roll) */}\n      </div>\n    </div>\n  )\n}\n",
    "export const findFirstAncestor = (node, predicate) => {\n  let ancestor = node.parentNode\n  while (ancestor) {\n    if (predicate(ancestor)) {\n      return ancestor\n    }\n    ancestor = ancestor.parentNode\n  }\n  return null\n}\n\nexport const findFirstDescendant = (rootNode, fn) => {\n  const iterator = createNextNodeIterator(rootNode, rootNode)\n  let { done, value: node } = iterator.next()\n  while (done === false) {\n    if (fn(node)) {\n      return node\n    }\n    ;({ done, value: node } = iterator.next())\n  }\n  return null\n}\n\nexport const findLastDescendant = (rootNode, fn) => {\n  const deepestNode = getDeepestNode(rootNode)\n  if (deepestNode) {\n    const iterator = createPreviousNodeIterator(deepestNode, rootNode)\n    let { done, value: node } = iterator.next()\n    while (done === false) {\n      if (fn(node)) {\n        return node\n      }\n      ;({ done, value: node } = iterator.next())\n    }\n  }\n  return null\n}\n\nexport const findAfter = ({ from, root = null, predicate, skipChildren = false }) => {\n  const iterator = createAfterNodeIterator(from, root, skipChildren)\n  let { done, value: node } = iterator.next()\n  while (done === false) {\n    if (predicate(node)) {\n      return node\n    }\n    ;({ done, value: node } = iterator.next())\n  }\n  return null\n}\n\nexport const findAfterSkippingChildren = (param) => findAfter({ ...param, skipChildren: true })\n\nexport const findBefore = ({ from, root = null, predicate }) => {\n  const iterator = createPreviousNodeIterator(from, root)\n  let { done, value: node } = iterator.next()\n  while (done === false) {\n    if (predicate(node)) {\n      return node\n    }\n    ;({ done, value: node } = iterator.next())\n  }\n  return null\n}\n\nconst getNextNode = (node, rootNode, skipChild = false) => {\n  if (!skipChild) {\n    const firstChild = node.firstChild\n    if (firstChild) {\n      return firstChild\n    }\n  }\n\n  const nextSibling = node.nextSibling\n  if (nextSibling) {\n    return nextSibling\n  }\n\n  const parentNode = node.parentNode\n  if (parentNode && parentNode !== rootNode) {\n    return getNextNode(parentNode, rootNode, true)\n  }\n\n  return null\n}\n\nconst createNextNodeIterator = (node, rootNode) => {\n  let current = node\n  const next = () => {\n    const nextNode = getNextNode(current, rootNode)\n    current = nextNode\n    return {\n      done: Boolean(nextNode) === false,\n      value: nextNode,\n    }\n  }\n  return { next }\n}\n\nconst createAfterNodeIterator = (fromNode, rootNode, skipChildren = false) => {\n  let current = fromNode\n  let childrenSkipped = false\n  const next = () => {\n    const nextNode = getNextNode(current, rootNode, skipChildren && childrenSkipped === false)\n    childrenSkipped = true\n    current = nextNode\n    return {\n      done: Boolean(nextNode) === false,\n      value: nextNode,\n    }\n  }\n  return { next }\n}\n\nconst getDeepestNode = (node) => {\n  let deepestNode = node.lastChild\n  while (deepestNode) {\n    const lastChild = deepestNode.lastChild\n    if (lastChild) {\n      deepestNode = lastChild\n    } else {\n      break\n    }\n  }\n  return deepestNode\n}\n\nconst getPreviousNode = (node, rootNode) => {\n  const previousSibling = node.previousSibling\n  if (previousSibling) {\n    const deepestChild = getDeepestNode(previousSibling)\n\n    if (deepestChild) {\n      return deepestChild\n    }\n    return previousSibling\n  }\n  if (node !== rootNode) {\n    const parentNode = node.parentNode\n    if (parentNode && parentNode !== rootNode) {\n      return parentNode\n    }\n  }\n  return null\n}\n\nconst createPreviousNodeIterator = (fromNode, rootNode) => {\n  let current = fromNode\n  const next = () => {\n    const previousNode = getPreviousNode(current, rootNode)\n    current = previousNode\n    return {\n      done: Boolean(previousNode) === false,\n      value: previousNode,\n    }\n  }\n  return {\n    next,\n  }\n}\n",
    "import { isFocusable } from \"src/dom/dom.util.js\"\nimport {\n  findAfter,\n  findBefore,\n  findFirstDescendant,\n  findLastDescendant,\n} from \"src/dom/dom.traversal.js\"\n\nexport const firstFocusableDescendantOrSelf = (element) => {\n  const firstFocusableDescendant = findFirstDescendant(element, isFocusable)\n  if (firstFocusableDescendant) return firstFocusableDescendant\n\n  if (isFocusable(element)) return element\n\n  return null\n}\n\nexport const trapFocusInside = (element) => {\n  if (element.nodeType === 3) {\n    console.warn(\"cannot trap focus inside a text node\")\n    return () => {}\n  }\n\n  const trappedElement = activeTraps.find((activeTrap) => activeTrap.element === element)\n  if (trappedElement) {\n    console.warn(\"focus already trapped inside this element\")\n    return () => {}\n  }\n\n  const isEventOutside = (event) => {\n    if (event.target === element) return false\n    if (element.contains(event.target)) return false\n    return true\n  }\n\n  const getFirstTabbable = () => findFirstDescendant(element, isDiscoverableWithKeyboard)\n\n  const getLastTabbable = () => findLastDescendant(element, isDiscoverableWithKeyboard)\n\n  const getPreviousTabbableOrLast = () => {\n    const previous = findBefore({\n      from: document.activeElement,\n      root: element,\n      predicate: isDiscoverableWithKeyboard,\n    })\n    return previous || getLastTabbable()\n  }\n\n  const getNextTabbableOrFirst = () => {\n    const next = findAfter({\n      from: document.activeElement,\n      root: element,\n      predicate: isDiscoverableWithKeyboard,\n    })\n    return next || getFirstTabbable()\n  }\n\n  const performTabEventNavigation = (event) => {\n    const activeElement = document.activeElement\n    const activeElementIsBody = activeElement === document.body\n\n    if (event.shiftKey) {\n      const elementToFocus = activeElementIsBody\n        ? getLastTabbable()\n        : getPreviousTabbableOrLast(activeElement)\n      if (elementToFocus) {\n        elementToFocus.focus()\n      }\n    } else {\n      const elementToFocus = activeElementIsBody\n        ? getFirstTabbable()\n        : getNextTabbableOrFirst(activeElement)\n      if (elementToFocus) {\n        elementToFocus.focus()\n      }\n    }\n  }\n\n  const lock = () => {\n    const onmousedown = (event) => {\n      if (isEventOutside(event)) {\n        event.preventDefault()\n        event.stopImmediatePropagation()\n      }\n    }\n\n    const onkeydown = (event) => {\n      if (isTabEvent(event)) {\n        event.preventDefault()\n        performTabEventNavigation(event)\n      }\n    }\n\n    document.addEventListener(\"mousedown\", onmousedown, { capture: true, passive: false })\n    document.addEventListener(\"keydown\", onkeydown, { capture: true, passive: false })\n\n    return () => {\n      document.removeEventListener(\"mousedown\", onmousedown, { capture: true, passive: false })\n      document.removeEventListener(\"keydown\", onkeydown, { capture: true, passive: false })\n    }\n  }\n\n  const deactivate = activate({ element, lock })\n\n  const untrap = () => {\n    deactivate()\n  }\n\n  return untrap\n}\n\nconst hasNegativeTabIndex = (element) => {\n  return (\n    element.hasAttribute &&\n    element.hasAttribute(\"tabIndex\") &&\n    Number(element.getAttribute(\"tabindex\")) < 0\n  )\n}\n\nconst isDiscoverableWithKeyboard = (element) => {\n  if (hasNegativeTabIndex(element)) {\n    return false\n  }\n  return isFocusable(element)\n}\n\nconst isTabEvent = (event) => event.key === \"Tab\" || event.keyCode === 9\n\nconst activeTraps = []\nconst activate = ({ lock }) => {\n  // unlock any trap currently activated\n  let previousTrap\n  if (activeTraps.length > 0) {\n    previousTrap = activeTraps[activeTraps.length - 1]\n    previousTrap.unlock()\n  }\n\n  // store trap methods to lock/unlock as traps are acivated/deactivated\n  const trap = { lock, unlock: lock() }\n  activeTraps.push(trap)\n\n  return () => {\n    if (activeTraps.length === 0) {\n      console.warn(\"cannot deactivate an already deactivated trap\")\n      return\n    }\n    const lastTrap = activeTraps[activeTraps.length - 1]\n    if (trap !== lastTrap) {\n      // TODO: investigate this and maybe remove this requirment\n      console.warn(\"you must deactivate trap in the same order they were activated\")\n      return\n    }\n    activeTraps.pop()\n    trap.unlock()\n    // if any,reactivate the previous trap\n    if (previousTrap) {\n      previousTrap.unlock = previousTrap.lock()\n    }\n  }\n}\n",
    "import { getStyleValue, isDocumentElement } from \"src/dom/dom.util.js\"\n\nexport const trapScrollInside = (element) => {\n  const elementsToScrollLock = []\n  let previous = element.previousSibling\n  while (previous) {\n    if (previous.nodeType === 1) {\n      if (isScrollable(previous)) {\n        elementsToScrollLock.push(previous)\n      }\n    }\n    previous = previous.previousSibling\n  }\n\n  const scrollableParent = getScrollableParent(element)\n  elementsToScrollLock.push(scrollableParent)\n  const cleanUpArray = elementsToScrollLock.map((element) => {\n    const prev = element.style.overflow\n    element.style.overflow = \"hidden\"\n    return () => {\n      if (prev) {\n        element.style.overflow = prev\n      } else {\n        delete element.style.overflow\n      }\n    }\n  })\n\n  return () => {\n    cleanUpArray.forEach((cleanup) => {\n      cleanup()\n    })\n  }\n}\n\nconst getScrollableParent = (arg) => {\n  if (typeof arg !== \"object\" || arg.nodeType !== 1) {\n    throw new TypeError(\"getScrollableParent first argument must be DOM node\")\n  }\n  const element = arg\n  const position = getStyleValue(element, \"position\")\n\n  if (position === \"fixed\") {\n    return getScrollingElement(element.ownerDocument)\n  }\n  return findScrollableParent(element) || getScrollingElement(element.ownerDocument)\n}\n\nconst getScrollingElement = (document) => {\n  if (\"scrollingElement\" in document) {\n    return document.scrollingElement\n  }\n\n  if (isCompliant(document)) {\n    return document.documentElement\n  }\n\n  const body = document.body\n  const isFrameset = body && !/body/i.test(body.tagName)\n  const possiblyScrollingElement = isFrameset ? getNextBodyElement(body) : body\n\n  // If `body` is itself scrollable, it is not the `scrollingElement`.\n  return possiblyScrollingElement && bodyIsScrollable(possiblyScrollingElement)\n    ? null\n    : possiblyScrollingElement\n}\n\nconst getNextBodyElement = (frameset) => {\n  // We use this function to be correct per spec in case `document.body` is\n  // a `frameset` but there exists a later `body`. Since `document.body` is\n  // a `frameset`, we know the root is an `html`, and there was no `body`\n  // before the `frameset`, so we just need to look at siblings after the\n  // `frameset`.\n  let current = frameset\n  while ((current = current.nextSibling)) {\n    if (current.nodeType === 1 && isBodyElement(current)) {\n      return current\n    }\n  }\n  return null\n}\n\nconst isBodyElement = (element) => element.ownerDocument.body === element\n\nconst bodyIsScrollable = (body) => {\n  // a body element is scrollable if body and html are scrollable and rendered\n  if (!isScrollable(body)) {\n    return false\n  }\n  if (isHidden(body)) {\n    return false\n  }\n\n  const documentElement = body.ownerDocument.documentElement\n  if (!isScrollable(documentElement)) {\n    return false\n  }\n  if (isHidden(documentElement)) {\n    return false\n  }\n\n  return true\n}\n\nconst isHidden = (element) => {\n  const display = getStyleValue(element, \"display\")\n  if (display === \"none\") {\n    return false\n  }\n\n  if (display === \"table-row\" || display === \"table-group\" || display === \"table-column\") {\n    return getStyleValue(element, \"visibility\") !== \"collapsed\"\n  }\n\n  return true\n}\n\nconst isCompliant = (document) => {\n  // Note: document.compatMode can be toggle at runtime by document.write\n  const isStandardsMode = /^CSS1/.test(document.compatMode)\n  if (isStandardsMode) {\n    return testScrollCompliance(document)\n  }\n  return false\n}\n\nconst testScrollCompliance = (document) => {\n  const iframe = document.createElement(\"iframe\")\n  iframe.style.height = \"1px\"\n  const parentNode = document.body || document.documentElement || document\n  parentNode.appendChild(iframe)\n  const iframeDocument = iframe.contentWindow.document\n  iframeDocument.write('<!DOCTYPE html><div style=\"height:9999em\">x</div>')\n  iframeDocument.close()\n  const scrollComplianceResult =\n    iframeDocument.documentElement.scrollHeight > iframeDocument.body.scrollHeight\n  iframe.parentNode.removeChild(iframe)\n  return scrollComplianceResult\n}\n\nconst isScrollable = (element) => {\n  // note: keep in mind that an element with overflow: 'hidden' is scrollable\n  // it can be scrolled using keyboard arrows or JavaScript properties such as scrollTop, scrollLeft\n  if (!verticalOverflowIsVisible(element)) {\n    return true\n  }\n\n  if (!horizontalOverflowIsVisible(element)) {\n    return true\n  }\n\n  return false\n}\n\nconst verticalOverflowIsVisible = (element) => {\n  const verticalOverflow = getStyleValue(element, \"overflow-x\")\n  if (verticalOverflow === \"visible\") {\n    return true\n  }\n\n  const overflow = getStyleValue(element, \"overflow\")\n  return overflow === \"visible\"\n}\n\nconst horizontalOverflowIsVisible = (element) => {\n  const horizontalOverflow = getStyleValue(element, \"overflow-y\")\n  if (horizontalOverflow === \"visible\") {\n    return true\n  }\n  const overflow = getStyleValue(element, \"overflow\")\n  return overflow === \"visible\"\n}\n\nconst findScrollableParent = (element) => {\n  const position = getStyleValue(element, \"position\")\n  let parent = element.parentNode\n  while (parent) {\n    if (isDocumentElement(parent)) {\n      return null\n    }\n    if (position === \"absolute\" && getStyleValue(parent, \"position\") === \"static\") {\n      parent = parent.parentNode\n      continue\n    }\n    if (isScrollable(parent)) {\n      return parent\n    }\n    parent = parent.parentNode\n  }\n  return null\n}\n",
    "import React from \"react\"\nimport ReactDOM from \"react-dom\"\n\nimport { useBecomes } from \"src/hooks.js\"\nimport { firstFocusableDescendantOrSelf, trapFocusInside } from \"./focus-trap.js\"\nimport { trapScrollInside } from \"./scroll-trap.js\"\n\nconst { useEffect } = React\n\n/**\nhttps://github.com/reactjs/react-modal\nhttps://github.com/reactjs/react-modal/blob/master/src/components/ModalPortal.js\nhttps://fr.reactjs.org/docs/portals.html\n*/\n\nconst DIALOG_STYLE = {\n  position: \"absolute\",\n  top: \"5%\",\n  left: \"0\",\n  right: \"0\",\n  width: \"fit-content\",\n  height: \"fit-content\",\n  margin: \"auto\",\n  padding: \"1em\",\n\n  // prevent body scrolling when scrolling the dialog content\n  overscrollBehavior: \"contain\",\n  outline: \"none\",\n\n  background: \"white\",\n  color: \"black\",\n  border: \"solid\",\n}\n\nconst BACKDROP_STYLE = {\n  position: \"fixed\",\n  top: 0,\n  left: 0,\n  right: 0,\n  bottom: 0,\n  backgroundColor: \"rgba(0, 0, 0, 0.46)\",\n}\n\nexport const DialogBase = ({\n  container = document.body,\n  children,\n  isOpen,\n  // closeMethod can be \"visibility-hidden\", \"hidden-attribute\", \"dom-remove\"\n  // ideally we should return null when isOpen is false and the dialog never rendered\n  // (to avoid putting the dialog in display none while it might never be used)\n  // (but that depends it's too early to know exactly what we want/need)\n  closeMethod = \"display-none\",\n  stealFocus = true,\n  restoreStolenFocus = true,\n  trapFocus = true,\n  requestCloseOnEscape = true,\n  requestCloseOnClickOutside = false,\n  onAfterOpen = () => {},\n  onRequestClose = () => {},\n  onFocusIn = () => {},\n  onFocusOut = () => {},\n  backdropProps = {},\n  ...rest\n}) => {\n  if (!container) return null\n  const [dialogElement, setDialogElement] = React.useState(null)\n\n  const isInsideDocument = Boolean(dialogElement)\n  const becomesOpen = useBecomes((isActivePrevious) => !isActivePrevious && isOpen, [isOpen])\n\n  if (becomesOpen) {\n    onAfterOpen()\n  }\n\n  // onFocusIn, onFocusOut implementation\n  // https://github.com/facebook/react/issues/6410\n  useEffect(() => {\n    if (!isOpen || !isInsideDocument) return () => {}\n\n    let focusIsInsideDialog = hasOrContainsFocus(dialogElement)\n\n    const onDocumentBlur = (blurEvent) => {\n      // focus is leaving the document and it was inside dialog\n      if (!blurEvent.relatedTarget) {\n        if (focusIsInsideDialog) {\n          focusIsInsideDialog = false\n          onFocusOut(blurEvent)\n        }\n      }\n    }\n\n    const onDialogFocus = (focusEvent) => {\n      onFocusIn(focusEvent)\n      focusIsInsideDialog = true\n    }\n    const onDocumentFocus = (focusEvent) => {\n      if (hasOrContainsFocus(dialogElement)) {\n        focusIsInsideDialog = true\n      } else {\n        focusIsInsideDialog = false\n        onFocusOut(focusEvent)\n      }\n    }\n\n    dialogElement.addEventListener(\"focus\", onDialogFocus, true)\n    document.addEventListener(\"focus\", onDocumentFocus, true)\n    document.addEventListener(\"blur\", onDocumentBlur, true)\n    return () => {\n      dialogElement.removeEventListener(\"focus\", onDialogFocus, true)\n      document.removeEventListener(\"focus\", onDocumentFocus, true)\n      document.removeEventListener(\"blur\", onDocumentBlur, true)\n    }\n  }, [isOpen, isInsideDocument, onFocusIn, onFocusOut])\n\n  // trap scroll inside dialog\n  useEffect(() => {\n    if (!isOpen || !isInsideDocument) return () => {}\n\n    return trapScrollInside(dialogElement)\n  }, [isOpen, isInsideDocument])\n\n  // trap focus inside dialog\n  useEffect(() => {\n    if (!isOpen || !isInsideDocument || !trapFocus) return () => {}\n\n    return trapFocusInside(dialogElement)\n  }, [isOpen, isInsideDocument, trapFocus])\n\n  // steal focus to move it into dialog when it opens\n  useEffect(() => {\n    if (!isOpen || !isInsideDocument || !stealFocus) return () => {}\n\n    const nodeFocusedBeforeTransfer = document.activeElement\n    const firstFocusableElement = firstFocusableDescendantOrSelf(dialogElement)\n    if (firstFocusableElement) {\n      firstFocusableElement.focus()\n    }\n    return () => {\n      if (firstFocusableElement) {\n        if (typeof restoreStolenFocus === \"function\") {\n          restoreStolenFocus(nodeFocusedBeforeTransfer)\n        } else if (restoreStolenFocus === true) {\n          nodeFocusedBeforeTransfer.focus()\n        }\n      }\n    }\n  }, [isOpen, isInsideDocument, stealFocus])\n\n  // put aria-hidden on elements behind this dialog\n  useEffect(() => {\n    if (!isOpen || !dialogElement || !dialogElement.parentNode) return () => {}\n\n    const elementsToHide = []\n    /*\n    we hide previous and next siblings\n    because when dialog is opened everything around it should be considered\n    hidden (you cannot have several modal visible at the same time).\n\n    Let's keep in mind we are talking about a dialog in the accessibility terms.\n    It should focus trap, prevent interaction with the rest of the page\n    and consider the rest as hidden.\n    This dialog is not meant to be used for tooltip and so on.\n    */\n    const parentChildren = Array.from(dialogElement.parentNode.children)\n    parentChildren.forEach((child) => {\n      if (child !== dialogElement) {\n        elementsToHide.push(child)\n      }\n    })\n\n    elementsToHide.forEach((element) => {\n      element.setAttribute(\"aria-hidden\", \"true\")\n    })\n    return () => {\n      elementsToHide.forEach((element) => {\n        element.removeAttribute(\"aria-hidden\", \"true\")\n      })\n    }\n  }, [isOpen, dialogElement])\n\n  if (closeMethod === \"dom-remove\" && !isOpen) {\n    return null\n  }\n\n  return ReactDOM.createPortal(\n    <>\n      {isOpen ? (\n        <DialogBackDrop\n          {...backdropProps}\n          style={{\n            ...BACKDROP_STYLE,\n            ...backdropProps.style,\n          }}\n          // mousedown on backdrop -> transfer focus to dialog\n          onMouseDownPassive={(mousedownEvent) => {\n            // prevent mousedown on backdrop from putting focus on document.body\n            mousedownEvent.preventDefault()\n            // instead foward focus to the dialog if not already inside\n            if (!hasOrContainsFocus(dialogElement)) {\n              const firstFocusableElement = firstFocusableDescendantOrSelf(dialogElement)\n              if (firstFocusableElement) {\n                firstFocusableElement.focus()\n              }\n            }\n          }}\n          onClick={(clickEvent) => {\n            if (requestCloseOnClickOutside) {\n              const { target } = clickEvent\n              // dialogElement.firstChild?\n              if (target !== dialogElement && !dialogElement.contains(target)) {\n                onRequestClose(clickEvent)\n              }\n            }\n            if (backdropProps.onClick) backdropProps.onClick(clickEvent)\n          }}\n        />\n      ) : null}\n      <div\n        {...rest}\n        style={{\n          ...DIALOG_STYLE,\n          ...rest.style,\n          ...(isOpen ? {} : getStyleForClose(closeMethod)),\n        }}\n        ref={(element) => {\n          setDialogElement(element)\n          if (rest.ref) rest.ref(element)\n        }}\n        onKeyDown={(keydownEvent) => {\n          if (requestCloseOnEscape && keydownEvent.keyCode === ESC_KEY) {\n            onRequestClose(keydownEvent)\n          }\n          if (rest.onKeyDown) rest.onKeyDown(keydownEvent)\n        }}\n        hidden={closeMethod === \"hidden-attribute\" ? isOpen : undefined}\n        tabIndex=\"-1\"\n      >\n        {children}\n      </div>\n    </>,\n    container,\n  )\n}\n\nconst DialogBackDrop = ({ onMouseDownPassive, ...props }) => {\n  const [backdropElement, setBackdropElement] = React.useState(null)\n  useEffect(() => {\n    if (!backdropElement) return () => {}\n\n    backdropElement.addEventListener(\"mousedown\", onMouseDownPassive, { passive: false })\n    return () => {\n      backdropElement.removeEventListener(\"mousedown\", onMouseDownPassive, { passive: false })\n    }\n  }, [backdropElement])\n\n  return (\n    <div\n      ref={(element) => {\n        setBackdropElement(element)\n        if (props.ref) props.ref(element)\n      }}\n      {...props}\n    ></div>\n  )\n}\n\nconst getStyleForClose = (closeMethod) => {\n  if (closeMethod === \"display-none\") {\n    return { display: \"none\" }\n  }\n  if (closeMethod === \"visibility-hidden\") {\n    return { visibility: \"hidden\" }\n  }\n  return {}\n}\n\nconst hasOrContainsFocus = (element) => {\n  const { activeElement } = document\n  return element === activeElement || element.contains(activeElement)\n}\n\nconst ESC_KEY = 27\n",
    "export default import.meta.ROLLUP_FILE_URL_c69576f5",
    "import React from \"react\"\n\nimport { useMainDomNode } from \"src/dom/dom.main.js\"\nimport { Stylesheet } from \"src/generic/Stylesheet.jsx\"\n\nimport { DialogBase } from \"./DialogBase.jsx\"\nimport dialogCssUrl from \"src/dialog/dialog.css\"\n\nexport const Dialog = (props) => {\n  return (\n    <>\n      <Stylesheet href={dialogCssUrl} />\n      <DialogBase\n        container={useMainDomNode()}\n        backdropProps={{\n          className: \"dialog--backdrop\",\n        }}\n        style={{\n          top: \"10%\",\n          left: \"6%\",\n          right: \"6%\",\n          bottom: \"8%\",\n          height: \"auto\",\n          width: \"auto\",\n          padding: \"0\",\n          border: \"none\",\n          background: \"none\",\n          maxWidth: \"620px\",\n          margin: \"0 auto\",\n        }}\n        className={\"dialog\"}\n        {...props}\n      />\n    </>\n  )\n}\n",
    "export default import.meta.ROLLUP_FILE_URL_0f175120",
    "import React from \"react\"\n\nimport { Image } from \"src/generic/Image.jsx\"\nimport { useCurrentCardId } from \"src/main.store.js\"\nimport { useSymbolsInChest } from \"src/round/round.selectors.js\"\nimport { cardIdToCard, isSwordChallengeCard } from \"src/cards/cards.js\"\nimport { SYMBOL_SWORD, symbolSwordUrl } from \"src/symbols/symbols.js\"\nimport { countSymbol } from \"src/score/computeRoundScore.js\"\nimport swordsDisabledImageUrl from \"src/header/swords-disabled.png\"\n\nexport const useSwordQuantityRequired = ({ currentCardId = useCurrentCardId() } = {}) => {\n  const card = cardIdToCard(currentCardId)\n  if (isSwordChallengeCard(card)) return card.numberOfSwords\n  return null\n}\n\nexport const SwordChallengeIndicator = () => {\n  const currentCardId = useCurrentCardId()\n  const symbolsInChest = useSymbolsInChest()\n  const quantityRequired = useSwordQuantityRequired()\n\n  if (!currentCardId) {\n    return null\n  }\n  const currentCard = cardIdToCard(currentCardId)\n  if (!isSwordChallengeCard(currentCard)) {\n    return null\n  }\n\n  const quantityKept = countSymbol(symbolsInChest, SYMBOL_SWORD)\n  const quantityRequiredArray = new Array(quantityRequired).fill(\"\")\n\n  return (\n    <div className=\"sword-challenge-indicators\">\n      {quantityRequiredArray.map((value, index) => {\n        if (quantityKept >= index + 1) return <SwordIconActivated key={index} />\n        return <SwordIconDisabled key={index} />\n      })}\n    </div>\n  )\n}\n\nconst SwordIconActivated = () => (\n  <div className=\"sword-icon\">\n    <Image src={symbolSwordUrl} />\n  </div>\n)\n\nconst SwordIconDisabled = () => (\n  <div className=\"sword-icon disabled\">\n    <Image src={swordsDisabledImageUrl} />\n  </div>\n)\n",
    "import React from \"react\"\n\nexport const StarRain = () => {\n  return (\n    <div className=\"star-rain-container\">\n      <div className=\"star\" id=\"star-01\">\n        <Star />\n      </div>\n      <div className=\"star\" id=\"star-02\">\n        <Star />\n      </div>\n      <div className=\"star\" id=\"star-03\">\n        <Star />\n      </div>\n      <div className=\"star\" id=\"star-04\">\n        <Star />\n      </div>\n      <div className=\"star\" id=\"star-05\">\n        <Star />\n      </div>\n      <div className=\"star\" id=\"star-06\">\n        <Star />\n      </div>\n    </div>\n  )\n}\n\nconst Star = () => (\n  <svg viewBox=\"0 0 217.791 210.633\">\n    <path\n      fill=\"#FFFFE6\"\n      d=\"M94.15,77.97c0,0-2-54,10-73.5s23,28.5,25.5,72.5c0,0,69.197,4.589,86.5,21c13.637,12.934-61.5,31-87,33.5\n\tc-2,14.5-1.831,60.464-16.5,75.5c-20,20.5-25.5-50.5-23-78c-19-1.5-81.5-3.5-89-17.5S52.15,85.97,94.15,77.97z\"\n    />\n  </svg>\n)\n",
    "/* eslint-disable import/max-dependencies */\nimport React from \"react\"\n\nimport { Image } from \"src/generic/Image.jsx\"\nimport { useCurrentCardId, useCurrentCardActivated, useScoreMarked } from \"src/main.store.js\"\nimport { useRoundScore, useSymbolsInChest } from \"src/round/round.selectors.js\"\n\nimport { cardIdToCard, isPirateCard, isSwordChallengeCard } from \"src/cards/cards.js\"\nimport { useBecomes } from \"src/hooks.js\"\nimport { Dialog } from \"src/dialog/Dialog.jsx\"\nimport { SYMBOL_SWORD, symbolCoinUrl, symbolDiamondUrl } from \"src/symbols/symbols.js\"\nimport { useSwordQuantityRequired } from \"src/header/SwordChallengeIndicator.jsx\"\nimport { countSymbol } from \"src/score/computeRoundScore.js\"\nimport { StarRain } from \"src/game-design/StarRain.jsx\"\n\nconst { useState, useEffect } = React\n\nconst swordChallengeOngoing = () => {\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const symbolsInChest = useSymbolsInChest()\n  const quantityKept = countSymbol(symbolsInChest, SYMBOL_SWORD)\n  const quantityRequired = useSwordQuantityRequired()\n\n  if (!isSwordChallengeCard(currentCard)) return false\n\n  const challengeWon = quantityKept >= quantityRequired\n  return !challengeWon\n}\n\nexport const RoundScore = () => {\n  const currentCard = cardIdToCard(useCurrentCardId())\n\n  return (\n    <div className={`score-area ${swordChallengeOngoing() ? \"animated\" : \"\"}`}>\n      {currentCard ? <ScoreDisplay /> : null}\n    </div>\n  )\n}\n\nconst ScoreDisplay = () => {\n  const roundScore = useRoundScore()\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const scoreMarked = useScoreMarked()\n\n  const [dialogIsOpen, setDialogIsOpen] = useState(false)\n\n  const openDialog = () => {\n    setDialogIsOpen(true)\n  }\n\n  const closeDialog = () => {\n    setDialogIsOpen(false)\n  }\n\n  // const { isOnSkullIsland } = state\n  // if (isOnSkullIsland) {\n  //   return <span>Skull Island!</span>\n  // }\n\n  return (\n    <>\n      {isPirateCard(currentCard) ? <DoubleScoreIndicator /> : null}\n      {scoreMarked && <StarRain />}\n      <div\n        className={`round-score ${swordChallengeOngoing() ? \"hidden\" : \"\"}`}\n        onClick={() => {\n          openDialog()\n        }}\n      >\n        {roundScore}\n      </div>\n      {isSwordChallengeCard(currentCard) ? <NegativeScoreSign /> : null}\n      <ScoreRulesDialog dialogIsOpen={dialogIsOpen} closeDialog={closeDialog} />\n    </>\n  )\n}\n\nconst DoubleScoreIndicator = () => {\n  const currentCardActivated = useCurrentCardActivated()\n  if (!currentCardActivated) {\n    return <div style={{ display: \"none\" }} className=\"pirate-hook\"></div>\n  }\n  return <div className=\"pirate-hook\"></div>\n}\n\nconst NegativeScoreSign = () => {\n  const roundScore = useRoundScore()\n\n  const symbolsInChest = useSymbolsInChest()\n  const quantityKept = countSymbol(symbolsInChest, SYMBOL_SWORD)\n  const quantityRequired = useSwordQuantityRequired()\n  const quantityRequiredArray = new Array(quantityRequired).fill(\"\")\n  const challengeWon = quantityKept >= quantityRequired\n\n  const swordNumberIncreased = useBecomes(\n    (quantityKeptPrevious) => quantityKeptPrevious < quantityKept,\n    [quantityKept],\n  )\n\n  const [swordSliceAnimation, swordSliceAnimationSetter] = useState(false)\n\n  useEffect(() => {\n    if (swordNumberIncreased) {\n      swordSliceAnimationSetter(true)\n    }\n  }, [swordNumberIncreased])\n\n  useEffect(() => {\n    if (swordSliceAnimation) {\n      const timeout = setTimeout(() => {\n        swordSliceAnimationSetter(false)\n      }, 300)\n      return () => {\n        clearTimeout(timeout)\n      }\n    }\n    return () => {}\n  }, [swordSliceAnimation])\n\n  return (\n    <>\n      <div className={`ropes ${challengeWon ? \"challenge-won\" : \"\"}`}>\n        {quantityRequiredArray.map((value, index) => {\n          if (quantityKept >= index + 1)\n            return <div key={index} className={`rope rope-${index + 1} cut-rope`}></div>\n          return <div key={index} className={`rope rope-${index + 1}`}></div>\n        })}\n      </div>\n      {swordSliceAnimation && quantityKept <= quantityRequired ? (\n        <div className=\"sword-slice\">\n          <div className=\"triangle-left\"></div>\n          <div className=\"triangle-right\"></div>\n        </div>\n      ) : null}\n      <div\n        className={`negative-round-score rotate-${quantityKept} ${challengeWon ? \"removed\" : \"\"}`}\n      >\n        {roundScore}\n      </div>\n    </>\n  )\n}\n\nconst ScoreRulesDialog = ({ dialogIsOpen, closeDialog }) => (\n  <Dialog isOpen={dialogIsOpen} onRequestClose={closeDialog} requestCloseOnClickOutside={true}>\n    <div className=\"border border-right\"></div>\n    <div className=\"border border-left\"></div>\n    <div className=\"border border-top\"></div>\n    <div className=\"border border-bottom\"></div>\n\n    <div className=\"dialog-title\">Score</div>\n\n    <div className=\"dialog-content score-rules-dialog\">\n      <div className=\"dialog-body\">\n        <div className=\"dialog-box\">\n          <div className=\"dialog-label\">Combinaisons de dés</div>\n          <div className=\"columns\">\n            <div className=\"column\">\n              <div className=\"column-title\">Symbols identiques</div>\n              <span className=\"symbol-number\">3</span>\n              <span className=\"symbol-number\">4</span>\n              <span className=\"symbol-number\">5</span>\n              <span className=\"symbol-number\">6</span>\n              <span className=\"symbol-number\">7</span>\n              <span className=\"symbol-number\">8</span>\n            </div>\n            <div className=\"column\">\n              <div className=\"column-title\">Points</div>\n              <span className=\"points\">+100</span>\n              <span className=\"points\">+200</span>\n              <span className=\"points\">+500</span>\n              <span className=\"points\">+1000</span>\n              <span className=\"points\">+2000</span>\n              <span className=\"points\">+4000</span>\n            </div>\n          </div>\n        </div>\n        <div className=\"dialog-box\">\n          <div className=\"dialog-label\">Dés spéciaux</div>\n          <div className=\"columns\">\n            <div className=\"column\">\n              <div className=\"column-title\">Symbol</div>\n              <Image src={symbolCoinUrl} />\n              <Image src={symbolDiamondUrl} />\n            </div>\n            <div className=\"column\">\n              <div className=\"column-title\">Points</div>\n              <span className=\"points\">+100</span>\n              <span className=\"points\">+100</span>\n            </div>\n          </div>\n        </div>\n        <div className=\"dialog-box last\">\n          <div className=\"dialog-label\">Bonus coffre plein</div>\n          <div className=\"columns\">\n            <div className=\"column\">\n              <div className=\"column-title\">Dés utilisés</div>\n              <span className=\"symbol-number\">8</span>\n            </div>\n            <div className=\"column\">\n              <div className=\"column-title\">Points</div>\n              <span className=\"points\">+500</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </Dialog>\n)\n",
    "export const diceSize = 50\n",
    "export default import.meta.ROLLUP_FILE_URL_fdd9b9de",
    "import React from \"react\"\n\nimport { useSignalListener } from \"src/hooks.js\"\nimport { useCurrentCardId, useChestSlots } from \"src/main.store.js\"\nimport { Image } from \"src/generic/Image.jsx\"\nimport { useThreeSkullsOrMoreInCursedArea } from \"src/round/round.selectors.js\"\n\nimport { symbolToImageUrl } from \"src/symbols/symbols.js\"\nimport { cardIdToCard, isChestCard } from \"src/cards/cards.js\"\n\nimport { RoundScore } from \"src/score/RoundScore.jsx\"\nimport { diceSize } from \"src/dices/dicePosition.js\"\n\nimport cursedGridImageUrl from \"src/chest/cursed-grid.png\"\n\nexport const Chest = ({ chestRef, diceOverChestSignal }) => {\n  const chestSlots = useChestSlots()\n  const threeSkullsOrMoreInCursedArea = useThreeSkullsOrMoreInCursedArea()\n  const diceOverChest = useSignalListener(diceOverChestSignal)\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const protectedByChestCard = threeSkullsOrMoreInCursedArea && isChestCard(currentCard)\n\n  /*\n    to get better user experience we should instantiate 9 elements even if the dices are not kept\n    these elements would be valid drop target\n    so that user can choose to put the dice where he wants in the dice kept area\n\n    beware though because we still want user to drop a dice\n    anywhere in the kept area and dice will choose to drop where it intersects most\n\n    to achieve this the most intersecting drop target should win (how to do that remains to be found)\n\n    il faut vraiment le coder comme ça\n    parce que c'est plus simple a comprendre\n  */\n\n  return (\n    <div className=\"chest\">\n      <div\n        ref={chestRef}\n        className={`dice-area ${isChestCard(currentCard) ? \"glow\" : \"\"}`}\n        style={{\n          ...(diceOverChest ? { outline: \"2px dotted\" } : {}),\n        }}\n      >\n        <div className=\"box\">\n          {Object.keys(chestSlots).map((chestSlot) => (\n            <div className=\"slot\" key={chestSlot} data-chest-slot={chestSlot}>\n              <ChestSlot chestSlotContent={chestSlots[chestSlot]} />\n            </div>\n          ))}\n        </div>\n        <div className=\"top-left-corner\"></div>\n        <div className=\"top-right-corner\"></div>\n        <div className=\"bottom-left-corner\"></div>\n        <div className=\"bottom-right-corner\"></div>\n        {threeSkullsOrMoreInCursedArea && !protectedByChestCard ? <CursedCover /> : null}\n      </div>\n      <RoundScore />\n    </div>\n  )\n}\n\nconst ChestSlot = ({ chestSlotContent }) => {\n  const currentCard = cardIdToCard(useCurrentCardId())\n\n  if (!chestSlotContent) {\n    return null\n  }\n\n  if (chestSlotContent.type === \"symbol\") {\n    const symbol = chestSlotContent.value\n    return (\n      <button\n        className=\"dice\"\n        style={{\n          width: diceSize,\n          height: diceSize,\n          color: \"#fcfcfc\",\n          margin: \"5px\",\n          backgroundColor: currentCard.color1,\n          borderColor: currentCard.color2,\n          borderWidth: \"2px\",\n          borderStyle: \"solid\",\n        }}\n      >\n        <Image\n          src={symbolToImageUrl(symbol)}\n          draggable=\"false\"\n          style={{\n            width: \"100%\",\n            height: \"100%\",\n          }}\n        />\n      </button>\n    )\n  }\n\n  // it's a dice\n  return null\n}\n\nconst CursedCover = () => {\n  return (\n    <div className=\"cursed-cover\">\n      <Image draggable=\"false\" src={cursedGridImageUrl} alt=\"cursed-cover\" />\n    </div>\n  )\n}\n",
    "export const cardsRules = {\n  \"animals\": {\n    name: \"Animaux\",\n    rule:\n      \"Les singes et les perroquest obtenus sur les dés comptent comme un même symbol dans une combinaison.\",\n    more:\n      \"Par exemple 2 perroquets et 3 singes forment une conbinaison de 5 dés identiques, soit 500 points.\",\n  },\n  \"chest\": {\n    name: \"Coffre au trésor\",\n    rule:\n      'Lorsque le joueur sauvegarde ses dés, grâce à la carte \"Coffre au trésor\" les dés sont protégés du mauvais sort.',\n    more:\n      \"Ainsi même lorsque le joueur obtient 3 têtes de morts, son tour prends fin, mais il peut marquer les points totalisés grâce aux dés sauvegardés!\",\n  },\n  \"coin\": {\n    name: \"Pièce d'or\",\n    rule:\n      \"Le joueur commence son tour avec un symbol pièce d'or. Il rapporte des points aussi bien dans une combinaison de dés que comme simple pièce (+100).\",\n  },\n  \"diamond\": {\n    name: \"Diamant\",\n    rule:\n      \"Le joueur commence son tour avec un symbol diamant. Il rapporte des points aussi bien dans une combinaison de dés que comme simple diamant (+100).\",\n  },\n  \"pirate\": {\n    name: \"Capitaine des pirates\",\n    rule:\n      \"Grâce à l'aide du capitaine, tous les points comptabilisés pendant ce tour sont doublés !\",\n    //   more: \"Si le joueur doit se rendre sur l'île de la tête de mort, ses adversaires perdent 200 points pour chaque tête de mort révélée.\"\n  },\n  \"witch\": {\n    name: \"Sorcière\",\n    rule:\n      \"Avec ses potions magiques, la sorcière permet exceptionnellement au joueur de relancer, une fois, un dé avec une tête de mort.\",\n  },\n  \"1skull\": {\n    name: \"Tête de mort\",\n    rule: \"Le tour du joueur débute avec un symbole tête de mort.\",\n  },\n  \"2skulls\": {\n    name: \"2 têtes de mort\",\n    rule: \"Le tour du joueur débute avec 2 symboles tête de mort.\",\n  },\n  \"2sword-challenge\": {\n    name: \"Bateau pirate\",\n    rule:\n      \"Le joueur doit obtenir au minimum 2 symbols sabres. Si il y parvient, il gagne +300 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -300 points pour ce tour, quelque soit son résultat aux dés.\",\n    more:\n      \"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points.\",\n    // more: \"Celui qui découvre un bateau pirate ne peut pas aller sur l'île de la tête de mort: un joueur qui obtiendrait 4 têtes de mort ou plus lors de son premier lancer perdrait donc immédiatement son tour.\"\n  },\n  \"3sword-challenge\": {\n    name: \"Bateau pirate\",\n    rule:\n      \"Le joueur doit obtenir au minimum 3 symbols sabres. Si il y parvient, il gagne +500 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -500 points pour ce tour, quelque soit son résultat aux dés.\",\n    more:\n      \"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points.\",\n    // more: \"Celui qui découvre un bateau pirate ne peut pas aller sur l'île de la tête de mort: un joueur qui obtiendrait 4 têtes de mort ou plus lors de son premier lancer perdrait donc immédiatement son tour.\"\n  },\n  \"4sword-challenge\": {\n    name: \"Bateau pirate\",\n    rule:\n      \"Le joueur doit obtenir au minimum 4 symbols sabres. Si il y parvient, il gagne +1000 points, en plus de son résultat aux dés. Si il échoue, le joueur marque -1000 points pour ce tour, quelque soit son résultat aux dés.\",\n    more:\n      \"Le score total ne peut pas descende en dessous de zéro. Ainsi si par exemple le joueur perds le défi au premier tour il restera à 0 points.\",\n    // more: \"Celui qui découvre un bateau pirate ne peut pas aller sur l'île de la tête de mort: un joueur qui obtiendrait 4 têtes de mort ou plus lors de son premier lancer perdrait donc immédiatement son tour.\"\n  },\n}\n",
    "import React from \"react\"\n\nimport { Image } from \"src/generic/Image.jsx\"\nimport { cardsRules } from \"src/cards/cards-rules.js\"\nimport { Dialog } from \"src/dialog/Dialog.jsx\"\nimport { cardToImageUrl } from \"src/cards/cards.js\"\n\nexport const CardRulesDialog = ({ dialogIsOpen, closeDialog, card }) => {\n  const cardRules = cardsRules[card.type]\n\n  return (\n    <Dialog isOpen={dialogIsOpen} onRequestClose={closeDialog} requestCloseOnClickOutside={true}>\n      <div className=\"border border-right\"></div>\n      <div className=\"border border-left\"></div>\n      <div className=\"border border-top\"></div>\n      <div className=\"border border-bottom\"></div>\n\n      <div className=\"dialog-title\">Carte</div>\n\n      <div className=\"dialog-content card-rules-dialog\">\n        <div className=\"dialog-body\">\n          {cardRules && (\n            <>\n              <div className=\"dialog-label\">{cardRules.name}</div>\n              <Image className=\"current-card\" src={cardToImageUrl(card)} alt={card.type} />\n              <div className=\"text-rule\">{cardRules.rule}</div>\n              {cardRules.more ? <div className=\"text-rule\">{cardRules.more}</div> : null}\n            </>\n          )}\n        </div>\n      </div>\n    </Dialog>\n  )\n}\n",
    "export const startJavaScriptAnimation = ({\n  duration = 300,\n  timingFunction = (t) => t, // https://easings.net/\n  onProgress = () => {},\n  onCancel = () => {},\n  onComplete = () => {},\n}) => {\n  if (isNaN(duration)) {\n    console.warn(`duration must be a number, received ${duration}`)\n    return () => {}\n  }\n  duration = parseInt(duration, 10)\n  const startMs = performance.now()\n  let currentRequestAnimationFrameId\n  let done = false\n  let rawProgress = 0\n  let progress = 0\n  const handler = () => {\n    currentRequestAnimationFrameId = null\n    const nowMs = performance.now()\n    rawProgress = Math.min((nowMs - startMs) / duration, 1)\n    progress = timingFunction(rawProgress)\n    done = rawProgress === 1\n    onProgress({\n      done,\n      rawProgress,\n      progress,\n    })\n    if (done) {\n      onComplete()\n    } else {\n      currentRequestAnimationFrameId = window.requestAnimationFrame(handler)\n    }\n  }\n  handler()\n  const stop = () => {\n    if (currentRequestAnimationFrameId) {\n      window.cancelAnimationFrame(currentRequestAnimationFrameId)\n      currentRequestAnimationFrameId = null\n    }\n    if (!done) {\n      done = true\n      onCancel({\n        rawProgress,\n        progress,\n      })\n    }\n  }\n  return stop\n}\n",
    "// https://usehooks.com/useAnimation/\n\nimport React from \"react\"\nimport { usePrevious } from \"src/hooks.js\"\nimport { startJavaScriptAnimation } from \"./startJavaScriptAnimation.js\"\n\nexport const useAnimateTransitionUsingJs = (value, { duration = 300, timingFunction } = {}) => {\n  const [animatedValue, animatedValueSetter] = React.useState(null)\n  useAnimateTransition(value, (from, to) => {\n    animatedValueSetter({ value: from })\n    return startJavaScriptAnimation({\n      duration,\n      timingFunction,\n      onProgress: ({ progress }) => {\n        const value = Math.round(from + (to - from) * progress)\n        animatedValueSetter({\n          value,\n        })\n      },\n      onComplete: () => {\n        animatedValueSetter(null)\n      },\n    })\n  })\n  return animatedValue\n}\n\nexport const useAnimateTransitionUsingWebAnimation = (value, animate) => {\n  useAnimateTransition(value, (from, to) => {\n    const animation = animate(from, to)\n    return () => {\n      animation.cancel()\n    }\n  })\n}\n\nconst useAnimateTransition = (value, animate) => {\n  const [transition, transitionSetter] = React.useState(null)\n\n  const valuePrevious = usePrevious(value)\n  React.useEffect(() => {\n    if (valuePrevious !== value) {\n      transitionSetter({\n        from: valuePrevious,\n        to: value,\n      })\n    }\n  }, [valuePrevious, value])\n  React.useEffect(() => {\n    if (transition) {\n      return animate(transition.from, transition.to)\n    }\n    return () => {}\n  }, [transition])\n}\n",
    "import React from \"react\"\n\nimport { useCurrentCardId, useCurrentCardActivated } from \"src/main.store.js\"\nimport { Image } from \"src/generic/Image.jsx\"\nimport { useCurrentPlayer } from \"src/round/round.selectors.js\"\nimport { cardDefaultUrl, cardIdToCard, cardToSmallImageUrl } from \"src/cards/cards.js\"\nimport { CardRulesDialog } from \"src/header/CardRulesDialog.jsx\"\nimport { SwordChallengeIndicator } from \"./SwordChallengeIndicator.jsx\"\n\nimport { useAnimateTransitionUsingJs } from \"src/animation/useAnimateTransition.js\"\n\nexport const Header = ({ openScoreboard }) => {\n  const [dialogIsOpen, dialogIsOpenSetter] = React.useState(false)\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const currentCardActivated = useCurrentCardActivated()\n\n  const openDialog = () => {\n    if (currentCard) dialogIsOpenSetter(true)\n  }\n\n  const closeDialog = () => {\n    dialogIsOpenSetter(false)\n  }\n\n  return (\n    <div className=\"header\">\n      <div\n        className=\"card-container\"\n        onClick={() => {\n          openDialog()\n        }}\n      >\n        <div className=\"small-card\">\n          <TopDeckCard />\n        </div>\n        {currentCardActivated && <SwordChallengeIndicator />}\n      </div>\n      <CurrentPlayer openScoreboard={openScoreboard} />\n      <TotalScore />\n      {currentCard ? (\n        <CardRulesDialog card={currentCard} dialogIsOpen={dialogIsOpen} closeDialog={closeDialog} />\n      ) : null}\n    </div>\n  )\n}\n\nconst TopDeckCard = () => {\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const currentCardActivated = useCurrentCardActivated()\n\n  return currentCard && currentCardActivated ? <SmallCard card={currentCard} /> : <BackCard />\n}\n\nconst BackCard = () => {\n  return (\n    <div\n      className=\"card default-card\"\n      style={{\n        backgroundImage: `url(${cardDefaultUrl})`,\n        backgroundSize: \"217px\",\n      }}\n    ></div>\n  )\n}\n\nexport const SmallCard = ({ card }) => {\n  return (\n    <div\n      className=\"card current-card\"\n      id=\"small-card\"\n      style={{\n        backgroundColor: card.color1,\n        borderColor: card.color2,\n      }}\n    >\n      <Image src={cardToSmallImageUrl(card)} alt={card.type} />\n    </div>\n  )\n}\n\nconst CurrentPlayer = ({ openScoreboard }) => {\n  const player = useCurrentPlayer()\n\n  return (\n    <Image\n      onClick={openScoreboard}\n      className=\"avatar\"\n      src={player && player.character.img}\n      alt=\"player\"\n      style={{\n        borderColor: (player && player.character.color) || \"white\",\n      }}\n    />\n  )\n}\n\nconst TotalScore = () => {\n  const player = useCurrentPlayer()\n  const totalScore = player.score\n  const totalScoreAnimation = useAnimateTransitionUsingJs(totalScore, {\n    duration: 1200,\n    timingFunction: (progress) => 1 - Math.pow(1 - progress, 5),\n  })\n\n  return (\n    <div className=\"total-score\">\n      <span\n        className=\"score\"\n        style={{\n          backgroundColor: (player && player.character.color) || \"white\",\n        }}\n      >\n        {totalScoreAnimation ? totalScoreAnimation.value : totalScore}\n      </span>\n    </div>\n  )\n}\n",
    "import { getDocumentScroll, getStyleValue } from \"src/dom/dom.util.js\"\n\nexport const rotatePoint = (origin, point, degrees) => {\n  const radians = degreesToRadians(degrees)\n  const cosinus = Math.cos(radians)\n  const sinus = Math.sin(radians)\n  const run = point.x - origin.x\n  const rise = point.y - origin.y\n\n  return {\n    x: Math.round(cosinus * run + sinus * rise + origin.x),\n    y: Math.round(cosinus * rise - sinus * run + origin.y),\n  }\n}\n\nexport const getDistanceBetweenTwoPoints = (firstPoint, secondPoint) => {\n  const horizontalDiff = firstPoint.x - secondPoint.x\n  const verticalDiff = firstPoint.y - secondPoint.y\n  return Math.sqrt(horizontalDiff * horizontalDiff + verticalDiff * verticalDiff)\n}\n\nconst getRectangleCenterPoint = ([topLeft, topRight, bottomRight, bottomLeft]) => {\n  return {\n    x: (topLeft.x + topRight.x + bottomRight.x + bottomLeft.x) / 4,\n    y: (topLeft.y + topRight.y + bottomRight.y + bottomLeft.y) / 4,\n  }\n}\n\nexport const rotateRectangle = (points, degree, origin = getRectangleCenterPoint(points)) => {\n  return points.map((point) => rotatePoint(origin, point, degree))\n}\n\nconst degreesToRadians = (degrees) => (degrees * Math.PI) / 180\n\nconst radiansToDegree = (radians) => Math.round(radians * (180 / Math.PI))\n\n// https://github.com/davidfig/intersects/blob/master/lineToLine.js\nexport const lineCollidesWithLine = (\n  [firstLineStartPoint, firstLineEndPoint],\n  [secondLineStartPoint, secondLineEndPoint],\n) => {\n  let unknownA =\n    (secondLineEndPoint.x - secondLineStartPoint.x) *\n      (firstLineStartPoint.y - secondLineStartPoint.y) -\n    (secondLineEndPoint.y - secondLineStartPoint.y) *\n      (firstLineStartPoint.x - secondLineStartPoint.x)\n  let unknownB =\n    (firstLineEndPoint.x - firstLineStartPoint.x) *\n      (firstLineStartPoint.y - secondLineStartPoint.y) -\n    (firstLineEndPoint.y - firstLineStartPoint.y) * (firstLineStartPoint.x - secondLineStartPoint.x)\n  const denominator =\n    (secondLineEndPoint.y - secondLineStartPoint.y) *\n      (firstLineEndPoint.x - firstLineStartPoint.x) -\n    (secondLineEndPoint.x - secondLineStartPoint.x) * (firstLineEndPoint.y - firstLineStartPoint.y)\n\n  // Test if Coincident\n  // If the denominator and numerator for the ua and ub are 0\n  // then the two lines are coincident.\n  if (unknownA === 0 && unknownB === 0 && denominator === 0) {\n    return false\n  }\n\n  // Test if Parallel\n  // If the denominator for the equations for ua and ub is 0\n  // then the two lines are parallel.\n  if (denominator === 0) {\n    return false\n  }\n\n  // test if line segments are colliding\n  unknownA /= denominator\n  unknownB /= denominator\n  const isIntersecting = unknownA >= 0 && unknownA <= 1 && unknownB >= 0 && unknownB <= 1\n\n  return isIntersecting\n}\n\nexport const rotatedRectangleCollidesWithRotatedRectangle = (\n  firstRotatedRectangle,\n  secondRotatedRectangle,\n) =>\n  someRectangleSideLine(firstRotatedRectangle, (firstRotatedRectangleSideLine) =>\n    lineCollidesWithRectangle(firstRotatedRectangleSideLine, secondRotatedRectangle),\n  )\n\n// https://riptutorial.com/html5-canvas/example/17710/are-line-segment-and-rectangle-colliding-\nexport const lineCollidesWithRectangle = (line, rectangle) => {\n  const lineIntersects = someRectangleSideLine(rectangle, (rectangleSideLine) =>\n    lineCollidesWithLine(line, rectangleSideLine),\n  )\n  if (lineIntersects) return true\n  // TODO: here we should check if line is contained inside the rectangle because in that case\n  // it's not intersecting but it's colliding\n  return false\n}\n\nconst someRectangleSideLine = ([firstPoint, secondPoint, thirdPoint, fourthPoint], predicate) => {\n  const rectangleFirstLine = [firstPoint, secondPoint]\n  if (predicate(rectangleFirstLine)) return true\n  const rectangleSecondLine = [secondPoint, thirdPoint]\n  if (predicate(rectangleSecondLine)) return true\n  const rectangleThirdLine = [thirdPoint, fourthPoint]\n  if (predicate(rectangleThirdLine)) return true\n  const rectangleFourthLine = [fourthPoint, firstPoint]\n  if (predicate(rectangleFourthLine)) return true\n  return false\n}\n\n/**\nA matrix is an array composed by\n[\n  scale x,\n  skew y,\n  skew x,\n  scale y,\n  translate x,\n  translate y,\n]\n*/\n\n// https://stackoverflow.com/questions/14687318/how-to-find-new-coordinates-of-rectangle-after-rotation\nexport const getDomNodePoints = (domNode) => {\n  const transformMatrix = getStyleValue(domNode, \"transform\")\n  const transformOrigin = getStyleValue(domNode, \"transform-origin\")\n\n  domNode.style.transform = \"matrix(1, 0, 0, 1, 0, 0)\"\n  domNode.style.transformOrigin = \"0 0\"\n  const boundlingClientRectangle = domNode.getBoundingClientRect()\n  domNode.style.transform = transformMatrix\n  domNode.style.transformOrigin = transformOrigin\n\n  const documentScroll = getDocumentScroll(domNode)\n  const left = boundlingClientRectangle.left + documentScroll.x\n  const top = boundlingClientRectangle.top + documentScroll.y\n  const right = left + boundlingClientRectangle.width\n  const bottom = top + boundlingClientRectangle.height\n\n  const topLeftPoint = { x: left, y: top }\n  const topRightPoint = { x: right, y: top }\n  const bottomLeftPoint = { x: right, y: bottom }\n  const bottomRightPoint = { x: left, y: bottom }\n  const points = [topLeftPoint, topRightPoint, bottomLeftPoint, bottomRightPoint]\n\n  if (transformMatrix) {\n    const matrix = transformMatrix.slice(\"matrix(\".length, -1).split(\", \").map(parseFloat)\n\n    let rotateOrigin\n    // this code assume transform is only about rotation, no scaling, no translation\n    // it does not work if there is a transform origin for some reason\n    if (transformOrigin) {\n      const origin = transformOrigin.split(\" \").map(parseFloat)\n      rotateOrigin = {\n        x: left + origin[0],\n        y: top + origin[1],\n      }\n    } else {\n      // center of the element by default\n      rotateOrigin = {\n        x: left + (right - left) / 2,\n        y: top + (bottom - top) / 2,\n      }\n    }\n\n    const rotationInDegrees = matrixToRotationInDegrees(matrix)\n    return rotateRectangle(points, rotationInDegrees, rotateOrigin)\n  }\n\n  return points\n}\n\nconst matrixToRotationInDegrees = ([a, b]) => radiansToDegree(Math.atan2(b, a))\n\n// https://github.com/leeoniya/transformation-matrix-js/blob/3595d2b36aa1b0f593bdffdb786b9e832c50c3b0/src/matrix.js#L234\nexport const invertMatrix = ([a, b, c, d, e, f]) => {\n  const dt = a * d - b * c\n  return [d / dt, -b / dt, -c / dt, a / dt, (c * f - d * e) / dt, -(a * f - b * e) / dt]\n}\n\nexport const transformPoint = ({ x, y }, [a, b, c, d, e, f]) => {\n  return {\n    x: x * a + y * c + e,\n    y: x * b + y * d + f,\n  }\n}\n\nexport const transformPoints = (points, matrix) => {\n  return points.map((point) => transformPoint(point, matrix))\n}\n",
    "// https://github.com/infusion/Rectangles.js/blob/master/rectangles.js\n\nimport { getDistanceBetweenTwoPoints } from \"./geometry.js\"\n\nexport const rectangleCollidesWithRectangle = (firstRectangle, secondRectangle) => {\n  // first left of second\n  if (firstRectangle.right <= secondRectangle.left) return false\n  // first right of second\n  if (firstRectangle.left >= secondRectangle.right) return false\n  // first above second\n  if (firstRectangle.bottom <= secondRectangle.top) return false\n  // first below second\n  if (firstRectangle.top >= secondRectangle.bottom) return false\n\n  return true\n}\n\nexport const rectangleInsideOf = (rectangle, parentRectangle) => {\n  let left = rectangle.left\n  let right = rectangle.right\n  const width = right - left\n  if (left < parentRectangle.left) {\n    left = parentRectangle.left\n    right = left + width\n  } else if (right > parentRectangle.right) {\n    left = parentRectangle.right - width\n    right = left + width\n  }\n\n  let top = rectangle.top\n  let bottom = rectangle.bottom\n  const height = bottom - top\n  if (top < parentRectangle.top) {\n    top = parentRectangle.top\n    bottom = top + height\n  } else if (bottom > parentRectangle.bottom) {\n    top = parentRectangle.bottom - height\n    bottom = top + height\n  }\n\n  return {\n    left,\n    right,\n    top,\n    bottom,\n  }\n}\n\nexport const rectangleRelativeTo = (rectangle, parentRectangle) => {\n  const left = rectangle.left - parentRectangle.left\n  const width = rectangle.right - rectangle.left\n  const right = left + width\n\n  const top = rectangle.top - parentRectangle.top\n  const height = rectangle.bottom - rectangle.top\n  const bottom = top + height\n\n  return {\n    left,\n    right,\n    top,\n    bottom,\n  }\n}\n\nexport const findRectangleCloserToRectangle = (rectangleCandidates, rectangle) => {\n  let smallestDistance = getDistanceBetweenRectangles(rectangle, rectangleCandidates[0])\n  return rectangleCandidates.reduce((prev, rectangleCandidate) => {\n    const distance = getDistanceBetweenRectangles(rectangle, rectangleCandidate)\n    if (distance < smallestDistance) {\n      smallestDistance = distance\n      return rectangleCandidate\n    }\n    return prev\n  })\n}\n\nconst getRectangleArea = ({ left, right, top, bottom }) => {\n  const width = right - left\n  const height = bottom - top\n  return width * height\n}\n\nconst getRectangleCenterPoint = ({ left, right, top, bottom }) => {\n  return {\n    x: left + (right - left) / 2,\n    y: top + (bottom - top) / 2,\n  }\n}\n\nconst getDistanceBetweenRectangles = (firstRectangle, secondRectangle) => {\n  const firstRectangleCenterPoint = getRectangleCenterPoint(firstRectangle)\n  const secondRectangleCenterPoint = getRectangleCenterPoint(secondRectangle)\n  return getDistanceBetweenTwoPoints(firstRectangleCenterPoint, secondRectangleCenterPoint)\n}\n\nexport const getRectangleIntersectionRatio = (firstRectangle, secondRectangle) => {\n  const firstRectangleArea = getRectangleArea(firstRectangle)\n  const overlapArea = getRectangleArea(rectangleOverlapping(firstRectangle, secondRectangle))\n  return firstRectangleArea / overlapArea\n}\n\nexport const rectangleOverlapping = ({ left, right, top, bottom }, intersectingRectangle) => {\n  const overlapRectangle = {\n    left: left < intersectingRectangle.left ? intersectingRectangle.left : left,\n    right: right < intersectingRectangle.right ? right : intersectingRectangle.right,\n    top: top < intersectingRectangle.top ? intersectingRectangle.top : top,\n    bottom: bottom < intersectingRectangle.bottom ? bottom : intersectingRectangle.bottom,\n  }\n  return overlapRectangle\n}\n",
    "import { getDocumentScroll } from \"./dom.util.js\"\nimport {\n  rectangleInsideOf,\n  rectangleRelativeTo,\n  rectangleCollidesWithRectangle,\n  findRectangleCloserToRectangle,\n} from \"src/helper/rectangle.js\"\n\nexport const getDomNodeRectangle = (domNode) => {\n  const domNodeRect = domNode.getBoundingClientRect()\n  const documentScroll = getDocumentScroll(domNode)\n  const left = domNodeRect.left + documentScroll.x\n  const top = domNodeRect.top + documentScroll.y\n  const right = left + domNodeRect.width\n  const bottom = top + domNodeRect.height\n\n  return {\n    left: Math.floor(left),\n    top: Math.floor(top),\n    right: Math.floor(right),\n    bottom: Math.floor(bottom),\n  }\n}\n\nexport const rectangleToRectangleInsideDomNode = (rectangle, domNode) => {\n  const domNodeRectangle = getDomNodeRectangle(domNode)\n  const rectangleInsideDomNode = rectangleInsideOf(rectangle, domNodeRectangle)\n  return rectangleInsideDomNode\n}\n\nexport const rectangleRelativeToDomNode = (rectangle, domNode) => {\n  const domNodeRectangle = getDomNodeRectangle(domNode)\n  const rectangleInsideDomNode = rectangleInsideOf(rectangle, domNodeRectangle)\n  const rectangleInsideAndRelative = rectangleRelativeTo(rectangleInsideDomNode, domNodeRectangle)\n  return rectangleInsideAndRelative\n}\n\nexport const rectangleAbsoluteToDomNode = (rectangle, domNode) => {\n  const domNodeRectangle = getDomNodeRectangle(domNode)\n  const rectangleWidth = rectangle.right - rectangle.left\n  const rectangleHeight = rectangle.bottom - rectangle.top\n  const rectangleAbsolute = {\n    left: domNodeRectangle.left + rectangle.left,\n    top: domNodeRectangle.top + rectangle.top,\n    right: domNodeRectangle.left + rectangle.left + rectangleWidth,\n    bottom: domNodeRectangle.top + rectangle.top + rectangleHeight,\n  }\n  return rectangleAbsolute\n}\n\nexport const domNodeCollidesWithRectangle = (domNode, rectangle) => {\n  const domNodeRectangle = getDomNodeRectangle(domNode)\n  return rectangleCollidesWithRectangle(domNodeRectangle, rectangle)\n}\n\nexport const findDomNodeClosestToRectangle = (domNodeCandidates, rectangle) => {\n  const rectangleCandidates = domNodeCandidates.map((domNodeCandidate) =>\n    getDomNodeRectangle(domNodeCandidate),\n  )\n  const closestRectangle = findRectangleCloserToRectangle(rectangleCandidates, rectangle)\n  return domNodeCandidates[rectangleCandidates.indexOf(closestRectangle)]\n}\n\nexport const printPointInDocument = (\n  { x, y },\n  { color = \"yellow\", autoRemoveAfter = 2000 } = {},\n) => {\n  const div = document.createElement(\"div\")\n  div.style.position = \"absolute\"\n  div.style.zIndex = \"1000\"\n  div.style.left = `${x}px`\n  div.style.top = `${y}px`\n  div.style.width = \"5px\"\n  div.style.height = \"5px\"\n  div.style.background = color\n  div.style.border = \"1px solid red\"\n  document.body.appendChild(div)\n\n  const remove = () => {\n    document.body.removeChild(div)\n  }\n\n  let autoRemoveTimeout\n  if (autoRemoveAfter) {\n    autoRemoveTimeout = setTimeout(remove, autoRemoveAfter)\n  }\n\n  return () => {\n    remove()\n    clearTimeout(autoRemoveTimeout)\n  }\n}\n",
    "import { getDomNodeRectangle } from \"src/dom/dom.position.js\"\nimport {\n  rotateRectangle,\n  rotatedRectangleCollidesWithRotatedRectangle,\n} from \"src/helper/geometry.js\"\nimport { diceSize } from \"./dicePosition.js\"\n\n// margin because of rotation\nconst diceSpacing = diceSize / 8\n\nexport const rollDices = (dices, { rolledAreaDomNode }) => {\n  const rolledAreaRectangle = getDomNodeRectangle(rolledAreaDomNode)\n  const rolledAreaWidth = rolledAreaRectangle.right - rolledAreaRectangle.left\n  const rolledAreaHeight = rolledAreaRectangle.bottom - rolledAreaRectangle.top\n  const rectangleAllowed = {\n    left: diceSpacing,\n    right: rolledAreaWidth - (diceSize + diceSpacing),\n    top: diceSpacing,\n    bottom: rolledAreaHeight - (diceSize + diceSpacing),\n  }\n\n  const otherRotatedRectangles = []\n  const getRandomAndCollisionFreeInfo = (dice) => {\n    let count = 0\n    const next = () => {\n      const rectangleCandidate = getRandomDiceRectangle(dice, rectangleAllowed)\n      const rotation = getDiceRandomRotation()\n      const rotatedRectangleCandidate = rotateRectangle(rectangleCandidate, rotation)\n      const someOtherDiceCollides = otherRotatedRectangles.some((otherRotatedRectangle) =>\n        rotatedRectangleCollidesWithRotatedRectangle(\n          rotatedRectangleCandidate,\n          otherRotatedRectangle,\n        ),\n      )\n      if (\n        !someOtherDiceCollides ||\n        // better return a collisioning rectangle than an infinite loop\n        count > 50\n      ) {\n        return {\n          rectangle: rectangleCandidate,\n          rotation,\n          rotatedRectangle: rotatedRectangleCandidate,\n        }\n      }\n      count++\n      return next()\n    }\n    return next()\n  }\n\n  dices.forEach((dice, index) => {\n    dice.visibleFaceIndex = getDiceRandomFace(dice)\n\n    const { rectangle, rotation, rotatedRectangle } = getRandomAndCollisionFreeInfo(dice)\n    otherRotatedRectangles.push(rotatedRectangle)\n\n    dice.rolledAreaZIndex = index + 1\n    dice.rolledAreaPosition = rectangle[0]\n    dice.rotation = rotation\n  })\n\n  return dices\n}\n\nconst getRandomDiceRectangle = (dice, rectangleAllowed) => {\n  const positionCandidate = {\n    x: getRandomNumberBetweenInterval(rectangleAllowed.left, rectangleAllowed.right),\n    y: getRandomNumberBetweenInterval(rectangleAllowed.top, rectangleAllowed.bottom),\n  }\n\n  const topLeft = {\n    x: positionCandidate.x,\n    y: positionCandidate.y,\n  }\n  const topRight = {\n    x: positionCandidate.x + diceSize,\n    y: positionCandidate.y,\n  }\n  const bottomRight = {\n    x: positionCandidate.x + diceSize,\n    y: positionCandidate.y + diceSize,\n  }\n  const bottomLeft = {\n    x: positionCandidate.x,\n    y: positionCandidate.y + diceSize,\n  }\n\n  const diceRectangle = [topLeft, topRight, bottomRight, bottomLeft]\n  return diceRectangle\n}\n\nconst getDiceRandomRotation = () => getRandomNumberBetweenInterval(-35, 35)\n\nconst getDiceRandomFace = (dice) => getRandomNumberBetweenInterval(0, dice.faces.length - 1)\n\nconst getRandomNumberBetweenInterval = (min, max) =>\n  Math.floor(Math.random() * (max - min + 1) + min)\n",
    "import React from \"react\"\nimport { createAction, useDiceRolledIds, useCurrentCardId } from \"src/main.store.js\"\nimport { Image } from \"src/generic/Image.jsx\"\nimport {\n  useRollDiceAllowed,\n  useHasNeverRolled,\n  useThreeSkullsOrMoreInCursedArea,\n} from \"src/round/round.selectors.js\"\nimport { rollDices } from \"src/dices/rollDices.js\"\nimport { cardIdToCard, isChestCard } from \"src/cards/cards.js\"\nimport { symbolSkullUrl } from \"src/symbols/symbols.js\"\n\nexport const ButtonRoll = ({ rolledAreaRef }) => {\n  const rollDiceAllowed = useRollDiceAllowed()\n  const diceRolledIds = useDiceRolledIds()\n  const hasNeverRolled = useHasNeverRolled()\n  const roll = useRoll()\n\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const threeSkullsOrMoreInCursedArea = useThreeSkullsOrMoreInCursedArea()\n\n  const disabledNotEnoughDice = diceRolledIds.length < 2 && !hasNeverRolled\n  const disabledChestCard = threeSkullsOrMoreInCursedArea && isChestCard(currentCard)\n  const disabled = disabledNotEnoughDice || disabledChestCard\n\n  if (rollDiceAllowed) {\n    return (\n      <div className=\"roll-action\">\n        <button\n          onClick={() => {\n            roll(rolledAreaRef.current)\n          }}\n          disabled={disabled}\n        >\n          Lancer\n          {disabledNotEnoughDice && !disabledChestCard && (\n            <span className=\"button-subtitle\">(au moins 2 dés !)</span>\n          )}\n        </button>\n        {disabledChestCard && <Image src={symbolSkullUrl} className=\"skull-symbol\" />}\n      </div>\n    )\n  }\n\n  return null\n}\n\nconst useRoll = createAction((state, rolledAreaDomNode) => {\n  const { dices, rollCount, diceRolledIds } = state\n  const diceToRollIds = rollCount === 0 ? Object.keys(dices) : diceRolledIds\n  const dicesToRoll = diceToRollIds.map((diceRolledId) => dices[diceRolledId])\n\n  rollDices(dicesToRoll, { rolledAreaDomNode })\n  return {\n    ...state,\n    rollCount: rollCount + 1,\n    witchUncursedDiceId: null,\n    diceRolledIds: dicesToRoll.map((dice) => dice.id),\n    dices: { ...dices },\n  }\n})\n",
    "import React from \"react\"\n\nimport { useMarkScore, useEndPlayerRound } from \"src/round/round.actions.js\"\nimport { Image } from \"src/generic/Image.jsx\"\nimport {\n  useMarkScoreAllowed,\n  useMarkScoreButtonVisible,\n  useStartNextRoundAllowed,\n  useRoundScore,\n} from \"src/round/round.selectors.js\"\n\nimport { ButtonRoll } from \"./ButtonRoll.js\"\nimport { symbolSkullUrl } from \"src/symbols/symbols.js\"\n\nexport const Footer = ({ onRoundOver, rolledAreaRef }) => {\n  // const roundStarted = useRoundStarted()\n  // if (!roundStarted && !dialogIsOpen) openDialog()\n  // TODO: fix bug in DialogBase: dialog cannot be instantiated open\n\n  return (\n    <div className=\"footer actions\">\n      <ButtonRoll rolledAreaRef={rolledAreaRef} />\n      <ButtonMarkScore />\n      <ButtonEndRound onRoundOver={onRoundOver} />\n    </div>\n  )\n}\n\nconst ButtonMarkScore = () => {\n  const roundScore = useRoundScore()\n  const markScore = useMarkScore()\n  const markScoreAllowed = useMarkScoreAllowed()\n  const markScoreButtonVisible = useMarkScoreButtonVisible()\n\n  const sign = roundScore < 0 ? \"-\" : \"+\"\n\n  if (markScoreButtonVisible) {\n    return (\n      <div className=\"collect-action\">\n        <button\n          onClick={() => {\n            markScore(roundScore)\n          }}\n          disabled={!markScoreAllowed}\n        >\n          <span>Collecter</span>\n          <span className=\"score\">\n            {sign} {Math.abs(roundScore)}\n          </span>\n        </button>\n        {!markScoreAllowed && <Image src={symbolSkullUrl} className=\"skull-symbol\" />}\n      </div>\n    )\n  }\n\n  return null\n}\n\nconst ButtonEndRound = ({ onRoundOver }) => {\n  const startNextRoundAllowed = useStartNextRoundAllowed()\n  const endPlayerRound = useEndPlayerRound()\n  const roundScore = useRoundScore()\n\n  if (startNextRoundAllowed) {\n    return (\n      <div className=\"next-round-action\">\n        <button\n          onClick={() => {\n            // ici on sait que le round est terminé\n            // on peut dire a ceux que ça intéresse\n            // comment ça s'est passé (scoreboard)\n            // qui va alors animer le fait qu'on a marqué un score\n            // on devrait aussi animer le cas ou on fail sword challenge\n            // et le cas ou on se tape 3 tete\n            endPlayerRound()\n            onRoundOver({\n              // a faire ici:\n              // si on fail sword-challenge ou qu'on fait 3 skulls\n              // alors la raison doit changer\n              // et le scoreboard fera une autre animation\n              reason: \"score-marked\",\n              value: roundScore,\n            })\n          }}\n        >\n          Terminer mon tour\n        </button>\n      </div>\n    )\n  }\n\n  return null\n}\n",
    "export default import.meta.ROLLUP_FILE_URL_bdc26469",
    "import React from \"react\"\n\nimport { Image } from \"src/generic/Image.jsx\"\nimport { useCurrentCardId, useCurrentCardActivated } from \"src/main.store.js\"\nimport { cardIdToCard, isOneSkullCard, isTwoSkullsCard, isWitchCard } from \"src/cards/cards.js\"\nimport { diceSize } from \"src/dices/dicePosition.js\"\nimport { symbolSkullUrl } from \"src/symbols/symbols.js\"\nimport wichLabelImageUrl from \"src/skull-island/witch-label.png\"\n\nexport const SkullIsland = ({ cursedAreaRef }) => {\n  const currentCard = cardIdToCard(useCurrentCardId())\n\n  return (\n    <div className=\"skull-island\">\n      {isWitchCard(currentCard) ? <UncurseDiceLabel /> : null}\n      <div className=\"bottle\">\n        <div className=\"area\" ref={cursedAreaRef}>\n          {isOneSkullCard(currentCard) ? <ExtraSkull card={currentCard} /> : null}\n          {isTwoSkullsCard(currentCard) ? (\n            <>\n              <ExtraSkull card={currentCard} />\n              <ExtraSkull card={currentCard} />\n            </>\n          ) : null}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst ExtraSkull = ({ card }) => {\n  return (\n    <button\n      className=\"dice\"\n      style={{\n        width: diceSize,\n        height: diceSize,\n        color: \"#fcfcfc\",\n        margin: \"1px 5px\",\n        backgroundColor: card.color1,\n        borderColor: card.color2,\n        borderWidth: \"2px\",\n      }}\n    >\n      <Image\n        src={symbolSkullUrl}\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n        }}\n      />\n    </button>\n  )\n}\n\nconst UncurseDiceLabel = () => {\n  const currentCardActivated = useCurrentCardActivated()\n\n  if (!currentCardActivated) {\n    return <Image style={{ display: \"none\" }} src={wichLabelImageUrl} />\n  }\n\n  return (\n    <div className=\"witch-label\">\n      <Image src={wichLabelImageUrl} />\n      <svg x=\"0px\" y=\"0px\" width=\"156.083px\" height=\"208.667px\" viewBox=\"0 0 156.083 208.667\">\n        <path\n          id=\"path_01\"\n          fill=\"none\"\n          stroke=\"#E4AD30\"\n          d=\"M8.406,107.82\n\tc2.541,2.178,2.375,2.875,14.25,3.5c14.782,0.778,19.26-11.965,19.26-11.965S47.918,88,40.251,72.917s-18.916,4.583-9.083,8.167\n\ts27.759-1.338,35.142-12.417C74.75,56,77.583,45.333,79.25,37S78.477,15.833,66.31,3.833\"\n        />\n        <path\n          id=\"path_02\"\n          fill=\"none\"\n          stroke=\"#E4AD30\"\n          d=\"M44.031,110.094\n\tc0,0,1,1.313-4.438,3.344s-14.244,7.281-32.125-2\"\n        />\n        <path\n          id=\"path_03\"\n          fill=\"none\"\n          stroke=\"#E4AD30\"\n          d=\"M42.125,103.688\n\tc0,0,1.313,6.594-9.313,8.625S10.281,108.719,9.406,101\"\n        />\n        <path\n          id=\"path_04\"\n          fill=\"none\"\n          stroke=\"#E4AD30\"\n          d=\"M33.114,112.253c0,0,39.886-19.253,43.011,24.747\n\tc0.372,0.447-0.959,1.208-2.542,1.625\"\n        />\n      </svg>\n    </div>\n  )\n}\n",
    "import React from \"react\"\nimport ReactDOM from \"react-dom\"\n\nexport const Portal = ({ parent, children }) => {\n  if (!parent) {\n    return null\n  }\n  return ReactDOM.createPortal(<>{children}</>, parent)\n}\n",
    "export const stringifyClassNames = (classNames) => {\n  return classNames.join(\" \")\n}\n\nexport const stringifyTransformations = ({ rotate, scale, translate }) => {\n  return [\n    ...(rotate ? [`rotate(${rotate}deg)`] : []),\n    ...(scale && scale !== 1 ? [`scale(${scale})`] : []),\n    ...(translate ? [`translate(${translate})`] : []),\n  ].join(\"\")\n}\n",
    "export const throttle = (fn, ms = 60, { trailing = false } = {}) => {\n  let timeout\n  let previousMs\n\n  const throttled = (...args) => {\n    clearTimeout(timeout)\n    const nowMs = Date.now()\n    // la fonction a été appelé il y a previous\n    if (previousMs) {\n      // ca fait combien de temps\n      const msEllapsedSincePreviousCall = nowMs - previousMs\n\n      if (msEllapsedSincePreviousCall < ms) {\n        // pas suffisament de temps écoulé\n        if (trailing) {\n          const remaining = ms - msEllapsedSincePreviousCall\n          timeout = setTimeout(() => throttled(...args), remaining)\n        }\n      } else {\n        // suffisament de temps écoulé\n        previousMs = nowMs\n        fn(...args)\n      }\n    } else {\n      // calls right now\n      previousMs = nowMs\n      fn(...args)\n    }\n  }\n\n  const cancel = () => {\n    clearTimeout(timeout)\n  }\n  throttled.cancel = cancel\n\n  return throttled\n}\n",
    "import { createLogger } from \"@jsenv/logger\"\nimport { throttle } from \"src/helper/throttle.js\"\nimport { addDomEventListener } from \"src/dom/dom.util.js\"\n\nexport const enableDragGesture = (\n  domNode,\n  {\n    logLevel = \"warn\",\n    onGrip = () => {},\n    onLongGrip = () => {},\n    // in case it's passed we will call it only on fast and precise click\n    onClick = () => {},\n    onDrag = () => {},\n    onRelease = () => {},\n    onCancel = () => {},\n    longGripMs = 300,\n  },\n) => {\n  const logger = createLogger({ logLevel })\n  // a small move is a drag gesture but\n  // not yet a drag intent\n  // long grip or big enough move set drag intent to true\n  let dragIntent = false\n  let dragIntentTimeout\n  let pendingGesture\n  let removeMoveListener = () => {}\n  let removeReleaseListener = () => {}\n\n  logger.debug(\"enable drag on\", domNode)\n\n  const removeMousedownListener = addDomEventListener(\n    domNode,\n    \"mousedown\",\n    (mousedownEvent) => {\n      const isRightClick = mousedownEvent.which === 3\n      if (isRightClick) {\n        logger.debug(\"ignore right click\")\n        return\n      }\n\n      handleGrip(mouseEventToPagePosition(mousedownEvent), mousedownEvent)\n      removeMoveListener = addDomEventListener(\n        document,\n        \"mousemove\",\n        throttle((mousemoveEvent) => {\n          handleMove(mouseEventToPagePosition(mousemoveEvent), mousemoveEvent)\n        }),\n      )\n      removeReleaseListener = addDomEventListener(document, \"mouseup\", (mouseupEvent) => {\n        removeReleaseListener()\n        removeMoveListener()\n        handleRelease(mouseEventToPagePosition(mouseupEvent), mouseupEvent)\n      })\n    },\n    { passive: true },\n  )\n  const removeTouchstartListener = addDomEventListener(\n    domNode,\n    \"touchstart\",\n    (touchstartEvent) => {\n      handleGrip(touchEventToPagePosition(touchstartEvent), touchstartEvent)\n      removeMoveListener = addDomEventListener(\n        document,\n        \"touchmove\",\n        throttle((touchmoveEvent) => {\n          handleMove(touchEventToPagePosition(touchmoveEvent), touchmoveEvent)\n        }),\n      )\n      removeReleaseListener = addDomEventListener(document, \"touchend\", (touchendEvent) => {\n        removeReleaseListener()\n        removeMoveListener()\n        handleRelease(touchEventToPagePosition(touchendEvent), touchendEvent)\n      })\n    },\n    { passive: true },\n  )\n  const removeClickListener = addDomEventListener(domNode, \"click\", (clickEvent) => {\n    if (!dragIntent && dropEffect === \"none\") {\n      onClick(clickEvent)\n    }\n  })\n\n  let pointerPositionPrevious\n  let domNodeStartPosition\n  let gripPointerPosition\n  let longGripTimeout\n  let dropEffect\n  const handleGrip = (pointerPosition, event) => {\n    logger.debug(\"gripping node at\", pointerPosition)\n    pendingGesture = true\n    dropEffect = \"none\"\n    gripPointerPosition = pointerPosition\n    pointerPositionPrevious = pointerPosition\n    domNodeStartPosition = domNodeToPagePosition(domNode)\n\n    onGrip({\n      x: domNodeStartPosition.x,\n      y: domNodeStartPosition.y,\n      event,\n    })\n    longGripTimeout = setTimeout(handleLongGrip, longGripMs)\n  }\n\n  const handleLongGrip = () => {\n    dragIntent = true\n    onLongGrip()\n  }\n\n  const handleMove = (pointerPosition, event) => {\n    if (\n      pointerPositionPrevious.x === pointerPosition.x &&\n      pointerPositionPrevious.y === pointerPosition.y\n    ) {\n      logger.debug(\"no real move\")\n      return\n    }\n    pointerPositionPrevious = pointerPosition\n\n    const gripHorizontalShift = gripPointerPosition.x - domNodeStartPosition.x\n    const gripVerticalShit = gripPointerPosition.y - domNodeStartPosition.y\n    const movePosition = {\n      // il y a un décalage entre le bord de l'élément et l'endroit ou l'on l'attrape\n      // ce décalage doit continuer d'exister pour savoir ou on place l'élément en position fixed\n      x: pointerPosition.x - gripHorizontalShift,\n      y: pointerPosition.y - gripVerticalShit,\n    }\n    const relativeX = pointerPosition.x - gripPointerPosition.x\n    const relativeY = pointerPosition.y - gripPointerPosition.y\n\n    logger.debug(\"move node at\", movePosition)\n    onDrag({\n      event,\n      ...movePosition,\n      relativeX,\n      relativeY,\n      setDropEffect: (value) => {\n        dropEffect = value\n      },\n    })\n  }\n\n  const handleRelease = (pointerPosition, event) => {\n    logger.debug(\"releasing node\")\n    pendingGesture = false\n    clearTimeout(longGripTimeout)\n\n    const gripHorizontalShift = gripPointerPosition.x - domNodeStartPosition.x\n    const gripVerticalShit = gripPointerPosition.y - domNodeStartPosition.y\n\n    onRelease({\n      event,\n      dropEffect,\n      x: pointerPositionPrevious.x - gripHorizontalShift,\n      y: pointerPositionPrevious.y - gripVerticalShit,\n    })\n    // setTimeout is to ensure the click cannot happen just after mouseup\n    dragIntentTimeout = setTimeout(() => {\n      dragIntent = false\n    })\n  }\n\n  const handleCancel = (event) => {\n    if (pendingGesture) {\n      logger.debug(\"cancelling drag\", event)\n      pendingGesture = false\n      onCancel({\n        event,\n      })\n    }\n  }\n\n  return (event) => {\n    removeClickListener()\n    removeMousedownListener()\n    removeTouchstartListener()\n    removeMoveListener()\n    removeReleaseListener()\n    clearTimeout(longGripTimeout)\n    clearTimeout(dragIntentTimeout)\n    handleCancel(event)\n  }\n}\n\nconst domNodeToPagePosition = (domNode) => {\n  const rect = domNode.getBoundingClientRect()\n  return {\n    x: rect.left,\n    y: rect.top,\n  }\n}\n\nconst mouseEventToPagePosition = (mouseEvent) => {\n  return {\n    x: mouseEvent.pageX,\n    y: mouseEvent.pageY,\n  }\n}\n\nconst touchEventToPagePosition = (touchEvent) => {\n  const firstChangedTouch = touchEvent.changedTouches[0]\n  return {\n    x: firstChangedTouch.pageX,\n    y: firstChangedTouch.pageY,\n  }\n}\n",
    "/* eslint-disable no-nested-ternary */\nimport React from \"react\"\n\nimport { usePrevious } from \"src/hooks.js\"\nimport { Portal } from \"src/generic/Portal.jsx\"\nimport { rectangleToRectangleInsideDomNode, printPointInDocument } from \"src/dom/dom.position.js\"\nimport { stringifyTransformations } from \"src/helper/render.js\"\nimport { useDiceDomNode, useDiceDomNodeSetter, useMainDomNode } from \"src/dom/dom.main.js\"\nimport { diceSize } from \"src/dices/dicePosition.js\"\nimport { diceIsOnSkull, diceToVisibleSymbol } from \"src/dices/dices.js\"\nimport { enableDragGesture } from \"src/drag/drag.js\"\nimport { symbolToImageUrl } from \"src/symbols/symbols.js\"\n\nconst { useEffect, useState } = React\n\nexport const Dice = ({\n  dice,\n  diceAnimation,\n  anmationDebug = false,\n  parentNode,\n  zIndex,\n  x,\n  y,\n  rotation,\n  draggable,\n  onDiceClick,\n  onDiceDrag,\n  onDiceDrop,\n  onDiceDragEnd,\n  disapear,\n  appear,\n}) => {\n  // state from contexts\n  const mainDomNode = useMainDomNode()\n  const diceDomNode = useDiceDomNode(dice.id)\n  const diceDomNodeSetter = useDiceDomNodeSetter(dice.id)\n\n  // local states\n  const [diceGripped, diceGrippedSetter] = useState(false)\n  const [dragGesture, setDragGesture] = useState(null)\n\n  // si y'a une animation alors reste dans ton conteneur\n  // le temps qu'elle se finisse\n  const parentNodePrevious = usePrevious(parentNode)\n  const portalParentNode = diceAnimation ? parentNodePrevious : parentNode\n\n  useEffect(() => {\n    if (!draggable || !diceDomNode || !mainDomNode) {\n      return () => {}\n    }\n\n    let bigMoveOccured = false\n    const disableDragGesture = enableDragGesture(diceDomNode, {\n      onGrip: () => {\n        diceGrippedSetter(true)\n      },\n      onClick: (clickEvent) => {\n        onDiceClick(dice, clickEvent)\n      },\n      onDrag: ({ x, y, relativeX, relativeY, setDropEffect }) => {\n        const diceDesiredRect = {\n          left: x,\n          right: x + diceSize,\n          top: y,\n          bottom: y + diceSize,\n        }\n        const diceRectangle = rectangleToRectangleInsideDomNode(diceDesiredRect, mainDomNode)\n        setDragGesture({ x: diceRectangle.left, y: diceRectangle.top })\n        bigMoveOccured = bigMoveOccured || Math.abs(relativeX) > 10 || Math.abs(relativeY) > 10\n        if (bigMoveOccured) {\n          onDiceDrag(dice, { relativeX, relativeY, setDropEffect, diceRectangle })\n        }\n      },\n      onRelease: ({ dropEffect, x, y }) => {\n        if (dropEffect !== \"none\") {\n          const diceRectangle = {\n            left: x,\n            right: x + diceSize,\n            top: y,\n            bottom: y + diceSize,\n          }\n          onDiceDrop(dice, {\n            diceRectangle,\n          })\n        }\n        diceGrippedSetter(false)\n        setDragGesture(null)\n        onDiceDragEnd(dice)\n      },\n      onCancel: () => {\n        diceGrippedSetter(false)\n        setDragGesture(null)\n        onDiceDragEnd(dice)\n      },\n    })\n    return () => {\n      disableDragGesture()\n    }\n  }, [draggable, diceDomNode, mainDomNode, onDiceClick, onDiceDrag, onDiceDrop, onDiceDragEnd])\n\n  useEffect(() => {\n    if (!diceAnimation || !diceDomNode) return () => {}\n    const { from, to, onfinish } = diceAnimation\n\n    if (anmationDebug) {\n      printPointInDocument(from)\n      printPointInDocument(to)\n    }\n    const transform = `translate(${Math.floor(to.x - from.x)}px, ${Math.floor(to.y - from.y)}px)`\n    const animation = diceDomNode.parentNode.animate(\n      [\n        {\n          transform,\n        },\n      ],\n      {\n        duration: 500,\n        fill: \"forwards\",\n        easing: \"cubic-bezier(0, 0.55, 0.45, 1)\",\n      },\n    )\n    animation.onfinish = onfinish\n    return () => {\n      animation.cancel()\n    }\n  }, [diceDomNode, diceAnimation])\n\n  const onSkull = diceIsOnSkull(dice)\n  const diceX =\n    diceAnimation && diceAnimation.from ? diceAnimation.from.x : dragGesture ? dragGesture.x : x\n\n  const diceY =\n    diceAnimation && diceAnimation.from ? diceAnimation.from.y : dragGesture ? dragGesture.y : y\n\n  const diceZIndex = dragGesture || diceAnimation ? 1000 : zIndex\n\n  // if (dice.id === 4 && !dragGesture) {\n  //   console.log({\n  //     diceX,\n  //     diceY,\n  //     diceAnimation: Boolean(diceAnimation),\n  //     dragGesture: Boolean(dragGesture),\n  //   })\n  // }\n\n  return (\n    <Portal parent={portalParentNode}>\n      <svg\n        data-dice-id={dice.id}\n        className=\"dice\"\n        onClick={\n          draggable\n            ? undefined\n            : (clickEvent) => {\n                onDiceClick(dice, clickEvent)\n              }\n        }\n        style={{\n          width: diceSize,\n          height: diceSize,\n          left: `${diceX}px`,\n          top: `${diceY}px`,\n          zIndex: diceZIndex,\n          position: dragGesture || diceAnimation ? \"fixed\" : undefined,\n        }}\n      >\n        <g\n          ref={diceDomNodeSetter}\n          className={disapear ? \"dice-cursed-disapear\" : appear ? \"dice-cursed-appear\" : \"\"}\n          style={{\n            transform: stringifyTransformations({\n              rotate: rotation ? rotation : 0,\n              scale: diceGripped ? \"1.1\" : \"1\",\n            }),\n            transitionProperty: \"transform\",\n            transitionDuration: \"500ms\",\n            // https://easings.net/#easeOutCirc\n            transitionTimingFunction: \"cubic-bezier(0, 0.55, 0.45, 1)\",\n            transformOrigin: \"center center\",\n          }}\n        >\n          <rect\n            className=\"dice-background\"\n            width=\"100%\"\n            height=\"100%\"\n            rx=\"5\"\n            ry=\"5\"\n            fill={onSkull ? \"black\" : \"#fcfcfc\"}\n            stroke={onSkull ? \"black\" : \"#b9b9b9\"}\n            strokeWidth=\"1\"\n          ></rect>\n          <image\n            xlinkHref={symbolToImageUrl(diceToVisibleSymbol(dice))}\n            draggable=\"false\"\n            style={{\n              width: \"100%\",\n              height: \"100%\",\n            }}\n          />\n        </g>\n      </svg>\n    </Portal>\n  )\n}\n",
    "import React from \"react\"\nimport {\n  useDices,\n  useDiceCursedIds,\n  useDiceRolledIds,\n  useChestSlots,\n  useWitchUncursedDiceId,\n  useScoreMarked,\n  useCurrentCardId,\n} from \"src/main.store.js\"\nimport { cardIdToCard, isWitchCard } from \"src/cards/cards.js\"\nimport {\n  rectangleRelativeToDomNode,\n  findDomNodeClosestToRectangle,\n  rectangleAbsoluteToDomNode,\n  getDomNodeRectangle,\n  domNodeCollidesWithRectangle,\n} from \"src/dom/dom.position.js\"\nimport { useThreeSkullsOrMoreInCursedArea } from \"src/round/round.selectors.js\"\nimport { Dice } from \"src/dices/Dice.jsx\"\nimport { diceIsOnSkull } from \"src/dices/dices.js\"\nimport {\n  useSetDiceRolledAreaPosition,\n  useKeepDice,\n  useUnkeepDice,\n  useSetDiceChestSlot,\n  useUncurseDice,\n} from \"src/dices/dices.actions.js\"\n\nexport const DiceContainer = ({\n  offscreenDomNode,\n  chestDomNode,\n  rolledAreaDomNode,\n  cursedAreaDomNode,\n  onDiceOverChestChange = () => {},\n  onDiceOverRolledAreaChange = () => {},\n}) => {\n  // global state\n  const dices = useDices()\n  const chestSlots = useChestSlots()\n  const diceRolledIds = useDiceRolledIds()\n  const diceCursedIds = useDiceCursedIds()\n  const witchUncursedDiceId = useWitchUncursedDiceId()\n  const currentCard = cardIdToCard(useCurrentCardId())\n  const scoreMarked = useScoreMarked()\n  const threeSkullsOrMoreInCursedArea = useThreeSkullsOrMoreInCursedArea()\n  // local state\n  const [diceAnimationState, dispatchDiceAnimation] = React.useReducer((state, action) => {\n    return {\n      ...state,\n      [action.key]: action.value,\n    }\n  }, {})\n  // actions\n  const setDiceRolledAreaPosition = useSetDiceRolledAreaPosition()\n  const keepDice = useKeepDice()\n  const unkeepDice = useUnkeepDice()\n  const uncurseDice = useUncurseDice()\n  const setDiceChestSlot = useSetDiceChestSlot()\n  // other\n  const dropTargetRef = React.useRef(null)\n\n  return Object.keys(dices).map((diceId) => {\n    const dice = dices[diceId]\n\n    const diceLocation = diceToLocation(dice, { chestSlots, diceRolledIds, diceCursedIds })\n    const propsFromLocation = diceLocationToProps(diceLocation, {\n      chestDomNode,\n      rolledAreaDomNode,\n      cursedAreaDomNode,\n      offscreenDomNode,\n    })\n    const { parentNode } = propsFromLocation\n    const diceIsGoingToBeCursed =\n      dice.id !== witchUncursedDiceId && parentNode === rolledAreaDomNode && diceIsOnSkull(dice)\n    const diceInCursedArea = parentNode === cursedAreaDomNode\n\n    // we use useCallback because it prevents dices\n    // from being re-rendered and drag gesture to become\n    // shortly unavailable while react is rerendering\n    const onDiceClick = React.useCallback(\n      (dice) => {\n        const clickEffect = getClickEffect(dice, {\n          diceRolledIds,\n          chestSlots,\n          diceCursedIds,\n          scoreMarked,\n          threeSkullsOrMoreInCursedArea,\n          currentCard,\n          witchUncursedDiceId,\n        })\n        // console.log(`click dice#${dice.id} -> ${clickEffect} effect`)\n        if (clickEffect === \"keep\") {\n          const firstAvailableChestSlot = firstAvailableChestSlotGetter(chestSlots)\n          keepDice(dice, firstAvailableChestSlot)\n        } else if (clickEffect === \"unkeep\") {\n          unkeepDice(dice)\n        } else if (clickEffect === \"uncurse\") {\n          uncurseDice(dice)\n        }\n      },\n      [\n        diceRolledIds,\n        chestSlots,\n        diceCursedIds,\n        scoreMarked,\n        threeSkullsOrMoreInCursedArea,\n        currentCard,\n        witchUncursedDiceId,\n      ],\n    )\n\n    const onDiceDrag = React.useCallback(\n      (dice, dragDiceGesture) => {\n        dropTargetRef.current = dropTargetGetter({\n          dragDiceGesture,\n          chestDomNode,\n          rolledAreaDomNode,\n        })\n        const dropEffect = getDropEffect(dice, {\n          diceRolledIds,\n          chestSlots,\n          dropTargetRef,\n          rolledAreaDomNode,\n          chestDomNode,\n          scoreMarked,\n          threeSkullsOrMoreInCursedArea,\n        })\n        dragDiceGesture.setDropEffect(dropEffect)\n        onDiceOverChestChange(dropEffect === \"keep\" ? dice : null)\n        onDiceOverRolledAreaChange(dropEffect === \"unkeep\" ? dice : null)\n      },\n      [\n        diceRolledIds,\n        chestSlots,\n        dropTargetRef,\n        rolledAreaDomNode,\n        chestDomNode,\n        scoreMarked,\n        threeSkullsOrMoreInCursedArea,\n        onDiceOverChestChange,\n        onDiceOverRolledAreaChange,\n      ],\n    )\n\n    const onDiceDrop = React.useCallback(\n      (dice, dropDiceGesture) => {\n        const dropEffect = getDropEffect(dice, {\n          diceRolledIds,\n          chestSlots,\n          dropTargetRef,\n          rolledAreaDomNode,\n          chestDomNode,\n          scoreMarked,\n          threeSkullsOrMoreInCursedArea,\n        })\n        // console.log(`drop dice#${dice.id} -> ${dropEffect} effect`)\n\n        let dropAnimation = false\n        let dropPosition = null\n\n        if (dropEffect === \"reposition-in-rolled-area\") {\n          const closestRolledAreaPosition = closestRolledAreaPositionGetter(\n            dropDiceGesture.diceRectangle,\n            rolledAreaDomNode,\n          )\n          const highestRolledAreaZIndex = highestRolledAreaZIndexGetter(dice, {\n            dices,\n            diceRolledIds,\n          })\n          setDiceRolledAreaPosition(dice, closestRolledAreaPosition, highestRolledAreaZIndex)\n          // no animation needed, we drop exactly where we want it\n        } else if (dropEffect === \"back-to-rolled-area\") {\n          dropAnimation = true\n          dropPosition = rolledAreaDropPositionGetter(dice.rolledAreaPosition, rolledAreaDomNode)\n        } else if (dropEffect === \"keep\") {\n          const closestAvailableChestSlot = closestAvailableChestSlotGetter(dice, {\n            chestSlots,\n            rectangle: dropDiceGesture.diceRectangle,\n            chestDomNode,\n          })\n          keepDice(dice, closestAvailableChestSlot)\n          dropAnimation = true\n          dropPosition = chestSlotDropPositionGetter(closestAvailableChestSlot, chestDomNode)\n        } else if (dropEffect === \"reposition-in-chest\") {\n          const closestAvailableChestSlot = closestAvailableChestSlotGetter(dice, {\n            chestSlots,\n            rectangle: dropDiceGesture.diceRectangle,\n            chestDomNode,\n          })\n          const diceChestSlot = diceToChestSlot(dice, chestSlots)\n          if (diceChestSlot !== closestAvailableChestSlot) {\n            setDiceChestSlot(dice, closestAvailableChestSlot)\n            dropAnimation = true\n            dropPosition = chestSlotDropPositionGetter(closestAvailableChestSlot, chestDomNode)\n          }\n        } else if (dropEffect === \"back-to-chest\") {\n          const diceChestSlot = diceToChestSlot(dice, chestSlots)\n          dropAnimation = true\n          dropPosition = chestSlotDropPositionGetter(diceChestSlot, chestDomNode)\n        } else if (dropEffect === \"unkeep\") {\n          const closestRolledAreaPosition = closestRolledAreaPositionGetter(\n            dropDiceGesture.diceRectangle,\n            rolledAreaDomNode,\n          )\n          setDiceRolledAreaPosition(\n            dice,\n            closestRolledAreaPosition,\n            highestRolledAreaZIndexGetter(dice, { dices, diceRolledIds }),\n          )\n          unkeepDice(dice)\n          dropAnimation = true\n          dropPosition = rolledAreaDropPositionGetter(closestRolledAreaPosition, rolledAreaDomNode)\n        }\n\n        if (dropAnimation) {\n          dispatchDiceAnimation({\n            key: dice.id,\n            value: {\n              from: {\n                x: dropDiceGesture.diceRectangle.left,\n                y: dropDiceGesture.diceRectangle.top,\n              },\n              to: dropPosition,\n              onfinish: () => {\n                // at the end of dice animation, dice is flickering briely\n                // (moving somewhere on the page and going back to where it's supposed to be)\n                // the following setTimeout fixes this\n                // of course we should improve that because it's an hint there is a deeper\n                // issue to resolve.\n                setTimeout(() => {\n                  dispatchDiceAnimation({\n                    key: dice.id,\n                    value: null,\n                  })\n                })\n              },\n            },\n          })\n        }\n      },\n      [\n        diceRolledIds,\n        chestSlots,\n        dropTargetRef,\n        rolledAreaDomNode,\n        chestDomNode,\n        scoreMarked,\n        threeSkullsOrMoreInCursedArea,\n      ],\n    )\n\n    const onDiceDragEnd = React.useCallback(() => {\n      onDiceOverChestChange(null)\n      onDiceOverRolledAreaChange(null)\n    }, [onDiceOverChestChange, onDiceOverRolledAreaChange])\n\n    const props = {\n      key: dice.id,\n      ...propsFromLocation,\n      dice,\n      diceAnimation: diceAnimationState[dice.id],\n      witchUncursedDiceId,\n      disapear: diceIsGoingToBeCursed,\n      appear: diceInCursedArea,\n      onDiceClick,\n      onDiceDrag,\n      onDiceDrop,\n      onDiceDragEnd,\n    }\n\n    return React.useMemo(\n      () => <Dice {...props} />,\n      Object.keys(props).map((key) => props[key]),\n    )\n  })\n}\n\nconst getClickEffect = (\n  dice,\n  {\n    diceRolledIds,\n    chestSlots,\n    diceCursedIds,\n    scoreMarked,\n    threeSkullsOrMoreInCursedArea,\n    currentCard,\n    witchUncursedDiceId,\n  },\n) => {\n  if (diceIsInRolledAreaGetter(dice, diceRolledIds)) {\n    if (keepDiceAllowedGetter(dice, { scoreMarked, threeSkullsOrMoreInCursedArea })) {\n      return \"keep\"\n    }\n    return \"none\"\n  }\n\n  if (diceIsInChestGetter(dice, chestSlots)) {\n    if (unkeepDiceAllowedGetter(dice, { scoreMarked, threeSkullsOrMoreInCursedArea })) {\n      return \"unkeep\"\n    }\n    return \"none\"\n  }\n\n  if (diceIsInCursedAreaGetter(dice, diceCursedIds)) {\n    if (\n      uncurseDiceAllowedGetter(dice, {\n        scoreMarked,\n        threeSkullsOrMoreInCursedArea,\n        currentCard,\n        witchUncursedDiceId,\n      })\n    ) {\n      return \"uncurse\"\n    }\n    return \"none\"\n  }\n\n  return \"none\"\n}\n\nconst getDropEffect = (\n  dice,\n  {\n    diceRolledIds,\n    chestSlots,\n    dropTargetRef,\n    rolledAreaDomNode,\n    chestDomNode,\n    scoreMarked,\n    threeSkullsOrMoreInCursedArea,\n  },\n) => {\n  if (diceIsInRolledAreaGetter(dice, diceRolledIds)) {\n    if (dropTargetRef.current === rolledAreaDomNode) {\n      return \"reposition-in-rolled-area\"\n    }\n\n    if (dropTargetRef.current === chestDomNode) {\n      if (keepDiceAllowedGetter(dice, { scoreMarked, threeSkullsOrMoreInCursedArea })) {\n        return \"keep\"\n      }\n      return \"back-to-rolled-area\"\n    }\n\n    return \"back-to-rolled-area\"\n  }\n\n  if (diceIsInChestGetter(dice, chestSlots)) {\n    if (dropTargetRef.current === chestDomNode) {\n      return \"reposition-in-chest\"\n    }\n\n    if (dropTargetRef.current === rolledAreaDomNode) {\n      if (unkeepDiceAllowedGetter(dice, { scoreMarked, threeSkullsOrMoreInCursedArea })) {\n        return \"unkeep\"\n      }\n      return \"back-to-chest\"\n    }\n\n    return \"back-to-chest\"\n  }\n\n  return \"none\"\n}\n\nconst dropTargetGetter = ({ dragDiceGesture, chestDomNode, rolledAreaDomNode }) => {\n  const diceIsOverChest = domNodeCollidesWithRectangle(chestDomNode, dragDiceGesture.diceRectangle)\n  if (diceIsOverChest) {\n    return chestDomNode\n  }\n\n  const diceIsOverRolledArea = domNodeCollidesWithRectangle(\n    rolledAreaDomNode,\n    dragDiceGesture.diceRectangle,\n  )\n  if (diceIsOverRolledArea) {\n    return rolledAreaDomNode\n  }\n\n  return null\n}\n\nconst diceIsInRolledAreaGetter = (dice, diceRolledIds) => diceRolledIds.includes(dice.id)\nconst diceIsInChestGetter = (dice, chestSlots) =>\n  Object.keys(chestSlots).some((chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n    return (\n      chestSlotContent && chestSlotContent.type === \"dice\" && chestSlotContent.value === dice.id\n    )\n  })\nconst diceIsInCursedAreaGetter = (dice, diceCursedIds) => diceCursedIds.includes(dice.id)\n\nconst keepDiceAllowedGetter = (dice, { scoreMarked, threeSkullsOrMoreInCursedArea }) => {\n  if (scoreMarked) {\n    return false\n  }\n\n  if (threeSkullsOrMoreInCursedArea) {\n    return false\n  }\n\n  return true\n}\nconst unkeepDiceAllowedGetter = (dice, { scoreMarked, threeSkullsOrMoreInCursedArea }) => {\n  if (scoreMarked) {\n    return false\n  }\n\n  if (threeSkullsOrMoreInCursedArea) {\n    return false\n  }\n\n  return true\n}\nconst uncurseDiceAllowedGetter = (\n  dice,\n  { scoreMarked, threeSkullsOrMoreInCursedArea, currentCard, witchUncursedDiceId },\n) => {\n  if (scoreMarked) {\n    return false\n  }\n\n  if (threeSkullsOrMoreInCursedArea) {\n    return false\n  }\n\n  if (!isWitchCard(currentCard)) {\n    return false\n  }\n\n  if (witchUncursedDiceId !== dice.id) {\n    return false\n  }\n\n  return true\n}\n\nconst rolledAreaDropPositionGetter = (rolledAreaPosition, rolledAreaDomNode) => {\n  const absoluteRolledAreaPositionRectangle = rectangleAbsoluteToDomNode(\n    {\n      left: rolledAreaPosition.x,\n      top: rolledAreaPosition.y,\n      right: 0,\n      bottom: 0,\n    },\n    rolledAreaDomNode,\n  )\n  return {\n    x: absoluteRolledAreaPositionRectangle.left,\n    y: absoluteRolledAreaPositionRectangle.top,\n  }\n}\n\nconst chestSlotDropPositionGetter = (chestSlot, chestDomNode) => {\n  const destinationSlotDomNode = chestSlotToChestSlotDomNode(chestSlot, chestDomNode)\n  const destinationSlotRectangle = getDomNodeRectangle(destinationSlotDomNode)\n  return {\n    // + 5 is because dice is centered in the chest slot\n    x: destinationSlotRectangle.left + 5,\n    y: destinationSlotRectangle.top + 5,\n  }\n}\n\nconst closestRolledAreaPositionGetter = (requestedRectangle, rolledAreaDomNode) => {\n  const rectangle = rectangleRelativeToDomNode(requestedRectangle, rolledAreaDomNode)\n  const closestRolledAreaPosition = {\n    x: rectangle.left,\n    y: rectangle.top,\n  }\n  return closestRolledAreaPosition\n}\n\nconst highestRolledAreaZIndexGetter = (dice, { diceRolledIds, dices }) => {\n  if (diceRolledIds.length === 0) {\n    return 1\n  }\n  const diceWithHighestZIndex = diceRolledIds.slice(1).reduce((previous, diceId) => {\n    const dice = dices[diceId]\n    const diceZIndex = dice.rolledAreaZIndex\n    if (diceZIndex > previous.rolledAreaZIndex) return dice\n    return previous\n  }, dices[diceRolledIds[0]])\n  if (diceWithHighestZIndex === dice) return dice.rolledAreaZIndex\n  return diceWithHighestZIndex.rolledAreaZIndex + 1\n}\n\nconst firstAvailableChestSlotGetter = (chestSlots) => {\n  const firstAvailableChestSlot = Object.keys(chestSlots).find((chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n    return !chestSlotContent\n  })\n  return firstAvailableChestSlot\n}\n\nconst closestAvailableChestSlotGetter = (dice, { chestSlots, rectangle, chestDomNode }) => {\n  const chestSlotMap = new Map()\n  const domNodeCandidates = []\n  Object.keys(chestSlots).forEach((chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n    const chestSlotIsEmpty = !chestSlotContent\n    if (\n      chestSlotIsEmpty ||\n      (chestSlotContent.type === \"dice\" && chestSlotContent.value === dice.id)\n    ) {\n      const chestSlotDomNode = chestSlotToChestSlotDomNode(chestSlot, chestDomNode)\n      chestSlotMap.set(chestSlotDomNode, chestSlot)\n      domNodeCandidates.push(chestSlotDomNode)\n    }\n  })\n  const closestDomNode = findDomNodeClosestToRectangle(domNodeCandidates, rectangle)\n  const closestChestSlot = chestSlotMap.get(closestDomNode)\n  return closestChestSlot\n}\n\nconst diceToChestSlot = (dice, chestSlots) => {\n  const diceChestSlot = Object.keys(chestSlots).find((chestSlot) => {\n    const chestSlotContent = chestSlots[chestSlot]\n    return (\n      chestSlotContent && chestSlotContent.type === \"dice\" && chestSlotContent.value === dice.id\n    )\n  })\n  return diceChestSlot\n}\n\nconst chestSlotToChestSlotDomNode = (chestSlot, chestDomNode) => {\n  const chestSlotDomNode = chestDomNode.querySelector(`[data-chest-slot=\"${chestSlot}\"]`)\n  return chestSlotDomNode\n}\n\nconst diceToLocation = (dice, { chestSlots, diceRolledIds, diceCursedIds }) => {\n  const diceChestSlot = Object.keys(chestSlots).find(\n    (chestSlot) =>\n      chestSlots[chestSlot] &&\n      chestSlots[chestSlot].type === \"dice\" &&\n      chestSlots[chestSlot].value === dice.id,\n  )\n  if (diceChestSlot) {\n    return {\n      type: \"chest-slot\",\n      value: diceChestSlot,\n    }\n  }\n\n  if (diceRolledIds.includes(dice.id)) {\n    return {\n      type: \"rolled-area\",\n      value: {\n        ...dice.rolledAreaPosition,\n        rotation: dice.rotation,\n        zIndex: dice.rolledAreaZIndex,\n      },\n    }\n  }\n\n  if (diceCursedIds.includes(dice.id)) {\n    return {\n      type: \"cursed-area\",\n      value: undefined,\n    }\n  }\n\n  return {\n    type: \"offscreen-area\",\n  }\n}\n\nconst diceLocationToProps = (\n  { type, value },\n  { chestDomNode, rolledAreaDomNode, cursedAreaDomNode, offscreenDomNode },\n) => {\n  if (type === \"chest-slot\") {\n    return {\n      parentNode: chestDomNode.querySelector(`[data-chest-slot=\"${value}\"]`),\n      zIndex: undefined,\n      rotation: 0,\n      x: undefined,\n      y: undefined,\n      draggable: true,\n    }\n  }\n\n  if (type === \"rolled-area\") {\n    return {\n      parentNode: rolledAreaDomNode,\n      zIndex: value.zIndex,\n      rotation: value.rotation,\n      x: value.x,\n      y: value.y,\n      draggable: true,\n    }\n  }\n\n  if (type === \"cursed-area\") {\n    return {\n      parentNode: cursedAreaDomNode,\n      zIndex: undefined,\n      rotation: 0,\n      x: undefined,\n      y: undefined,\n      draggable: false,\n    }\n  }\n\n  return {\n    parentNode: offscreenDomNode,\n    zIndex: undefined,\n    rotation: 0,\n    x: undefined,\n    y: undefined,\n    draggable: false,\n  }\n}\n",
    "import React from \"react\"\n\nimport { useCurrentCardId } from \"src/main.store.js\"\nimport { Image } from \"src/generic/Image.jsx\"\nimport { useCardDeck } from \"src/round/round.selectors.js\"\nimport { useDrawCard, useShuffleDeck } from \"src/cards/cards.actions.js\"\nimport { useActivateCurrentCard } from \"src/round/round.actions.js\"\n\nimport { cardsRules } from \"src/cards/cards-rules.js\"\nimport { Dialog } from \"src/dialog/Dialog.jsx\"\nimport { cardIdToCard, cardToImageUrl, cardDefaultUrl } from \"src/cards/cards.js\"\nimport { SmallCard } from \"src/header/Header.jsx\"\n\nexport const DrawCardDialog = ({ dialogIsOpen, closeDialog }) => {\n  const cardDeck = useCardDeck()\n  const currentCardId = useCurrentCardId()\n  const currentCard = cardIdToCard(currentCardId) || null\n\n  const shuffleCardsText = \"Paquet de cartes épuisé. Mélangez-le pour pouvoir piocher à nouveau !\"\n  const drawCardText = \"Piochez une carte pour le tour suivant.\"\n\n  return (\n    <Dialog isOpen={dialogIsOpen} onRequestClose={closeDialog} requestCloseOnClickOutside={false}>\n      <div className=\"dialog-content draw-card-dialog\">\n        <div className=\"dialog-body\">\n          <div className=\"dialog-label\">\n            {cardDeck.length === 0 && !currentCard && shuffleCardsText}\n            {cardDeck.length !== 0 && !currentCard && drawCardText}\n            {currentCard && <span className=\"card-name\">{cardsRules[currentCard.type].name}</span>}\n          </div>\n          <div className=\"card-area\">\n            <div\n              style={{\n                position: \"relative\",\n              }}\n            >\n              <BackCard currentCard={currentCard} remainingCardCount={cardDeck.length} />\n              <TopCard currentCard={currentCard} />\n            </div>\n          </div>\n        </div>\n        <div className=\"dialog-actions\">\n          <DeckButton cardDeck={cardDeck} currentCard={currentCard} />\n          {currentCard ? <StartButton currentCard={currentCard} closeDialog={closeDialog} /> : null}\n        </div>\n      </div>\n    </Dialog>\n  )\n}\n\nconst TopCard = ({ currentCard }) => {\n  if (!currentCard) {\n    return null\n  }\n\n  return (\n    <>\n      <div className=\"card current-card\" id=\"big-card\">\n        <div className=\"flip-card\">\n          <div className=\"flip-card-inner\">\n            <div className=\"flip-card-front\">\n              <Image className=\"card default-card\" src={cardDefaultUrl} />\n            </div>\n            <div className=\"flip-card-back\">\n              <Image\n                className=\"card-img\"\n                src={cardToImageUrl(currentCard)}\n                width=\"150\"\n                alt={currentCard.type}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"small-card\">\n        <SmallCard card={currentCard} />\n      </div>\n    </>\n  )\n}\n\nconst BackCard = ({ currentCard, remainingCardCount }) => {\n  return (\n    <div className=\"card default-card\" id=\"back-deck-card\" style={{ background: \"none\" }}>\n      <Image src={cardDefaultUrl} width=\"150\" />\n      {!currentCard && <div className=\"remaining-cards-number\">{remainingCardCount}</div>}\n    </div>\n  )\n}\n\nconst DeckButton = ({ cardDeck, currentCard }) => {\n  if (currentCard) {\n    return null\n  }\n\n  if (cardDeck.length === 0) {\n    return <ButtonShuffleDeck />\n  }\n\n  return <ButtonDrawCard />\n}\n\nconst ButtonDrawCard = () => {\n  const drawCard = useDrawCard()\n\n  return (\n    <button className=\"draw-card-btn\" onClick={drawCard}>\n      Piocher\n    </button>\n  )\n}\n\nconst ButtonShuffleDeck = () => {\n  const shuffleDeck = useShuffleDeck()\n\n  const shuffleDeckAnimation = () => {\n    document.getElementById(\"back-deck-card\").setAttribute(\"shaking-deck\", \"\")\n    setTimeout(() => {\n      document.getElementById(\"back-deck-card\").removeAttribute(\"shaking-deck\", \"\")\n      shuffleDeck()\n    }, 1000)\n  }\n  return (\n    <button className=\"draw-card-btn\" onClick={shuffleDeckAnimation}>\n      Mélanger\n    </button>\n  )\n}\n\nconst animateCard = (duration) => {\n  const bigCard = document.querySelector(\"#big-card\")\n  const bigCardBack = document.querySelector(\"#back-deck-card\")\n  const smallCard = document.querySelector(\"#small-card\")\n\n  bigCardBack.style.opacity = 0\n  bigCard.animate(\n    [\n      { transform: \"scale(1)\", opacity: 1 },\n      { transform: \"scale(0)\", opacity: 0 },\n    ],\n    {\n      duration,\n      fill: \"forwards\",\n    },\n  )\n\n  smallCard.animate(\n    [\n      { transform: \"scale(0)\", opacity: 0, position: \"fixed\", top: \"auto\", left: \"auto\" },\n      { transform: \"scale(1)\", opacity: 1, position: \"fixed\", top: \"15px\", left: \"15px\" },\n    ],\n    {\n      duration,\n      fill: \"forwards\",\n    },\n  )\n}\n\nconst StartButton = () => {\n  const activateCurrentCard = useActivateCurrentCard()\n\n  const start = () => {\n    const animationDuration = 500\n    animateCard(animationDuration)\n    setTimeout(() => {\n      activateCurrentCard()\n    }, animationDuration)\n  }\n\n  return (\n    <button\n      className=\"draw-card-btn\"\n      onClick={() => {\n        start()\n      }}\n    >\n      Commencer\n    </button>\n  )\n}\n",
    "/* eslint-disable import/max-dependencies */\nimport React from \"react\"\n\nimport { RoundEffects } from \"src/round/round.effects.js\"\nimport { CardsEffects } from \"src/cards/cards.effects.js\"\nimport { DiceOnGoing } from \"src/dice-ongoing/DiceOnGoing.jsx\"\nimport { Chest } from \"src/chest/Chest.jsx\"\nimport { Header } from \"src/header/Header.jsx\"\nimport { Footer } from \"src/footer/Footer.jsx\"\nimport { SkullIsland } from \"src/skull-island/SkullIsland.jsx\"\nimport { DiceContainer } from \"src/dices/DiceContainer.jsx\"\nimport { useSignalEmitter } from \"src/hooks.js\"\nimport { DrawCardDialog } from \"src/footer/DrawCardDialog.jsx\"\nimport { useCurrentCardActivated } from \"src/main.store.js\"\n\nexport const Round = ({ openScoreboard, onRoundStart, onRoundOver }) => {\n  const currentCardActivated = useCurrentCardActivated()\n\n  const [roundMounted, roundMountedSetter] = React.useState(false)\n\n  React.useEffect(() => {\n    onRoundStart()\n  }, [])\n\n  const diceOverRolledAreaSignal = useSignalEmitter()\n  const diceOverChestSignal = useSignalEmitter()\n\n  return (\n    <div className=\"round-container\">\n      <CardsEffects />\n      <Header openScoreboard={openScoreboard} />\n      {currentCardActivated ? (\n        <RoundGameBoard\n          diceOverRolledAreaSignal={diceOverRolledAreaSignal}\n          diceOverChestSignal={diceOverChestSignal}\n          openScoreboard={openScoreboard}\n          onRoundOver={onRoundOver}\n          onRoundMounted={(refs) => {\n            roundMountedSetter(refs)\n          }}\n        />\n      ) : null}\n      {roundMounted ? (\n        <DiceContainer\n          offscreenDomNode={roundMounted.offscreenDomNode}\n          chestDomNode={roundMounted.chestDomNode}\n          rolledAreaDomNode={roundMounted.rolledAreaDomNode}\n          cursedAreaDomNode={roundMounted.cursedAreaDomNode}\n          onDiceOverChestChange={diceOverChestSignal.emit}\n          onDiceOverRolledAreaChange={diceOverRolledAreaSignal.emit}\n        />\n      ) : null}\n      <DrawCardDialog dialogIsOpen={!currentCardActivated} />\n    </div>\n  )\n}\n\nconst RoundGameBoard = ({\n  diceOverRolledAreaSignal,\n  diceOverChestSignal,\n  onRoundMounted,\n  onRoundOver,\n}) => {\n  const rolledAreaRef = React.useRef(null)\n  const chestRef = React.useRef(null)\n  const cursedAreaRef = React.useRef(null)\n  const offscreenRef = React.useRef(null)\n\n  React.useEffect(() => {\n    onRoundMounted({\n      rolledAreaDomNode: rolledAreaRef.current,\n      chestDomNode: chestRef.current,\n      cursedAreaDomNode: cursedAreaRef.current,\n      offscreenDomNode: offscreenRef.current,\n    })\n  }, [])\n\n  return (\n    <>\n      <RoundEffects />\n      <div className=\"chest-and-skulls\">\n        <Chest chestRef={chestRef} diceOverChestSignal={diceOverChestSignal} />\n        <SkullIsland cursedAreaRef={cursedAreaRef} />\n      </div>\n      <DiceOnGoing\n        rolledAreaRef={rolledAreaRef}\n        offscreenRef={offscreenRef}\n        diceOverRolledAreaSignal={diceOverRolledAreaSignal}\n      />\n      <Footer onRoundOver={onRoundOver} rolledAreaRef={rolledAreaRef} />\n    </>\n  )\n}\n",
    "import React from \"react\"\nimport { Image } from \"src/generic/Image.jsx\"\nimport { useStartPlayerRound } from \"src/round/round.actions.js\"\nimport { Dialog } from \"src/dialog/Dialog.jsx\"\n\nexport const StartPlayerRoundDialog = ({ closeDialog, dialogIsOpen, player }) => {\n  const startPlayerRound = useStartPlayerRound()\n  return (\n    <Dialog isOpen={dialogIsOpen} onRequestClose={closeDialog} requestCloseOnClickOutside={true}>\n      <div className=\"dialog-content score-board-dialog\">\n        <div className=\"cross\" onClick={closeDialog}>\n          X\n        </div>\n        <div className=\"dialog-body\">\n          <div>\n            Au tour de\n            <div className=\"dialog-label\">{player.character.name}</div>\n            <Image\n              className=\"player-img\"\n              src={player && player.character.img}\n              alt=\"player\"\n              style={{\n                boxShadow: `inset 0px 0px 0px 4px ${(player && player.character.color) || \"black\"}`,\n              }}\n            />\n          </div>\n          <div className=\"dialog-actions\">\n            <button\n              onClick={() => {\n                closeDialog()\n                startPlayerRound(player)\n              }}\n            >\n              Jouer\n            </button>\n          </div>\n        </div>\n      </div>\n    </Dialog>\n  )\n}\n",
    "export default import.meta.ROLLUP_FILE_URL_f239148c",
    "import React from \"react\"\nimport { Image } from \"src/generic/Image.jsx\"\nimport { usePlayers, useRoundStarted } from \"src/main.store.js\"\nimport { useCurrentPlayer } from \"src/round/round.selectors.js\"\nimport { StartPlayerRoundDialog } from \"src/score-board/StartPlayerRoundDialog.jsx\"\nimport winTreasureUrl from \"src/score-board/win-treasure.png\"\n\nconst SCORE_MAX = 6000\n\nconst pathList = {\n  path1:\n    \"M39.582,739.564c0-91.824,39.191-96.32,38.045-166.691s-30.042-70.37-47.326-161.729s38.128-86.388,31.276-186.42C55.405,134.602-3.014,89.176,8.812,129.825c5.333,18.333,30.77-21,30.77-129.825\",\n  path2:\n    \"M39.582,739.564c0-113.074-5.437-166.074-8.437-198.074s36-20.667,33.019-2c-1.796,11.248-24.583,13.333-23.699-22c1.229-49.158,22.68-111,23.68-169s-38-95-46-181S39.582,0,39.582,0\",\n  path3:\n    \"M39.582,739.564c0-71.926-15.437-155.074-17.437-253.074s30-185,31.087-217s-31.087-46-31.087-26s33,10,31-32s-31-110-31-144S39.582,0,39.582,0\",\n  path4:\n    \"M39.582,739.564c0-113.074-5.437-166.074-8.437-198.074s36-20.667,33.019-2c-1.796,11.248-24.583,13.333-23.699-22c1.229-49.158,22.68-111,23.68-169s-38-95-46-181S39.582,0,39.582,0\",\n}\n\nexport const ScoreBoard = ({ openedByUser, closeScoreboard, playerAnimation }) => {\n  const players = usePlayers()\n  const currentPlayer = useCurrentPlayer()\n  const roundStarted = useRoundStarted()\n\n  // dialogue StartPlayerRoundDialog\n  const [startPlayerRoundDialogIsOpen, startPlayerRoundDialogIsOpenSetter] = React.useState(false)\n  const openStartPlayerRoundDialog = () => {\n    startPlayerRoundDialogIsOpenSetter(true)\n  }\n  const closeStartPlayerRoundDialog = () => {\n    startPlayerRoundDialogIsOpenSetter(false)\n  }\n\n  const nextPlayer = getNextPlayer()\n\n  return (\n    <div className=\"score-board-container\">\n      {openedByUser && (\n        <div className=\"cross\" onClick={closeScoreboard}>\n          X\n        </div>\n      )}\n      {!roundStarted && !currentPlayer && (\n        <div className=\"action-container\">\n          <button\n            className=\"score-board-action\"\n            onClick={() => {\n              openStartPlayerRoundDialog()\n            }}\n          >\n            Commencer à jouer\n          </button>\n        </div>\n      )}\n      <Image className=\"win-treasure-img\" src={winTreasureUrl} alt=\"win-treasure\" />\n      <div className=\"users-path\">\n        {players.map((player) => (\n          <PlayerPath\n            key={player.id}\n            player={player}\n            pathCoordinates={pathList[`path${player.id}`]}\n            score={player.score}\n            character={player.character}\n            openStartPlayerRoundDialog={openStartPlayerRoundDialog}\n            isCurrentPlayer={currentPlayer && player.id === currentPlayer.id}\n            playerAnimation={playerAnimation}\n          />\n        ))}\n      </div>\n      <StartPlayerRoundDialog\n        dialogIsOpen={startPlayerRoundDialogIsOpen}\n        closeDialog={closeStartPlayerRoundDialog}\n        player={nextPlayer}\n      />\n    </div>\n  )\n}\n\nconst getNextPlayer = () => {\n  const currentPlayer = useCurrentPlayer()\n  const players = usePlayers()\n\n  let nextPlayer\n  if (currentPlayer) {\n    const currentPlayerIndex = players.findIndex((player) => player.id === currentPlayer.id)\n    nextPlayer =\n      currentPlayerIndex === players.length - 1 ? players[0] : players[currentPlayerIndex + 1]\n  } else {\n    nextPlayer = players[0]\n  }\n  return nextPlayer\n}\n\nconst PlayerPath = ({\n  pathCoordinates,\n  player,\n  character,\n  score,\n  openStartPlayerRoundDialog,\n  playerAnimation,\n}) => {\n  const pathForegroundElementRef = React.useRef(null)\n  const circleElementRef = React.useRef(null)\n  const nextPlayer = getNextPlayer()\n\n  const [scoreAnimation, scoreAnimationSetter] = React.useState()\n\n  React.useEffect(() => {\n    if (playerAnimation && playerAnimation.player === player) {\n      scoreAnimationSetter(playerAnimation.score)\n    } else {\n      scoreAnimationSetter(null)\n    }\n  }, [playerAnimation, player])\n\n  React.useEffect(() => {\n    if (!scoreAnimation) return () => {}\n\n    const { from, to } = scoreAnimation\n    const pathForegroundElement = pathForegroundElementRef.current\n    const pathLength = pathForegroundElement.getTotalLength()\n    const pathForegroundAnimation = pathForegroundElement.animate(\n      [\n        { strokeDashoffset: ratioToStrokeDashOffset(from / SCORE_MAX, pathLength) },\n        { strokeDashoffset: ratioToStrokeDashOffset(to / SCORE_MAX, pathLength) },\n      ],\n      {\n        duration: 1000,\n        fill: \"forwards\",\n      },\n    )\n    const circleElement = circleElementRef.current\n    const circleAnimation = circleElement.animate(\n      [\n        { offsetDistance: ratioToOffsetDistance(from / SCORE_MAX) },\n        { offsetDistance: ratioToOffsetDistance(to / SCORE_MAX) },\n      ],\n      {\n        duration: 1000,\n        fill: \"forwards\",\n      },\n    )\n\n    pathForegroundAnimation.onfinish = () => {\n      if (circleAnimation.playState === \"finished\") scoreAnimationSetter(null)\n    }\n    circleAnimation.onfinish = () => {\n      if (pathForegroundAnimation.playState === \"finished\") scoreAnimationSetter(null)\n    }\n\n    return () => {\n      pathForegroundAnimation.cancel()\n      circleAnimation.cancel()\n    }\n  }, [scoreAnimation])\n\n  // uncomment to test score animation\n  // React.useEffect(() => {\n  //   scoreAnimationSetter({\n  //     from: 0,\n  //     to: -1000,\n  //   })\n  // }, [])\n\n  React.useEffect(() => {\n    // path-foreground line fill\n    const pathForegroundElement = pathForegroundElementRef.current\n    const pathLength = pathForegroundElement.getTotalLength()\n    pathForegroundElement.style.strokeDasharray = pathLength\n    pathForegroundElement.style.strokeDashoffset = ratioToStrokeDashOffset(\n      score / SCORE_MAX,\n      pathLength,\n    )\n  }, [score])\n\n  return (\n    <div className=\"user-path\">\n      <svg viewBox=\"0 0 79.164 739.564\">\n        <path d={pathCoordinates} className=\"path-background\" />\n        <path ref={pathForegroundElementRef} d={pathCoordinates} className=\"path-foreground\" />\n        <circle\n          ref={circleElementRef}\n          r=\"13\"\n          fill={character.color || \"white\"}\n          className=\"score-indicator\"\n          style={{\n            offsetPath: `path('${pathCoordinates}')`,\n            offsetDistance: ratioToOffsetDistance(score / SCORE_MAX),\n          }}\n        />\n      </svg>\n      <div className=\"speech-bubble\">{score}</div>\n      <div\n        className={`user-avatar ${nextPlayer.character.id === character.id ? \"next-player\" : \"\"}`}\n        onClick={() => {\n          if (nextPlayer.character.id === character.id) openStartPlayerRoundDialog()\n        }}\n      >\n        <Avatar character={character} />\n      </div>\n    </div>\n  )\n}\n\nconst ratioToOffsetDistance = (ratio) => `${ratio * 100}%`\n\nconst ratioToStrokeDashOffset = (ratio, pathLength) => pathLength - ratio * pathLength\n\nconst Avatar = ({ character }) => (\n  <Image\n    className=\"player-img\"\n    src={character.img}\n    alt=\"player\"\n    style={{\n      boxShadow: `inset 0px 0px 0px 4px ${character.color || \"black\"}`,\n    }}\n  />\n)\n",
    "import React from \"react\"\nimport { createAction } from \"src/main.store.js\"\n\nexport const GameConfiguration = () => {\n  const setPlayerCount = useSetPlayerCount()\n\n  return (\n    <div>\n      <p>Combien de joueur?</p>\n      {[1, 2, 3, 4, 5].map((playerCount) => {\n        return (\n          <button\n            key={playerCount}\n            onClick={() => {\n              setPlayerCount(playerCount)\n            }}\n          >\n            {playerCount === 1 ? \"1 joueur\" : `${playerCount} joueurs`}\n          </button>\n        )\n      })}\n    </div>\n  )\n}\n\nconst useSetPlayerCount = createAction((state, playerCount) => {\n  return {\n    ...state,\n    players: new Array(playerCount).fill(\"\").map((_, index) => {\n      return {\n        id: index + 1,\n        number: index + 1,\n        score: 0,\n      }\n    }),\n  }\n})\n",
    "import luffyUrl from \"./Luffy.png\"\nimport missFortuneUrl from \"./MissFortune.png\"\nimport jackSparrowUrl from \"./JackSparrow.png\"\nimport barbeRougeUrl from \"./BarbeRouge.png\"\nimport ginetteBouletteUrl from \"./GinetteBoulette.png\"\nimport capitaineCrochetUrl from \"./CapitaineCrochet.png\"\n\nexport const createPlayers = (characters) => {\n  return characters.map((character, index) => {\n    return {\n      id: index + 1,\n      character,\n      score: 0,\n    }\n  })\n}\n\nexport const CHARACTERS = [\n  { id: 1, name: \"Luffy\", color: \"#ef9620\", img: luffyUrl },\n  { id: 2, name: \"Miss Fortune\", color: \"#d90f1b\", img: missFortuneUrl },\n  { id: 3, name: \"Jack Sparrow\", color: \"#007033\", img: jackSparrowUrl },\n  { id: 4, name: \"Barbe Rouge\", color: \"#7baac9\", img: barbeRougeUrl },\n  { id: 5, name: \"Ginette Boulette\", color: \"#e2500c\", img: ginetteBouletteUrl },\n  { id: 6, name: \"Capitaine Crochet\", color: \"#952460\", img: capitaineCrochetUrl },\n]\n",
    "export default import.meta.ROLLUP_FILE_URL_8e778af1",
    "export default import.meta.ROLLUP_FILE_URL_714c25d7",
    "export default import.meta.ROLLUP_FILE_URL_461d5847",
    "export default import.meta.ROLLUP_FILE_URL_15bab1c5",
    "export default import.meta.ROLLUP_FILE_URL_8dcd6913",
    "export default import.meta.ROLLUP_FILE_URL_cec052af",
    "import React from \"react\"\nimport { CHARACTERS } from \"src/players/players.main.js\"\nimport { Image } from \"src/generic/Image.jsx\"\nimport { usePlayers, createAction } from \"src/main.store.js\"\nimport { mixDeck, cardToSmallImageUrl, CARD_TWO_SWORDS_CHALLENGE } from \"src/cards/cards.js\"\nimport { startJavaScriptAnimation } from \"src/animation/startJavaScriptAnimation.js\"\n\nexport const CharacterSelection = ({ players }) => {\n  const setPlayerCharacter = useSetPlayerCharacter()\n  const startGame = useStartGame()\n  const playerWithoutCharacter = players.find((player) => !player.character)\n  scrollEffect()\n\n  React.useEffect(() => {\n    scrollEffect()\n  }, [])\n\n  return (\n    <div className=\"character-selection-page\">\n      <CrewMembers />\n      {playerWithoutCharacter && (\n        <>\n          <p>Joueur {playerWithoutCharacter.number} : quel pirate êtes vous ?</p>\n          <div className=\"characters-container\" id=\"menu-wrapper\">\n            <div className=\"characters menu\">\n              {CHARACTERS.map((character) => {\n                return (\n                  <div\n                    className={`character item ${\n                      characterIsAvailable(character, players) ? \"\" : \"disabled\"\n                    }`}\n                    key={character.id}\n                    onClick={(event) => {\n                      event.target.animate(\n                        [\n                          { transform: \"scale(1)\" },\n                          { transform: \"scale(1.3)\" },\n                          { transform: \"scale(1)\" },\n                        ],\n                        {\n                          duration: 400,\n                          fill: \"forwards\",\n                        },\n                      )\n                      setPlayerCharacter(playerWithoutCharacter, character)\n                    }}\n                  >\n                    <Image\n                      className=\"character-img\"\n                      src={character && character.img}\n                      alt=\"player\"\n                      style={{\n                        border: `4px solid ${(character && character.color) || \"black\"}`,\n                      }}\n                    />\n                    <span>{character.name}</span>\n                  </div>\n                )\n              })}\n            </div>\n            <div className=\"paddles\">\n              <button className=\"left-paddle paddle hidden\">{\"<\"}</button>\n              <button\n                className=\"right-paddle paddle\"\n                onClick={() => {\n                  scrollEffect()\n                }}\n              >\n                {\">\"}\n              </button>\n            </div>\n          </div>\n        </>\n      )}\n\n      {!playerWithoutCharacter && (\n        <div className=\"crew-completed\">\n          <p>L&lsquo;équipage est au complet !</p>\n          <Image src={cardToSmallImageUrl({ type: CARD_TWO_SWORDS_CHALLENGE })} />\n          <button\n            onClick={() => {\n              startGame()\n            }}\n          >\n            Démarrer la partie\n          </button>\n        </div>\n      )}\n    </div>\n  )\n}\n\nconst CrewMembers = () => {\n  const players = usePlayers()\n\n  return (\n    <div className={`crew ${players.length > 3 ? \"large-crew\" : \"\"}`}>\n      <p>Votre équipage:</p>\n      <ul>\n        {players.map((player) => {\n          return (\n            <li key={player.id}>\n              {player.character ? (\n                <Image\n                  className=\"crew-member-img\"\n                  src={player.character && player.character.img}\n                  alt=\"player\"\n                  style={{\n                    border: `4px solid ${(player.character && player.character.color) || \"black\"}`,\n                  }}\n                />\n              ) : (\n                <div className=\"placeholder-img\"></div>\n              )}\n              <span>{player.character ? player.character.name : `Joueur${player.number}`}</span>\n            </li>\n          )\n        })}\n      </ul>\n    </div>\n  )\n}\n\nconst useStartGame = createAction((state) => {\n  const { cardIds } = state\n  return {\n    ...state,\n    gameStarted: true,\n    cardIds: mixDeck(cardIds),\n  }\n})\n\nconst characterIsAvailable = (character, players) => {\n  return !players.some((player) => player.character && player.character.name === character.name)\n}\n\nconst useSetPlayerCharacter = createAction((state, player, character) => {\n  const { players } = state\n  player.character = character\n  return {\n    ...state,\n    players: [...players],\n  }\n})\n\nconst scrollEffect = () => {\n  var scrollDuration = 300\n  var itemsLength = document.getElementsByClassName(\"item\").length\n  var itemSize = 123\n\n  var getMenuWrapperSize = function () {\n    return document.getElementById(\"menu-wrapper\")\n      ? document.getElementById(\"menu-wrapper\").offsetWidth\n      : null\n  }\n  var menuWrapperSize = getMenuWrapperSize()\n  var getMenuSize = function () {\n    return itemsLength * itemSize\n  }\n  var menuSize = getMenuSize()\n  window.onresize = () => {\n    menuWrapperSize = getMenuWrapperSize()\n  }\n  var menuVisibleSize = menuWrapperSize\n  var menuInvisibleSize = menuSize - menuVisibleSize\n\n  var getMenuPosition = function () {\n    return document.querySelector(\".menu\").scrollLeft\n  }\n  var leftPaddle = document.querySelector(\".left-paddle\")\n  var rightPaddle = document.querySelector(\".right-paddle\")\n\n  if (document.querySelector(\".menu\")) {\n    document.querySelector(\".menu\").onscroll = () => {\n      menuInvisibleSize = menuSize - menuWrapperSize\n      var menuPosition = getMenuPosition()\n      var menuEndOffset = menuInvisibleSize\n\n      if (menuPosition <= 0) {\n        leftPaddle.classList.add(\"hidden\")\n        rightPaddle.classList.remove(\"hidden\")\n      } else if (menuPosition < menuEndOffset) {\n        // show both paddles in the middle\n        leftPaddle.classList.remove(\"hidden\")\n        rightPaddle.classList.remove(\"hidden\")\n      } else if (menuPosition >= menuEndOffset) {\n        leftPaddle.classList.remove(\"hidden\")\n        rightPaddle.classList.add(\"hidden\")\n      }\n    }\n  }\n\n  if (rightPaddle) {\n    rightPaddle.onclick = () => {\n      if (document.querySelector(\".menu\")) {\n        const scrollStart = document.querySelector(\".menu\").scrollLeft\n        const scrollEnd = scrollStart + menuWrapperSize\n        startJavaScriptAnimation({\n          duration: scrollDuration,\n          onProgress: ({ progress }) => {\n            document.querySelector(\".menu\").scrollLeft =\n              scrollStart + (scrollEnd - scrollStart) * progress\n          },\n        })\n      }\n    }\n  }\n\n  if (leftPaddle) {\n    leftPaddle.onclick = () => {\n      if (document.querySelector(\".menu\")) {\n        const scrollStart = document.querySelector(\".menu\").scrollLeft\n        const scrollEnd = scrollStart - menuWrapperSize\n        startJavaScriptAnimation({\n          duration: scrollDuration,\n          onProgress: ({ progress }) => {\n            document.querySelector(\".menu\").scrollLeft =\n              scrollStart + (scrollEnd - scrollStart) * progress\n          },\n        })\n      }\n    }\n  }\n}\n",
    "import React from \"react\"\nimport { usePlayers, useGameStarted, useRoundStarted, useCurrentPlayerId } from \"src/main.store.js\"\nimport { Round } from \"src/round/Round.jsx\"\nimport { ScoreBoard } from \"src/score-board/ScoreBoard.jsx\"\nimport { GameConfiguration } from \"src/game/GameConfiguration.jsx\"\nimport { CharacterSelection } from \"src/game/CharacterSelection.jsx\"\n\nexport const Game = ({ playerAnimationSignal }) => {\n  const players = usePlayers()\n  const currentPlayerId = useCurrentPlayerId()\n  const roundStarted = useRoundStarted()\n  const isOnGameConfigurationScreen = useIsOnGameConfigurationScreen()\n  const isOnCharacterSelectionScreen = useIsOnCharacterSelectionScreen()\n\n  const [scoreboardOpenedByUser, scoreboardOpenedByUserSetter] = React.useState(false)\n  const [roundOverPayload, roundOverPayloadSetter] = React.useState(null)\n  const [playerAnimation, playerAnimationSetter] = React.useState(null)\n\n  const isOnScoreboardScreen = !roundStarted || scoreboardOpenedByUser\n\n  React.useEffect(() => {\n    if (roundOverPayload && roundOverPayload.reason === \"score-marked\") {\n      const player = players.find((player) => player.id === currentPlayerId)\n      const roundScore = roundOverPayload.value\n      const fromScore = player.score - roundScore\n      playerAnimationSetter({\n        player,\n        score: {\n          from: fromScore < 0 ? 0 : fromScore,\n          to: player.score,\n        },\n      })\n    } else {\n      playerAnimationSetter(null)\n    }\n  }, [roundOverPayload, currentPlayerId])\n  React.useEffect(() => {\n    if (playerAnimationSignal) {\n      playerAnimationSignal.listen(playerAnimationSetter)\n    }\n  }, [playerAnimationSignal])\n\n  if (isOnGameConfigurationScreen) {\n    return <GameConfiguration />\n  }\n\n  if (isOnCharacterSelectionScreen) {\n    return <CharacterSelection players={players} />\n  }\n\n  if (isOnScoreboardScreen) {\n    return (\n      <ScoreBoard\n        openedByUser={scoreboardOpenedByUser}\n        closeScoreboard={() => {\n          scoreboardOpenedByUserSetter(false)\n        }}\n        playerAnimation={playerAnimation}\n      />\n    )\n  }\n\n  return (\n    <Round\n      openScoreboard={() => {\n        scoreboardOpenedByUserSetter(true)\n      }}\n      onRoundStart={() => {\n        roundOverPayloadSetter(null)\n      }}\n      onRoundOver={(roundOverPayload) => {\n        roundOverPayloadSetter(roundOverPayload)\n      }}\n    />\n  )\n}\n\nexport const useIsOnGameConfigurationScreen = () => {\n  const players = usePlayers()\n  const needsToChooseNumberOfPlayers = players.length === 0\n  return needsToChooseNumberOfPlayers\n}\n\nexport const useIsOnCharacterSelectionScreen = () => {\n  const gameStarted = useGameStarted()\n  return !gameStarted\n}\n",
    "export default (Constructor, protoProps, staticProps) => {\n  if (protoProps) defineProperties(Constructor.prototype, protoProps)\n  if (staticProps) defineProperties(Constructor, staticProps)\n  return Constructor\n}\n\nfunction defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i]\n    descriptor.enumerable = descriptor.enumerable || false\n    descriptor.configurable = true\n    if (\"value\" in descriptor) descriptor.writable = true\n    Object.defineProperty(target, descriptor.key, descriptor)\n  }\n}\n",
    "export default Object.setPrototypeOf ||\n  ((o, p) => {\n    // eslint-disable-next-line no-proto\n    o.__proto__ = p\n    return o\n  })\n",
    "export default Object.setPrototypeOf\n  ? Object.getPrototypeOf\n  : // eslint-disable-next-line no-proto\n    (o) => o.__proto__ || Object.getPrototypeOf(o)\n",
    "import assertThisInitialized from \"../assertThisInitialized/assertThisInitialized.js\"\n\nexport default (self, call) => {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call\n  }\n  return assertThisInitialized(self)\n}\n",
    "export default (self) => {\n  // eslint-disable-next-line no-void\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\n  }\n  return self\n}\n",
    "import getPrototypeOf from \"../getPrototypeOf/getPrototypeOf.js\"\nimport isNativeReflectConstruct from \"../isNativeReflectConstruct/isNativeReflectConstruct.js\"\nimport possibleConstructorReturn from \"../possibleConstructorReturn/possibleConstructorReturn.js\"\n\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct()\n\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived)\n    var result\n    if (hasNativeReflectConstruct) {\n      // NOTE: This doesn't work if this.__proto__.constructor has been modified.\n      var NewTarget = getPrototypeOf(this).constructor\n      // eslint-disable-next-line prefer-rest-params\n      result = Reflect.construct(Super, arguments, NewTarget)\n    } else {\n      // eslint-disable-next-line prefer-rest-params\n      result = Super.apply(this, arguments)\n    }\n    return possibleConstructorReturn(this, result)\n  }\n}\n",
    "export default function isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false\n  // core-js@3\n  if (Reflect.construct.sham) return false\n  // Proxy can't be polyfilled. Every browser implemented\n  // proxies before or at the same time as Reflect.construct,\n  // so if they support Proxy they also support Reflect.construct.\n  if (typeof Proxy === \"function\") return true\n  // Since Reflect.construct can't be properly polyfilled, some\n  // implementations (e.g. core-js@2) don't set the correct internal slots.\n  // Those polyfills don't allow us to subclass built-ins, so we need to\n  // use our fallback implementation.\n  try {\n    // If the internal slots aren't set, this throws an error similar to\n    //   TypeError: this is not a Date object.\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}))\n    return true\n  } catch (e) {\n    return false\n  }\n}\n",
    "import React from \"react\"\n\nexport const catchError = (LowerLevelComponent, ComponentDisplayedOnError) => {\n  class ErrorBoundary extends React.Component {\n    constructor(props) {\n      super(props)\n      this.state = {\n        hasError: false,\n        error: null,\n      }\n    }\n\n    static getDerivedStateFromError(error) {\n      return {\n        hasError: true,\n        error,\n      }\n    }\n\n    render() {\n      if (this.state.hasError) {\n        return <ComponentDisplayedOnError error={this.state.error} />\n      }\n      return <LowerLevelComponent {...this.props} />\n    }\n  }\n\n  return ErrorBoundary\n}\n",
    "export default import.meta.ROLLUP_FILE_URL_83f7c188",
    "export default import.meta.ROLLUP_FILE_URL_d3a52034",
    "export default import.meta.ROLLUP_FILE_URL_96b5fd78",
    "export default import.meta.ROLLUP_FILE_URL_59eb28fc",
    "export default import.meta.ROLLUP_FILE_URL_89551536",
    "export default import.meta.ROLLUP_FILE_URL_72eb81d2",
    "import { loadImage } from \"./loadImage.js\"\n\nexport const preloadImages = async (\n  images,\n  { chunkSize = 7, msDelayBetweenChunks = 2000 } = {},\n) => {\n  let index = 0\n  const loaded = {}\n  const failed = {}\n\n  const preloadChunk = async (chunk) => {\n    await Promise.all(\n      chunk.map(async (src) => {\n        try {\n          const image = await loadImage(src)\n          loaded[src] = image\n        } catch (error) {\n          failed[src] = true\n        }\n      }),\n    )\n    await new Promise((resolve) => {\n      setTimeout(resolve, msDelayBetweenChunks)\n    })\n    const nextChunk = getNextChunk()\n    if (nextChunk.length > 0) {\n      await preloadChunk(nextChunk)\n    }\n  }\n\n  const getNextChunk = () => {\n    const chunk = []\n    let i = 0\n    while (i < chunkSize && index < images.length) {\n      chunk.push(images[index])\n      i++\n      index++\n    }\n    return chunk\n  }\n\n  await preloadChunk(getNextChunk())\n\n  return { loaded, failed }\n}\n",
    "import React from \"react\"\n\nimport { cardDefaultUrl, cardImageUrlMap } from \"src/cards/cards.js\"\n\nimport woodUrl from \"src/wood.jpg\"\nimport pirateHookUrl from \"src/chest/pirate-hook.png\"\nimport pirateHook2Url from \"src/chest/pirate-hook-02.png\"\nimport woodBoxUrl from \"src/chest/wood-box.jpg\"\nimport treasureMapUrl from \"src/dice-ongoing/treasure-map.png\"\nimport witchLabelUrl from \"src/skull-island/witch-label.png\"\nimport skullBottleUrl from \"src/skull-island/skull-bottle.png\"\nimport { preloadImages } from \"src/loading/preloadImages.js\"\n\nexport const ImagePreloader = () => {\n  const images = [\n    woodUrl,\n    pirateHookUrl,\n    pirateHook2Url,\n    woodBoxUrl,\n    treasureMapUrl,\n    witchLabelUrl,\n    skullBottleUrl,\n    cardDefaultUrl,\n    ...Object.keys(cardImageUrlMap).map((key) => cardImageUrlMap[key]),\n  ]\n\n  React.useEffect(() => {\n    setTimeout(() => preloadImages(images), 2000)\n  }, [])\n\n  return null\n}\n",
    "export default import.meta.ROLLUP_FILE_URL_8cad2148",
    "export default import.meta.ROLLUP_FILE_URL_06d39578",
    "/* eslint-disable import/max-dependencies */\nimport React from \"react\"\nimport { useGameCreated } from \"src/main.store.js\"\nimport { useMainDomNodeSetter } from \"src/dom/dom.main.js\"\nimport { Stylesheet } from \"src/generic/Stylesheet.jsx\"\nimport { Home } from \"src/home/Home.jsx\"\nimport { Game } from \"src/game/Game.jsx\"\nimport { catchError } from \"src/error/error.main.js\"\nimport {\n  UrlLoadingProvider,\n  useAllUrlLoaded,\n  useUrlTrackerTotalCount,\n  useUrlTrackerLoadedCount,\n} from \"src/loading/loading.main.js\"\nimport { ImagePreloader } from \"src/loading/ImagePreloader.jsx\"\nimport { symbolSkullUrl } from \"src/symbols/symbols.js\"\nimport { Image } from \"src/generic/Image.jsx\"\n\nimport milleSabordsCssUrl from \"../mille-sabord.css\"\nimport loadscreenCssUrl from \"../loadscreen.css\"\n\nconst MainRaw = (props) => {\n  return (\n    <UrlLoadingProvider>\n      <LoadScreen>\n        <div id=\"main-container\">\n          <div id=\"main\" ref={useMainDomNodeSetter()}>\n            <Stylesheet href={milleSabordsCssUrl} />\n            <AppBody {...props} />\n          </div>\n        </div>\n      </LoadScreen>\n    </UrlLoadingProvider>\n  )\n}\n\nconst LoadScreen = ({ children }) => {\n  const loadscreenRef = React.useRef()\n  const loadScreenUrlsLoaded = useAllUrlLoaded(\"loadscreen\")\n\n  // main must wait for loadscreen + request idle callback before starting\n  const [mainUrlTrackerReady, mainUrlTrackerReadySetter] = React.useState(false)\n  const [mainUrlsLoaded, mainsUrlsLoadedSetter] = React.useState(false)\n\n  const urlTrackerTotalCount = useUrlTrackerTotalCount()\n  const urlTrackerLoadedCount = useUrlTrackerLoadedCount()\n\n  React.useEffect(() => {\n    if (!loadScreenUrlsLoaded) {\n      return () => {}\n    }\n\n    window.splashscreen.remove()\n    const callbackRequestId = window.requestIdleCallback(() => {\n      mainUrlTrackerReadySetter(true)\n    })\n    return () => {\n      window.cancelIdleCallback(callbackRequestId)\n    }\n  }, [loadScreenUrlsLoaded])\n\n  React.useEffect(() => {\n    if (mainUrlTrackerReady && urlTrackerLoadedCount === urlTrackerTotalCount) {\n      mainsUrlsLoadedSetter(true)\n    }\n  }, [mainUrlTrackerReady, urlTrackerLoadedCount, urlTrackerTotalCount])\n\n  React.useEffect(() => {\n    if (mainUrlsLoaded && loadscreenRef) {\n      const animation = loadscreenRef.current.animate([{ opacity: 1 }, { opacity: 0 }], {\n        duration: 300,\n        fill: \"forwards\",\n      })\n      animation.onfinish = () => {\n        loadscreenRef.current.style.display = \"none\"\n      }\n    }\n  }, [loadscreenRef, mainUrlsLoaded])\n\n  return (\n    <>\n      {loadScreenUrlsLoaded ? children : null}\n      <div id=\"loadscreen\" ref={loadscreenRef}>\n        <Stylesheet href={loadscreenCssUrl} />\n        <Image src={symbolSkullUrl} animateLoaded={false} />\n        <p>\n          Loading files ({urlTrackerLoadedCount}/{urlTrackerTotalCount})\n        </p>\n      </div>\n      {mainUrlsLoaded ? <ImagePreloader /> : null}\n    </>\n  )\n}\n\nconst AppBody = (props) => {\n  const gameCreated = useGameCreated()\n\n  if (gameCreated) {\n    return <Game {...props} />\n  }\n\n  return <Home {...props} />\n}\n\nconst ErrorScreen = ({ error }) => {\n  window.splashscreen.remove()\n  return (\n    <div>\n      An error occured<pre>{typeof error === \"object\" ? error.stack : error}</pre>\n    </div>\n  )\n}\n\nexport const Main = catchError(MainRaw, ErrorScreen)\n",
    "import setPrototypeOf from \"../setPrototypeOf/setPrototypeOf.js\"\n\nexport default (subClass, superClass) => {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\")\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true,\n    },\n  })\n  if (superClass) setPrototypeOf(subClass, superClass)\n}\n",
    "export default (instance, Constructor) => {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\")\n  }\n}\n"
  ],
  "names": [
    "System",
    "addDomEventListener",
    "domNode",
    "eventName",
    "callback",
    "options",
    "addEventListener",
    "removeEventListener",
    "elementIsWindow",
    "a",
    "window",
    "elementIsDocument",
    "nodeType",
    "isFocusable",
    "node",
    "nodeName",
    "toLowerCase",
    "type",
    "isVisible",
    "indexOf",
    "hasAttribute",
    "isDocumentElement",
    "getStyleValue",
    "nodeOrAncestor",
    "parentNode",
    "ownerDocument",
    "documentElement",
    "element",
    "name",
    "elementToOwnerWindow",
    "getComputedStyle",
    "getStyle",
    "getPropertyValue",
    "defaultView",
    "elementToOwnerDocument",
    "document",
    "UrlLoadingContext",
    "React",
    "createContext",
    "reducer",
    "state",
    "action",
    "initialState",
    "UrlLoadingProvider",
    "children",
    "Provider",
    "value",
    "useReducer",
    "useUrlTrackerReady",
    "fakeUrl",
    "urlLoadingState",
    "useUrlLoadingState",
    "fakeUrlLoadends",
    "useUrlLoadingNotifier",
    "fakeUrlLoadingTracker",
    "useState",
    "ready",
    "readySetter",
    "useEffect",
    "callbackRequestId",
    "requestIdleCallback",
    "cancelIdleCallback",
    "status",
    "useUrlTrackerTotalCount",
    "Object",
    "keys",
    "length",
    "useUrlTrackerLoadedCount",
    "filter",
    "url",
    "contextValue",
    "useContext",
    "dispatch",
    "console",
    "log",
    "addLoadedListener",
    "removeLoadListener",
    "removeErrorListener",
    "Stylesheet",
    "loadEnds",
    "href",
    "ref",
    "ReactDOM",
    "createPortal",
    "rel",
    "head",
    "assign",
    "target",
    "i",
    "arguments",
    "source",
    "key",
    "prototype",
    "hasOwnProperty",
    "call",
    "excluded",
    "sourceKeys",
    "objectWithoutPropertiesLoose",
    "getOwnPropertySymbols",
    "sourceSymbolKeys",
    "propertyIsEnumerable",
    "loadImage",
    "crossOrigin",
    "image",
    "Image",
    "Promise",
    "resolve",
    "reject",
    "errored",
    "error",
    "unbindEvents",
    "onload",
    "event",
    "srcElement",
    "onerror",
    "onabort",
    "src",
    "e",
    "cache",
    "Map",
    "Status",
    "useImage",
    "cachedImg",
    "get",
    "setStatus",
    "mounted",
    "useRef",
    "current",
    "f",
    "body",
    "recover",
    "result",
    "then",
    "set",
    "direct",
    "delete",
    "args",
    "apply",
    "this",
    "OnceIntersectingSuspense",
    "fallback",
    "root",
    "rootMargin",
    "threshold",
    "isIntersecting",
    "isIntersectingSetter",
    "nodeSetter",
    "observer",
    "IntersectionObserver",
    "unobserve",
    "observe",
    "disconnect",
    "loadWhenIntersecting",
    "usePlaceholderWhileLoading",
    "animateLoaded",
    "intersectionRoot",
    "intersectionRootMargin",
    "intersectionThreshold",
    "FallbackWhileNotIntersecting",
    "ImageNotIntersectingFallback",
    "FallbackWhileLoading",
    "ImageLoadingFallback",
    "props",
    "imageLoadEnds",
    "Component",
    "AnimateImageLoaded",
    "ComponentPrevious",
    "OnceImageLoadedSuspense",
    "nodeRef",
    "animate",
    "transform",
    "opacity",
    "duration",
    "fill",
    "forwardRef",
    "TRANSPARENT_PNG_DATA_URL",
    "Home",
    "ButtonNewGame",
    "createNewGame",
    "useCreateNewGame",
    "className",
    "symbolSwordUrl",
    "onClick",
    "createAction",
    "gameCreated",
    "useBecomes",
    "becomesPredicate",
    "deps",
    "transition",
    "useTransition",
    "Boolean",
    "transitionPredicate",
    "mountedRef",
    "depsRef",
    "from",
    "to",
    "usePrevious",
    "useSignalEmitter",
    "listeners",
    "listen",
    "removed",
    "listenersWithoutCallback",
    "searching",
    "listenerCandidate",
    "push",
    "emit",
    "forEach",
    "listener",
    "useSignalListener",
    "signal",
    "stateSetter",
    "computeRoundScore",
    "card",
    "symbolsInChest",
    "scoreMarked",
    "markScoreAllowed",
    "isSwordChallengeCard",
    "computeScoreForSwordChallenge",
    "goal",
    "numberOfSwords",
    "gamble",
    "gambleAmount",
    "isAnimalsCard",
    "computeScoreForSymbols",
    "map",
    "symbol",
    "SYMBOL_PARROT",
    "SYMBOL_MONKEY",
    "isPirateCard",
    "isCoinCard",
    "isDiamondCard",
    "symbols",
    "countSymbol",
    "SYMBOL_SWORD",
    "symbolArray",
    "symbolCandidate",
    "perfectCount",
    "score",
    "usefullSymbol",
    "symbolCountMap",
    "countSymbolsOccurences",
    "values",
    "symbolCount",
    "SYMBOL_DIAMOND",
    "SYMBOL_COIN",
    "useMemo",
    "useCurrentPlayer",
    "currentPlayerId",
    "useCurrentPlayerId",
    "players",
    "usePlayers",
    "find",
    "playerCandidate",
    "id",
    "useHasNeverRolled",
    "rollCount",
    "useRollCount",
    "useHasRolledOnce",
    "useSymbolsInChest",
    "dices",
    "useDices",
    "chestSlots",
    "useChestSlots",
    "reduce",
    "previous",
    "chestSlot",
    "chestSlotContent",
    "diceId",
    "dice",
    "diceToVisibleSymbol",
    "useRemainingSpotInCursedArea",
    "skullCountInCursedArea",
    "useSkullCountInCursedArea",
    "useHasDicesToCurse",
    "dicesToCurse",
    "useDicesToCurse",
    "diceRolledIds",
    "useDiceRolledIds",
    "witchUncursedDiceId",
    "useWitchUncursedDiceId",
    "remainingSpotInCursedArea",
    "diceRolledId",
    "diceRolled",
    "diceIsOnSkull",
    "slice",
    "useRollDiceAllowed",
    "currentCardId",
    "useCurrentCardId",
    "hasNeverRolled",
    "useScoreMarked",
    "threeSkullsOrMoreInCursedArea",
    "useThreeSkullsOrMoreInCursedArea",
    "hasDicesToCurse",
    "isChestCard",
    "cardIdToCard",
    "diceCursedIds",
    "useDiceCursedIds",
    "symbolsFromCard",
    "useSymbolsFromCard",
    "symbolIsSkull",
    "currentCard",
    "isOneSkullCard",
    "SYMBOL_SKULL",
    "isTwoSkullsCard",
    "useMarkScoreAllowed",
    "useRoundScore",
    "useStartPlayerRound",
    "player",
    "currentCardActivated",
    "roundStarted",
    "useActivateCurrentCard",
    "ROUND_START_STATE",
    "useSendToSkullIsland",
    "isOnSkullIsland",
    "useMarkScore",
    "currentPlayer",
    "nextScore",
    "useEndPlayerRound",
    "useSetDiceRolledAreaPosition",
    "zIndex",
    "x",
    "y",
    "rolledAreaPosition",
    "rolledAreaZIndex",
    "useSetDiceChestSlot",
    "previousChestSlot",
    "useCurseDice",
    "useUncurseDice",
    "fromLab",
    "diceCursedId",
    "useUnkeepDice",
    "useKeepDice",
    "RoundEffects",
    "useRoundEffects",
    "useCurseDiceEffect",
    "useFailSwordChallengeEffect",
    "useFourSkullsOrMoreOnFirstRollEffect",
    "curseDice",
    "timeout",
    "setTimeout",
    "clearTimeout",
    "markScore",
    "threeSkullsOrMoreInCursedAreaBecomesTrue",
    "threeSkullsOrMoreInCursedAreaPrevious",
    "roundScore",
    "swordChallengeCard",
    "isFirstRoll",
    "useIsFirstRoll",
    "useIsOnSkullIsland",
    "sendToSkullIsland",
    "useDrawCard",
    "cardIds",
    "cardUsedIds",
    "cardDrawnId",
    "useAddExtraCoin",
    "useAddExtraDiamond",
    "useShuffleDeck",
    "mixDeck",
    "CardsEffects",
    "useCoinCardEffect",
    "useDiamondCardEffect",
    "addExtraCoin",
    "drawCoinCard",
    "currentCardIdPrevious",
    "addExtraDiamond",
    "drawDiamondCard",
    "DiceOnGoing",
    "rolledAreaRef",
    "offscreenRef",
    "diceOverRolledAreaSignal",
    "diceOverRolledArea",
    "style",
    "outline",
    "findFirstDescendant",
    "rootNode",
    "fn",
    "iterator",
    "createNextNodeIterator",
    "next",
    "done",
    "getNextNode",
    "skipChild",
    "firstChild",
    "nextSibling",
    "nextNode",
    "createAfterNodeIterator",
    "fromNode",
    "skipChildren",
    "childrenSkipped",
    "getDeepestNode",
    "deepestNode",
    "lastChild",
    "createPreviousNodeIterator",
    "previousNode",
    "previousSibling",
    "getPreviousNode",
    "firstFocusableDescendantOrSelf",
    "firstFocusableDescendant",
    "trapFocusInside",
    "warn",
    "activeTraps",
    "activeTrap",
    "getFirstTabbable",
    "isDiscoverableWithKeyboard",
    "getLastTabbable",
    "findLastDescendant",
    "getPreviousTabbableOrLast",
    "predicate",
    "findBefore",
    "activeElement",
    "getNextTabbableOrFirst",
    "findAfter",
    "deactivate",
    "activate",
    "lock",
    "onmousedown",
    "contains",
    "isEventOutside",
    "preventDefault",
    "stopImmediatePropagation",
    "onkeydown",
    "isTabEvent",
    "activeElementIsBody",
    "shiftKey",
    "elementToFocus",
    "focus",
    "performTabEventNavigation",
    "capture",
    "passive",
    "Number",
    "getAttribute",
    "hasNegativeTabIndex",
    "keyCode",
    "previousTrap",
    "unlock",
    "trap",
    "lastTrap",
    "pop",
    "getScrollableParent",
    "arg",
    "_typeof",
    "TypeError",
    "getScrollingElement",
    "findScrollableParent",
    "scrollingElement",
    "isCompliant",
    "possiblyScrollingElement",
    "test",
    "tagName",
    "getNextBodyElement",
    "bodyIsScrollable",
    "frameset",
    "isBodyElement",
    "isScrollable",
    "isHidden",
    "display",
    "compatMode",
    "testScrollCompliance",
    "iframe",
    "createElement",
    "height",
    "appendChild",
    "iframeDocument",
    "contentWindow",
    "write",
    "close",
    "scrollComplianceResult",
    "scrollHeight",
    "removeChild",
    "verticalOverflowIsVisible",
    "horizontalOverflowIsVisible",
    "position",
    "parent",
    "DIALOG_STYLE",
    "top",
    "left",
    "right",
    "width",
    "margin",
    "padding",
    "overscrollBehavior",
    "background",
    "color",
    "border",
    "BACKDROP_STYLE",
    "bottom",
    "backgroundColor",
    "DialogBase",
    "container",
    "isOpen",
    "closeMethod",
    "stealFocus",
    "restoreStolenFocus",
    "trapFocus",
    "requestCloseOnEscape",
    "requestCloseOnClickOutside",
    "onAfterOpen",
    "onRequestClose",
    "onFocusIn",
    "onFocusOut",
    "backdropProps",
    "rest",
    "dialogElement",
    "setDialogElement",
    "isInsideDocument",
    "isActivePrevious",
    "focusIsInsideDialog",
    "hasOrContainsFocus",
    "onDocumentBlur",
    "blurEvent",
    "relatedTarget",
    "onDialogFocus",
    "focusEvent",
    "onDocumentFocus",
    "elementsToScrollLock",
    "scrollableParent",
    "cleanUpArray",
    "prev",
    "overflow",
    "cleanup",
    "trapScrollInside",
    "nodeFocusedBeforeTransfer",
    "firstFocusableElement",
    "elementsToHide",
    "Array",
    "child",
    "setAttribute",
    "removeAttribute",
    "DialogBackDrop",
    "onMouseDownPassive",
    "mousedownEvent",
    "clickEvent",
    "getStyleForClose",
    "onKeyDown",
    "keydownEvent",
    "ESC_KEY",
    "hidden",
    "undefined",
    "tabIndex",
    "backdropElement",
    "setBackdropElement",
    "visibility",
    "Dialog",
    "dialogCssUrl",
    "useMainDomNode",
    "maxWidth",
    "useSwordQuantityRequired",
    "SwordChallengeIndicator",
    "quantityRequired",
    "quantityKept",
    "quantityRequiredArray",
    "index",
    "SwordIconActivated",
    "SwordIconDisabled",
    "swordsDisabledImageUrl",
    "StarRain",
    "Star",
    "viewBox",
    "d",
    "swordChallengeOngoing",
    "RoundScore",
    "ScoreDisplay",
    "dialogIsOpen",
    "setDialogIsOpen",
    "DoubleScoreIndicator",
    "NegativeScoreSign",
    "ScoreRulesDialog",
    "closeDialog",
    "useCurrentCardActivated",
    "challengeWon",
    "swordNumberIncreased",
    "quantityKeptPrevious",
    "swordSliceAnimation",
    "swordSliceAnimationSetter",
    "symbolCoinUrl",
    "symbolDiamondUrl",
    "diceSize",
    "Chest",
    "chestRef",
    "diceOverChestSignal",
    "diceOverChest",
    "protectedByChestCard",
    "ChestSlot",
    "CursedCover",
    "color1",
    "borderColor",
    "color2",
    "borderWidth",
    "borderStyle",
    "symbolToImageUrl",
    "draggable",
    "cursedGridImageUrl",
    "alt",
    "cardsRules",
    "rule",
    "more",
    "CardRulesDialog",
    "cardRules",
    "cardToImageUrl",
    "startJavaScriptAnimation",
    "timingFunction",
    "t",
    "onProgress",
    "onCancel",
    "onComplete",
    "isNaN",
    "parseInt",
    "currentRequestAnimationFrameId",
    "startMs",
    "performance",
    "now",
    "rawProgress",
    "progress",
    "handler",
    "nowMs",
    "Math",
    "min",
    "requestAnimationFrame",
    "cancelAnimationFrame",
    "useAnimateTransition",
    "transitionSetter",
    "valuePrevious",
    "Header",
    "openScoreboard",
    "dialogIsOpenSetter",
    "TopDeckCard",
    "CurrentPlayer",
    "TotalScore",
    "SmallCard",
    "BackCard",
    "backgroundImage",
    "cardDefaultUrl",
    "backgroundSize",
    "cardToSmallImageUrl",
    "character",
    "img",
    "totalScore",
    "totalScoreAnimation",
    "animatedValue",
    "animatedValueSetter",
    "round",
    "useAnimateTransitionUsingJs",
    "pow",
    "rotatePoint",
    "origin",
    "point",
    "degrees",
    "radians",
    "degreesToRadians",
    "cosinus",
    "cos",
    "sinus",
    "sin",
    "run",
    "rise",
    "getRectangleCenterPoint",
    "topLeft",
    "topRight",
    "bottomRight",
    "bottomLeft",
    "PI",
    "lineCollidesWithRectangle",
    "line",
    "rectangle",
    "someRectangleSideLine",
    "rectangleSideLine",
    "firstLineStartPoint",
    "firstLineEndPoint",
    "secondLineStartPoint",
    "secondLineEndPoint",
    "unknownA",
    "unknownB",
    "denominator",
    "firstPoint",
    "secondPoint",
    "thirdPoint",
    "fourthPoint",
    "rectangleInsideOf",
    "parentRectangle",
    "getDistanceBetweenRectangles",
    "firstRectangle",
    "secondRectangle",
    "horizontalDiff",
    "verticalDiff",
    "firstRectangleCenterPoint",
    "secondRectangleCenterPoint",
    "sqrt",
    "getDomNodeRectangle",
    "elementWindow",
    "elementDocument",
    "domNodeRect",
    "getBoundingClientRect",
    "documentScroll",
    "pageXOffset",
    "scrollLeft",
    "pageYOffset",
    "scrollTop",
    "floor",
    "domNodeCollidesWithRectangle",
    "domNodeRectangle",
    "findDomNodeClosestToRectangle",
    "domNodeCandidates",
    "rectangleCandidates",
    "domNodeCandidate",
    "closestRectangle",
    "smallestDistance",
    "rectangleCandidate",
    "distance",
    "findRectangleCloserToRectangle",
    "printPointInDocument",
    "autoRemoveAfter",
    "div",
    "autoRemoveTimeout",
    "remove",
    "diceSpacing",
    "rollDices",
    "rolledAreaDomNode",
    "rolledAreaRectangle",
    "rolledAreaWidth",
    "rolledAreaHeight",
    "rectangleAllowed",
    "otherRotatedRectangles",
    "getRandomAndCollisionFreeInfo",
    "count",
    "getRandomDiceRectangle",
    "rotation",
    "getDiceRandomRotation",
    "rotatedRectangleCandidate",
    "points",
    "degree",
    "rotateRectangle",
    "some",
    "otherRotatedRectangle",
    "secondRotatedRectangle",
    "firstRotatedRectangleSideLine",
    "rotatedRectangle",
    "visibleFaceIndex",
    "getDiceRandomFace",
    "positionCandidate",
    "getRandomNumberBetweenInterval",
    "faces",
    "max",
    "random",
    "ButtonRoll",
    "rollDiceAllowed",
    "roll",
    "useRoll",
    "disabledNotEnoughDice",
    "disabledChestCard",
    "disabled",
    "symbolSkullUrl",
    "dicesToRoll",
    "Footer",
    "onRoundOver",
    "ButtonMarkScore",
    "ButtonEndRound",
    "markScoreButtonVisible",
    "hasRolledOnce",
    "useMarkScoreButtonVisible",
    "sign",
    "abs",
    "startNextRoundAllowed",
    "useStartNextRoundAllowed",
    "endPlayerRound",
    "reason",
    "SkullIsland",
    "cursedAreaRef",
    "isWitchCard",
    "UncurseDiceLabel",
    "ExtraSkull",
    "wichLabelImageUrl",
    "stroke",
    "Portal",
    "stringifyTransformations",
    "rotate",
    "scale",
    "translate",
    "join",
    "throttle",
    "previousMs",
    "ms",
    "trailing",
    "throttled",
    "Date",
    "msEllapsedSincePreviousCall",
    "remaining",
    "cancel",
    "enableDragGesture",
    "dragIntentTimeout",
    "pendingGesture",
    "logLevel",
    "onGrip",
    "onLongGrip",
    "onDrag",
    "onRelease",
    "longGripMs",
    "logger",
    "createLogger",
    "dragIntent",
    "removeMoveListener",
    "removeReleaseListener",
    "debug",
    "pointerPositionPrevious",
    "domNodeStartPosition",
    "gripPointerPosition",
    "longGripTimeout",
    "dropEffect",
    "removeMousedownListener",
    "which",
    "handleGrip",
    "mouseEventToPagePosition",
    "mousemoveEvent",
    "handleMove",
    "mouseupEvent",
    "handleRelease",
    "removeTouchstartListener",
    "touchstartEvent",
    "touchEventToPagePosition",
    "touchmoveEvent",
    "touchendEvent",
    "removeClickListener",
    "pointerPosition",
    "domNodeToPagePosition",
    "handleLongGrip",
    "gripHorizontalShift",
    "gripVerticalShit",
    "movePosition",
    "relativeX",
    "relativeY",
    "setDropEffect",
    "handleCancel",
    "rect",
    "mouseEvent",
    "pageX",
    "pageY",
    "touchEvent",
    "firstChangedTouch",
    "changedTouches",
    "Dice",
    "diceAnimation",
    "anmationDebug",
    "onDiceClick",
    "onDiceDrag",
    "onDiceDrop",
    "onDiceDragEnd",
    "disapear",
    "appear",
    "mainDomNode",
    "diceDomNode",
    "useDiceDomNode",
    "diceDomNodeSetter",
    "useDiceDomNodeSetter",
    "diceGripped",
    "diceGrippedSetter",
    "dragGesture",
    "setDragGesture",
    "parentNodePrevious",
    "portalParentNode",
    "bigMoveOccured",
    "disableDragGesture",
    "diceRectangle",
    "onfinish",
    "animation",
    "easing",
    "onSkull",
    "diceX",
    "diceY",
    "diceZIndex",
    "transitionProperty",
    "transitionDuration",
    "transitionTimingFunction",
    "transformOrigin",
    "rx",
    "ry",
    "strokeWidth",
    "xlinkHref",
    "DiceContainer",
    "offscreenDomNode",
    "chestDomNode",
    "cursedAreaDomNode",
    "onDiceOverChestChange",
    "onDiceOverRolledAreaChange",
    "diceAnimationState",
    "dispatchDiceAnimation",
    "setDiceRolledAreaPosition",
    "keepDice",
    "unkeepDice",
    "uncurseDice",
    "setDiceChestSlot",
    "dropTargetRef",
    "diceLocation",
    "diceToLocation",
    "propsFromLocation",
    "diceLocationToProps",
    "diceIsGoingToBeCursed",
    "diceInCursedArea",
    "useCallback",
    "clickEffect",
    "getClickEffect",
    "firstAvailableChestSlot",
    "firstAvailableChestSlotGetter",
    "dragDiceGesture",
    "dropTargetGetter",
    "getDropEffect",
    "dropDiceGesture",
    "dropAnimation",
    "dropPosition",
    "closestRolledAreaPosition",
    "closestRolledAreaPositionGetter",
    "highestRolledAreaZIndex",
    "highestRolledAreaZIndexGetter",
    "rolledAreaDropPositionGetter",
    "closestAvailableChestSlot",
    "closestAvailableChestSlotGetter",
    "chestSlotDropPositionGetter",
    "diceToChestSlot",
    "diceChestSlot",
    "diceIsInRolledAreaGetter",
    "keepDiceAllowedGetter",
    "diceIsInChestGetter",
    "unkeepDiceAllowedGetter",
    "diceIsInCursedAreaGetter",
    "uncurseDiceAllowedGetter",
    "includes",
    "rectangleWidth",
    "rectangleHeight",
    "absoluteRolledAreaPositionRectangle",
    "destinationSlotDomNode",
    "chestSlotToChestSlotDomNode",
    "destinationSlotRectangle",
    "requestedRectangle",
    "rectangleRelativeTo",
    "rectangleRelativeToDomNode",
    "diceWithHighestZIndex",
    "chestSlotMap",
    "chestSlotDomNode",
    "closestDomNode",
    "querySelector",
    "DrawCardDialog",
    "cardDeck",
    "useCardIds",
    "cardId",
    "useCardDeck",
    "remainingCardCount",
    "TopCard",
    "DeckButton",
    "StartButton",
    "ButtonShuffleDeck",
    "ButtonDrawCard",
    "drawCard",
    "shuffleDeck",
    "getElementById",
    "activateCurrentCard",
    "start",
    "bigCard",
    "bigCardBack",
    "smallCard",
    "Round",
    "onRoundStart",
    "roundMounted",
    "roundMountedSetter",
    "RoundGameBoard",
    "onRoundMounted",
    "refs",
    "StartPlayerRoundDialog",
    "startPlayerRound",
    "boxShadow",
    "SCORE_MAX",
    "pathList",
    "path1",
    "path2",
    "path3",
    "path4",
    "ScoreBoard",
    "openedByUser",
    "closeScoreboard",
    "playerAnimation",
    "useRoundStarted",
    "startPlayerRoundDialogIsOpen",
    "startPlayerRoundDialogIsOpenSetter",
    "openStartPlayerRoundDialog",
    "nextPlayer",
    "getNextPlayer",
    "winTreasureUrl",
    "PlayerPath",
    "pathCoordinates",
    "isCurrentPlayer",
    "currentPlayerIndex",
    "findIndex",
    "pathForegroundElementRef",
    "circleElementRef",
    "scoreAnimation",
    "scoreAnimationSetter",
    "pathForegroundElement",
    "pathLength",
    "getTotalLength",
    "pathForegroundAnimation",
    "strokeDashoffset",
    "ratioToStrokeDashOffset",
    "circleAnimation",
    "offsetDistance",
    "ratioToOffsetDistance",
    "playState",
    "strokeDasharray",
    "r",
    "offsetPath",
    "Avatar",
    "ratio",
    "GameConfiguration",
    "setPlayerCount",
    "useSetPlayerCount",
    "playerCount",
    "_",
    "number",
    "CHARACTERS",
    "CharacterSelection",
    "setPlayerCharacter",
    "useSetPlayerCharacter",
    "startGame",
    "useStartGame",
    "playerWithoutCharacter",
    "scrollEffect",
    "CrewMembers",
    "characterIsAvailable",
    "CARD_TWO_SWORDS_CHALLENGE",
    "gameStarted",
    "itemsLength",
    "getElementsByClassName",
    "getMenuWrapperSize",
    "offsetWidth",
    "menuWrapperSize",
    "menuSize",
    "onresize",
    "menuInvisibleSize",
    "leftPaddle",
    "rightPaddle",
    "onscroll",
    "menuPosition",
    "menuEndOffset",
    "classList",
    "add",
    "onclick",
    "scrollStart",
    "scrollEnd",
    "Game",
    "playerAnimationSignal",
    "isOnGameConfigurationScreen",
    "useIsOnGameConfigurationScreen",
    "isOnCharacterSelectionScreen",
    "useIsOnCharacterSelectionScreen",
    "scoreboardOpenedByUser",
    "scoreboardOpenedByUserSetter",
    "roundOverPayload",
    "roundOverPayloadSetter",
    "playerAnimationSetter",
    "isOnScoreboardScreen",
    "fromScore",
    "useGameStarted",
    "defineProperties",
    "descriptor",
    "enumerable",
    "configurable",
    "writable",
    "defineProperty",
    "setPrototypeOf",
    "o",
    "p",
    "__proto__",
    "getPrototypeOf",
    "self",
    "ReferenceError",
    "assertThisInitialized",
    "_createSuper",
    "Derived",
    "hasNativeReflectConstruct",
    "Reflect",
    "construct",
    "sham",
    "Proxy",
    "toString",
    "isNativeReflectConstruct",
    "Super",
    "NewTarget",
    "constructor",
    "possibleConstructorReturn",
    "LowerLevelComponent",
    "ComponentDisplayedOnError",
    "preloadImages",
    "images",
    "chunkSize",
    "msDelayBetweenChunks",
    "loaded",
    "failed",
    "preloadChunk",
    "chunk",
    "all",
    "nextChunk",
    "getNextChunk",
    "ImagePreloader",
    "woodUrl",
    "pirateHookUrl",
    "pirateHook2Url",
    "woodBoxUrl",
    "treasureMapUrl",
    "witchLabelUrl",
    "skullBottleUrl",
    "cardImageUrlMap",
    "LoadScreen",
    "loadscreenRef",
    "loadScreenUrlsLoaded",
    "urlTrackerReady",
    "urlTrackerTotalCount",
    "urlTrackerLoadedCount",
    "allUrlLoaded",
    "allUrlLoadedSetter",
    "useAllUrlLoaded",
    "mainUrlTrackerReady",
    "mainUrlTrackerReadySetter",
    "mainUrlsLoaded",
    "mainsUrlsLoadedSetter",
    "splashscreen",
    "loadscreenCssUrl",
    "AppBody",
    "useGameCreated",
    "useMainDomNodeSetter",
    "milleSabordsCssUrl",
    "stack",
    "subClass",
    "superClass",
    "create",
    "Constructor",
    "protoProps",
    "staticProps",
    "instance",
    "hasError"
  ],
  "mappings": "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"
}