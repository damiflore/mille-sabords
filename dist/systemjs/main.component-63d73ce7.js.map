{
  "version": 3,
  "file": "main.component.js",
  "sources": [
    "../../src/generic/Stylesheet.jsx",
    "../../src/cards/card_default.png",
    "../../src/helper/asap.js",
    "../../node_modules/@jsenv/core/helpers/babel/objectWithoutProperties/objectWithoutProperties.js",
    "../../node_modules/@jsenv/core/helpers/babel/objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js",
    "../../src/dom/dom.util.js",
    "../../src/loading/loading.main.js",
    "../../node_modules/@jsenv/core/helpers/babel/createClass/createClass.js",
    "../../node_modules/@jsenv/core/helpers/babel/setPrototypeOf/setPrototypeOf.js",
    "../../node_modules/@jsenv/core/helpers/babel/getPrototypeOf/getPrototypeOf.js",
    "../../node_modules/@jsenv/core/helpers/babel/possibleConstructorReturn/possibleConstructorReturn.js",
    "../../node_modules/@jsenv/core/helpers/babel/assertThisInitialized/assertThisInitialized.js",
    "../../node_modules/@jsenv/core/helpers/babel/createSuper/createSuper.js",
    "../../node_modules/@jsenv/core/helpers/babel/isNativeReflectConstruct/isNativeReflectConstruct.js",
    "../../src/error/error.main.js",
    "../../src/wood.jpg",
    "../../src/chest/pirate-hook.png",
    "../../src/chest/pirate-hook-02.png",
    "../../src/chest/wood-box.jpg",
    "../../src/dice-ongoing/treasure-map.png",
    "../../src/skull-island/witch-label.png",
    "../../src/skull-island/skull-bottle.png",
    "../../src/loading/loadImage.js",
    "../../src/loading/preloadImages.js",
    "../../src/loading/ImagePreloader.jsx",
    "../../node_modules/@jsenv/core/helpers/babel/extends/extends.js",
    "../../src/loading/useImage.js",
    "../../src/generic/OnceIntersectingSuspense.js",
    "../../src/generic/Image.jsx",
    "../../loadscreen.css",
    "../../src/main.component.js",
    "../../node_modules/@jsenv/core/helpers/babel/inherits/inherits.js",
    "../../node_modules/@jsenv/core/helpers/babel/classCallCheck/classCallCheck.js"
  ],
  "sourcesContent": [
    "/**\n\nThis component (Stylesheet) must ensure a given url is loaded as css by the browser.\nTo achieve that it creates a <link> and append it to document.head\n\nIt is important that even if many Stylesheet are instantiated for a given url only\none <link> ends up in the document.head. (Appended it multiple times is useless).\nIt happens for Dialog.base.css for instance.\n\nI have tried to achieve this with ReactDOM.createPortal but could not manage\nto have only one <link> injected.\n\n*/\n\nimport React from \"react\"\nimport { addLoadedListener, useUrlLoadingNotifier } from \"src/loading/loading.main.js\"\n\nexport const Stylesheet = ({ href }) => {\n  const [fetchEnd] = useUrlLoadingNotifier(href)\n\n  React.useEffect(() => {\n    return injectStylesheetIntoDocument(href, { onload: fetchEnd })\n  }, [href])\n\n  return null\n}\n\nconst memoizeLinksByHref = (fn) => {\n  const linkMap = new Map()\n\n  const stopUsing = (href) => {\n    if (!linkMap.has(href)) {\n      return\n    }\n\n    const { useCount, ...rest } = linkMap.get(href)\n    if (useCount > 1) {\n      linkMap.set(href, {\n        useCount: useCount - 1,\n        ...rest,\n      })\n      return\n    }\n\n    linkMap.delete(href)\n    rest.linkCleanup()\n  }\n\n  return (href, ...args) => {\n    if (linkMap.has(href)) {\n      const { useCount, ...rest } = linkMap.get(href)\n      linkMap.set(href, {\n        useCount: useCount + 1,\n        ...rest,\n      })\n      return stopUsing\n    }\n\n    const linkCleanup = fn(href, ...args)\n    linkMap.set(href, {\n      useCount: 1,\n      linkCleanup,\n    })\n    return stopUsing\n  }\n}\n\nconst injectStylesheetIntoDocument = memoizeLinksByHref((href, { onload = () => {} } = {}) => {\n  const link = document.createElement(\"link\")\n  link.rel = \"stylesheet\"\n  link.type = \"text/css\"\n  const removeLoadedListener = addLoadedListener(link, onload)\n  link.href = href\n  document.head.appendChild(link)\n  return () => {\n    removeLoadedListener()\n    document.head.removeChild(link)\n  }\n})\n",
    "export default import.meta.ROLLUP_FILE_URL_7755e30f",
    "export const requestAsapCallback = window.requestIdleCallback\n  ? (callback) => {\n      const requestId = window.requestIdleCallback(callback, { timeout: 400 })\n      return () => {\n        window.cancelIdleCallback(requestId)\n      }\n    }\n  : (callback) => {\n      const requestId = window.requestAnimationFrame(callback)\n      return () => {\n        window.cancelAnimationFrame(requestId)\n      }\n    }\n",
    "import objectWithoutPropertiesLoose from \"../objectWithoutPropertiesLoose/objectWithoutPropertiesLoose.js\"\n\nexport default (source, excluded) => {\n  if (source === null) return {}\n\n  var target = objectWithoutPropertiesLoose(source, excluded)\n  var key\n  var i\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source)\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i]\n      if (excluded.indexOf(key) >= 0) continue\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue\n      target[key] = source[key]\n    }\n  }\n  return target\n}\n",
    "export default (source, excluded) => {\n  if (source === null) return {}\n  var target = {}\n  var sourceKeys = Object.keys(source)\n  var key\n  var i\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i]\n    if (excluded.indexOf(key) >= 0) continue\n    target[key] = source[key]\n  }\n  return target\n}\n",
    "/* eslint-disable valid-jsdoc */\n\nexport const addDomEventListener = (domNode, eventName, callback, options) => {\n  domNode.addEventListener(eventName, callback, options)\n  return () => {\n    domNode.removeEventListener(eventName, callback, options)\n  }\n}\n\n// checking if somthing is window is tricky\n// we could also use a.constructor.name === 'Window'\n// but it's safer to use approach below\nexport const elementIsWindow = (a) => a.window === a\n\nexport const elementIsDocument = (a) => a.nodeType === 9\n\nexport const elementIsIframe = ({ nodeName }) => nodeName === \"IFRAME\"\n\nexport const isFocusable = (node) => {\n  // only element node can be focused, document, textNodes etc cannot\n  if (node.nodeType !== 1) {\n    return false\n  }\n  const nodeName = node.nodeName.toLowerCase()\n\n  if (nodeName === \"input\") {\n    if (node.type === \"hidden\") {\n      return false\n    }\n    return isVisible(node)\n  }\n\n  if ([\"button\", \"select\", \"datalist\", \"iframe\", \"textarea\"].indexOf(nodeName) > -1) {\n    return isVisible(node)\n  }\n\n  if (node.hasAttribute(\"tabindex\") || node.hasAttribute(\"tabIndex\")) {\n    return isVisible(node)\n  }\n\n  if (node.hasAttribute(\"draggable\")) {\n    return isVisible(node)\n  }\n\n  if ([\"a\", \"area\"].indexOf(nodeName) > -1) {\n    if (node.hasAttribute(\"href\") === false) {\n      return false\n    }\n    return isVisible(node)\n  }\n\n  if ([\"audio\", \"video\"].indexOf(nodeName) > -1) {\n    if (node.hasAttribute(\"controls\") === false) {\n      return false\n    }\n    return isVisible(node)\n  }\n\n  return false\n}\n\nexport const isVisible = (node) => {\n  if (isDocumentElement(node)) {\n    return true\n  }\n  if (getStyleValue(node, \"visibility\") === \"hidden\") {\n    return false\n  }\n\n  let nodeOrAncestor = node\n  while (nodeOrAncestor) {\n    if (isDocumentElement(nodeOrAncestor)) {\n      break\n    }\n    if (getStyleValue(nodeOrAncestor, \"display\") === \"none\") {\n      return false\n    }\n    nodeOrAncestor = nodeOrAncestor.parentNode\n  }\n\n  return true\n}\n\n// https://github.com/davidtheclark/tabbable/blob/master/index.js\nexport const isDocumentElement = (node) => node === node.ownerDocument.documentElement\n\nexport const getStyle = (element) => elementToOwnerWindow(element).getComputedStyle(element)\n\nexport const getStyleValue = (element, name) => getStyle(element).getPropertyValue(name)\n\n/**\n * elementToOwnerWindow returns the window owning the element.\n * Usually an element window will just be window.\n * But when an element is inside an iframe, the window of that element\n * is iframe.contentWindow\n * It's often important to work with the correct window because\n * element are scoped per iframes.\n */\nexport const elementToOwnerWindow = (element) => {\n  if (elementIsWindow(element)) return element\n\n  if (elementIsDocument(element)) return element.defaultView\n\n  return elementToOwnerDocument(element).defaultView\n}\n\n/**\n * elementToOwnerDocument returns the document containing the element.\n * Usually an element document is window.document.\n * But when an element is inside an iframe, the document of that element\n * is iframe.contentWindow.document\n * It's often important to work with the correct document because\n * element are scoped per iframes.\n */\nexport const elementToOwnerDocument = (element) => {\n  if (elementIsWindow(element)) return element.document\n\n  if (elementIsDocument(element)) return element\n\n  return element.ownerDocument\n}\n\nexport const getDocumentScroll = (element) => {\n  const elementWindow = elementToOwnerWindow(element)\n  const elementDocument = elementToOwnerDocument(element)\n  return {\n    x: elementWindow.pageXOffset || elementDocument.documentElement.scrollLeft,\n    y: elementWindow.pageYOffset || elementDocument.documentElement.scrollTop,\n  }\n}\n\n/**\n * elementToOwnerIframe returns the iframe owning the element or null\n * when element is not inside an iframe.\n */\nexport const elementToOwnerIframe = (element) => {\n  const elementOwnerWindow = elementToOwnerWindow(element)\n  // element is not inside an iframe because it is owned by window\n  // if element is window itself, elementOwnerWindow is window too\n  // because elementToOwnerWindow(window) returns window\n  if (elementOwnerWindow === window) return null\n\n  const parentDocument = elementOwnerWindow.parent.document\n  return Array.from(parentDocument.querySelectorAll(\"iframe\")).find(\n    (iframe) => iframeIsFriendly(iframe) && iframe.contentWindow.document.contains(element),\n  )\n}\n\n/**\n * This function is used to ensure we are allowed to manipulate an iframe.\n * If we don't do this check before doing stuff like adding 'mousemove' event\n * to the iframe, it will throw an error.\n * A friendly iframe is usually an iframe with src set to 'about:blank'.\n * The opposite of a friendly iframe is an iframe on an other domain.\n */\nexport const iframeIsFriendly = (iframe) => {\n  const key = `${Number(new Date())}${Math.random()}`\n  const value = {}\n\n  try {\n    const iframeWindow = iframe.contentWindow\n    iframeWindow[key] = value\n    const isFriendly = iframeWindow[key] === value\n    delete iframeWindow[key]\n    return isFriendly\n  } catch (e) {\n    return false\n  }\n}\n",
    "import React from \"react\"\nimport { addDomEventListener } from \"src/dom/dom.util.js\"\n\nconst UrlLoadingContext = React.createContext()\nconst reducer = (state, action) => action(state)\nconst initialState = {}\n\nconst logs = false\n\nexport const UrlLoadingProvider = ({ children }) => {\n  return (\n    <UrlLoadingContext.Provider value={React.useReducer(reducer, initialState)}>\n      {children}\n    </UrlLoadingContext.Provider>\n  )\n}\n\nexport const useUrlTrackerTotalCount = () => {\n  const urlLoadingState = useUrlLoadingState()\n  const totalCount = Object.keys(urlLoadingState).length\n  return totalCount\n}\n\nexport const useUrlTrackerLoadedCount = () => {\n  const urlLoadingState = useUrlLoadingState()\n  const loadedCount = Object.keys(urlLoadingState).filter(\n    (url) => urlLoadingState[url].status === \"loaded\",\n  ).length\n  return loadedCount\n}\n\nexport const useUrlTrackerAllLoaded = () => {\n  const totalCount = useUrlTrackerTotalCount()\n  const loadedCount = useUrlTrackerLoadedCount()\n  return loadedCount === totalCount\n}\n\nexport const useUrlLoadingNotifier = (url) => {\n  const contextValue = React.useContext(UrlLoadingContext)\n  if (!contextValue) {\n    // if (import.meta.dev) {\n    //   console.warn(`useUrlLoadingNotifier was called on a component without UrlLoadingContext`)\n    // }\n    return [() => {}, () => {}]\n  }\n\n  const dispatch = contextValue[1]\n\n  const fetchStart = () => {\n    dispatch((state) => {\n      if (url in state) {\n        // console.log(\"start loading early return\", url, state[url])\n        return state\n      }\n      if (logs) {\n        console.log(\"start loading\", url)\n      }\n      return {\n        ...state,\n        [url]: { status: \"loading\" },\n      }\n    })\n  }\n\n  const fetchAbort = () => {\n    dispatch((state) => {\n      if (!state.hasOwnProperty(url)) {\n        return state\n      }\n\n      const status = state[url].status\n      if (status !== \"loading\") {\n        return state\n      }\n\n      const stateWithoutUrl = {}\n      Object.keys(state).forEach((key) => {\n        if (key !== url) {\n          stateWithoutUrl[key] = state[key]\n        }\n      })\n\n      return stateWithoutUrl\n    })\n  }\n\n  const fetchEnd = () => {\n    dispatch((state) => {\n      if (url in state && state[url].status === \"loaded\") {\n        // console.log(\"end loading early return\", url, state[url])\n        return state\n      }\n      if (logs) {\n        console.log(\"end loading\", url)\n      }\n      return {\n        ...state,\n        [url]: { status: \"loaded\" },\n      }\n    })\n  }\n\n  React.useEffect(() => {\n    fetchStart()\n    return () => {\n      fetchAbort()\n    }\n  }, [])\n\n  return [fetchEnd, fetchAbort]\n}\n\nexport const useDOMNodeLoadingNotifier = (url) => {\n  const [domNodeFetchEnd] = useUrlLoadingNotifier(url)\n\n  const nodeRefCallback = React.useCallback(\n    (node) => {\n      if (node) {\n        return addLoadedListener(node, domNodeFetchEnd)\n      }\n      return undefined\n    },\n    [domNodeFetchEnd],\n  )\n\n  return nodeRefCallback\n}\n\nconst useUrlLoadingState = () => {\n  const contextValue = React.useContext(UrlLoadingContext)\n  if (!contextValue) {\n    // if (import.meta.dev) {\n    //   console.warn(`useUrlLoadingState was called on a component without UrlLoadingContext`)\n    // }\n    return null\n  }\n  return contextValue[0]\n}\n\nexport const useSingleUrlLoadingTracker = (url) => useUrlLoadingState()[url]\n\nexport const addLoadedListener = (domNode, callback) => {\n  const removeLoadListener = addDomEventListener(domNode, \"load\", () => {\n    removeErrorListener()\n    callback()\n  })\n  const removeErrorListener = addDomEventListener(domNode, \"error\", () => {\n    removeLoadListener()\n    callback()\n  })\n\n  return () => {\n    removeLoadListener()\n    removeErrorListener()\n  }\n}\n",
    "export default (Constructor, protoProps, staticProps) => {\n  if (protoProps) defineProperties(Constructor.prototype, protoProps)\n  if (staticProps) defineProperties(Constructor, staticProps)\n  return Constructor\n}\n\nfunction defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i]\n    descriptor.enumerable = descriptor.enumerable || false\n    descriptor.configurable = true\n    if (\"value\" in descriptor) descriptor.writable = true\n    Object.defineProperty(target, descriptor.key, descriptor)\n  }\n}\n",
    "export default Object.setPrototypeOf ||\n  ((o, p) => {\n    // eslint-disable-next-line no-proto\n    o.__proto__ = p\n    return o\n  })\n",
    "export default Object.setPrototypeOf\n  ? Object.getPrototypeOf\n  : // eslint-disable-next-line no-proto\n    (o) => o.__proto__ || Object.getPrototypeOf(o)\n",
    "import assertThisInitialized from \"../assertThisInitialized/assertThisInitialized.js\"\n\nexport default (self, call) => {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call\n  }\n  return assertThisInitialized(self)\n}\n",
    "export default (self) => {\n  // eslint-disable-next-line no-void\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")\n  }\n  return self\n}\n",
    "import getPrototypeOf from \"../getPrototypeOf/getPrototypeOf.js\"\nimport isNativeReflectConstruct from \"../isNativeReflectConstruct/isNativeReflectConstruct.js\"\nimport possibleConstructorReturn from \"../possibleConstructorReturn/possibleConstructorReturn.js\"\n\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct()\n\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived)\n    var result\n    if (hasNativeReflectConstruct) {\n      // NOTE: This doesn't work if this.__proto__.constructor has been modified.\n      var NewTarget = getPrototypeOf(this).constructor\n      // eslint-disable-next-line prefer-rest-params\n      result = Reflect.construct(Super, arguments, NewTarget)\n    } else {\n      // eslint-disable-next-line prefer-rest-params\n      result = Super.apply(this, arguments)\n    }\n    return possibleConstructorReturn(this, result)\n  }\n}\n",
    "export default function isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false\n  // core-js@3\n  if (Reflect.construct.sham) return false\n  // Proxy can't be polyfilled. Every browser implemented\n  // proxies before or at the same time as Reflect.construct,\n  // so if they support Proxy they also support Reflect.construct.\n  if (typeof Proxy === \"function\") return true\n  // Since Reflect.construct can't be properly polyfilled, some\n  // implementations (e.g. core-js@2) don't set the correct internal slots.\n  // Those polyfills don't allow us to subclass built-ins, so we need to\n  // use our fallback implementation.\n  try {\n    // If the internal slots aren't set, this throws an error similar to\n    //   TypeError: this is not a Date object.\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}))\n    return true\n  } catch (e) {\n    return false\n  }\n}\n",
    "import React from \"react\"\n\nexport const catchError = (LowerLevelComponent, ComponentDisplayedOnError) => {\n  class ErrorBoundary extends React.Component {\n    constructor(props) {\n      super(props)\n      this.state = {\n        hasError: false,\n        error: null,\n      }\n    }\n\n    static getDerivedStateFromError(error) {\n      return {\n        hasError: true,\n        error,\n      }\n    }\n\n    render() {\n      if (this.state.hasError) {\n        return <ComponentDisplayedOnError error={this.state.error} />\n      }\n      return <LowerLevelComponent {...this.props} />\n    }\n  }\n\n  return ErrorBoundary\n}\n",
    "export default import.meta.ROLLUP_FILE_URL_83f7c188",
    "export default import.meta.ROLLUP_FILE_URL_d3a52034",
    "export default import.meta.ROLLUP_FILE_URL_96b5fd78",
    "export default import.meta.ROLLUP_FILE_URL_59eb28fc",
    "export default import.meta.ROLLUP_FILE_URL_89551536",
    "export default import.meta.ROLLUP_FILE_URL_bdc26469",
    "export default import.meta.ROLLUP_FILE_URL_72eb81d2",
    "// https://vincenttaverna.com/posts/react-image-hook/\nexport const loadImage = (url, crossOrigin) => {\n  const image = new Image()\n\n  if (crossOrigin) {\n    image.crossOrigin = crossOrigin\n  }\n\n  return new Promise((resolve, reject) => {\n    // Load Handler\n    const loaded = (event) => {\n      // Cleanup our image element, we no longer need it\n      unbindEvents(image)\n      // Fulfill our promise with the event image element, even in older browsers\n      resolve(event.target || event.srcElement)\n    }\n\n    // Error Handler\n    const errored = (error) => {\n      // Cleanup our image element, we no longer need it\n      unbindEvents(image)\n      // Forward our error to the user\n      reject(error)\n    }\n\n    // Set our handlers\n    image.onload = loaded\n    image.onerror = errored\n    image.onabort = errored\n\n    // Tell the browser we are ready to begin downloading\n    image.src = url\n  })\n}\n\nconst unbindEvents = (image) => {\n  // Reset callbacks\n  image.onload = null\n  image.onerror = null\n  image.onabort = null\n\n  try {\n    // Some browsers need you to remove the src\n    // in order to garbage collect the image object\n    delete image.src\n  } catch (e) {\n    // Safari's strict mode throws, ignore\n  }\n}\n",
    "import { loadImage } from \"./loadImage.js\"\n\nexport const preloadImages = async (\n  images,\n  { chunkSize = 7, msDelayBetweenChunks = 2000 } = {},\n) => {\n  let index = 0\n  const loaded = {}\n  const failed = {}\n\n  const preloadChunk = async (chunk) => {\n    await Promise.all(\n      chunk.map(async (src) => {\n        try {\n          const image = await loadImage(src)\n          loaded[src] = image\n        } catch (error) {\n          failed[src] = true\n        }\n      }),\n    )\n    await new Promise((resolve) => {\n      setTimeout(resolve, msDelayBetweenChunks)\n    })\n    const nextChunk = getNextChunk()\n    if (nextChunk.length > 0) {\n      await preloadChunk(nextChunk)\n    }\n  }\n\n  const getNextChunk = () => {\n    const chunk = []\n    let i = 0\n    while (i < chunkSize && index < images.length) {\n      chunk.push(images[index])\n      i++\n      index++\n    }\n    return chunk\n  }\n\n  await preloadChunk(getNextChunk())\n\n  return { loaded, failed }\n}\n",
    "import React from \"react\"\n\nimport { cardDefaultUrl, cardImageUrlMap } from \"src/cards/cards.js\"\n\nimport woodUrl from \"src/wood.jpg\"\nimport pirateHookUrl from \"src/chest/pirate-hook.png\"\nimport pirateHook2Url from \"src/chest/pirate-hook-02.png\"\nimport woodBoxUrl from \"src/chest/wood-box.jpg\"\nimport treasureMapUrl from \"src/dice-ongoing/treasure-map.png\"\nimport witchLabelUrl from \"src/skull-island/witch-label.png\"\nimport skullBottleUrl from \"src/skull-island/skull-bottle.png\"\nimport { preloadImages } from \"src/loading/preloadImages.js\"\n\nexport const ImagePreloader = () => {\n  const images = [\n    woodUrl,\n    pirateHookUrl,\n    pirateHook2Url,\n    woodBoxUrl,\n    treasureMapUrl,\n    witchLabelUrl,\n    skullBottleUrl,\n    cardDefaultUrl,\n    ...Object.keys(cardImageUrlMap).map((key) => cardImageUrlMap[key]),\n  ]\n\n  React.useEffect(() => {\n    const timeoutId = setTimeout(() => preloadImages(images), 2000)\n    return () => {\n      clearTimeout(timeoutId)\n    }\n  }, [])\n\n  return null\n}\n",
    "function assign(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    // eslint-disable-next-line prefer-rest-params\n    var source = arguments[i]\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key]\n      }\n    }\n  }\n  return target\n}\n\nexport default Object.assign || assign\n",
    "import React from \"react\"\nimport { loadImage } from \"./loadImage.js\"\n\nconst cache = new Map()\n\nexport const Status = {\n  LOADING: \"loading\",\n  LOADED: \"loaded\",\n  FAILED: \"failed\",\n}\n\nexport const useImage = (src) => {\n  const cachedImg = cache.get(src)\n  const initialState = cachedImg ? Status.LOADED : Status.LOADING\n  const [status, setStatus] = React.useState(initialState)\n  const mounted = React.useRef(false)\n\n  React.useEffect(() => {\n    if (!src || status === Status.LOADED) {\n      return () => {}\n    }\n    mounted.current = true\n    ;(async () => {\n      try {\n        const image = await loadImage(src)\n        if (!mounted.current) return\n\n        cache.set(src, image)\n        setStatus(Status.LOADED)\n      } catch (error) {\n        if (!mounted.current) return\n\n        cache.delete(src)\n        setStatus(Status.FAILED)\n      }\n    })()\n\n    return () => {\n      mounted.current = false\n    }\n  }, [src, status])\n\n  return [status, cachedImg]\n}\n",
    "import React from \"react\"\n\nexport const OnceIntersectingSuspense = ({\n  fallback,\n  root,\n  rootMargin,\n  threshold = 0,\n  children,\n}) => {\n  const [isIntersecting, isIntersectingSetter] = React.useState(false)\n  const [node, nodeSetter] = React.useState(null)\n\n  React.useEffect(() => {\n    if (!node) {\n      return () => {}\n    }\n    if (isIntersecting) {\n      return () => {}\n    }\n\n    // https://developer.mozilla.org/fr/docs/Web/API/Intersection_Observer_API\n    const observer = new window.IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          observer.unobserve(node)\n          isIntersectingSetter(true)\n        } else {\n          isIntersectingSetter(false)\n        }\n      },\n      {\n        root,\n        rootMargin,\n        threshold,\n      },\n    )\n    observer.observe(node)\n\n    return () => {\n      observer.disconnect()\n    }\n  }, [node, isIntersecting])\n\n  if (!isIntersecting) {\n    return fallback({ ref: nodeSetter })\n  }\n\n  return <>{children}</>\n}\n",
    "import React from \"react\"\n\nimport { useUrlLoadingNotifier } from \"src/loading/loading.main.js\"\nimport { useImage } from \"src/loading/useImage.js\"\nimport { OnceIntersectingSuspense } from \"./OnceIntersectingSuspense.js\"\n\nexport const Image = ({\n  loadWhenIntersecting = true,\n  usePlaceholderWhileLoading = true,\n  animateLoaded = true,\n\n  intersectionRoot,\n  intersectionRootMargin,\n  intersectionThreshold,\n  FallbackWhileNotIntersecting = ImageNotIntersectingFallback,\n  FallbackWhileLoading = ImageLoadingFallback,\n  useImageStatusHook = useImage,\n\n  src,\n  ...props\n}) => {\n  const [status] = useImageStatusHook(src)\n  const [imageFetchEnd] = useUrlLoadingNotifier(src)\n  React.useEffect(() => {\n    if (status === \"loaded\") {\n      imageFetchEnd()\n    }\n  }, [status])\n\n  let Component = <img src={src} {...props} />\n\n  if (animateLoaded) {\n    Component = <AnimateImageLoaded status={status} src={src} imageProps={props} />\n  }\n\n  if (usePlaceholderWhileLoading && status !== \"loaded\") {\n    const ComponentPrevious = Component\n    Component = (\n      <OnceImageLoadedSuspense status={status} fallback={<FallbackWhileLoading {...props} />}>\n        {ComponentPrevious}\n      </OnceImageLoadedSuspense>\n    )\n  }\n\n  if (loadWhenIntersecting && status !== \"loaded\") {\n    const ComponentPrevious = Component\n    Component = (\n      <OnceIntersectingSuspense\n        fallback={({ ref }) => <FallbackWhileNotIntersecting ref={ref} {...props} />}\n        root={intersectionRoot}\n        rootMargin={intersectionRootMargin}\n        threshold={intersectionThreshold}\n      >\n        {ComponentPrevious}\n      </OnceIntersectingSuspense>\n    )\n  }\n\n  return Component\n}\n\nconst AnimateImageLoaded = ({ status, src, imageProps }) => {\n  const mountedRef = React.useRef(false)\n  const nodeRef = React.useRef()\n  const statusRef = React.useRef(status)\n\n  React.useLayoutEffect(() => {\n    const mounted = mountedRef.current\n    const node = nodeRef.current\n    const statusPrevious = statusRef.current\n    mountedRef.current = true\n    statusRef.current = status\n\n    // ça ne marche pas vraiment parce que ce composant est mount\n    // que lorsque l'image est load et du coup il n'y aura pas d'animation\n    // mais bon quelque part l'image étant déja loadé il n'y a pas d'animation\n    // et c'est ce qu'on veut\n    if (mounted && statusPrevious !== status && status === \"loaded\") {\n      const opacity = window.getComputedStyle(node).getPropertyValue(\"opacity\")\n      node.animate([{ opacity: 0 }, { opacity }], {\n        duration: 300,\n      })\n    }\n  }, [status, nodeRef])\n\n  return <img ref={nodeRef} src={src} {...imageProps} />\n}\n\nconst OnceImageLoadedSuspense = ({ fallback, status, children }) => {\n  if (status !== \"loaded\") {\n    return fallback\n  }\n  return children\n}\n\n// eslint-disable-next-line react/display-name\nconst ImageLoadingFallback = React.forwardRef((props, ref) => {\n  return <img src={TRANSPARENT_PNG_DATA_URL} ref={ref} {...props} />\n})\n\n// eslint-disable-next-line react/display-name\nconst ImageNotIntersectingFallback = React.forwardRef((props, ref) => {\n  return <img src={TRANSPARENT_PNG_DATA_URL} ref={ref} {...props} />\n})\n\nconst TRANSPARENT_PNG_DATA_URL =\n  \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=\"\n",
    "export default import.meta.ROLLUP_FILE_URL_06d39578",
    "/* eslint-disable import/max-dependencies */\nimport React from \"react\"\nimport { requestAsapCallback } from \"src/helper/asap.js\"\nimport { Stylesheet } from \"src/generic/Stylesheet.jsx\"\nimport { catchError } from \"src/error/error.main.js\"\nimport {\n  UrlLoadingProvider,\n  useUrlTrackerTotalCount,\n  useUrlTrackerLoadedCount,\n} from \"src/loading/loading.main.js\"\nimport { ImagePreloader } from \"src/loading/ImagePreloader.jsx\"\nimport { symbolSkullUrl } from \"src/symbols/symbols.js\"\nimport { Image } from \"src/generic/Image.jsx\"\n\nimport loadscreenCssUrl from \"../loadscreen.css\"\n\nconst MainRaw = (props) => {\n  return (\n    <UrlLoadingProvider>\n      <LoadScreen {...props}></LoadScreen>\n    </UrlLoadingProvider>\n  )\n}\n\nconst LoadScreen = (props) => {\n  const loadscreenRef = React.useRef()\n  const [loadscreenUrlTrackerReady, loadscreenUrlTrackerReadySetter] = React.useState(false)\n  const [loadscreenUrlsLoaded, loadscreenUrlsLoadedSetter] = React.useState(false)\n\n  // main must wait for loadscreen + request idle callback before starting\n  const [mainImportLoading, mainImportLoadingSetter] = React.useState(false)\n  const [mainImportNamespace, mainImportNamespaceSetter] = React.useState(null)\n  const [mainUrlTrackerReady, mainUrlTrackerReadySetter] = React.useState(false)\n  const [mainUrlsLoaded, mainsUrlsLoadedSetter] = React.useState(false)\n  const [, mainUrlErrorSetter] = React.useState()\n\n  const urlTrackerTotalCount = useUrlTrackerTotalCount()\n  const urlTrackerLoadedCount = useUrlTrackerLoadedCount()\n\n  React.useEffect(() => {\n    return requestAsapCallback(() => {\n      loadscreenUrlTrackerReadySetter(true)\n    })\n  }, [])\n\n  React.useEffect(() => {\n    if (loadscreenUrlTrackerReady && urlTrackerLoadedCount === urlTrackerTotalCount) {\n      loadscreenUrlsLoadedSetter(true)\n    }\n  }, [loadscreenUrlTrackerReady, urlTrackerLoadedCount, urlTrackerTotalCount])\n\n  React.useEffect(() => {\n    if (!loadscreenUrlsLoaded) {\n      return\n    }\n\n    window.splashscreen.remove()\n\n    mainImportLoadingSetter(true)\n      ; (async () => {\n        try {\n          const namespace = await import(\"./App.jsx\")\n          mainImportLoadingSetter(false)\n          mainImportNamespaceSetter(namespace)\n          requestAsapCallback(() => {\n            mainUrlTrackerReadySetter(true)\n          })\n        } catch (e) {\n          // https://github.com/facebook/react/issues/14981\n          mainUrlErrorSetter(() => {\n            throw e\n          })\n        }\n      })()\n  }, [loadscreenUrlsLoaded])\n\n  React.useEffect(() => {\n    if (mainUrlTrackerReady && urlTrackerLoadedCount === urlTrackerTotalCount) {\n      mainsUrlsLoadedSetter(true)\n    }\n  }, [mainUrlTrackerReady, urlTrackerLoadedCount, urlTrackerTotalCount])\n\n  React.useEffect(() => {\n    if (mainUrlsLoaded && loadscreenRef) {\n      const animation = loadscreenRef.current.animate([{ opacity: 1 }, { opacity: 0 }], {\n        duration: 300,\n        fill: \"forwards\",\n      })\n      animation.onfinish = () => {\n        loadscreenRef.current.style.display = \"none\"\n      }\n    }\n  }, [loadscreenRef, mainUrlsLoaded])\n\n  return (\n    <>\n      {mainImportNamespace ? <mainImportNamespace.App {...props} /> : null}\n      <div id=\"loadscreen\" ref={loadscreenRef}>\n        <Stylesheet href={loadscreenCssUrl} />\n        <Image src={symbolSkullUrl} animateLoaded={false} />\n        {mainImportLoading ? (\n          <p className=\"text\">Chargement du jeu...</p>\n        ) : (\n            <>\n              <p className=\"text\">Chargement du jeu...</p>\n              <div className=\"progress\">{urlTrackerLoadedCount}/{urlTrackerTotalCount}</div>\n            </>\n          )}\n      </div>\n      {mainUrlsLoaded ? <ImagePreloader /> : null}\n    </>\n  )\n}\n\nconst ErrorScreen = ({ error }) => {\n  window.splashscreen.remove()\n  return (\n    <div>\n      An error occured<pre>{typeof error === \"object\" ? error.stack : error}</pre>\n    </div>\n  )\n}\n\nexport const Main = catchError(MainRaw, ErrorScreen)\n",
    "import setPrototypeOf from \"../setPrototypeOf/setPrototypeOf.js\"\n\nexport default (subClass, superClass) => {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\")\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true,\n    },\n  })\n  if (superClass) setPrototypeOf(subClass, superClass)\n}\n",
    "export default (instance, Constructor) => {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\")\n  }\n}\n"
  ],
  "names": [
    "fn",
    "linkMap",
    "stopUsing",
    "System",
    "requestAsapCallback",
    "window",
    "requestIdleCallback",
    "callback",
    "requestId",
    "timeout",
    "cancelIdleCallback",
    "requestAnimationFrame",
    "cancelAnimationFrame",
    "source",
    "excluded",
    "key",
    "i",
    "target",
    "sourceKeys",
    "Object",
    "keys",
    "length",
    "indexOf",
    "objectWithoutPropertiesLoose",
    "getOwnPropertySymbols",
    "sourceSymbolKeys",
    "prototype",
    "propertyIsEnumerable",
    "call",
    "addDomEventListener",
    "domNode",
    "eventName",
    "options",
    "addEventListener",
    "removeEventListener",
    "elementIsWindow",
    "a",
    "elementIsDocument",
    "nodeType",
    "isVisible",
    "node",
    "nodeName",
    "toLowerCase",
    "type",
    "hasAttribute",
    "isDocumentElement",
    "getStyleValue",
    "nodeOrAncestor",
    "parentNode",
    "ownerDocument",
    "documentElement",
    "element",
    "name",
    "elementToOwnerWindow",
    "getComputedStyle",
    "getStyle",
    "getPropertyValue",
    "defaultView",
    "elementToOwnerDocument",
    "document",
    "UrlLoadingContext",
    "elementWindow",
    "elementDocument",
    "x",
    "pageXOffset",
    "scrollLeft",
    "y",
    "pageYOffset",
    "scrollTop",
    "React",
    "createContext",
    "reducer",
    "state",
    "action",
    "initialState",
    "UrlLoadingProvider",
    "children",
    "Provider",
    "value",
    "useReducer",
    "useUrlLoadingNotifier",
    "url",
    "contextValue",
    "useContext",
    "dispatch",
    "fetchAbort",
    "hasOwnProperty",
    "status",
    "stateWithoutUrl",
    "forEach",
    "useEffect",
    "useUrlLoadingState",
    "addLoadedListener",
    "removeLoadListener",
    "removeErrorListener",
    "Stylesheet",
    "href",
    "fetchEnd",
    "injectStylesheetIntoDocument",
    "onload",
    "link",
    "createElement",
    "rel",
    "removeLoadedListener",
    "head",
    "appendChild",
    "removeChild",
    "Map",
    "has",
    "get",
    "useCount",
    "rest",
    "set",
    "delete",
    "linkCleanup",
    "args",
    "defineProperties",
    "props",
    "descriptor",
    "enumerable",
    "configurable",
    "writable",
    "defineProperty",
    "setPrototypeOf",
    "o",
    "p",
    "__proto__",
    "getPrototypeOf",
    "self",
    "_typeof",
    "ReferenceError",
    "assertThisInitialized",
    "_createSuper",
    "Derived",
    "hasNativeReflectConstruct",
    "Reflect",
    "construct",
    "sham",
    "Proxy",
    "Date",
    "toString",
    "e",
    "isNativeReflectConstruct",
    "result",
    "Super",
    "NewTarget",
    "this",
    "constructor",
    "arguments",
    "apply",
    "possibleConstructorReturn",
    "loadImage",
    "crossOrigin",
    "image",
    "Image",
    "Promise",
    "resolve",
    "reject",
    "errored",
    "error",
    "unbindEvents",
    "event",
    "srcElement",
    "onerror",
    "onabort",
    "src",
    "then",
    "direct",
    "f",
    "body",
    "recover",
    "preloadImages",
    "images",
    "chunkSize",
    "msDelayBetweenChunks",
    "index",
    "loaded",
    "failed",
    "preloadChunk",
    "chunk",
    "all",
    "map",
    "setTimeout",
    "nextChunk",
    "getNextChunk",
    "push",
    "ImagePreloader",
    "woodUrl",
    "pirateHookUrl",
    "pirateHook2Url",
    "woodBoxUrl",
    "treasureMapUrl",
    "witchLabelUrl",
    "skullBottleUrl",
    "cardDefaultUrl",
    "cardImageUrlMap",
    "timeoutId",
    "clearTimeout",
    "assign",
    "cache",
    "Status",
    "useImage",
    "cachedImg",
    "useState",
    "setStatus",
    "mounted",
    "useRef",
    "current",
    "OnceIntersectingSuspense",
    "fallback",
    "root",
    "rootMargin",
    "threshold",
    "isIntersecting",
    "isIntersectingSetter",
    "nodeSetter",
    "observer",
    "IntersectionObserver",
    "unobserve",
    "observe",
    "disconnect",
    "ref",
    "loadWhenIntersecting",
    "usePlaceholderWhileLoading",
    "animateLoaded",
    "intersectionRoot",
    "intersectionRootMargin",
    "intersectionThreshold",
    "FallbackWhileNotIntersecting",
    "ImageNotIntersectingFallback",
    "FallbackWhileLoading",
    "ImageLoadingFallback",
    "useImageStatusHook",
    "imageFetchEnd",
    "Component",
    "AnimateImageLoaded",
    "imageProps",
    "ComponentPrevious",
    "OnceImageLoadedSuspense",
    "mountedRef",
    "nodeRef",
    "statusRef",
    "useLayoutEffect",
    "statusPrevious",
    "opacity",
    "animate",
    "duration",
    "forwardRef",
    "TRANSPARENT_PNG_DATA_URL",
    "LoadScreen",
    "urlLoadingState",
    "loadscreenRef",
    "loadscreenUrlTrackerReady",
    "loadscreenUrlTrackerReadySetter",
    "loadscreenUrlsLoaded",
    "loadscreenUrlsLoadedSetter",
    "mainImportLoading",
    "mainImportLoadingSetter",
    "mainImportNamespace",
    "mainImportNamespaceSetter",
    "mainUrlTrackerReady",
    "mainUrlTrackerReadySetter",
    "mainUrlsLoaded",
    "mainsUrlsLoadedSetter",
    "mainUrlErrorSetter",
    "urlTrackerTotalCount",
    "urlTrackerLoadedCount",
    "filter",
    "useUrlTrackerLoadedCount",
    "splashscreen",
    "remove",
    "module",
    "namespace",
    "fill",
    "onfinish",
    "style",
    "display",
    "App",
    "id",
    "loadscreenCssUrl",
    "symbolSkullUrl",
    "className",
    "_empty",
    "LowerLevelComponent",
    "ComponentDisplayedOnError",
    "Main",
    "stack",
    "subClass",
    "superClass",
    "TypeError",
    "create",
    "Constructor",
    "protoProps",
    "staticProps",
    "instance",
    "hasError"
  ],
  "mappings": "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"
}